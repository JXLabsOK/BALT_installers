var FB=Object.defineProperty;var B3=n=>{throw TypeError(n)};var qB=(n,e,t)=>e in n?FB(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var te=(n,e,t)=>qB(n,typeof e!="symbol"?e+"":e,t),Nb=(n,e,t)=>e.has(n)||B3("Cannot "+t);var T=(n,e,t)=>(Nb(n,e,"read from private field"),t?t.call(n):e.get(n)),ce=(n,e,t)=>e.has(n)?B3("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),j=(n,e,t,r)=>(Nb(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),be=(n,e,t)=>(Nb(n,e,"access private method"),t);var Wf=(n,e,t,r)=>({set _(i){j(n,e,i,t)},get _(){return T(n,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var vs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xp(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function DC(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var Ib={exports:{}},ed={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P3;function VB(){if(P3)return ed;P3=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var c=null;if(a!==void 0&&(c=""+a),i.key!==void 0&&(c=""+i.key),"key"in i){a={};for(var u in i)u!=="key"&&(a[u]=i[u])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:c,ref:i!==void 0?i:null,props:a}}return ed.Fragment=e,ed.jsx=t,ed.jsxs=t,ed}var U3;function GB(){return U3||(U3=1,Ib.exports=VB()),Ib.exports}var J=GB(),Rb={exports:{}},$e={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M3;function KB(){if(M3)return $e;M3=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.iterator;function w(_){return _===null||typeof _!="object"?null:(_=y&&_[y]||_["@@iterator"],typeof _=="function"?_:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,E={};function A(_,F,X){this.props=_,this.context=F,this.refs=E,this.updater=X||v}A.prototype.isReactComponent={},A.prototype.setState=function(_,F){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,F,"setState")},A.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function S(){}S.prototype=A.prototype;function B(_,F,X){this.props=_,this.context=F,this.refs=E,this.updater=X||v}var D=B.prototype=new S;D.constructor=B,b(D,A.prototype),D.isPureReactComponent=!0;var U=Array.isArray,I={H:null,A:null,T:null,S:null,V:null},N=Object.prototype.hasOwnProperty;function k(_,F,X,re,ie,ge){return X=ge.ref,{$$typeof:n,type:_,key:F,ref:X!==void 0?X:null,props:ge}}function $(_,F){return k(_.type,F,void 0,void 0,void 0,_.props)}function P(_){return typeof _=="object"&&_!==null&&_.$$typeof===n}function L(_){var F={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(X){return F[X]})}var z=/\/+/g;function V(_,F){return typeof _=="object"&&_!==null&&_.key!=null?L(""+_.key):F.toString(36)}function ne(){}function Z(_){switch(_.status){case"fulfilled":return _.value;case"rejected":throw _.reason;default:switch(typeof _.status=="string"?_.then(ne,ne):(_.status="pending",_.then(function(F){_.status==="pending"&&(_.status="fulfilled",_.value=F)},function(F){_.status==="pending"&&(_.status="rejected",_.reason=F)})),_.status){case"fulfilled":return _.value;case"rejected":throw _.reason}}throw _}function C(_,F,X,re,ie){var ge=typeof _;(ge==="undefined"||ge==="boolean")&&(_=null);var le=!1;if(_===null)le=!0;else switch(ge){case"bigint":case"string":case"number":le=!0;break;case"object":switch(_.$$typeof){case n:case e:le=!0;break;case p:return le=_._init,C(le(_._payload),F,X,re,ie)}}if(le)return ie=ie(_),le=re===""?"."+V(_,0):re,U(ie)?(X="",le!=null&&(X=le.replace(z,"$&/")+"/"),C(ie,F,X,"",function(ve){return ve})):ie!=null&&(P(ie)&&(ie=$(ie,X+(ie.key==null||_&&_.key===ie.key?"":(""+ie.key).replace(z,"$&/")+"/")+le)),F.push(ie)),1;le=0;var ue=re===""?".":re+":";if(U(_))for(var de=0;de<_.length;de++)re=_[de],ge=ue+V(re,de),le+=C(re,F,X,ge,ie);else if(de=w(_),typeof de=="function")for(_=de.call(_),de=0;!(re=_.next()).done;)re=re.value,ge=ue+V(re,de++),le+=C(re,F,X,ge,ie);else if(ge==="object"){if(typeof _.then=="function")return C(Z(_),F,X,re,ie);throw F=String(_),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return le}function O(_,F,X){if(_==null)return _;var re=[],ie=0;return C(_,re,"","",function(ge){return F.call(X,ge,ie++)}),re}function M(_){if(_._status===-1){var F=_._result;F=F(),F.then(function(X){(_._status===0||_._status===-1)&&(_._status=1,_._result=X)},function(X){(_._status===0||_._status===-1)&&(_._status=2,_._result=X)}),_._status===-1&&(_._status=0,_._result=F)}if(_._status===1)return _._result.default;throw _._result}var q=typeof reportError=="function"?reportError:function(_){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof _=="object"&&_!==null&&typeof _.message=="string"?String(_.message):String(_),error:_});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",_);return}console.error(_)};function G(){}return $e.Children={map:O,forEach:function(_,F,X){O(_,function(){F.apply(this,arguments)},X)},count:function(_){var F=0;return O(_,function(){F++}),F},toArray:function(_){return O(_,function(F){return F})||[]},only:function(_){if(!P(_))throw Error("React.Children.only expected to receive a single React element child.");return _}},$e.Component=A,$e.Fragment=t,$e.Profiler=i,$e.PureComponent=B,$e.StrictMode=r,$e.Suspense=h,$e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,$e.__COMPILER_RUNTIME={__proto__:null,c:function(_){return I.H.useMemoCache(_)}},$e.cache=function(_){return function(){return _.apply(null,arguments)}},$e.cloneElement=function(_,F,X){if(_==null)throw Error("The argument must be a React element, but you passed "+_+".");var re=b({},_.props),ie=_.key,ge=void 0;if(F!=null)for(le in F.ref!==void 0&&(ge=void 0),F.key!==void 0&&(ie=""+F.key),F)!N.call(F,le)||le==="key"||le==="__self"||le==="__source"||le==="ref"&&F.ref===void 0||(re[le]=F[le]);var le=arguments.length-2;if(le===1)re.children=X;else if(1<le){for(var ue=Array(le),de=0;de<le;de++)ue[de]=arguments[de+2];re.children=ue}return k(_.type,ie,void 0,void 0,ge,re)},$e.createContext=function(_){return _={$$typeof:c,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null},_.Provider=_,_.Consumer={$$typeof:a,_context:_},_},$e.createElement=function(_,F,X){var re,ie={},ge=null;if(F!=null)for(re in F.key!==void 0&&(ge=""+F.key),F)N.call(F,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(ie[re]=F[re]);var le=arguments.length-2;if(le===1)ie.children=X;else if(1<le){for(var ue=Array(le),de=0;de<le;de++)ue[de]=arguments[de+2];ie.children=ue}if(_&&_.defaultProps)for(re in le=_.defaultProps,le)ie[re]===void 0&&(ie[re]=le[re]);return k(_,ge,void 0,void 0,null,ie)},$e.createRef=function(){return{current:null}},$e.forwardRef=function(_){return{$$typeof:u,render:_}},$e.isValidElement=P,$e.lazy=function(_){return{$$typeof:p,_payload:{_status:-1,_result:_},_init:M}},$e.memo=function(_,F){return{$$typeof:d,type:_,compare:F===void 0?null:F}},$e.startTransition=function(_){var F=I.T,X={};I.T=X;try{var re=_(),ie=I.S;ie!==null&&ie(X,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(G,q)}catch(ge){q(ge)}finally{I.T=F}},$e.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},$e.use=function(_){return I.H.use(_)},$e.useActionState=function(_,F,X){return I.H.useActionState(_,F,X)},$e.useCallback=function(_,F){return I.H.useCallback(_,F)},$e.useContext=function(_){return I.H.useContext(_)},$e.useDebugValue=function(){},$e.useDeferredValue=function(_,F){return I.H.useDeferredValue(_,F)},$e.useEffect=function(_,F,X){var re=I.H;if(typeof X=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return re.useEffect(_,F)},$e.useId=function(){return I.H.useId()},$e.useImperativeHandle=function(_,F,X){return I.H.useImperativeHandle(_,F,X)},$e.useInsertionEffect=function(_,F){return I.H.useInsertionEffect(_,F)},$e.useLayoutEffect=function(_,F){return I.H.useLayoutEffect(_,F)},$e.useMemo=function(_,F){return I.H.useMemo(_,F)},$e.useOptimistic=function(_,F){return I.H.useOptimistic(_,F)},$e.useReducer=function(_,F,X){return I.H.useReducer(_,F,X)},$e.useRef=function(_){return I.H.useRef(_)},$e.useState=function(_){return I.H.useState(_)},$e.useSyncExternalStore=function(_,F,X){return I.H.useSyncExternalStore(_,F,X)},$e.useTransition=function(){return I.H.useTransition()},$e.version="19.1.0",$e}var $3;function $E(){return $3||($3=1,Rb.exports=KB()),Rb.exports}var oe=$E();const QB=xp(oe);var Bb={exports:{}},td={},Pb={exports:{}},Ub={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k3;function YB(){return k3||(k3=1,function(n){function e(O,M){var q=O.length;O.push(M);e:for(;0<q;){var G=q-1>>>1,_=O[G];if(0<i(_,M))O[G]=M,O[q]=_,q=G;else break e}}function t(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var M=O[0],q=O.pop();if(q!==M){O[0]=q;e:for(var G=0,_=O.length,F=_>>>1;G<F;){var X=2*(G+1)-1,re=O[X],ie=X+1,ge=O[ie];if(0>i(re,q))ie<_&&0>i(ge,re)?(O[G]=ge,O[ie]=q,G=ie):(O[G]=re,O[X]=q,G=X);else if(ie<_&&0>i(ge,q))O[G]=ge,O[ie]=q,G=ie;else break e}}return M}function i(O,M){var q=O.sortIndex-M.sortIndex;return q!==0?q:O.id-M.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();n.unstable_now=function(){return c.now()-u}}var h=[],d=[],p=1,y=null,w=3,v=!1,b=!1,E=!1,A=!1,S=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function U(O){for(var M=t(d);M!==null;){if(M.callback===null)r(d);else if(M.startTime<=O)r(d),M.sortIndex=M.expirationTime,e(h,M);else break;M=t(d)}}function I(O){if(E=!1,U(O),!b)if(t(h)!==null)b=!0,N||(N=!0,V());else{var M=t(d);M!==null&&C(I,M.startTime-O)}}var N=!1,k=-1,$=5,P=-1;function L(){return A?!0:!(n.unstable_now()-P<$)}function z(){if(A=!1,N){var O=n.unstable_now();P=O;var M=!0;try{e:{b=!1,E&&(E=!1,B(k),k=-1),v=!0;var q=w;try{t:{for(U(O),y=t(h);y!==null&&!(y.expirationTime>O&&L());){var G=y.callback;if(typeof G=="function"){y.callback=null,w=y.priorityLevel;var _=G(y.expirationTime<=O);if(O=n.unstable_now(),typeof _=="function"){y.callback=_,U(O),M=!0;break t}y===t(h)&&r(h),U(O)}else r(h);y=t(h)}if(y!==null)M=!0;else{var F=t(d);F!==null&&C(I,F.startTime-O),M=!1}}break e}finally{y=null,w=q,v=!1}M=void 0}}finally{M?V():N=!1}}}var V;if(typeof D=="function")V=function(){D(z)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,Z=ne.port2;ne.port1.onmessage=z,V=function(){Z.postMessage(null)}}else V=function(){S(z,0)};function C(O,M){k=S(function(){O(n.unstable_now())},M)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_next=function(O){switch(w){case 1:case 2:case 3:var M=3;break;default:M=w}var q=w;w=M;try{return O()}finally{w=q}},n.unstable_requestPaint=function(){A=!0},n.unstable_runWithPriority=function(O,M){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var q=w;w=O;try{return M()}finally{w=q}},n.unstable_scheduleCallback=function(O,M,q){var G=n.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?G+q:G):q=G,O){case 1:var _=-1;break;case 2:_=250;break;case 5:_=1073741823;break;case 4:_=1e4;break;default:_=5e3}return _=q+_,O={id:p++,callback:M,priorityLevel:O,startTime:q,expirationTime:_,sortIndex:-1},q>G?(O.sortIndex=q,e(d,O),t(h)===null&&O===t(d)&&(E?(B(k),k=-1):E=!0,C(I,q-G))):(O.sortIndex=_,e(h,O),b||v||(b=!0,N||(N=!0,V()))),O},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(O){var M=w;return function(){var q=w;w=M;try{return O.apply(this,arguments)}finally{w=q}}}}(Ub)),Ub}var L3;function JB(){return L3||(L3=1,Pb.exports=YB()),Pb.exports}var Mb={exports:{}},Un={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j3;function ZB(){if(j3)return Un;j3=1;var n=$E();function e(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(h,d,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:y==null?null:""+y,children:h,containerInfo:d,implementation:p}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,d){if(h==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Un.createPortal=function(h,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(h,d,null,p)},Un.flushSync=function(h){var d=c.T,p=r.p;try{if(c.T=null,r.p=2,h)return h()}finally{c.T=d,r.p=p,r.d.f()}},Un.preconnect=function(h,d){typeof h=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(h,d))},Un.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},Un.preinit=function(h,d){if(typeof h=="string"&&d&&typeof d.as=="string"){var p=d.as,y=u(p,d.crossOrigin),w=typeof d.integrity=="string"?d.integrity:void 0,v=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?r.d.S(h,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:y,integrity:w,fetchPriority:v}):p==="script"&&r.d.X(h,{crossOrigin:y,integrity:w,fetchPriority:v,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Un.preinitModule=function(h,d){if(typeof h=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=u(d.as,d.crossOrigin);r.d.M(h,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(h)},Un.preload=function(h,d){if(typeof h=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,y=u(p,d.crossOrigin);r.d.L(h,p,{crossOrigin:y,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Un.preloadModule=function(h,d){if(typeof h=="string")if(d){var p=u(d.as,d.crossOrigin);r.d.m(h,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(h)},Un.requestFormReset=function(h){r.d.r(h)},Un.unstable_batchedUpdates=function(h,d){return h(d)},Un.useFormState=function(h,d,p){return c.H.useFormState(h,d,p)},Un.useFormStatus=function(){return c.H.useHostTransitionStatus()},Un.version="19.1.0",Un}var z3;function XB(){if(z3)return Mb.exports;z3=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Mb.exports=ZB(),Mb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H3;function WB(){if(H3)return td;H3=1;var n=JB(),e=$E(),t=XB();function r(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var o=s,l=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(l=o.return),s=o.return;while(s)}return o.tag===3?l:null}function c(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function u(s){if(a(s)!==s)throw Error(r(188))}function h(s){var o=s.alternate;if(!o){if(o=a(s),o===null)throw Error(r(188));return o!==s?null:s}for(var l=s,f=o;;){var g=l.return;if(g===null)break;var m=g.alternate;if(m===null){if(f=g.return,f!==null){l=f;continue}break}if(g.child===m.child){for(m=g.child;m;){if(m===l)return u(g),s;if(m===f)return u(g),o;m=m.sibling}throw Error(r(188))}if(l.return!==f.return)l=g,f=m;else{for(var x=!1,R=g.child;R;){if(R===l){x=!0,l=g,f=m;break}if(R===f){x=!0,f=g,l=m;break}R=R.sibling}if(!x){for(R=m.child;R;){if(R===l){x=!0,l=m,f=g;break}if(R===f){x=!0,f=m,l=g;break}R=R.sibling}if(!x)throw Error(r(189))}}if(l.alternate!==f)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?s:o}function d(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=d(s),o!==null)return o;s=s.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),B=Symbol.for("react.consumer"),D=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function V(s){return s===null||typeof s!="object"?null:(s=z&&s[z]||s["@@iterator"],typeof s=="function"?s:null)}var ne=Symbol.for("react.client.reference");function Z(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ne?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case b:return"Fragment";case A:return"Profiler";case E:return"StrictMode";case I:return"Suspense";case N:return"SuspenseList";case P:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case v:return"Portal";case D:return(s.displayName||"Context")+".Provider";case B:return(s._context.displayName||"Context")+".Consumer";case U:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case k:return o=s.displayName||null,o!==null?o:Z(s.type)||"Memo";case $:o=s._payload,s=s._init;try{return Z(s(o))}catch{}}return null}var C=Array.isArray,O=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},G=[],_=-1;function F(s){return{current:s}}function X(s){0>_||(s.current=G[_],G[_]=null,_--)}function re(s,o){_++,G[_]=s.current,s.current=o}var ie=F(null),ge=F(null),le=F(null),ue=F(null);function de(s,o){switch(re(le,o),re(ge,s),re(ie,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?o3(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=o3(o),s=c3(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}X(ie),re(ie,s)}function ve(){X(ie),X(ge),X(le)}function Ne(s){s.memoizedState!==null&&re(ue,s);var o=ie.current,l=c3(o,s.type);o!==l&&(re(ge,s),re(ie,l))}function Ce(s){ge.current===s&&(X(ie),X(ge)),ue.current===s&&(X(ue),Qf._currentValue=q)}var ze=Object.prototype.hasOwnProperty,Qe=n.unstable_scheduleCallback,st=n.unstable_cancelCallback,Ct=n.unstable_shouldYield,qt=n.unstable_requestPaint,Vt=n.unstable_now,Di=n.unstable_getCurrentPriorityLevel,mn=n.unstable_ImmediatePriority,sr=n.unstable_UserBlockingPriority,Xt=n.unstable_NormalPriority,Vn=n.unstable_LowPriority,Jr=n.unstable_IdlePriority,Xi=n.log,Ra=n.unstable_setDisableYieldValue,we=null,Se=null;function Ue(s){if(typeof Xi=="function"&&Ra(s),Se&&typeof Se.setStrictMode=="function")try{Se.setStrictMode(we,s)}catch{}}var He=Math.clz32?Math.clz32:ar,lt=Math.log,sn=Math.LN2;function ar(s){return s>>>=0,s===0?32:31-(lt(s)/sn|0)|0}var or=256,Cr=4194304;function an(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Gn(s,o,l){var f=s.pendingLanes;if(f===0)return 0;var g=0,m=s.suspendedLanes,x=s.pingedLanes;s=s.warmLanes;var R=f&134217727;return R!==0?(f=R&~m,f!==0?g=an(f):(x&=R,x!==0?g=an(x):l||(l=R&~s,l!==0&&(g=an(l))))):(R=f&~m,R!==0?g=an(R):x!==0?g=an(x):l||(l=f&~s,l!==0&&(g=an(l)))),g===0?0:o!==0&&o!==g&&(o&m)===0&&(m=g&-g,l=o&-o,m>=l||m===32&&(l&4194048)!==0)?o:g}function Rn(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function Ci(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xo(){var s=or;return or<<=1,(or&4194048)===0&&(or=256),s}function Wo(){var s=Cr;return Cr<<=1,(Cr&62914560)===0&&(Cr=4194304),s}function Ba(s){for(var o=[],l=0;31>l;l++)o.push(s);return o}function rf(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function I4(s,o,l,f,g,m){var x=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var R=s.entanglements,H=s.expirationTimes,ee=s.hiddenUpdates;for(l=x&~l;0<l;){var he=31-He(l),pe=1<<he;R[he]=0,H[he]=-1;var se=ee[he];if(se!==null)for(ee[he]=null,he=0;he<se.length;he++){var ae=se[he];ae!==null&&(ae.lane&=-536870913)}l&=~pe}f!==0&&G2(s,f,0),m!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=m&~(x&~o))}function G2(s,o,l){s.pendingLanes|=o,s.suspendedLanes&=~o;var f=31-He(o);s.entangledLanes|=o,s.entanglements[f]=s.entanglements[f]|1073741824|l&4194090}function K2(s,o){var l=s.entangledLanes|=o;for(s=s.entanglements;l;){var f=31-He(l),g=1<<f;g&o|s[f]&o&&(s[f]|=o),l&=~g}}function v0(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function E0(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Q2(){var s=M.p;return s!==0?s:(s=window.event,s===void 0?32:D3(s.type))}function R4(s,o){var l=M.p;try{return M.p=s,o()}finally{M.p=l}}var Pa=Math.random().toString(36).slice(2),Bn="__reactFiber$"+Pa,cr="__reactProps$"+Pa,Dl="__reactContainer$"+Pa,A0="__reactEvents$"+Pa,B4="__reactListeners$"+Pa,P4="__reactHandles$"+Pa,Y2="__reactResources$"+Pa,sf="__reactMarker$"+Pa;function x0(s){delete s[Bn],delete s[cr],delete s[A0],delete s[B4],delete s[P4]}function Cl(s){var o=s[Bn];if(o)return o;for(var l=s.parentNode;l;){if(o=l[Dl]||l[Bn]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(s=f3(s);s!==null;){if(l=s[Bn])return l;s=f3(s)}return o}s=l,l=s.parentNode}return null}function _l(s){if(s=s[Bn]||s[Dl]){var o=s.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return s}return null}function af(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(r(33))}function Nl(s){var o=s[Y2];return o||(o=s[Y2]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function on(s){s[sf]=!0}var J2=new Set,Z2={};function ec(s,o){Il(s,o),Il(s+"Capture",o)}function Il(s,o){for(Z2[s]=o,s=0;s<o.length;s++)J2.add(o[s])}var U4=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),X2={},W2={};function M4(s){return ze.call(W2,s)?!0:ze.call(X2,s)?!1:U4.test(s)?W2[s]=!0:(X2[s]=!0,!1)}function qp(s,o,l){if(M4(o))if(l===null)s.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var f=o.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+l)}}function Vp(s,o,l){if(l===null)s.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+l)}}function Rs(s,o,l,f){if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(o,l,""+f)}}var S0,eA;function Rl(s){if(S0===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);S0=o&&o[1]||"",eA=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+S0+s+eA}var O0=!1;function T0(s,o){if(!s||O0)return"";O0=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(o){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(ae){var se=ae}Reflect.construct(s,[],pe)}else{try{pe.call()}catch(ae){se=ae}s.call(pe.prototype)}}else{try{throw Error()}catch(ae){se=ae}(pe=s())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(ae){if(ae&&se&&typeof ae.stack=="string")return[ae.stack,se.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=f.DetermineComponentFrameRoot(),x=m[0],R=m[1];if(x&&R){var H=x.split(`
`),ee=R.split(`
`);for(g=f=0;f<H.length&&!H[f].includes("DetermineComponentFrameRoot");)f++;for(;g<ee.length&&!ee[g].includes("DetermineComponentFrameRoot");)g++;if(f===H.length||g===ee.length)for(f=H.length-1,g=ee.length-1;1<=f&&0<=g&&H[f]!==ee[g];)g--;for(;1<=f&&0<=g;f--,g--)if(H[f]!==ee[g]){if(f!==1||g!==1)do if(f--,g--,0>g||H[f]!==ee[g]){var he=`
`+H[f].replace(" at new "," at ");return s.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",s.displayName)),he}while(1<=f&&0<=g);break}}}finally{O0=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Rl(l):""}function $4(s){switch(s.tag){case 26:case 27:case 5:return Rl(s.type);case 16:return Rl("Lazy");case 13:return Rl("Suspense");case 19:return Rl("SuspenseList");case 0:case 15:return T0(s.type,!1);case 11:return T0(s.type.render,!1);case 1:return T0(s.type,!0);case 31:return Rl("Activity");default:return""}}function tA(s){try{var o="";do o+=$4(s),s=s.return;while(s);return o}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function Zr(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function nA(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function k4(s){var o=nA(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),f=""+s[o];if(!s.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,m=l.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return g.call(this)},set:function(x){f=""+x,m.call(this,x)}}),Object.defineProperty(s,o,{enumerable:l.enumerable}),{getValue:function(){return f},setValue:function(x){f=""+x},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function Gp(s){s._valueTracker||(s._valueTracker=k4(s))}function rA(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var l=o.getValue(),f="";return s&&(f=nA(s)?s.checked?"true":"false":s.value),s=f,s!==l?(o.setValue(s),!0):!1}function Kp(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var L4=/[\n"\\]/g;function Xr(s){return s.replace(L4,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function D0(s,o,l,f,g,m,x,R){s.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?s.type=x:s.removeAttribute("type"),o!=null?x==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+Zr(o)):s.value!==""+Zr(o)&&(s.value=""+Zr(o)):x!=="submit"&&x!=="reset"||s.removeAttribute("value"),o!=null?C0(s,x,Zr(o)):l!=null?C0(s,x,Zr(l)):f!=null&&s.removeAttribute("value"),g==null&&m!=null&&(s.defaultChecked=!!m),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?s.name=""+Zr(R):s.removeAttribute("name")}function iA(s,o,l,f,g,m,x,R){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(s.type=m),o!=null||l!=null){if(!(m!=="submit"&&m!=="reset"||o!=null))return;l=l!=null?""+Zr(l):"",o=o!=null?""+Zr(o):l,R||o===s.value||(s.value=o),s.defaultValue=o}f=f??g,f=typeof f!="function"&&typeof f!="symbol"&&!!f,s.checked=R?s.checked:!!f,s.defaultChecked=!!f,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(s.name=x)}function C0(s,o,l){o==="number"&&Kp(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Bl(s,o,l,f){if(s=s.options,o){o={};for(var g=0;g<l.length;g++)o["$"+l[g]]=!0;for(l=0;l<s.length;l++)g=o.hasOwnProperty("$"+s[l].value),s[l].selected!==g&&(s[l].selected=g),g&&f&&(s[l].defaultSelected=!0)}else{for(l=""+Zr(l),o=null,g=0;g<s.length;g++){if(s[g].value===l){s[g].selected=!0,f&&(s[g].defaultSelected=!0);return}o!==null||s[g].disabled||(o=s[g])}o!==null&&(o.selected=!0)}}function sA(s,o,l){if(o!=null&&(o=""+Zr(o),o!==s.value&&(s.value=o),l==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=l!=null?""+Zr(l):""}function aA(s,o,l,f){if(o==null){if(f!=null){if(l!=null)throw Error(r(92));if(C(f)){if(1<f.length)throw Error(r(93));f=f[0]}l=f}l==null&&(l=""),o=l}l=Zr(o),s.defaultValue=l,f=s.textContent,f===l&&f!==""&&f!==null&&(s.value=f)}function Pl(s,o){if(o){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=o;return}}s.textContent=o}var j4=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function oA(s,o,l){var f=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?f?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":f?s.setProperty(o,l):typeof l!="number"||l===0||j4.has(o)?o==="float"?s.cssFloat=l:s[o]=(""+l).trim():s[o]=l+"px"}function cA(s,o,l){if(o!=null&&typeof o!="object")throw Error(r(62));if(s=s.style,l!=null){for(var f in l)!l.hasOwnProperty(f)||o!=null&&o.hasOwnProperty(f)||(f.indexOf("--")===0?s.setProperty(f,""):f==="float"?s.cssFloat="":s[f]="");for(var g in o)f=o[g],o.hasOwnProperty(g)&&l[g]!==f&&oA(s,g,f)}else for(var m in o)o.hasOwnProperty(m)&&oA(s,m,o[m])}function _0(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var z4=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),H4=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qp(s){return H4.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var N0=null;function I0(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ul=null,Ml=null;function lA(s){var o=_l(s);if(o&&(s=o.stateNode)){var l=s[cr]||null;e:switch(s=o.stateNode,o.type){case"input":if(D0(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Xr(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var f=l[o];if(f!==s&&f.form===s.form){var g=f[cr]||null;if(!g)throw Error(r(90));D0(f,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<l.length;o++)f=l[o],f.form===s.form&&rA(f)}break e;case"textarea":sA(s,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&Bl(s,!!l.multiple,o,!1)}}}var R0=!1;function uA(s,o,l){if(R0)return s(o,l);R0=!0;try{var f=s(o);return f}finally{if(R0=!1,(Ul!==null||Ml!==null)&&(Bg(),Ul&&(o=Ul,s=Ml,Ml=Ul=null,lA(o),s)))for(o=0;o<s.length;o++)lA(s[o])}}function of(s,o){var l=s.stateNode;if(l===null)return null;var f=l[cr]||null;if(f===null)return null;l=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(r(231,o,typeof l));return l}var Bs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),B0=!1;if(Bs)try{var cf={};Object.defineProperty(cf,"passive",{get:function(){B0=!0}}),window.addEventListener("test",cf,cf),window.removeEventListener("test",cf,cf)}catch{B0=!1}var Ua=null,P0=null,Yp=null;function hA(){if(Yp)return Yp;var s,o=P0,l=o.length,f,g="value"in Ua?Ua.value:Ua.textContent,m=g.length;for(s=0;s<l&&o[s]===g[s];s++);var x=l-s;for(f=1;f<=x&&o[l-f]===g[m-f];f++);return Yp=g.slice(s,1<f?1-f:void 0)}function Jp(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Zp(){return!0}function fA(){return!1}function lr(s){function o(l,f,g,m,x){this._reactName=l,this._targetInst=g,this.type=f,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var R in s)s.hasOwnProperty(R)&&(l=s[R],this[R]=l?l(m):m[R]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Zp:fA,this.isPropagationStopped=fA,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Zp)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Zp)},persist:function(){},isPersistent:Zp}),o}var tc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xp=lr(tc),lf=p({},tc,{view:0,detail:0}),F4=lr(lf),U0,M0,uf,Wp=p({},lf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:k0,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==uf&&(uf&&s.type==="mousemove"?(U0=s.screenX-uf.screenX,M0=s.screenY-uf.screenY):M0=U0=0,uf=s),U0)},movementY:function(s){return"movementY"in s?s.movementY:M0}}),dA=lr(Wp),q4=p({},Wp,{dataTransfer:0}),V4=lr(q4),G4=p({},lf,{relatedTarget:0}),$0=lr(G4),K4=p({},tc,{animationName:0,elapsedTime:0,pseudoElement:0}),Q4=lr(K4),Y4=p({},tc,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),J4=lr(Y4),Z4=p({},tc,{data:0}),pA=lr(Z4),X4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},W4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},e6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t6(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=e6[s])?!!o[s]:!1}function k0(){return t6}var n6=p({},lf,{key:function(s){if(s.key){var o=X4[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=Jp(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?W4[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:k0,charCode:function(s){return s.type==="keypress"?Jp(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Jp(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),r6=lr(n6),i6=p({},Wp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gA=lr(i6),s6=p({},lf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:k0}),a6=lr(s6),o6=p({},tc,{propertyName:0,elapsedTime:0,pseudoElement:0}),c6=lr(o6),l6=p({},Wp,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),u6=lr(l6),h6=p({},tc,{newState:0,oldState:0}),f6=lr(h6),d6=[9,13,27,32],L0=Bs&&"CompositionEvent"in window,hf=null;Bs&&"documentMode"in document&&(hf=document.documentMode);var p6=Bs&&"TextEvent"in window&&!hf,yA=Bs&&(!L0||hf&&8<hf&&11>=hf),mA=" ",wA=!1;function bA(s,o){switch(s){case"keyup":return d6.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vA(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var $l=!1;function g6(s,o){switch(s){case"compositionend":return vA(o);case"keypress":return o.which!==32?null:(wA=!0,mA);case"textInput":return s=o.data,s===mA&&wA?null:s;default:return null}}function y6(s,o){if($l)return s==="compositionend"||!L0&&bA(s,o)?(s=hA(),Yp=P0=Ua=null,$l=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return yA&&o.locale!=="ko"?null:o.data;default:return null}}var m6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function EA(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!m6[s.type]:o==="textarea"}function AA(s,o,l,f){Ul?Ml?Ml.push(f):Ml=[f]:Ul=f,o=Lg(o,"onChange"),0<o.length&&(l=new Xp("onChange","change",null,l,f),s.push({event:l,listeners:o}))}var ff=null,df=null;function w6(s){n3(s,0)}function eg(s){var o=af(s);if(rA(o))return s}function xA(s,o){if(s==="change")return o}var SA=!1;if(Bs){var j0;if(Bs){var z0="oninput"in document;if(!z0){var OA=document.createElement("div");OA.setAttribute("oninput","return;"),z0=typeof OA.oninput=="function"}j0=z0}else j0=!1;SA=j0&&(!document.documentMode||9<document.documentMode)}function TA(){ff&&(ff.detachEvent("onpropertychange",DA),df=ff=null)}function DA(s){if(s.propertyName==="value"&&eg(df)){var o=[];AA(o,df,s,I0(s)),uA(w6,o)}}function b6(s,o,l){s==="focusin"?(TA(),ff=o,df=l,ff.attachEvent("onpropertychange",DA)):s==="focusout"&&TA()}function v6(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return eg(df)}function E6(s,o){if(s==="click")return eg(o)}function A6(s,o){if(s==="input"||s==="change")return eg(o)}function x6(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var _r=typeof Object.is=="function"?Object.is:x6;function pf(s,o){if(_r(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var l=Object.keys(s),f=Object.keys(o);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var g=l[f];if(!ze.call(o,g)||!_r(s[g],o[g]))return!1}return!0}function CA(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function _A(s,o){var l=CA(s);s=0;for(var f;l;){if(l.nodeType===3){if(f=s+l.textContent.length,s<=o&&f>=o)return{node:l,offset:o-s};s=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=CA(l)}}function NA(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?NA(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function IA(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=Kp(s.document);o instanceof s.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)s=o.contentWindow;else break;o=Kp(s.document)}return o}function H0(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var S6=Bs&&"documentMode"in document&&11>=document.documentMode,kl=null,F0=null,gf=null,q0=!1;function RA(s,o,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;q0||kl==null||kl!==Kp(f)||(f=kl,"selectionStart"in f&&H0(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),gf&&pf(gf,f)||(gf=f,f=Lg(F0,"onSelect"),0<f.length&&(o=new Xp("onSelect","select",null,o,l),s.push({event:o,listeners:f}),o.target=kl)))}function nc(s,o){var l={};return l[s.toLowerCase()]=o.toLowerCase(),l["Webkit"+s]="webkit"+o,l["Moz"+s]="moz"+o,l}var Ll={animationend:nc("Animation","AnimationEnd"),animationiteration:nc("Animation","AnimationIteration"),animationstart:nc("Animation","AnimationStart"),transitionrun:nc("Transition","TransitionRun"),transitionstart:nc("Transition","TransitionStart"),transitioncancel:nc("Transition","TransitionCancel"),transitionend:nc("Transition","TransitionEnd")},V0={},BA={};Bs&&(BA=document.createElement("div").style,"AnimationEvent"in window||(delete Ll.animationend.animation,delete Ll.animationiteration.animation,delete Ll.animationstart.animation),"TransitionEvent"in window||delete Ll.transitionend.transition);function rc(s){if(V0[s])return V0[s];if(!Ll[s])return s;var o=Ll[s],l;for(l in o)if(o.hasOwnProperty(l)&&l in BA)return V0[s]=o[l];return s}var PA=rc("animationend"),UA=rc("animationiteration"),MA=rc("animationstart"),O6=rc("transitionrun"),T6=rc("transitionstart"),D6=rc("transitioncancel"),$A=rc("transitionend"),kA=new Map,G0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");G0.push("scrollEnd");function _i(s,o){kA.set(s,o),ec(o,[s])}var LA=new WeakMap;function Wr(s,o){if(typeof s=="object"&&s!==null){var l=LA.get(s);return l!==void 0?l:(o={value:s,source:o,stack:tA(o)},LA.set(s,o),o)}return{value:s,source:o,stack:tA(o)}}var ei=[],jl=0,K0=0;function tg(){for(var s=jl,o=K0=jl=0;o<s;){var l=ei[o];ei[o++]=null;var f=ei[o];ei[o++]=null;var g=ei[o];ei[o++]=null;var m=ei[o];if(ei[o++]=null,f!==null&&g!==null){var x=f.pending;x===null?g.next=g:(g.next=x.next,x.next=g),f.pending=g}m!==0&&jA(l,g,m)}}function ng(s,o,l,f){ei[jl++]=s,ei[jl++]=o,ei[jl++]=l,ei[jl++]=f,K0|=f,s.lanes|=f,s=s.alternate,s!==null&&(s.lanes|=f)}function Q0(s,o,l,f){return ng(s,o,l,f),rg(s)}function zl(s,o){return ng(s,null,null,o),rg(s)}function jA(s,o,l){s.lanes|=l;var f=s.alternate;f!==null&&(f.lanes|=l);for(var g=!1,m=s.return;m!==null;)m.childLanes|=l,f=m.alternate,f!==null&&(f.childLanes|=l),m.tag===22&&(s=m.stateNode,s===null||s._visibility&1||(g=!0)),s=m,m=m.return;return s.tag===3?(m=s.stateNode,g&&o!==null&&(g=31-He(l),s=m.hiddenUpdates,f=s[g],f===null?s[g]=[o]:f.push(o),o.lane=l|536870912),m):null}function rg(s){if(50<jf)throw jf=0,eb=null,Error(r(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var Hl={};function C6(s,o,l,f){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nr(s,o,l,f){return new C6(s,o,l,f)}function Y0(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ps(s,o){var l=s.alternate;return l===null?(l=Nr(s.tag,o,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=o,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,o=s.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function zA(s,o){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,o=l.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function ig(s,o,l,f,g,m){var x=0;if(f=s,typeof s=="function")Y0(s)&&(x=1);else if(typeof s=="string")x=NB(s,l,ie.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case P:return s=Nr(31,l,o,g),s.elementType=P,s.lanes=m,s;case b:return ic(l.children,g,m,o);case E:x=8,g|=24;break;case A:return s=Nr(12,l,o,g|2),s.elementType=A,s.lanes=m,s;case I:return s=Nr(13,l,o,g),s.elementType=I,s.lanes=m,s;case N:return s=Nr(19,l,o,g),s.elementType=N,s.lanes=m,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case S:case D:x=10;break e;case B:x=9;break e;case U:x=11;break e;case k:x=14;break e;case $:x=16,f=null;break e}x=29,l=Error(r(130,s===null?"null":typeof s,"")),f=null}return o=Nr(x,l,o,g),o.elementType=s,o.type=f,o.lanes=m,o}function ic(s,o,l,f){return s=Nr(7,s,f,o),s.lanes=l,s}function J0(s,o,l){return s=Nr(6,s,null,o),s.lanes=l,s}function Z0(s,o,l){return o=Nr(4,s.children!==null?s.children:[],s.key,o),o.lanes=l,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var Fl=[],ql=0,sg=null,ag=0,ti=[],ni=0,sc=null,Us=1,Ms="";function ac(s,o){Fl[ql++]=ag,Fl[ql++]=sg,sg=s,ag=o}function HA(s,o,l){ti[ni++]=Us,ti[ni++]=Ms,ti[ni++]=sc,sc=s;var f=Us;s=Ms;var g=32-He(f)-1;f&=~(1<<g),l+=1;var m=32-He(o)+g;if(30<m){var x=g-g%5;m=(f&(1<<x)-1).toString(32),f>>=x,g-=x,Us=1<<32-He(o)+g|l<<g|f,Ms=m+s}else Us=1<<m|l<<g|f,Ms=s}function X0(s){s.return!==null&&(ac(s,1),HA(s,1,0))}function W0(s){for(;s===sg;)sg=Fl[--ql],Fl[ql]=null,ag=Fl[--ql],Fl[ql]=null;for(;s===sc;)sc=ti[--ni],ti[ni]=null,Ms=ti[--ni],ti[ni]=null,Us=ti[--ni],ti[ni]=null}var Kn=null,Rt=null,at=!1,oc=null,Wi=!1,ew=Error(r(519));function cc(s){var o=Error(r(418,""));throw wf(Wr(o,s)),ew}function FA(s){var o=s.stateNode,l=s.type,f=s.memoizedProps;switch(o[Bn]=s,o[cr]=f,l){case"dialog":Ke("cancel",o),Ke("close",o);break;case"iframe":case"object":case"embed":Ke("load",o);break;case"video":case"audio":for(l=0;l<Hf.length;l++)Ke(Hf[l],o);break;case"source":Ke("error",o);break;case"img":case"image":case"link":Ke("error",o),Ke("load",o);break;case"details":Ke("toggle",o);break;case"input":Ke("invalid",o),iA(o,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),Gp(o);break;case"select":Ke("invalid",o);break;case"textarea":Ke("invalid",o),aA(o,f.value,f.defaultValue,f.children),Gp(o)}l=f.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||f.suppressHydrationWarning===!0||a3(o.textContent,l)?(f.popover!=null&&(Ke("beforetoggle",o),Ke("toggle",o)),f.onScroll!=null&&Ke("scroll",o),f.onScrollEnd!=null&&Ke("scrollend",o),f.onClick!=null&&(o.onclick=jg),o=!0):o=!1,o||cc(s)}function qA(s){for(Kn=s.return;Kn;)switch(Kn.tag){case 5:case 13:Wi=!1;return;case 27:case 3:Wi=!0;return;default:Kn=Kn.return}}function yf(s){if(s!==Kn)return!1;if(!at)return qA(s),at=!0,!1;var o=s.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||yb(s.type,s.memoizedProps)),l=!l),l&&Rt&&cc(s),qA(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8)if(l=s.data,l==="/$"){if(o===0){Rt=Ii(s.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++;s=s.nextSibling}Rt=null}}else o===27?(o=Rt,Za(s.type)?(s=vb,vb=null,Rt=s):Rt=o):Rt=Kn?Ii(s.stateNode.nextSibling):null;return!0}function mf(){Rt=Kn=null,at=!1}function VA(){var s=oc;return s!==null&&(fr===null?fr=s:fr.push.apply(fr,s),oc=null),s}function wf(s){oc===null?oc=[s]:oc.push(s)}var tw=F(null),lc=null,$s=null;function Ma(s,o,l){re(tw,o._currentValue),o._currentValue=l}function ks(s){s._currentValue=tw.current,X(tw)}function nw(s,o,l){for(;s!==null;){var f=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),s===l)break;s=s.return}}function rw(s,o,l,f){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var m=g.dependencies;if(m!==null){var x=g.child;m=m.firstContext;e:for(;m!==null;){var R=m;m=g;for(var H=0;H<o.length;H++)if(R.context===o[H]){m.lanes|=l,R=m.alternate,R!==null&&(R.lanes|=l),nw(m.return,l,s),f||(x=null);break e}m=R.next}}else if(g.tag===18){if(x=g.return,x===null)throw Error(r(341));x.lanes|=l,m=x.alternate,m!==null&&(m.lanes|=l),nw(x,l,s),x=null}else x=g.child;if(x!==null)x.return=g;else for(x=g;x!==null;){if(x===s){x=null;break}if(g=x.sibling,g!==null){g.return=x.return,x=g;break}x=x.return}g=x}}function bf(s,o,l,f){s=null;for(var g=o,m=!1;g!==null;){if(!m){if((g.flags&524288)!==0)m=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var x=g.alternate;if(x===null)throw Error(r(387));if(x=x.memoizedProps,x!==null){var R=g.type;_r(g.pendingProps.value,x.value)||(s!==null?s.push(R):s=[R])}}else if(g===ue.current){if(x=g.alternate,x===null)throw Error(r(387));x.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(Qf):s=[Qf])}g=g.return}s!==null&&rw(o,s,l,f),o.flags|=262144}function og(s){for(s=s.firstContext;s!==null;){if(!_r(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function uc(s){lc=s,$s=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Pn(s){return GA(lc,s)}function cg(s,o){return lc===null&&uc(s),GA(s,o)}function GA(s,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},$s===null){if(s===null)throw Error(r(308));$s=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else $s=$s.next=o;return l}var _6=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(l,f){s.push(f)}};this.abort=function(){o.aborted=!0,s.forEach(function(l){return l()})}},N6=n.unstable_scheduleCallback,I6=n.unstable_NormalPriority,Wt={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function iw(){return{controller:new _6,data:new Map,refCount:0}}function vf(s){s.refCount--,s.refCount===0&&N6(I6,function(){s.controller.abort()})}var Ef=null,sw=0,Vl=0,Gl=null;function R6(s,o){if(Ef===null){var l=Ef=[];sw=0,Vl=ob(),Gl={status:"pending",value:void 0,then:function(f){l.push(f)}}}return sw++,o.then(KA,KA),o}function KA(){if(--sw===0&&Ef!==null){Gl!==null&&(Gl.status="fulfilled");var s=Ef;Ef=null,Vl=0,Gl=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function B6(s,o){var l=[],f={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return s.then(function(){f.status="fulfilled",f.value=o;for(var g=0;g<l.length;g++)(0,l[g])(o)},function(g){for(f.status="rejected",f.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),f}var QA=O.S;O.S=function(s,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&R6(s,o),QA!==null&&QA(s,o)};var hc=F(null);function aw(){var s=hc.current;return s!==null?s:Et.pooledCache}function lg(s,o){o===null?re(hc,hc.current):re(hc,o.pool)}function YA(){var s=aw();return s===null?null:{parent:Wt._currentValue,pool:s}}var Af=Error(r(460)),JA=Error(r(474)),ug=Error(r(542)),ow={then:function(){}};function ZA(s){return s=s.status,s==="fulfilled"||s==="rejected"}function hg(){}function XA(s,o,l){switch(l=s[l],l===void 0?s.push(o):l!==o&&(o.then(hg,hg),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,ex(s),s;default:if(typeof o.status=="string")o.then(hg,hg);else{if(s=Et,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=o,s.status="pending",s.then(function(f){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=f}},function(f){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=f}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,ex(s),s}throw xf=o,Af}}var xf=null;function WA(){if(xf===null)throw Error(r(459));var s=xf;return xf=null,s}function ex(s){if(s===Af||s===ug)throw Error(r(483))}var $a=!1;function cw(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lw(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ka(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function La(s,o,l){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,(ut&2)!==0){var g=f.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),f.pending=o,o=rg(s),jA(s,null,l),o}return ng(s,f,o,l),rg(s)}function Sf(s,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var f=o.lanes;f&=s.pendingLanes,l|=f,o.lanes=l,K2(s,l)}}function uw(s,o){var l=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var g=null,m=null;if(l=l.firstBaseUpdate,l!==null){do{var x={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};m===null?g=m=x:m=m.next=x,l=l.next}while(l!==null);m===null?g=m=o:m=m.next=o}else g=m=o;l={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:m,shared:f.shared,callbacks:f.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=o:s.next=o,l.lastBaseUpdate=o}var hw=!1;function Of(){if(hw){var s=Gl;if(s!==null)throw s}}function Tf(s,o,l,f){hw=!1;var g=s.updateQueue;$a=!1;var m=g.firstBaseUpdate,x=g.lastBaseUpdate,R=g.shared.pending;if(R!==null){g.shared.pending=null;var H=R,ee=H.next;H.next=null,x===null?m=ee:x.next=ee,x=H;var he=s.alternate;he!==null&&(he=he.updateQueue,R=he.lastBaseUpdate,R!==x&&(R===null?he.firstBaseUpdate=ee:R.next=ee,he.lastBaseUpdate=H))}if(m!==null){var pe=g.baseState;x=0,he=ee=H=null,R=m;do{var se=R.lane&-536870913,ae=se!==R.lane;if(ae?(Ze&se)===se:(f&se)===se){se!==0&&se===Vl&&(hw=!0),he!==null&&(he=he.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var Me=s,Re=R;se=o;var yt=l;switch(Re.tag){case 1:if(Me=Re.payload,typeof Me=="function"){pe=Me.call(yt,pe,se);break e}pe=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=Re.payload,se=typeof Me=="function"?Me.call(yt,pe,se):Me,se==null)break e;pe=p({},pe,se);break e;case 2:$a=!0}}se=R.callback,se!==null&&(s.flags|=64,ae&&(s.flags|=8192),ae=g.callbacks,ae===null?g.callbacks=[se]:ae.push(se))}else ae={lane:se,tag:R.tag,payload:R.payload,callback:R.callback,next:null},he===null?(ee=he=ae,H=pe):he=he.next=ae,x|=se;if(R=R.next,R===null){if(R=g.shared.pending,R===null)break;ae=R,R=ae.next,ae.next=null,g.lastBaseUpdate=ae,g.shared.pending=null}}while(!0);he===null&&(H=pe),g.baseState=H,g.firstBaseUpdate=ee,g.lastBaseUpdate=he,m===null&&(g.shared.lanes=0),Ka|=x,s.lanes=x,s.memoizedState=pe}}function tx(s,o){if(typeof s!="function")throw Error(r(191,s));s.call(o)}function nx(s,o){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)tx(l[s],o)}var Kl=F(null),fg=F(0);function rx(s,o){s=Vs,re(fg,s),re(Kl,o),Vs=s|o.baseLanes}function fw(){re(fg,Vs),re(Kl,Kl.current)}function dw(){Vs=fg.current,X(Kl),X(fg)}var ja=0,Fe=null,pt=null,Gt=null,dg=!1,Ql=!1,fc=!1,pg=0,Df=0,Yl=null,P6=0;function Mt(){throw Error(r(321))}function pw(s,o){if(o===null)return!1;for(var l=0;l<o.length&&l<s.length;l++)if(!_r(s[l],o[l]))return!1;return!0}function gw(s,o,l,f,g,m){return ja=m,Fe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,O.H=s===null||s.memoizedState===null?jx:zx,fc=!1,m=l(f,g),fc=!1,Ql&&(m=sx(o,l,f,g)),ix(s),m}function ix(s){O.H=vg;var o=pt!==null&&pt.next!==null;if(ja=0,Gt=pt=Fe=null,dg=!1,Df=0,Yl=null,o)throw Error(r(300));s===null||cn||(s=s.dependencies,s!==null&&og(s)&&(cn=!0))}function sx(s,o,l,f){Fe=s;var g=0;do{if(Ql&&(Yl=null),Df=0,Ql=!1,25<=g)throw Error(r(301));if(g+=1,Gt=pt=null,s.updateQueue!=null){var m=s.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}O.H=z6,m=o(l,f)}while(Ql);return m}function U6(){var s=O.H,o=s.useState()[0];return o=typeof o.then=="function"?Cf(o):o,s=s.useState()[0],(pt!==null?pt.memoizedState:null)!==s&&(Fe.flags|=1024),o}function yw(){var s=pg!==0;return pg=0,s}function mw(s,o,l){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~l}function ww(s){if(dg){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}dg=!1}ja=0,Gt=pt=Fe=null,Ql=!1,Df=pg=0,Yl=null}function ur(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Fe.memoizedState=Gt=s:Gt=Gt.next=s,Gt}function Kt(){if(pt===null){var s=Fe.alternate;s=s!==null?s.memoizedState:null}else s=pt.next;var o=Gt===null?Fe.memoizedState:Gt.next;if(o!==null)Gt=o,pt=s;else{if(s===null)throw Fe.alternate===null?Error(r(467)):Error(r(310));pt=s,s={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},Gt===null?Fe.memoizedState=Gt=s:Gt=Gt.next=s}return Gt}function bw(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Cf(s){var o=Df;return Df+=1,Yl===null&&(Yl=[]),s=XA(Yl,s,o),o=Fe,(Gt===null?o.memoizedState:Gt.next)===null&&(o=o.alternate,O.H=o===null||o.memoizedState===null?jx:zx),s}function gg(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Cf(s);if(s.$$typeof===D)return Pn(s)}throw Error(r(438,String(s)))}function vw(s){var o=null,l=Fe.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var f=Fe.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(o={data:f.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=bw(),Fe.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(s),f=0;f<s;f++)l[f]=L;return o.index++,l}function Ls(s,o){return typeof o=="function"?o(s):o}function yg(s){var o=Kt();return Ew(o,pt,s)}function Ew(s,o,l){var f=s.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=l;var g=s.baseQueue,m=f.pending;if(m!==null){if(g!==null){var x=g.next;g.next=m.next,m.next=x}o.baseQueue=g=m,f.pending=null}if(m=s.baseState,g===null)s.memoizedState=m;else{o=g.next;var R=x=null,H=null,ee=o,he=!1;do{var pe=ee.lane&-536870913;if(pe!==ee.lane?(Ze&pe)===pe:(ja&pe)===pe){var se=ee.revertLane;if(se===0)H!==null&&(H=H.next={lane:0,revertLane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),pe===Vl&&(he=!0);else if((ja&se)===se){ee=ee.next,se===Vl&&(he=!0);continue}else pe={lane:0,revertLane:ee.revertLane,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},H===null?(R=H=pe,x=m):H=H.next=pe,Fe.lanes|=se,Ka|=se;pe=ee.action,fc&&l(m,pe),m=ee.hasEagerState?ee.eagerState:l(m,pe)}else se={lane:pe,revertLane:ee.revertLane,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},H===null?(R=H=se,x=m):H=H.next=se,Fe.lanes|=pe,Ka|=pe;ee=ee.next}while(ee!==null&&ee!==o);if(H===null?x=m:H.next=R,!_r(m,s.memoizedState)&&(cn=!0,he&&(l=Gl,l!==null)))throw l;s.memoizedState=m,s.baseState=x,s.baseQueue=H,f.lastRenderedState=m}return g===null&&(f.lanes=0),[s.memoizedState,f.dispatch]}function Aw(s){var o=Kt(),l=o.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=s;var f=l.dispatch,g=l.pending,m=o.memoizedState;if(g!==null){l.pending=null;var x=g=g.next;do m=s(m,x.action),x=x.next;while(x!==g);_r(m,o.memoizedState)||(cn=!0),o.memoizedState=m,o.baseQueue===null&&(o.baseState=m),l.lastRenderedState=m}return[m,f]}function ax(s,o,l){var f=Fe,g=Kt(),m=at;if(m){if(l===void 0)throw Error(r(407));l=l()}else l=o();var x=!_r((pt||g).memoizedState,l);x&&(g.memoizedState=l,cn=!0),g=g.queue;var R=lx.bind(null,f,g,s);if(_f(2048,8,R,[s]),g.getSnapshot!==o||x||Gt!==null&&Gt.memoizedState.tag&1){if(f.flags|=2048,Jl(9,mg(),cx.bind(null,f,g,l,o),null),Et===null)throw Error(r(349));m||(ja&124)!==0||ox(f,o,l)}return l}function ox(s,o,l){s.flags|=16384,s={getSnapshot:o,value:l},o=Fe.updateQueue,o===null?(o=bw(),Fe.updateQueue=o,o.stores=[s]):(l=o.stores,l===null?o.stores=[s]:l.push(s))}function cx(s,o,l,f){o.value=l,o.getSnapshot=f,ux(o)&&hx(s)}function lx(s,o,l){return l(function(){ux(o)&&hx(s)})}function ux(s){var o=s.getSnapshot;s=s.value;try{var l=o();return!_r(s,l)}catch{return!0}}function hx(s){var o=zl(s,2);o!==null&&Ur(o,s,2)}function xw(s){var o=ur();if(typeof s=="function"){var l=s;if(s=l(),fc){Ue(!0);try{l()}finally{Ue(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:s},o}function fx(s,o,l,f){return s.baseState=l,Ew(s,pt,typeof f=="function"?f:Ls)}function M6(s,o,l,f,g){if(bg(s))throw Error(r(485));if(s=o.action,s!==null){var m={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};O.T!==null?l(!0):m.isTransition=!1,f(m),l=o.pending,l===null?(m.next=o.pending=m,dx(o,m)):(m.next=l.next,o.pending=l.next=m)}}function dx(s,o){var l=o.action,f=o.payload,g=s.state;if(o.isTransition){var m=O.T,x={};O.T=x;try{var R=l(g,f),H=O.S;H!==null&&H(x,R),px(s,o,R)}catch(ee){Sw(s,o,ee)}finally{O.T=m}}else try{m=l(g,f),px(s,o,m)}catch(ee){Sw(s,o,ee)}}function px(s,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(f){gx(s,o,f)},function(f){return Sw(s,o,f)}):gx(s,o,l)}function gx(s,o,l){o.status="fulfilled",o.value=l,yx(o),s.state=l,o=s.pending,o!==null&&(l=o.next,l===o?s.pending=null:(l=l.next,o.next=l,dx(s,l)))}function Sw(s,o,l){var f=s.pending;if(s.pending=null,f!==null){f=f.next;do o.status="rejected",o.reason=l,yx(o),o=o.next;while(o!==f)}s.action=null}function yx(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function mx(s,o){return o}function wx(s,o){if(at){var l=Et.formState;if(l!==null){e:{var f=Fe;if(at){if(Rt){t:{for(var g=Rt,m=Wi;g.nodeType!==8;){if(!m){g=null;break t}if(g=Ii(g.nextSibling),g===null){g=null;break t}}m=g.data,g=m==="F!"||m==="F"?g:null}if(g){Rt=Ii(g.nextSibling),f=g.data==="F!";break e}}cc(f)}f=!1}f&&(o=l[0])}}return l=ur(),l.memoizedState=l.baseState=o,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mx,lastRenderedState:o},l.queue=f,l=$x.bind(null,Fe,f),f.dispatch=l,f=xw(!1),m=_w.bind(null,Fe,!1,f.queue),f=ur(),g={state:o,dispatch:null,action:s,pending:null},f.queue=g,l=M6.bind(null,Fe,g,m,l),g.dispatch=l,f.memoizedState=s,[o,l,!1]}function bx(s){var o=Kt();return vx(o,pt,s)}function vx(s,o,l){if(o=Ew(s,o,mx)[0],s=yg(Ls)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var f=Cf(o)}catch(x){throw x===Af?ug:x}else f=o;o=Kt();var g=o.queue,m=g.dispatch;return l!==o.memoizedState&&(Fe.flags|=2048,Jl(9,mg(),$6.bind(null,g,l),null)),[f,m,s]}function $6(s,o){s.action=o}function Ex(s){var o=Kt(),l=pt;if(l!==null)return vx(o,l,s);Kt(),o=o.memoizedState,l=Kt();var f=l.queue.dispatch;return l.memoizedState=s,[o,f,!1]}function Jl(s,o,l,f){return s={tag:s,create:l,deps:f,inst:o,next:null},o=Fe.updateQueue,o===null&&(o=bw(),Fe.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=s.next=s:(f=l.next,l.next=s,s.next=f,o.lastEffect=s),s}function mg(){return{destroy:void 0,resource:void 0}}function Ax(){return Kt().memoizedState}function wg(s,o,l,f){var g=ur();f=f===void 0?null:f,Fe.flags|=s,g.memoizedState=Jl(1|o,mg(),l,f)}function _f(s,o,l,f){var g=Kt();f=f===void 0?null:f;var m=g.memoizedState.inst;pt!==null&&f!==null&&pw(f,pt.memoizedState.deps)?g.memoizedState=Jl(o,m,l,f):(Fe.flags|=s,g.memoizedState=Jl(1|o,m,l,f))}function xx(s,o){wg(8390656,8,s,o)}function Sx(s,o){_f(2048,8,s,o)}function Ox(s,o){return _f(4,2,s,o)}function Tx(s,o){return _f(4,4,s,o)}function Dx(s,o){if(typeof o=="function"){s=s();var l=o(s);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Cx(s,o,l){l=l!=null?l.concat([s]):null,_f(4,4,Dx.bind(null,o,s),l)}function Ow(){}function _x(s,o){var l=Kt();o=o===void 0?null:o;var f=l.memoizedState;return o!==null&&pw(o,f[1])?f[0]:(l.memoizedState=[s,o],s)}function Nx(s,o){var l=Kt();o=o===void 0?null:o;var f=l.memoizedState;if(o!==null&&pw(o,f[1]))return f[0];if(f=s(),fc){Ue(!0);try{s()}finally{Ue(!1)}}return l.memoizedState=[f,o],f}function Tw(s,o,l){return l===void 0||(ja&1073741824)!==0?s.memoizedState=o:(s.memoizedState=l,s=BS(),Fe.lanes|=s,Ka|=s,l)}function Ix(s,o,l,f){return _r(l,o)?l:Kl.current!==null?(s=Tw(s,l,f),_r(s,o)||(cn=!0),s):(ja&42)===0?(cn=!0,s.memoizedState=l):(s=BS(),Fe.lanes|=s,Ka|=s,o)}function Rx(s,o,l,f,g){var m=M.p;M.p=m!==0&&8>m?m:8;var x=O.T,R={};O.T=R,_w(s,!1,o,l);try{var H=g(),ee=O.S;if(ee!==null&&ee(R,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var he=B6(H,f);Nf(s,o,he,Pr(s))}else Nf(s,o,f,Pr(s))}catch(pe){Nf(s,o,{then:function(){},status:"rejected",reason:pe},Pr())}finally{M.p=m,O.T=x}}function k6(){}function Dw(s,o,l,f){if(s.tag!==5)throw Error(r(476));var g=Bx(s).queue;Rx(s,g,o,q,l===null?k6:function(){return Px(s),l(f)})}function Bx(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:q},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:l},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function Px(s){var o=Bx(s).next.queue;Nf(s,o,{},Pr())}function Cw(){return Pn(Qf)}function Ux(){return Kt().memoizedState}function Mx(){return Kt().memoizedState}function L6(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var l=Pr();s=ka(l);var f=La(o,s,l);f!==null&&(Ur(f,o,l),Sf(f,o,l)),o={cache:iw()},s.payload=o;return}o=o.return}}function j6(s,o,l){var f=Pr();l={lane:f,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},bg(s)?kx(o,l):(l=Q0(s,o,l,f),l!==null&&(Ur(l,s,f),Lx(l,o,f)))}function $x(s,o,l){var f=Pr();Nf(s,o,l,f)}function Nf(s,o,l,f){var g={lane:f,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(bg(s))kx(o,g);else{var m=s.alternate;if(s.lanes===0&&(m===null||m.lanes===0)&&(m=o.lastRenderedReducer,m!==null))try{var x=o.lastRenderedState,R=m(x,l);if(g.hasEagerState=!0,g.eagerState=R,_r(R,x))return ng(s,o,g,0),Et===null&&tg(),!1}catch{}finally{}if(l=Q0(s,o,g,f),l!==null)return Ur(l,s,f),Lx(l,o,f),!0}return!1}function _w(s,o,l,f){if(f={lane:2,revertLane:ob(),action:f,hasEagerState:!1,eagerState:null,next:null},bg(s)){if(o)throw Error(r(479))}else o=Q0(s,l,f,2),o!==null&&Ur(o,s,2)}function bg(s){var o=s.alternate;return s===Fe||o!==null&&o===Fe}function kx(s,o){Ql=dg=!0;var l=s.pending;l===null?o.next=o:(o.next=l.next,l.next=o),s.pending=o}function Lx(s,o,l){if((l&4194048)!==0){var f=o.lanes;f&=s.pendingLanes,l|=f,o.lanes=l,K2(s,l)}}var vg={readContext:Pn,use:gg,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useLayoutEffect:Mt,useInsertionEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useSyncExternalStore:Mt,useId:Mt,useHostTransitionStatus:Mt,useFormState:Mt,useActionState:Mt,useOptimistic:Mt,useMemoCache:Mt,useCacheRefresh:Mt},jx={readContext:Pn,use:gg,useCallback:function(s,o){return ur().memoizedState=[s,o===void 0?null:o],s},useContext:Pn,useEffect:xx,useImperativeHandle:function(s,o,l){l=l!=null?l.concat([s]):null,wg(4194308,4,Dx.bind(null,o,s),l)},useLayoutEffect:function(s,o){return wg(4194308,4,s,o)},useInsertionEffect:function(s,o){wg(4,2,s,o)},useMemo:function(s,o){var l=ur();o=o===void 0?null:o;var f=s();if(fc){Ue(!0);try{s()}finally{Ue(!1)}}return l.memoizedState=[f,o],f},useReducer:function(s,o,l){var f=ur();if(l!==void 0){var g=l(o);if(fc){Ue(!0);try{l(o)}finally{Ue(!1)}}}else g=o;return f.memoizedState=f.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},f.queue=s,s=s.dispatch=j6.bind(null,Fe,s),[f.memoizedState,s]},useRef:function(s){var o=ur();return s={current:s},o.memoizedState=s},useState:function(s){s=xw(s);var o=s.queue,l=$x.bind(null,Fe,o);return o.dispatch=l,[s.memoizedState,l]},useDebugValue:Ow,useDeferredValue:function(s,o){var l=ur();return Tw(l,s,o)},useTransition:function(){var s=xw(!1);return s=Rx.bind(null,Fe,s.queue,!0,!1),ur().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,l){var f=Fe,g=ur();if(at){if(l===void 0)throw Error(r(407));l=l()}else{if(l=o(),Et===null)throw Error(r(349));(Ze&124)!==0||ox(f,o,l)}g.memoizedState=l;var m={value:l,getSnapshot:o};return g.queue=m,xx(lx.bind(null,f,m,s),[s]),f.flags|=2048,Jl(9,mg(),cx.bind(null,f,m,l,o),null),l},useId:function(){var s=ur(),o=Et.identifierPrefix;if(at){var l=Ms,f=Us;l=(f&~(1<<32-He(f)-1)).toString(32)+l,o="«"+o+"R"+l,l=pg++,0<l&&(o+="H"+l.toString(32)),o+="»"}else l=P6++,o="«"+o+"r"+l.toString(32)+"»";return s.memoizedState=o},useHostTransitionStatus:Cw,useFormState:wx,useActionState:wx,useOptimistic:function(s){var o=ur();o.memoizedState=o.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=_w.bind(null,Fe,!0,l),l.dispatch=o,[s,o]},useMemoCache:vw,useCacheRefresh:function(){return ur().memoizedState=L6.bind(null,Fe)}},zx={readContext:Pn,use:gg,useCallback:_x,useContext:Pn,useEffect:Sx,useImperativeHandle:Cx,useInsertionEffect:Ox,useLayoutEffect:Tx,useMemo:Nx,useReducer:yg,useRef:Ax,useState:function(){return yg(Ls)},useDebugValue:Ow,useDeferredValue:function(s,o){var l=Kt();return Ix(l,pt.memoizedState,s,o)},useTransition:function(){var s=yg(Ls)[0],o=Kt().memoizedState;return[typeof s=="boolean"?s:Cf(s),o]},useSyncExternalStore:ax,useId:Ux,useHostTransitionStatus:Cw,useFormState:bx,useActionState:bx,useOptimistic:function(s,o){var l=Kt();return fx(l,pt,s,o)},useMemoCache:vw,useCacheRefresh:Mx},z6={readContext:Pn,use:gg,useCallback:_x,useContext:Pn,useEffect:Sx,useImperativeHandle:Cx,useInsertionEffect:Ox,useLayoutEffect:Tx,useMemo:Nx,useReducer:Aw,useRef:Ax,useState:function(){return Aw(Ls)},useDebugValue:Ow,useDeferredValue:function(s,o){var l=Kt();return pt===null?Tw(l,s,o):Ix(l,pt.memoizedState,s,o)},useTransition:function(){var s=Aw(Ls)[0],o=Kt().memoizedState;return[typeof s=="boolean"?s:Cf(s),o]},useSyncExternalStore:ax,useId:Ux,useHostTransitionStatus:Cw,useFormState:Ex,useActionState:Ex,useOptimistic:function(s,o){var l=Kt();return pt!==null?fx(l,pt,s,o):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:vw,useCacheRefresh:Mx},Zl=null,If=0;function Eg(s){var o=If;return If+=1,Zl===null&&(Zl=[]),XA(Zl,s,o)}function Rf(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function Ag(s,o){throw o.$$typeof===y?Error(r(525)):(s=Object.prototype.toString.call(o),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function Hx(s){var o=s._init;return o(s._payload)}function Fx(s){function o(Y,K){if(s){var W=Y.deletions;W===null?(Y.deletions=[K],Y.flags|=16):W.push(K)}}function l(Y,K){if(!s)return null;for(;K!==null;)o(Y,K),K=K.sibling;return null}function f(Y){for(var K=new Map;Y!==null;)Y.key!==null?K.set(Y.key,Y):K.set(Y.index,Y),Y=Y.sibling;return K}function g(Y,K){return Y=Ps(Y,K),Y.index=0,Y.sibling=null,Y}function m(Y,K,W){return Y.index=W,s?(W=Y.alternate,W!==null?(W=W.index,W<K?(Y.flags|=67108866,K):W):(Y.flags|=67108866,K)):(Y.flags|=1048576,K)}function x(Y){return s&&Y.alternate===null&&(Y.flags|=67108866),Y}function R(Y,K,W,fe){return K===null||K.tag!==6?(K=J0(W,Y.mode,fe),K.return=Y,K):(K=g(K,W),K.return=Y,K)}function H(Y,K,W,fe){var De=W.type;return De===b?he(Y,K,W.props.children,fe,W.key):K!==null&&(K.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===$&&Hx(De)===K.type)?(K=g(K,W.props),Rf(K,W),K.return=Y,K):(K=ig(W.type,W.key,W.props,null,Y.mode,fe),Rf(K,W),K.return=Y,K)}function ee(Y,K,W,fe){return K===null||K.tag!==4||K.stateNode.containerInfo!==W.containerInfo||K.stateNode.implementation!==W.implementation?(K=Z0(W,Y.mode,fe),K.return=Y,K):(K=g(K,W.children||[]),K.return=Y,K)}function he(Y,K,W,fe,De){return K===null||K.tag!==7?(K=ic(W,Y.mode,fe,De),K.return=Y,K):(K=g(K,W),K.return=Y,K)}function pe(Y,K,W){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=J0(""+K,Y.mode,W),K.return=Y,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case w:return W=ig(K.type,K.key,K.props,null,Y.mode,W),Rf(W,K),W.return=Y,W;case v:return K=Z0(K,Y.mode,W),K.return=Y,K;case $:var fe=K._init;return K=fe(K._payload),pe(Y,K,W)}if(C(K)||V(K))return K=ic(K,Y.mode,W,null),K.return=Y,K;if(typeof K.then=="function")return pe(Y,Eg(K),W);if(K.$$typeof===D)return pe(Y,cg(Y,K),W);Ag(Y,K)}return null}function se(Y,K,W,fe){var De=K!==null?K.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return De!==null?null:R(Y,K,""+W,fe);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case w:return W.key===De?H(Y,K,W,fe):null;case v:return W.key===De?ee(Y,K,W,fe):null;case $:return De=W._init,W=De(W._payload),se(Y,K,W,fe)}if(C(W)||V(W))return De!==null?null:he(Y,K,W,fe,null);if(typeof W.then=="function")return se(Y,K,Eg(W),fe);if(W.$$typeof===D)return se(Y,K,cg(Y,W),fe);Ag(Y,W)}return null}function ae(Y,K,W,fe,De){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return Y=Y.get(W)||null,R(K,Y,""+fe,De);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case w:return Y=Y.get(fe.key===null?W:fe.key)||null,H(K,Y,fe,De);case v:return Y=Y.get(fe.key===null?W:fe.key)||null,ee(K,Y,fe,De);case $:var qe=fe._init;return fe=qe(fe._payload),ae(Y,K,W,fe,De)}if(C(fe)||V(fe))return Y=Y.get(W)||null,he(K,Y,fe,De,null);if(typeof fe.then=="function")return ae(Y,K,W,Eg(fe),De);if(fe.$$typeof===D)return ae(Y,K,W,cg(K,fe),De);Ag(K,fe)}return null}function Me(Y,K,W,fe){for(var De=null,qe=null,Ie=K,Pe=K=0,un=null;Ie!==null&&Pe<W.length;Pe++){Ie.index>Pe?(un=Ie,Ie=null):un=Ie.sibling;var et=se(Y,Ie,W[Pe],fe);if(et===null){Ie===null&&(Ie=un);break}s&&Ie&&et.alternate===null&&o(Y,Ie),K=m(et,K,Pe),qe===null?De=et:qe.sibling=et,qe=et,Ie=un}if(Pe===W.length)return l(Y,Ie),at&&ac(Y,Pe),De;if(Ie===null){for(;Pe<W.length;Pe++)Ie=pe(Y,W[Pe],fe),Ie!==null&&(K=m(Ie,K,Pe),qe===null?De=Ie:qe.sibling=Ie,qe=Ie);return at&&ac(Y,Pe),De}for(Ie=f(Ie);Pe<W.length;Pe++)un=ae(Ie,Y,Pe,W[Pe],fe),un!==null&&(s&&un.alternate!==null&&Ie.delete(un.key===null?Pe:un.key),K=m(un,K,Pe),qe===null?De=un:qe.sibling=un,qe=un);return s&&Ie.forEach(function(no){return o(Y,no)}),at&&ac(Y,Pe),De}function Re(Y,K,W,fe){if(W==null)throw Error(r(151));for(var De=null,qe=null,Ie=K,Pe=K=0,un=null,et=W.next();Ie!==null&&!et.done;Pe++,et=W.next()){Ie.index>Pe?(un=Ie,Ie=null):un=Ie.sibling;var no=se(Y,Ie,et.value,fe);if(no===null){Ie===null&&(Ie=un);break}s&&Ie&&no.alternate===null&&o(Y,Ie),K=m(no,K,Pe),qe===null?De=no:qe.sibling=no,qe=no,Ie=un}if(et.done)return l(Y,Ie),at&&ac(Y,Pe),De;if(Ie===null){for(;!et.done;Pe++,et=W.next())et=pe(Y,et.value,fe),et!==null&&(K=m(et,K,Pe),qe===null?De=et:qe.sibling=et,qe=et);return at&&ac(Y,Pe),De}for(Ie=f(Ie);!et.done;Pe++,et=W.next())et=ae(Ie,Y,Pe,et.value,fe),et!==null&&(s&&et.alternate!==null&&Ie.delete(et.key===null?Pe:et.key),K=m(et,K,Pe),qe===null?De=et:qe.sibling=et,qe=et);return s&&Ie.forEach(function(HB){return o(Y,HB)}),at&&ac(Y,Pe),De}function yt(Y,K,W,fe){if(typeof W=="object"&&W!==null&&W.type===b&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case w:e:{for(var De=W.key;K!==null;){if(K.key===De){if(De=W.type,De===b){if(K.tag===7){l(Y,K.sibling),fe=g(K,W.props.children),fe.return=Y,Y=fe;break e}}else if(K.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===$&&Hx(De)===K.type){l(Y,K.sibling),fe=g(K,W.props),Rf(fe,W),fe.return=Y,Y=fe;break e}l(Y,K);break}else o(Y,K);K=K.sibling}W.type===b?(fe=ic(W.props.children,Y.mode,fe,W.key),fe.return=Y,Y=fe):(fe=ig(W.type,W.key,W.props,null,Y.mode,fe),Rf(fe,W),fe.return=Y,Y=fe)}return x(Y);case v:e:{for(De=W.key;K!==null;){if(K.key===De)if(K.tag===4&&K.stateNode.containerInfo===W.containerInfo&&K.stateNode.implementation===W.implementation){l(Y,K.sibling),fe=g(K,W.children||[]),fe.return=Y,Y=fe;break e}else{l(Y,K);break}else o(Y,K);K=K.sibling}fe=Z0(W,Y.mode,fe),fe.return=Y,Y=fe}return x(Y);case $:return De=W._init,W=De(W._payload),yt(Y,K,W,fe)}if(C(W))return Me(Y,K,W,fe);if(V(W)){if(De=V(W),typeof De!="function")throw Error(r(150));return W=De.call(W),Re(Y,K,W,fe)}if(typeof W.then=="function")return yt(Y,K,Eg(W),fe);if(W.$$typeof===D)return yt(Y,K,cg(Y,W),fe);Ag(Y,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,K!==null&&K.tag===6?(l(Y,K.sibling),fe=g(K,W),fe.return=Y,Y=fe):(l(Y,K),fe=J0(W,Y.mode,fe),fe.return=Y,Y=fe),x(Y)):l(Y,K)}return function(Y,K,W,fe){try{If=0;var De=yt(Y,K,W,fe);return Zl=null,De}catch(Ie){if(Ie===Af||Ie===ug)throw Ie;var qe=Nr(29,Ie,null,Y.mode);return qe.lanes=fe,qe.return=Y,qe}finally{}}}var Xl=Fx(!0),qx=Fx(!1),ri=F(null),es=null;function za(s){var o=s.alternate;re(en,en.current&1),re(ri,s),es===null&&(o===null||Kl.current!==null||o.memoizedState!==null)&&(es=s)}function Vx(s){if(s.tag===22){if(re(en,en.current),re(ri,s),es===null){var o=s.alternate;o!==null&&o.memoizedState!==null&&(es=s)}}else Ha()}function Ha(){re(en,en.current),re(ri,ri.current)}function js(s){X(ri),es===s&&(es=null),X(en)}var en=F(0);function xg(s){for(var o=s;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||bb(l)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function Nw(s,o,l,f){o=s.memoizedState,l=l(f,o),l=l==null?o:p({},o,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Iw={enqueueSetState:function(s,o,l){s=s._reactInternals;var f=Pr(),g=ka(f);g.payload=o,l!=null&&(g.callback=l),o=La(s,g,f),o!==null&&(Ur(o,s,f),Sf(o,s,f))},enqueueReplaceState:function(s,o,l){s=s._reactInternals;var f=Pr(),g=ka(f);g.tag=1,g.payload=o,l!=null&&(g.callback=l),o=La(s,g,f),o!==null&&(Ur(o,s,f),Sf(o,s,f))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var l=Pr(),f=ka(l);f.tag=2,o!=null&&(f.callback=o),o=La(s,f,l),o!==null&&(Ur(o,s,l),Sf(o,s,l))}};function Gx(s,o,l,f,g,m,x){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,m,x):o.prototype&&o.prototype.isPureReactComponent?!pf(l,f)||!pf(g,m):!0}function Kx(s,o,l,f){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,f),o.state!==s&&Iw.enqueueReplaceState(o,o.state,null)}function dc(s,o){var l=o;if("ref"in o){l={};for(var f in o)f!=="ref"&&(l[f]=o[f])}if(s=s.defaultProps){l===o&&(l=p({},l));for(var g in s)l[g]===void 0&&(l[g]=s[g])}return l}var Sg=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function Qx(s){Sg(s)}function Yx(s){console.error(s)}function Jx(s){Sg(s)}function Og(s,o){try{var l=s.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(f){setTimeout(function(){throw f})}}function Zx(s,o,l){try{var f=s.onCaughtError;f(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Rw(s,o,l){return l=ka(l),l.tag=3,l.payload={element:null},l.callback=function(){Og(s,o)},l}function Xx(s){return s=ka(s),s.tag=3,s}function Wx(s,o,l,f){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var m=f.value;s.payload=function(){return g(m)},s.callback=function(){Zx(o,l,f)}}var x=l.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(s.callback=function(){Zx(o,l,f),typeof g!="function"&&(Qa===null?Qa=new Set([this]):Qa.add(this));var R=f.stack;this.componentDidCatch(f.value,{componentStack:R!==null?R:""})})}function H6(s,o,l,f,g){if(l.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(o=l.alternate,o!==null&&bf(o,l,g,!0),l=ri.current,l!==null){switch(l.tag){case 13:return es===null?nb():l.alternate===null&&Bt===0&&(Bt=3),l.flags&=-257,l.flags|=65536,l.lanes=g,f===ow?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([f]):o.add(f),ib(s,f,g)),!1;case 22:return l.flags|=65536,f===ow?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([f])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([f]):l.add(f)),ib(s,f,g)),!1}throw Error(r(435,l.tag))}return ib(s,f,g),nb(),!1}if(at)return o=ri.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,f!==ew&&(s=Error(r(422),{cause:f}),wf(Wr(s,l)))):(f!==ew&&(o=Error(r(423),{cause:f}),wf(Wr(o,l))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,f=Wr(f,l),g=Rw(s.stateNode,f,g),uw(s,g),Bt!==4&&(Bt=2)),!1;var m=Error(r(520),{cause:f});if(m=Wr(m,l),Lf===null?Lf=[m]:Lf.push(m),Bt!==4&&(Bt=2),o===null)return!0;f=Wr(f,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,s=g&-g,l.lanes|=s,s=Rw(l.stateNode,f,s),uw(l,s),!1;case 1:if(o=l.type,m=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Qa===null||!Qa.has(m))))return l.flags|=65536,g&=-g,l.lanes|=g,g=Xx(g),Wx(g,s,l,f),uw(l,g),!1}l=l.return}while(l!==null);return!1}var eS=Error(r(461)),cn=!1;function wn(s,o,l,f){o.child=s===null?qx(o,null,l,f):Xl(o,s.child,l,f)}function tS(s,o,l,f,g){l=l.render;var m=o.ref;if("ref"in f){var x={};for(var R in f)R!=="ref"&&(x[R]=f[R])}else x=f;return uc(o),f=gw(s,o,l,x,m,g),R=yw(),s!==null&&!cn?(mw(s,o,g),zs(s,o,g)):(at&&R&&X0(o),o.flags|=1,wn(s,o,f,g),o.child)}function nS(s,o,l,f,g){if(s===null){var m=l.type;return typeof m=="function"&&!Y0(m)&&m.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=m,rS(s,o,m,f,g)):(s=ig(l.type,null,f,o,o.mode,g),s.ref=o.ref,s.return=o,o.child=s)}if(m=s.child,!jw(s,g)){var x=m.memoizedProps;if(l=l.compare,l=l!==null?l:pf,l(x,f)&&s.ref===o.ref)return zs(s,o,g)}return o.flags|=1,s=Ps(m,f),s.ref=o.ref,s.return=o,o.child=s}function rS(s,o,l,f,g){if(s!==null){var m=s.memoizedProps;if(pf(m,f)&&s.ref===o.ref)if(cn=!1,o.pendingProps=f=m,jw(s,g))(s.flags&131072)!==0&&(cn=!0);else return o.lanes=s.lanes,zs(s,o,g)}return Bw(s,o,l,f,g)}function iS(s,o,l){var f=o.pendingProps,g=f.children,m=s!==null?s.memoizedState:null;if(f.mode==="hidden"){if((o.flags&128)!==0){if(f=m!==null?m.baseLanes|l:l,s!==null){for(g=o.child=s.child,m=0;g!==null;)m=m|g.lanes|g.childLanes,g=g.sibling;o.childLanes=m&~f}else o.childLanes=0,o.child=null;return sS(s,o,f,l)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&lg(o,m!==null?m.cachePool:null),m!==null?rx(o,m):fw(),Vx(o);else return o.lanes=o.childLanes=536870912,sS(s,o,m!==null?m.baseLanes|l:l,l)}else m!==null?(lg(o,m.cachePool),rx(o,m),Ha(),o.memoizedState=null):(s!==null&&lg(o,null),fw(),Ha());return wn(s,o,g,l),o.child}function sS(s,o,l,f){var g=aw();return g=g===null?null:{parent:Wt._currentValue,pool:g},o.memoizedState={baseLanes:l,cachePool:g},s!==null&&lg(o,null),fw(),Vx(o),s!==null&&bf(s,o,f,!0),null}function Tg(s,o){var l=o.ref;if(l===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(s===null||s.ref!==l)&&(o.flags|=4194816)}}function Bw(s,o,l,f,g){return uc(o),l=gw(s,o,l,f,void 0,g),f=yw(),s!==null&&!cn?(mw(s,o,g),zs(s,o,g)):(at&&f&&X0(o),o.flags|=1,wn(s,o,l,g),o.child)}function aS(s,o,l,f,g,m){return uc(o),o.updateQueue=null,l=sx(o,f,l,g),ix(s),f=yw(),s!==null&&!cn?(mw(s,o,m),zs(s,o,m)):(at&&f&&X0(o),o.flags|=1,wn(s,o,l,m),o.child)}function oS(s,o,l,f,g){if(uc(o),o.stateNode===null){var m=Hl,x=l.contextType;typeof x=="object"&&x!==null&&(m=Pn(x)),m=new l(f,m),o.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Iw,o.stateNode=m,m._reactInternals=o,m=o.stateNode,m.props=f,m.state=o.memoizedState,m.refs={},cw(o),x=l.contextType,m.context=typeof x=="object"&&x!==null?Pn(x):Hl,m.state=o.memoizedState,x=l.getDerivedStateFromProps,typeof x=="function"&&(Nw(o,l,x,f),m.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&Iw.enqueueReplaceState(m,m.state,null),Tf(o,f,m,g),Of(),m.state=o.memoizedState),typeof m.componentDidMount=="function"&&(o.flags|=4194308),f=!0}else if(s===null){m=o.stateNode;var R=o.memoizedProps,H=dc(l,R);m.props=H;var ee=m.context,he=l.contextType;x=Hl,typeof he=="object"&&he!==null&&(x=Pn(he));var pe=l.getDerivedStateFromProps;he=typeof pe=="function"||typeof m.getSnapshotBeforeUpdate=="function",R=o.pendingProps!==R,he||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(R||ee!==x)&&Kx(o,m,f,x),$a=!1;var se=o.memoizedState;m.state=se,Tf(o,f,m,g),Of(),ee=o.memoizedState,R||se!==ee||$a?(typeof pe=="function"&&(Nw(o,l,pe,f),ee=o.memoizedState),(H=$a||Gx(o,l,H,f,se,ee,x))?(he||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(o.flags|=4194308)):(typeof m.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=ee),m.props=f,m.state=ee,m.context=x,f=H):(typeof m.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{m=o.stateNode,lw(s,o),x=o.memoizedProps,he=dc(l,x),m.props=he,pe=o.pendingProps,se=m.context,ee=l.contextType,H=Hl,typeof ee=="object"&&ee!==null&&(H=Pn(ee)),R=l.getDerivedStateFromProps,(ee=typeof R=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==pe||se!==H)&&Kx(o,m,f,H),$a=!1,se=o.memoizedState,m.state=se,Tf(o,f,m,g),Of();var ae=o.memoizedState;x!==pe||se!==ae||$a||s!==null&&s.dependencies!==null&&og(s.dependencies)?(typeof R=="function"&&(Nw(o,l,R,f),ae=o.memoizedState),(he=$a||Gx(o,l,he,f,se,ae,H)||s!==null&&s.dependencies!==null&&og(s.dependencies))?(ee||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(f,ae,H),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(f,ae,H)),typeof m.componentDidUpdate=="function"&&(o.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===s.memoizedProps&&se===s.memoizedState||(o.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===s.memoizedProps&&se===s.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=ae),m.props=f,m.state=ae,m.context=H,f=he):(typeof m.componentDidUpdate!="function"||x===s.memoizedProps&&se===s.memoizedState||(o.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===s.memoizedProps&&se===s.memoizedState||(o.flags|=1024),f=!1)}return m=f,Tg(s,o),f=(o.flags&128)!==0,m||f?(m=o.stateNode,l=f&&typeof l.getDerivedStateFromError!="function"?null:m.render(),o.flags|=1,s!==null&&f?(o.child=Xl(o,s.child,null,g),o.child=Xl(o,null,l,g)):wn(s,o,l,g),o.memoizedState=m.state,s=o.child):s=zs(s,o,g),s}function cS(s,o,l,f){return mf(),o.flags|=256,wn(s,o,l,f),o.child}var Pw={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Uw(s){return{baseLanes:s,cachePool:YA()}}function Mw(s,o,l){return s=s!==null?s.childLanes&~l:0,o&&(s|=ii),s}function lS(s,o,l){var f=o.pendingProps,g=!1,m=(o.flags&128)!==0,x;if((x=m)||(x=s!==null&&s.memoizedState===null?!1:(en.current&2)!==0),x&&(g=!0,o.flags&=-129),x=(o.flags&32)!==0,o.flags&=-33,s===null){if(at){if(g?za(o):Ha(),at){var R=Rt,H;if(H=R){e:{for(H=R,R=Wi;H.nodeType!==8;){if(!R){R=null;break e}if(H=Ii(H.nextSibling),H===null){R=null;break e}}R=H}R!==null?(o.memoizedState={dehydrated:R,treeContext:sc!==null?{id:Us,overflow:Ms}:null,retryLane:536870912,hydrationErrors:null},H=Nr(18,null,null,0),H.stateNode=R,H.return=o,o.child=H,Kn=o,Rt=null,H=!0):H=!1}H||cc(o)}if(R=o.memoizedState,R!==null&&(R=R.dehydrated,R!==null))return bb(R)?o.lanes=32:o.lanes=536870912,null;js(o)}return R=f.children,f=f.fallback,g?(Ha(),g=o.mode,R=Dg({mode:"hidden",children:R},g),f=ic(f,g,l,null),R.return=o,f.return=o,R.sibling=f,o.child=R,g=o.child,g.memoizedState=Uw(l),g.childLanes=Mw(s,x,l),o.memoizedState=Pw,f):(za(o),$w(o,R))}if(H=s.memoizedState,H!==null&&(R=H.dehydrated,R!==null)){if(m)o.flags&256?(za(o),o.flags&=-257,o=kw(s,o,l)):o.memoizedState!==null?(Ha(),o.child=s.child,o.flags|=128,o=null):(Ha(),g=f.fallback,R=o.mode,f=Dg({mode:"visible",children:f.children},R),g=ic(g,R,l,null),g.flags|=2,f.return=o,g.return=o,f.sibling=g,o.child=f,Xl(o,s.child,null,l),f=o.child,f.memoizedState=Uw(l),f.childLanes=Mw(s,x,l),o.memoizedState=Pw,o=g);else if(za(o),bb(R)){if(x=R.nextSibling&&R.nextSibling.dataset,x)var ee=x.dgst;x=ee,f=Error(r(419)),f.stack="",f.digest=x,wf({value:f,source:null,stack:null}),o=kw(s,o,l)}else if(cn||bf(s,o,l,!1),x=(l&s.childLanes)!==0,cn||x){if(x=Et,x!==null&&(f=l&-l,f=(f&42)!==0?1:v0(f),f=(f&(x.suspendedLanes|l))!==0?0:f,f!==0&&f!==H.retryLane))throw H.retryLane=f,zl(s,f),Ur(x,s,f),eS;R.data==="$?"||nb(),o=kw(s,o,l)}else R.data==="$?"?(o.flags|=192,o.child=s.child,o=null):(s=H.treeContext,Rt=Ii(R.nextSibling),Kn=o,at=!0,oc=null,Wi=!1,s!==null&&(ti[ni++]=Us,ti[ni++]=Ms,ti[ni++]=sc,Us=s.id,Ms=s.overflow,sc=o),o=$w(o,f.children),o.flags|=4096);return o}return g?(Ha(),g=f.fallback,R=o.mode,H=s.child,ee=H.sibling,f=Ps(H,{mode:"hidden",children:f.children}),f.subtreeFlags=H.subtreeFlags&65011712,ee!==null?g=Ps(ee,g):(g=ic(g,R,l,null),g.flags|=2),g.return=o,f.return=o,f.sibling=g,o.child=f,f=g,g=o.child,R=s.child.memoizedState,R===null?R=Uw(l):(H=R.cachePool,H!==null?(ee=Wt._currentValue,H=H.parent!==ee?{parent:ee,pool:ee}:H):H=YA(),R={baseLanes:R.baseLanes|l,cachePool:H}),g.memoizedState=R,g.childLanes=Mw(s,x,l),o.memoizedState=Pw,f):(za(o),l=s.child,s=l.sibling,l=Ps(l,{mode:"visible",children:f.children}),l.return=o,l.sibling=null,s!==null&&(x=o.deletions,x===null?(o.deletions=[s],o.flags|=16):x.push(s)),o.child=l,o.memoizedState=null,l)}function $w(s,o){return o=Dg({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function Dg(s,o){return s=Nr(22,s,null,o),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function kw(s,o,l){return Xl(o,s.child,null,l),s=$w(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function uS(s,o,l){s.lanes|=o;var f=s.alternate;f!==null&&(f.lanes|=o),nw(s.return,o,l)}function Lw(s,o,l,f,g){var m=s.memoizedState;m===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:g}:(m.isBackwards=o,m.rendering=null,m.renderingStartTime=0,m.last=f,m.tail=l,m.tailMode=g)}function hS(s,o,l){var f=o.pendingProps,g=f.revealOrder,m=f.tail;if(wn(s,o,f.children,l),f=en.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&uS(s,l,o);else if(s.tag===19)uS(s,l,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}switch(re(en,f),g){case"forwards":for(l=o.child,g=null;l!==null;)s=l.alternate,s!==null&&xg(s)===null&&(g=l),l=l.sibling;l=g,l===null?(g=o.child,o.child=null):(g=l.sibling,l.sibling=null),Lw(o,!1,g,l,m);break;case"backwards":for(l=null,g=o.child,o.child=null;g!==null;){if(s=g.alternate,s!==null&&xg(s)===null){o.child=g;break}s=g.sibling,g.sibling=l,l=g,g=s}Lw(o,!0,l,null,m);break;case"together":Lw(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function zs(s,o,l){if(s!==null&&(o.dependencies=s.dependencies),Ka|=o.lanes,(l&o.childLanes)===0)if(s!==null){if(bf(s,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(r(153));if(o.child!==null){for(s=o.child,l=Ps(s,s.pendingProps),o.child=l,l.return=o;s.sibling!==null;)s=s.sibling,l=l.sibling=Ps(s,s.pendingProps),l.return=o;l.sibling=null}return o.child}function jw(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&og(s)))}function F6(s,o,l){switch(o.tag){case 3:de(o,o.stateNode.containerInfo),Ma(o,Wt,s.memoizedState.cache),mf();break;case 27:case 5:Ne(o);break;case 4:de(o,o.stateNode.containerInfo);break;case 10:Ma(o,o.type,o.memoizedProps.value);break;case 13:var f=o.memoizedState;if(f!==null)return f.dehydrated!==null?(za(o),o.flags|=128,null):(l&o.child.childLanes)!==0?lS(s,o,l):(za(o),s=zs(s,o,l),s!==null?s.sibling:null);za(o);break;case 19:var g=(s.flags&128)!==0;if(f=(l&o.childLanes)!==0,f||(bf(s,o,l,!1),f=(l&o.childLanes)!==0),g){if(f)return hS(s,o,l);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),re(en,en.current),f)break;return null;case 22:case 23:return o.lanes=0,iS(s,o,l);case 24:Ma(o,Wt,s.memoizedState.cache)}return zs(s,o,l)}function fS(s,o,l){if(s!==null)if(s.memoizedProps!==o.pendingProps)cn=!0;else{if(!jw(s,l)&&(o.flags&128)===0)return cn=!1,F6(s,o,l);cn=(s.flags&131072)!==0}else cn=!1,at&&(o.flags&1048576)!==0&&HA(o,ag,o.index);switch(o.lanes=0,o.tag){case 16:e:{s=o.pendingProps;var f=o.elementType,g=f._init;if(f=g(f._payload),o.type=f,typeof f=="function")Y0(f)?(s=dc(f,s),o.tag=1,o=oS(null,o,f,s,l)):(o.tag=0,o=Bw(null,o,f,s,l));else{if(f!=null){if(g=f.$$typeof,g===U){o.tag=11,o=tS(null,o,f,s,l);break e}else if(g===k){o.tag=14,o=nS(null,o,f,s,l);break e}}throw o=Z(f)||f,Error(r(306,o,""))}}return o;case 0:return Bw(s,o,o.type,o.pendingProps,l);case 1:return f=o.type,g=dc(f,o.pendingProps),oS(s,o,f,g,l);case 3:e:{if(de(o,o.stateNode.containerInfo),s===null)throw Error(r(387));f=o.pendingProps;var m=o.memoizedState;g=m.element,lw(s,o),Tf(o,f,null,l);var x=o.memoizedState;if(f=x.cache,Ma(o,Wt,f),f!==m.cache&&rw(o,[Wt],l,!0),Of(),f=x.element,m.isDehydrated)if(m={element:f,isDehydrated:!1,cache:x.cache},o.updateQueue.baseState=m,o.memoizedState=m,o.flags&256){o=cS(s,o,f,l);break e}else if(f!==g){g=Wr(Error(r(424)),o),wf(g),o=cS(s,o,f,l);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Rt=Ii(s.firstChild),Kn=o,at=!0,oc=null,Wi=!0,l=qx(o,null,f,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(mf(),f===g){o=zs(s,o,l);break e}wn(s,o,f,l)}o=o.child}return o;case 26:return Tg(s,o),s===null?(l=y3(o.type,null,o.pendingProps,null))?o.memoizedState=l:at||(l=o.type,s=o.pendingProps,f=zg(le.current).createElement(l),f[Bn]=o,f[cr]=s,vn(f,l,s),on(f),o.stateNode=f):o.memoizedState=y3(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return Ne(o),s===null&&at&&(f=o.stateNode=d3(o.type,o.pendingProps,le.current),Kn=o,Wi=!0,g=Rt,Za(o.type)?(vb=g,Rt=Ii(f.firstChild)):Rt=g),wn(s,o,o.pendingProps.children,l),Tg(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&at&&((g=f=Rt)&&(f=mB(f,o.type,o.pendingProps,Wi),f!==null?(o.stateNode=f,Kn=o,Rt=Ii(f.firstChild),Wi=!1,g=!0):g=!1),g||cc(o)),Ne(o),g=o.type,m=o.pendingProps,x=s!==null?s.memoizedProps:null,f=m.children,yb(g,m)?f=null:x!==null&&yb(g,x)&&(o.flags|=32),o.memoizedState!==null&&(g=gw(s,o,U6,null,null,l),Qf._currentValue=g),Tg(s,o),wn(s,o,f,l),o.child;case 6:return s===null&&at&&((s=l=Rt)&&(l=wB(l,o.pendingProps,Wi),l!==null?(o.stateNode=l,Kn=o,Rt=null,s=!0):s=!1),s||cc(o)),null;case 13:return lS(s,o,l);case 4:return de(o,o.stateNode.containerInfo),f=o.pendingProps,s===null?o.child=Xl(o,null,f,l):wn(s,o,f,l),o.child;case 11:return tS(s,o,o.type,o.pendingProps,l);case 7:return wn(s,o,o.pendingProps,l),o.child;case 8:return wn(s,o,o.pendingProps.children,l),o.child;case 12:return wn(s,o,o.pendingProps.children,l),o.child;case 10:return f=o.pendingProps,Ma(o,o.type,f.value),wn(s,o,f.children,l),o.child;case 9:return g=o.type._context,f=o.pendingProps.children,uc(o),g=Pn(g),f=f(g),o.flags|=1,wn(s,o,f,l),o.child;case 14:return nS(s,o,o.type,o.pendingProps,l);case 15:return rS(s,o,o.type,o.pendingProps,l);case 19:return hS(s,o,l);case 31:return f=o.pendingProps,l=o.mode,f={mode:f.mode,children:f.children},s===null?(l=Dg(f,l),l.ref=o.ref,o.child=l,l.return=o,o=l):(l=Ps(s.child,f),l.ref=o.ref,o.child=l,l.return=o,o=l),o;case 22:return iS(s,o,l);case 24:return uc(o),f=Pn(Wt),s===null?(g=aw(),g===null&&(g=Et,m=iw(),g.pooledCache=m,m.refCount++,m!==null&&(g.pooledCacheLanes|=l),g=m),o.memoizedState={parent:f,cache:g},cw(o),Ma(o,Wt,g)):((s.lanes&l)!==0&&(lw(s,o),Tf(o,null,null,l),Of()),g=s.memoizedState,m=o.memoizedState,g.parent!==f?(g={parent:f,cache:f},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),Ma(o,Wt,f)):(f=m.cache,Ma(o,Wt,f),f!==g.cache&&rw(o,[Wt],l,!0))),wn(s,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function Hs(s){s.flags|=4}function dS(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!E3(o)){if(o=ri.current,o!==null&&((Ze&4194048)===Ze?es!==null:(Ze&62914560)!==Ze&&(Ze&536870912)===0||o!==es))throw xf=ow,JA;s.flags|=8192}}function Cg(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?Wo():536870912,s.lanes|=o,nu|=o)}function Bf(s,o){if(!at)switch(s.tailMode){case"hidden":o=s.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function _t(s){var o=s.alternate!==null&&s.alternate.child===s.child,l=0,f=0;if(o)for(var g=s.child;g!==null;)l|=g.lanes|g.childLanes,f|=g.subtreeFlags&65011712,f|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)l|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=f,s.childLanes=l,o}function q6(s,o,l){var f=o.pendingProps;switch(W0(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(o),null;case 1:return _t(o),null;case 3:return l=o.stateNode,f=null,s!==null&&(f=s.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),ks(Wt),ve(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(yf(o)?Hs(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,VA())),_t(o),null;case 26:return l=o.memoizedState,s===null?(Hs(o),l!==null?(_t(o),dS(o,l)):(_t(o),o.flags&=-16777217)):l?l!==s.memoizedState?(Hs(o),_t(o),dS(o,l)):(_t(o),o.flags&=-16777217):(s.memoizedProps!==f&&Hs(o),_t(o),o.flags&=-16777217),null;case 27:Ce(o),l=le.current;var g=o.type;if(s!==null&&o.stateNode!=null)s.memoizedProps!==f&&Hs(o);else{if(!f){if(o.stateNode===null)throw Error(r(166));return _t(o),null}s=ie.current,yf(o)?FA(o):(s=d3(g,f,l),o.stateNode=s,Hs(o))}return _t(o),null;case 5:if(Ce(o),l=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==f&&Hs(o);else{if(!f){if(o.stateNode===null)throw Error(r(166));return _t(o),null}if(s=ie.current,yf(o))FA(o);else{switch(g=zg(le.current),s){case 1:s=g.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:s=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":s=g.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":s=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":s=g.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof f.is=="string"?g.createElement("select",{is:f.is}):g.createElement("select"),f.multiple?s.multiple=!0:f.size&&(s.size=f.size);break;default:s=typeof f.is=="string"?g.createElement(l,{is:f.is}):g.createElement(l)}}s[Bn]=o,s[cr]=f;e:for(g=o.child;g!==null;){if(g.tag===5||g.tag===6)s.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===o)break e;for(;g.sibling===null;){if(g.return===null||g.return===o)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}o.stateNode=s;e:switch(vn(s,l,f),l){case"button":case"input":case"select":case"textarea":s=!!f.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Hs(o)}}return _t(o),o.flags&=-16777217,null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==f&&Hs(o);else{if(typeof f!="string"&&o.stateNode===null)throw Error(r(166));if(s=le.current,yf(o)){if(s=o.stateNode,l=o.memoizedProps,f=null,g=Kn,g!==null)switch(g.tag){case 27:case 5:f=g.memoizedProps}s[Bn]=o,s=!!(s.nodeValue===l||f!==null&&f.suppressHydrationWarning===!0||a3(s.nodeValue,l)),s||cc(o)}else s=zg(s).createTextNode(f),s[Bn]=o,o.stateNode=s}return _t(o),null;case 13:if(f=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=yf(o),f!==null&&f.dehydrated!==null){if(s===null){if(!g)throw Error(r(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[Bn]=o}else mf(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;_t(o),g=!1}else g=VA(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(js(o),o):(js(o),null)}if(js(o),(o.flags&128)!==0)return o.lanes=l,o;if(l=f!==null,s=s!==null&&s.memoizedState!==null,l){f=o.child,g=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(g=f.alternate.memoizedState.cachePool.pool);var m=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(m=f.memoizedState.cachePool.pool),m!==g&&(f.flags|=2048)}return l!==s&&l&&(o.child.flags|=8192),Cg(o,o.updateQueue),_t(o),null;case 4:return ve(),s===null&&hb(o.stateNode.containerInfo),_t(o),null;case 10:return ks(o.type),_t(o),null;case 19:if(X(en),g=o.memoizedState,g===null)return _t(o),null;if(f=(o.flags&128)!==0,m=g.rendering,m===null)if(f)Bf(g,!1);else{if(Bt!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(m=xg(s),m!==null){for(o.flags|=128,Bf(g,!1),s=m.updateQueue,o.updateQueue=s,Cg(o,s),o.subtreeFlags=0,s=l,l=o.child;l!==null;)zA(l,s),l=l.sibling;return re(en,en.current&1|2),o.child}s=s.sibling}g.tail!==null&&Vt()>Ig&&(o.flags|=128,f=!0,Bf(g,!1),o.lanes=4194304)}else{if(!f)if(s=xg(m),s!==null){if(o.flags|=128,f=!0,s=s.updateQueue,o.updateQueue=s,Cg(o,s),Bf(g,!0),g.tail===null&&g.tailMode==="hidden"&&!m.alternate&&!at)return _t(o),null}else 2*Vt()-g.renderingStartTime>Ig&&l!==536870912&&(o.flags|=128,f=!0,Bf(g,!1),o.lanes=4194304);g.isBackwards?(m.sibling=o.child,o.child=m):(s=g.last,s!==null?s.sibling=m:o.child=m,g.last=m)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=Vt(),o.sibling=null,s=en.current,re(en,f?s&1|2:s&1),o):(_t(o),null);case 22:case 23:return js(o),dw(),f=o.memoizedState!==null,s!==null?s.memoizedState!==null!==f&&(o.flags|=8192):f&&(o.flags|=8192),f?(l&536870912)!==0&&(o.flags&128)===0&&(_t(o),o.subtreeFlags&6&&(o.flags|=8192)):_t(o),l=o.updateQueue,l!==null&&Cg(o,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==l&&(o.flags|=2048),s!==null&&X(hc),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),ks(Wt),_t(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function V6(s,o){switch(W0(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return ks(Wt),ve(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return Ce(o),null;case 13:if(js(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(r(340));mf()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return X(en),null;case 4:return ve(),null;case 10:return ks(o.type),null;case 22:case 23:return js(o),dw(),s!==null&&X(hc),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return ks(Wt),null;case 25:return null;default:return null}}function pS(s,o){switch(W0(o),o.tag){case 3:ks(Wt),ve();break;case 26:case 27:case 5:Ce(o);break;case 4:ve();break;case 13:js(o);break;case 19:X(en);break;case 10:ks(o.type);break;case 22:case 23:js(o),dw(),s!==null&&X(hc);break;case 24:ks(Wt)}}function Pf(s,o){try{var l=o.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var g=f.next;l=g;do{if((l.tag&s)===s){f=void 0;var m=l.create,x=l.inst;f=m(),x.destroy=f}l=l.next}while(l!==g)}}catch(R){wt(o,o.return,R)}}function Fa(s,o,l){try{var f=o.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var m=g.next;f=m;do{if((f.tag&s)===s){var x=f.inst,R=x.destroy;if(R!==void 0){x.destroy=void 0,g=o;var H=l,ee=R;try{ee()}catch(he){wt(g,H,he)}}}f=f.next}while(f!==m)}}catch(he){wt(o,o.return,he)}}function gS(s){var o=s.updateQueue;if(o!==null){var l=s.stateNode;try{nx(o,l)}catch(f){wt(s,s.return,f)}}}function yS(s,o,l){l.props=dc(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(f){wt(s,o,f)}}function Uf(s,o){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var f=s.stateNode;break;case 30:f=s.stateNode;break;default:f=s.stateNode}typeof l=="function"?s.refCleanup=l(f):l.current=f}}catch(g){wt(s,o,g)}}function ts(s,o){var l=s.ref,f=s.refCleanup;if(l!==null)if(typeof f=="function")try{f()}catch(g){wt(s,o,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){wt(s,o,g)}else l.current=null}function mS(s){var o=s.type,l=s.memoizedProps,f=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&f.focus();break e;case"img":l.src?f.src=l.src:l.srcSet&&(f.srcset=l.srcSet)}}catch(g){wt(s,s.return,g)}}function zw(s,o,l){try{var f=s.stateNode;fB(f,s.type,l,o),f[cr]=o}catch(g){wt(s,s.return,g)}}function wS(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Za(s.type)||s.tag===4}function Hw(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||wS(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Za(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Fw(s,o,l){var f=s.tag;if(f===5||f===6)s=s.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(s),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=jg));else if(f!==4&&(f===27&&Za(s.type)&&(l=s.stateNode,o=null),s=s.child,s!==null))for(Fw(s,o,l),s=s.sibling;s!==null;)Fw(s,o,l),s=s.sibling}function _g(s,o,l){var f=s.tag;if(f===5||f===6)s=s.stateNode,o?l.insertBefore(s,o):l.appendChild(s);else if(f!==4&&(f===27&&Za(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(_g(s,o,l),s=s.sibling;s!==null;)_g(s,o,l),s=s.sibling}function bS(s){var o=s.stateNode,l=s.memoizedProps;try{for(var f=s.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);vn(o,f,l),o[Bn]=s,o[cr]=l}catch(m){wt(s,s.return,m)}}var Fs=!1,$t=!1,qw=!1,vS=typeof WeakSet=="function"?WeakSet:Set,ln=null;function G6(s,o){if(s=s.containerInfo,pb=Kg,s=IA(s),H0(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var g=f.anchorOffset,m=f.focusNode;f=f.focusOffset;try{l.nodeType,m.nodeType}catch{l=null;break e}var x=0,R=-1,H=-1,ee=0,he=0,pe=s,se=null;t:for(;;){for(var ae;pe!==l||g!==0&&pe.nodeType!==3||(R=x+g),pe!==m||f!==0&&pe.nodeType!==3||(H=x+f),pe.nodeType===3&&(x+=pe.nodeValue.length),(ae=pe.firstChild)!==null;)se=pe,pe=ae;for(;;){if(pe===s)break t;if(se===l&&++ee===g&&(R=x),se===m&&++he===f&&(H=x),(ae=pe.nextSibling)!==null)break;pe=se,se=pe.parentNode}pe=ae}l=R===-1||H===-1?null:{start:R,end:H}}else l=null}l=l||{start:0,end:0}}else l=null;for(gb={focusedElem:s,selectionRange:l},Kg=!1,ln=o;ln!==null;)if(o=ln,s=o.child,(o.subtreeFlags&1024)!==0&&s!==null)s.return=o,ln=s;else for(;ln!==null;){switch(o=ln,m=o.alternate,s=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&m!==null){s=void 0,l=o,g=m.memoizedProps,m=m.memoizedState,f=l.stateNode;try{var Me=dc(l.type,g,l.elementType===l.type);s=f.getSnapshotBeforeUpdate(Me,m),f.__reactInternalSnapshotBeforeUpdate=s}catch(Re){wt(l,l.return,Re)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,l=s.nodeType,l===9)wb(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":wb(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=o.sibling,s!==null){s.return=o.return,ln=s;break}ln=o.return}}function ES(s,o,l){var f=l.flags;switch(l.tag){case 0:case 11:case 15:qa(s,l),f&4&&Pf(5,l);break;case 1:if(qa(s,l),f&4)if(s=l.stateNode,o===null)try{s.componentDidMount()}catch(x){wt(l,l.return,x)}else{var g=dc(l.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(g,o,s.__reactInternalSnapshotBeforeUpdate)}catch(x){wt(l,l.return,x)}}f&64&&gS(l),f&512&&Uf(l,l.return);break;case 3:if(qa(s,l),f&64&&(s=l.updateQueue,s!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{nx(s,o)}catch(x){wt(l,l.return,x)}}break;case 27:o===null&&f&4&&bS(l);case 26:case 5:qa(s,l),o===null&&f&4&&mS(l),f&512&&Uf(l,l.return);break;case 12:qa(s,l);break;case 13:qa(s,l),f&4&&SS(s,l),f&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=tB.bind(null,l),bB(s,l))));break;case 22:if(f=l.memoizedState!==null||Fs,!f){o=o!==null&&o.memoizedState!==null||$t,g=Fs;var m=$t;Fs=f,($t=o)&&!m?Va(s,l,(l.subtreeFlags&8772)!==0):qa(s,l),Fs=g,$t=m}break;case 30:break;default:qa(s,l)}}function AS(s){var o=s.alternate;o!==null&&(s.alternate=null,AS(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&x0(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Dt=null,hr=!1;function qs(s,o,l){for(l=l.child;l!==null;)xS(s,o,l),l=l.sibling}function xS(s,o,l){if(Se&&typeof Se.onCommitFiberUnmount=="function")try{Se.onCommitFiberUnmount(we,l)}catch{}switch(l.tag){case 26:$t||ts(l,o),qs(s,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:$t||ts(l,o);var f=Dt,g=hr;Za(l.type)&&(Dt=l.stateNode,hr=!1),qs(s,o,l),qf(l.stateNode),Dt=f,hr=g;break;case 5:$t||ts(l,o);case 6:if(f=Dt,g=hr,Dt=null,qs(s,o,l),Dt=f,hr=g,Dt!==null)if(hr)try{(Dt.nodeType===9?Dt.body:Dt.nodeName==="HTML"?Dt.ownerDocument.body:Dt).removeChild(l.stateNode)}catch(m){wt(l,o,m)}else try{Dt.removeChild(l.stateNode)}catch(m){wt(l,o,m)}break;case 18:Dt!==null&&(hr?(s=Dt,h3(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),Xf(s)):h3(Dt,l.stateNode));break;case 4:f=Dt,g=hr,Dt=l.stateNode.containerInfo,hr=!0,qs(s,o,l),Dt=f,hr=g;break;case 0:case 11:case 14:case 15:$t||Fa(2,l,o),$t||Fa(4,l,o),qs(s,o,l);break;case 1:$t||(ts(l,o),f=l.stateNode,typeof f.componentWillUnmount=="function"&&yS(l,o,f)),qs(s,o,l);break;case 21:qs(s,o,l);break;case 22:$t=(f=$t)||l.memoizedState!==null,qs(s,o,l),$t=f;break;default:qs(s,o,l)}}function SS(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Xf(s)}catch(l){wt(o,o.return,l)}}function K6(s){switch(s.tag){case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new vS),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new vS),o;default:throw Error(r(435,s.tag))}}function Vw(s,o){var l=K6(s);o.forEach(function(f){var g=nB.bind(null,s,f);l.has(f)||(l.add(f),f.then(g,g))})}function Ir(s,o){var l=o.deletions;if(l!==null)for(var f=0;f<l.length;f++){var g=l[f],m=s,x=o,R=x;e:for(;R!==null;){switch(R.tag){case 27:if(Za(R.type)){Dt=R.stateNode,hr=!1;break e}break;case 5:Dt=R.stateNode,hr=!1;break e;case 3:case 4:Dt=R.stateNode.containerInfo,hr=!0;break e}R=R.return}if(Dt===null)throw Error(r(160));xS(m,x,g),Dt=null,hr=!1,m=g.alternate,m!==null&&(m.return=null),g.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)OS(o,s),o=o.sibling}var Ni=null;function OS(s,o){var l=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ir(o,s),Rr(s),f&4&&(Fa(3,s,s.return),Pf(3,s),Fa(5,s,s.return));break;case 1:Ir(o,s),Rr(s),f&512&&($t||l===null||ts(l,l.return)),f&64&&Fs&&(s=s.updateQueue,s!==null&&(f=s.callbacks,f!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?f:l.concat(f))));break;case 26:var g=Ni;if(Ir(o,s),Rr(s),f&512&&($t||l===null||ts(l,l.return)),f&4){var m=l!==null?l.memoizedState:null;if(f=s.memoizedState,l===null)if(f===null)if(s.stateNode===null){e:{f=s.type,l=s.memoizedProps,g=g.ownerDocument||g;t:switch(f){case"title":m=g.getElementsByTagName("title")[0],(!m||m[sf]||m[Bn]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=g.createElement(f),g.head.insertBefore(m,g.querySelector("head > title"))),vn(m,f,l),m[Bn]=s,on(m),f=m;break e;case"link":var x=b3("link","href",g).get(f+(l.href||""));if(x){for(var R=0;R<x.length;R++)if(m=x[R],m.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&m.getAttribute("rel")===(l.rel==null?null:l.rel)&&m.getAttribute("title")===(l.title==null?null:l.title)&&m.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){x.splice(R,1);break t}}m=g.createElement(f),vn(m,f,l),g.head.appendChild(m);break;case"meta":if(x=b3("meta","content",g).get(f+(l.content||""))){for(R=0;R<x.length;R++)if(m=x[R],m.getAttribute("content")===(l.content==null?null:""+l.content)&&m.getAttribute("name")===(l.name==null?null:l.name)&&m.getAttribute("property")===(l.property==null?null:l.property)&&m.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&m.getAttribute("charset")===(l.charSet==null?null:l.charSet)){x.splice(R,1);break t}}m=g.createElement(f),vn(m,f,l),g.head.appendChild(m);break;default:throw Error(r(468,f))}m[Bn]=s,on(m),f=m}s.stateNode=f}else v3(g,s.type,s.stateNode);else s.stateNode=w3(g,f,s.memoizedProps);else m!==f?(m===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):m.count--,f===null?v3(g,s.type,s.stateNode):w3(g,f,s.memoizedProps)):f===null&&s.stateNode!==null&&zw(s,s.memoizedProps,l.memoizedProps)}break;case 27:Ir(o,s),Rr(s),f&512&&($t||l===null||ts(l,l.return)),l!==null&&f&4&&zw(s,s.memoizedProps,l.memoizedProps);break;case 5:if(Ir(o,s),Rr(s),f&512&&($t||l===null||ts(l,l.return)),s.flags&32){g=s.stateNode;try{Pl(g,"")}catch(ae){wt(s,s.return,ae)}}f&4&&s.stateNode!=null&&(g=s.memoizedProps,zw(s,g,l!==null?l.memoizedProps:g)),f&1024&&(qw=!0);break;case 6:if(Ir(o,s),Rr(s),f&4){if(s.stateNode===null)throw Error(r(162));f=s.memoizedProps,l=s.stateNode;try{l.nodeValue=f}catch(ae){wt(s,s.return,ae)}}break;case 3:if(qg=null,g=Ni,Ni=Hg(o.containerInfo),Ir(o,s),Ni=g,Rr(s),f&4&&l!==null&&l.memoizedState.isDehydrated)try{Xf(o.containerInfo)}catch(ae){wt(s,s.return,ae)}qw&&(qw=!1,TS(s));break;case 4:f=Ni,Ni=Hg(s.stateNode.containerInfo),Ir(o,s),Rr(s),Ni=f;break;case 12:Ir(o,s),Rr(s);break;case 13:Ir(o,s),Rr(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Zw=Vt()),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,Vw(s,f)));break;case 22:g=s.memoizedState!==null;var H=l!==null&&l.memoizedState!==null,ee=Fs,he=$t;if(Fs=ee||g,$t=he||H,Ir(o,s),$t=he,Fs=ee,Rr(s),f&8192)e:for(o=s.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(l===null||H||Fs||$t||pc(s)),l=null,o=s;;){if(o.tag===5||o.tag===26){if(l===null){H=l=o;try{if(m=H.stateNode,g)x=m.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{R=H.stateNode;var pe=H.memoizedProps.style,se=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;R.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(ae){wt(H,H.return,ae)}}}else if(o.tag===6){if(l===null){H=o;try{H.stateNode.nodeValue=g?"":H.memoizedProps}catch(ae){wt(H,H.return,ae)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}f&4&&(f=s.updateQueue,f!==null&&(l=f.retryQueue,l!==null&&(f.retryQueue=null,Vw(s,l))));break;case 19:Ir(o,s),Rr(s),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,Vw(s,f)));break;case 30:break;case 21:break;default:Ir(o,s),Rr(s)}}function Rr(s){var o=s.flags;if(o&2){try{for(var l,f=s.return;f!==null;){if(wS(f)){l=f;break}f=f.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var g=l.stateNode,m=Hw(s);_g(s,m,g);break;case 5:var x=l.stateNode;l.flags&32&&(Pl(x,""),l.flags&=-33);var R=Hw(s);_g(s,R,x);break;case 3:case 4:var H=l.stateNode.containerInfo,ee=Hw(s);Fw(s,ee,H);break;default:throw Error(r(161))}}catch(he){wt(s,s.return,he)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function TS(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;TS(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function qa(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)ES(s,o.alternate,o),o=o.sibling}function pc(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:Fa(4,o,o.return),pc(o);break;case 1:ts(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&yS(o,o.return,l),pc(o);break;case 27:qf(o.stateNode);case 26:case 5:ts(o,o.return),pc(o);break;case 22:o.memoizedState===null&&pc(o);break;case 30:pc(o);break;default:pc(o)}s=s.sibling}}function Va(s,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var f=o.alternate,g=s,m=o,x=m.flags;switch(m.tag){case 0:case 11:case 15:Va(g,m,l),Pf(4,m);break;case 1:if(Va(g,m,l),f=m,g=f.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(ee){wt(f,f.return,ee)}if(f=m,g=f.updateQueue,g!==null){var R=f.stateNode;try{var H=g.shared.hiddenCallbacks;if(H!==null)for(g.shared.hiddenCallbacks=null,g=0;g<H.length;g++)tx(H[g],R)}catch(ee){wt(f,f.return,ee)}}l&&x&64&&gS(m),Uf(m,m.return);break;case 27:bS(m);case 26:case 5:Va(g,m,l),l&&f===null&&x&4&&mS(m),Uf(m,m.return);break;case 12:Va(g,m,l);break;case 13:Va(g,m,l),l&&x&4&&SS(g,m);break;case 22:m.memoizedState===null&&Va(g,m,l),Uf(m,m.return);break;case 30:break;default:Va(g,m,l)}o=o.sibling}}function Gw(s,o){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&vf(l))}function Kw(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&vf(s))}function ns(s,o,l,f){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)DS(s,o,l,f),o=o.sibling}function DS(s,o,l,f){var g=o.flags;switch(o.tag){case 0:case 11:case 15:ns(s,o,l,f),g&2048&&Pf(9,o);break;case 1:ns(s,o,l,f);break;case 3:ns(s,o,l,f),g&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&vf(s)));break;case 12:if(g&2048){ns(s,o,l,f),s=o.stateNode;try{var m=o.memoizedProps,x=m.id,R=m.onPostCommit;typeof R=="function"&&R(x,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(H){wt(o,o.return,H)}}else ns(s,o,l,f);break;case 13:ns(s,o,l,f);break;case 23:break;case 22:m=o.stateNode,x=o.alternate,o.memoizedState!==null?m._visibility&2?ns(s,o,l,f):Mf(s,o):m._visibility&2?ns(s,o,l,f):(m._visibility|=2,Wl(s,o,l,f,(o.subtreeFlags&10256)!==0)),g&2048&&Gw(x,o);break;case 24:ns(s,o,l,f),g&2048&&Kw(o.alternate,o);break;default:ns(s,o,l,f)}}function Wl(s,o,l,f,g){for(g=g&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var m=s,x=o,R=l,H=f,ee=x.flags;switch(x.tag){case 0:case 11:case 15:Wl(m,x,R,H,g),Pf(8,x);break;case 23:break;case 22:var he=x.stateNode;x.memoizedState!==null?he._visibility&2?Wl(m,x,R,H,g):Mf(m,x):(he._visibility|=2,Wl(m,x,R,H,g)),g&&ee&2048&&Gw(x.alternate,x);break;case 24:Wl(m,x,R,H,g),g&&ee&2048&&Kw(x.alternate,x);break;default:Wl(m,x,R,H,g)}o=o.sibling}}function Mf(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=s,f=o,g=f.flags;switch(f.tag){case 22:Mf(l,f),g&2048&&Gw(f.alternate,f);break;case 24:Mf(l,f),g&2048&&Kw(f.alternate,f);break;default:Mf(l,f)}o=o.sibling}}var $f=8192;function eu(s){if(s.subtreeFlags&$f)for(s=s.child;s!==null;)CS(s),s=s.sibling}function CS(s){switch(s.tag){case 26:eu(s),s.flags&$f&&s.memoizedState!==null&&RB(Ni,s.memoizedState,s.memoizedProps);break;case 5:eu(s);break;case 3:case 4:var o=Ni;Ni=Hg(s.stateNode.containerInfo),eu(s),Ni=o;break;case 22:s.memoizedState===null&&(o=s.alternate,o!==null&&o.memoizedState!==null?(o=$f,$f=16777216,eu(s),$f=o):eu(s));break;default:eu(s)}}function _S(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function kf(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var f=o[l];ln=f,IS(f,s)}_S(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)NS(s),s=s.sibling}function NS(s){switch(s.tag){case 0:case 11:case 15:kf(s),s.flags&2048&&Fa(9,s,s.return);break;case 3:kf(s);break;case 12:kf(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,Ng(s)):kf(s);break;default:kf(s)}}function Ng(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var f=o[l];ln=f,IS(f,s)}_S(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:Fa(8,o,o.return),Ng(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,Ng(o));break;default:Ng(o)}s=s.sibling}}function IS(s,o){for(;ln!==null;){var l=ln;switch(l.tag){case 0:case 11:case 15:Fa(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var f=l.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:vf(l.memoizedState.cache)}if(f=l.child,f!==null)f.return=l,ln=f;else e:for(l=s;ln!==null;){f=ln;var g=f.sibling,m=f.return;if(AS(f),f===l){ln=null;break e}if(g!==null){g.return=m,ln=g;break e}ln=m}}}var Q6={getCacheForType:function(s){var o=Pn(Wt),l=o.data.get(s);return l===void 0&&(l=s(),o.data.set(s,l)),l}},Y6=typeof WeakMap=="function"?WeakMap:Map,ut=0,Et=null,Ge=null,Ze=0,ht=0,Br=null,Ga=!1,tu=!1,Qw=!1,Vs=0,Bt=0,Ka=0,gc=0,Yw=0,ii=0,nu=0,Lf=null,fr=null,Jw=!1,Zw=0,Ig=1/0,Rg=null,Qa=null,bn=0,Ya=null,ru=null,iu=0,Xw=0,Ww=null,RS=null,jf=0,eb=null;function Pr(){if((ut&2)!==0&&Ze!==0)return Ze&-Ze;if(O.T!==null){var s=Vl;return s!==0?s:ob()}return Q2()}function BS(){ii===0&&(ii=(Ze&536870912)===0||at?Xo():536870912);var s=ri.current;return s!==null&&(s.flags|=32),ii}function Ur(s,o,l){(s===Et&&(ht===2||ht===9)||s.cancelPendingCommit!==null)&&(su(s,0),Ja(s,Ze,ii,!1)),rf(s,l),((ut&2)===0||s!==Et)&&(s===Et&&((ut&2)===0&&(gc|=l),Bt===4&&Ja(s,Ze,ii,!1)),rs(s))}function PS(s,o,l){if((ut&6)!==0)throw Error(r(327));var f=!l&&(o&124)===0&&(o&s.expiredLanes)===0||Rn(s,o),g=f?X6(s,o):rb(s,o,!0),m=f;do{if(g===0){tu&&!f&&Ja(s,o,0,!1);break}else{if(l=s.current.alternate,m&&!J6(l)){g=rb(s,o,!1),m=!1;continue}if(g===2){if(m=o,s.errorRecoveryDisabledLanes&m)var x=0;else x=s.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){o=x;e:{var R=s;g=Lf;var H=R.current.memoizedState.isDehydrated;if(H&&(su(R,x).flags|=256),x=rb(R,x,!1),x!==2){if(Qw&&!H){R.errorRecoveryDisabledLanes|=m,gc|=m,g=4;break e}m=fr,fr=g,m!==null&&(fr===null?fr=m:fr.push.apply(fr,m))}g=x}if(m=!1,g!==2)continue}}if(g===1){su(s,0),Ja(s,o,0,!0);break}e:{switch(f=s,m=g,m){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:Ja(f,o,ii,!Ga);break e;case 2:fr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(g=Zw+300-Vt(),10<g)){if(Ja(f,o,ii,!Ga),Gn(f,0,!0)!==0)break e;f.timeoutHandle=l3(US.bind(null,f,l,fr,Rg,Jw,o,ii,gc,nu,Ga,m,2,-0,0),g);break e}US(f,l,fr,Rg,Jw,o,ii,gc,nu,Ga,m,0,-0,0)}}break}while(!0);rs(s)}function US(s,o,l,f,g,m,x,R,H,ee,he,pe,se,ae){if(s.timeoutHandle=-1,pe=o.subtreeFlags,(pe&8192||(pe&16785408)===16785408)&&(Kf={stylesheets:null,count:0,unsuspend:IB},CS(o),pe=BB(),pe!==null)){s.cancelPendingCommit=pe(HS.bind(null,s,o,m,l,f,g,x,R,H,he,1,se,ae)),Ja(s,m,x,!ee);return}HS(s,o,m,l,f,g,x,R,H)}function J6(s){for(var o=s;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var f=0;f<l.length;f++){var g=l[f],m=g.getSnapshot;g=g.value;try{if(!_r(m(),g))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ja(s,o,l,f){o&=~Yw,o&=~gc,s.suspendedLanes|=o,s.pingedLanes&=~o,f&&(s.warmLanes|=o),f=s.expirationTimes;for(var g=o;0<g;){var m=31-He(g),x=1<<m;f[m]=-1,g&=~x}l!==0&&G2(s,l,o)}function Bg(){return(ut&6)===0?(zf(0),!1):!0}function tb(){if(Ge!==null){if(ht===0)var s=Ge.return;else s=Ge,$s=lc=null,ww(s),Zl=null,If=0,s=Ge;for(;s!==null;)pS(s.alternate,s),s=s.return;Ge=null}}function su(s,o){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,pB(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),tb(),Et=s,Ge=l=Ps(s.current,null),Ze=o,ht=0,Br=null,Ga=!1,tu=Rn(s,o),Qw=!1,nu=ii=Yw=gc=Ka=Bt=0,fr=Lf=null,Jw=!1,(o&8)!==0&&(o|=o&32);var f=s.entangledLanes;if(f!==0)for(s=s.entanglements,f&=o;0<f;){var g=31-He(f),m=1<<g;o|=s[g],f&=~m}return Vs=o,tg(),l}function MS(s,o){Fe=null,O.H=vg,o===Af||o===ug?(o=WA(),ht=3):o===JA?(o=WA(),ht=4):ht=o===eS?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Br=o,Ge===null&&(Bt=1,Og(s,Wr(o,s.current)))}function $S(){var s=O.H;return O.H=vg,s===null?vg:s}function kS(){var s=O.A;return O.A=Q6,s}function nb(){Bt=4,Ga||(Ze&4194048)!==Ze&&ri.current!==null||(tu=!0),(Ka&134217727)===0&&(gc&134217727)===0||Et===null||Ja(Et,Ze,ii,!1)}function rb(s,o,l){var f=ut;ut|=2;var g=$S(),m=kS();(Et!==s||Ze!==o)&&(Rg=null,su(s,o)),o=!1;var x=Bt;e:do try{if(ht!==0&&Ge!==null){var R=Ge,H=Br;switch(ht){case 8:tb(),x=6;break e;case 3:case 2:case 9:case 6:ri.current===null&&(o=!0);var ee=ht;if(ht=0,Br=null,au(s,R,H,ee),l&&tu){x=0;break e}break;default:ee=ht,ht=0,Br=null,au(s,R,H,ee)}}Z6(),x=Bt;break}catch(he){MS(s,he)}while(!0);return o&&s.shellSuspendCounter++,$s=lc=null,ut=f,O.H=g,O.A=m,Ge===null&&(Et=null,Ze=0,tg()),x}function Z6(){for(;Ge!==null;)LS(Ge)}function X6(s,o){var l=ut;ut|=2;var f=$S(),g=kS();Et!==s||Ze!==o?(Rg=null,Ig=Vt()+500,su(s,o)):tu=Rn(s,o);e:do try{if(ht!==0&&Ge!==null){o=Ge;var m=Br;t:switch(ht){case 1:ht=0,Br=null,au(s,o,m,1);break;case 2:case 9:if(ZA(m)){ht=0,Br=null,jS(o);break}o=function(){ht!==2&&ht!==9||Et!==s||(ht=7),rs(s)},m.then(o,o);break e;case 3:ht=7;break e;case 4:ht=5;break e;case 7:ZA(m)?(ht=0,Br=null,jS(o)):(ht=0,Br=null,au(s,o,m,7));break;case 5:var x=null;switch(Ge.tag){case 26:x=Ge.memoizedState;case 5:case 27:var R=Ge;if(!x||E3(x)){ht=0,Br=null;var H=R.sibling;if(H!==null)Ge=H;else{var ee=R.return;ee!==null?(Ge=ee,Pg(ee)):Ge=null}break t}}ht=0,Br=null,au(s,o,m,5);break;case 6:ht=0,Br=null,au(s,o,m,6);break;case 8:tb(),Bt=6;break e;default:throw Error(r(462))}}W6();break}catch(he){MS(s,he)}while(!0);return $s=lc=null,O.H=f,O.A=g,ut=l,Ge!==null?0:(Et=null,Ze=0,tg(),Bt)}function W6(){for(;Ge!==null&&!Ct();)LS(Ge)}function LS(s){var o=fS(s.alternate,s,Vs);s.memoizedProps=s.pendingProps,o===null?Pg(s):Ge=o}function jS(s){var o=s,l=o.alternate;switch(o.tag){case 15:case 0:o=aS(l,o,o.pendingProps,o.type,void 0,Ze);break;case 11:o=aS(l,o,o.pendingProps,o.type.render,o.ref,Ze);break;case 5:ww(o);default:pS(l,o),o=Ge=zA(o,Vs),o=fS(l,o,Vs)}s.memoizedProps=s.pendingProps,o===null?Pg(s):Ge=o}function au(s,o,l,f){$s=lc=null,ww(o),Zl=null,If=0;var g=o.return;try{if(H6(s,g,o,l,Ze)){Bt=1,Og(s,Wr(l,s.current)),Ge=null;return}}catch(m){if(g!==null)throw Ge=g,m;Bt=1,Og(s,Wr(l,s.current)),Ge=null;return}o.flags&32768?(at||f===1?s=!0:tu||(Ze&536870912)!==0?s=!1:(Ga=s=!0,(f===2||f===9||f===3||f===6)&&(f=ri.current,f!==null&&f.tag===13&&(f.flags|=16384))),zS(o,s)):Pg(o)}function Pg(s){var o=s;do{if((o.flags&32768)!==0){zS(o,Ga);return}s=o.return;var l=q6(o.alternate,o,Vs);if(l!==null){Ge=l;return}if(o=o.sibling,o!==null){Ge=o;return}Ge=o=s}while(o!==null);Bt===0&&(Bt=5)}function zS(s,o){do{var l=V6(s.alternate,s);if(l!==null){l.flags&=32767,Ge=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(s=s.sibling,s!==null)){Ge=s;return}Ge=s=l}while(s!==null);Bt=6,Ge=null}function HS(s,o,l,f,g,m,x,R,H){s.cancelPendingCommit=null;do Ug();while(bn!==0);if((ut&6)!==0)throw Error(r(327));if(o!==null){if(o===s.current)throw Error(r(177));if(m=o.lanes|o.childLanes,m|=K0,I4(s,l,m,x,R,H),s===Et&&(Ge=Et=null,Ze=0),ru=o,Ya=s,iu=l,Xw=m,Ww=g,RS=f,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,rB(Xt,function(){return KS(),null})):(s.callbackNode=null,s.callbackPriority=0),f=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||f){f=O.T,O.T=null,g=M.p,M.p=2,x=ut,ut|=4;try{G6(s,o,l)}finally{ut=x,M.p=g,O.T=f}}bn=1,FS(),qS(),VS()}}function FS(){if(bn===1){bn=0;var s=Ya,o=ru,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=O.T,O.T=null;var f=M.p;M.p=2;var g=ut;ut|=4;try{OS(o,s);var m=gb,x=IA(s.containerInfo),R=m.focusedElem,H=m.selectionRange;if(x!==R&&R&&R.ownerDocument&&NA(R.ownerDocument.documentElement,R)){if(H!==null&&H0(R)){var ee=H.start,he=H.end;if(he===void 0&&(he=ee),"selectionStart"in R)R.selectionStart=ee,R.selectionEnd=Math.min(he,R.value.length);else{var pe=R.ownerDocument||document,se=pe&&pe.defaultView||window;if(se.getSelection){var ae=se.getSelection(),Me=R.textContent.length,Re=Math.min(H.start,Me),yt=H.end===void 0?Re:Math.min(H.end,Me);!ae.extend&&Re>yt&&(x=yt,yt=Re,Re=x);var Y=_A(R,Re),K=_A(R,yt);if(Y&&K&&(ae.rangeCount!==1||ae.anchorNode!==Y.node||ae.anchorOffset!==Y.offset||ae.focusNode!==K.node||ae.focusOffset!==K.offset)){var W=pe.createRange();W.setStart(Y.node,Y.offset),ae.removeAllRanges(),Re>yt?(ae.addRange(W),ae.extend(K.node,K.offset)):(W.setEnd(K.node,K.offset),ae.addRange(W))}}}}for(pe=[],ae=R;ae=ae.parentNode;)ae.nodeType===1&&pe.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<pe.length;R++){var fe=pe[R];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}Kg=!!pb,gb=pb=null}finally{ut=g,M.p=f,O.T=l}}s.current=o,bn=2}}function qS(){if(bn===2){bn=0;var s=Ya,o=ru,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=O.T,O.T=null;var f=M.p;M.p=2;var g=ut;ut|=4;try{ES(s,o.alternate,o)}finally{ut=g,M.p=f,O.T=l}}bn=3}}function VS(){if(bn===4||bn===3){bn=0,qt();var s=Ya,o=ru,l=iu,f=RS;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?bn=5:(bn=0,ru=Ya=null,GS(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(Qa=null),E0(l),o=o.stateNode,Se&&typeof Se.onCommitFiberRoot=="function")try{Se.onCommitFiberRoot(we,o,void 0,(o.current.flags&128)===128)}catch{}if(f!==null){o=O.T,g=M.p,M.p=2,O.T=null;try{for(var m=s.onRecoverableError,x=0;x<f.length;x++){var R=f[x];m(R.value,{componentStack:R.stack})}}finally{O.T=o,M.p=g}}(iu&3)!==0&&Ug(),rs(s),g=s.pendingLanes,(l&4194090)!==0&&(g&42)!==0?s===eb?jf++:(jf=0,eb=s):jf=0,zf(0)}}function GS(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,vf(o)))}function Ug(s){return FS(),qS(),VS(),KS()}function KS(){if(bn!==5)return!1;var s=Ya,o=Xw;Xw=0;var l=E0(iu),f=O.T,g=M.p;try{M.p=32>l?32:l,O.T=null,l=Ww,Ww=null;var m=Ya,x=iu;if(bn=0,ru=Ya=null,iu=0,(ut&6)!==0)throw Error(r(331));var R=ut;if(ut|=4,NS(m.current),DS(m,m.current,x,l),ut=R,zf(0,!1),Se&&typeof Se.onPostCommitFiberRoot=="function")try{Se.onPostCommitFiberRoot(we,m)}catch{}return!0}finally{M.p=g,O.T=f,GS(s,o)}}function QS(s,o,l){o=Wr(l,o),o=Rw(s.stateNode,o,2),s=La(s,o,2),s!==null&&(rf(s,2),rs(s))}function wt(s,o,l){if(s.tag===3)QS(s,s,l);else for(;o!==null;){if(o.tag===3){QS(o,s,l);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Qa===null||!Qa.has(f))){s=Wr(l,s),l=Xx(2),f=La(o,l,2),f!==null&&(Wx(l,f,o,s),rf(f,2),rs(f));break}}o=o.return}}function ib(s,o,l){var f=s.pingCache;if(f===null){f=s.pingCache=new Y6;var g=new Set;f.set(o,g)}else g=f.get(o),g===void 0&&(g=new Set,f.set(o,g));g.has(l)||(Qw=!0,g.add(l),s=eB.bind(null,s,o,l),o.then(s,s))}function eB(s,o,l){var f=s.pingCache;f!==null&&f.delete(o),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,Et===s&&(Ze&l)===l&&(Bt===4||Bt===3&&(Ze&62914560)===Ze&&300>Vt()-Zw?(ut&2)===0&&su(s,0):Yw|=l,nu===Ze&&(nu=0)),rs(s)}function YS(s,o){o===0&&(o=Wo()),s=zl(s,o),s!==null&&(rf(s,o),rs(s))}function tB(s){var o=s.memoizedState,l=0;o!==null&&(l=o.retryLane),YS(s,l)}function nB(s,o){var l=0;switch(s.tag){case 13:var f=s.stateNode,g=s.memoizedState;g!==null&&(l=g.retryLane);break;case 19:f=s.stateNode;break;case 22:f=s.stateNode._retryCache;break;default:throw Error(r(314))}f!==null&&f.delete(o),YS(s,l)}function rB(s,o){return Qe(s,o)}var Mg=null,ou=null,sb=!1,$g=!1,ab=!1,yc=0;function rs(s){s!==ou&&s.next===null&&(ou===null?Mg=ou=s:ou=ou.next=s),$g=!0,sb||(sb=!0,sB())}function zf(s,o){if(!ab&&$g){ab=!0;do for(var l=!1,f=Mg;f!==null;){if(s!==0){var g=f.pendingLanes;if(g===0)var m=0;else{var x=f.suspendedLanes,R=f.pingedLanes;m=(1<<31-He(42|s)+1)-1,m&=g&~(x&~R),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(l=!0,WS(f,m))}else m=Ze,m=Gn(f,f===Et?m:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(m&3)===0||Rn(f,m)||(l=!0,WS(f,m));f=f.next}while(l);ab=!1}}function iB(){JS()}function JS(){$g=sb=!1;var s=0;yc!==0&&(dB()&&(s=yc),yc=0);for(var o=Vt(),l=null,f=Mg;f!==null;){var g=f.next,m=ZS(f,o);m===0?(f.next=null,l===null?Mg=g:l.next=g,g===null&&(ou=l)):(l=f,(s!==0||(m&3)!==0)&&($g=!0)),f=g}zf(s)}function ZS(s,o){for(var l=s.suspendedLanes,f=s.pingedLanes,g=s.expirationTimes,m=s.pendingLanes&-62914561;0<m;){var x=31-He(m),R=1<<x,H=g[x];H===-1?((R&l)===0||(R&f)!==0)&&(g[x]=Ci(R,o)):H<=o&&(s.expiredLanes|=R),m&=~R}if(o=Et,l=Ze,l=Gn(s,s===o?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),f=s.callbackNode,l===0||s===o&&(ht===2||ht===9)||s.cancelPendingCommit!==null)return f!==null&&f!==null&&st(f),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||Rn(s,l)){if(o=l&-l,o===s.callbackPriority)return o;switch(f!==null&&st(f),E0(l)){case 2:case 8:l=sr;break;case 32:l=Xt;break;case 268435456:l=Jr;break;default:l=Xt}return f=XS.bind(null,s),l=Qe(l,f),s.callbackPriority=o,s.callbackNode=l,o}return f!==null&&f!==null&&st(f),s.callbackPriority=2,s.callbackNode=null,2}function XS(s,o){if(bn!==0&&bn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Ug()&&s.callbackNode!==l)return null;var f=Ze;return f=Gn(s,s===Et?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),f===0?null:(PS(s,f,o),ZS(s,Vt()),s.callbackNode!=null&&s.callbackNode===l?XS.bind(null,s):null)}function WS(s,o){if(Ug())return null;PS(s,o,!0)}function sB(){gB(function(){(ut&6)!==0?Qe(mn,iB):JS()})}function ob(){return yc===0&&(yc=Xo()),yc}function e3(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Qp(""+s)}function t3(s,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,s.id&&l.setAttribute("form",s.id),o.parentNode.insertBefore(l,o),s=new FormData(s),l.parentNode.removeChild(l),s}function aB(s,o,l,f,g){if(o==="submit"&&l&&l.stateNode===g){var m=e3((g[cr]||null).action),x=f.submitter;x&&(o=(o=x[cr]||null)?e3(o.formAction):x.getAttribute("formAction"),o!==null&&(m=o,x=null));var R=new Xp("action","action",null,f,g);s.push({event:R,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(yc!==0){var H=x?t3(g,x):new FormData(g);Dw(l,{pending:!0,data:H,method:g.method,action:m},null,H)}}else typeof m=="function"&&(R.preventDefault(),H=x?t3(g,x):new FormData(g),Dw(l,{pending:!0,data:H,method:g.method,action:m},m,H))},currentTarget:g}]})}}for(var cb=0;cb<G0.length;cb++){var lb=G0[cb],oB=lb.toLowerCase(),cB=lb[0].toUpperCase()+lb.slice(1);_i(oB,"on"+cB)}_i(PA,"onAnimationEnd"),_i(UA,"onAnimationIteration"),_i(MA,"onAnimationStart"),_i("dblclick","onDoubleClick"),_i("focusin","onFocus"),_i("focusout","onBlur"),_i(O6,"onTransitionRun"),_i(T6,"onTransitionStart"),_i(D6,"onTransitionCancel"),_i($A,"onTransitionEnd"),Il("onMouseEnter",["mouseout","mouseover"]),Il("onMouseLeave",["mouseout","mouseover"]),Il("onPointerEnter",["pointerout","pointerover"]),Il("onPointerLeave",["pointerout","pointerover"]),ec("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ec("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ec("onBeforeInput",["compositionend","keypress","textInput","paste"]),ec("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ec("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ec("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lB=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hf));function n3(s,o){o=(o&4)!==0;for(var l=0;l<s.length;l++){var f=s[l],g=f.event;f=f.listeners;e:{var m=void 0;if(o)for(var x=f.length-1;0<=x;x--){var R=f[x],H=R.instance,ee=R.currentTarget;if(R=R.listener,H!==m&&g.isPropagationStopped())break e;m=R,g.currentTarget=ee;try{m(g)}catch(he){Sg(he)}g.currentTarget=null,m=H}else for(x=0;x<f.length;x++){if(R=f[x],H=R.instance,ee=R.currentTarget,R=R.listener,H!==m&&g.isPropagationStopped())break e;m=R,g.currentTarget=ee;try{m(g)}catch(he){Sg(he)}g.currentTarget=null,m=H}}}}function Ke(s,o){var l=o[A0];l===void 0&&(l=o[A0]=new Set);var f=s+"__bubble";l.has(f)||(r3(o,s,2,!1),l.add(f))}function ub(s,o,l){var f=0;o&&(f|=4),r3(l,s,f,o)}var kg="_reactListening"+Math.random().toString(36).slice(2);function hb(s){if(!s[kg]){s[kg]=!0,J2.forEach(function(l){l!=="selectionchange"&&(lB.has(l)||ub(l,!1,s),ub(l,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[kg]||(o[kg]=!0,ub("selectionchange",!1,o))}}function r3(s,o,l,f){switch(D3(o)){case 2:var g=MB;break;case 8:g=$B;break;default:g=Ob}l=g.bind(null,o,l,s),g=void 0,!B0||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),f?g!==void 0?s.addEventListener(o,l,{capture:!0,passive:g}):s.addEventListener(o,l,!0):g!==void 0?s.addEventListener(o,l,{passive:g}):s.addEventListener(o,l,!1)}function fb(s,o,l,f,g){var m=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var x=f.tag;if(x===3||x===4){var R=f.stateNode.containerInfo;if(R===g)break;if(x===4)for(x=f.return;x!==null;){var H=x.tag;if((H===3||H===4)&&x.stateNode.containerInfo===g)return;x=x.return}for(;R!==null;){if(x=Cl(R),x===null)return;if(H=x.tag,H===5||H===6||H===26||H===27){f=m=x;continue e}R=R.parentNode}}f=f.return}uA(function(){var ee=m,he=I0(l),pe=[];e:{var se=kA.get(s);if(se!==void 0){var ae=Xp,Me=s;switch(s){case"keypress":if(Jp(l)===0)break e;case"keydown":case"keyup":ae=r6;break;case"focusin":Me="focus",ae=$0;break;case"focusout":Me="blur",ae=$0;break;case"beforeblur":case"afterblur":ae=$0;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=dA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=V4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=a6;break;case PA:case UA:case MA:ae=Q4;break;case $A:ae=c6;break;case"scroll":case"scrollend":ae=F4;break;case"wheel":ae=u6;break;case"copy":case"cut":case"paste":ae=J4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=gA;break;case"toggle":case"beforetoggle":ae=f6}var Re=(o&4)!==0,yt=!Re&&(s==="scroll"||s==="scrollend"),Y=Re?se!==null?se+"Capture":null:se;Re=[];for(var K=ee,W;K!==null;){var fe=K;if(W=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||W===null||Y===null||(fe=of(K,Y),fe!=null&&Re.push(Ff(K,fe,W))),yt)break;K=K.return}0<Re.length&&(se=new ae(se,Me,null,l,he),pe.push({event:se,listeners:Re}))}}if((o&7)===0){e:{if(se=s==="mouseover"||s==="pointerover",ae=s==="mouseout"||s==="pointerout",se&&l!==N0&&(Me=l.relatedTarget||l.fromElement)&&(Cl(Me)||Me[Dl]))break e;if((ae||se)&&(se=he.window===he?he:(se=he.ownerDocument)?se.defaultView||se.parentWindow:window,ae?(Me=l.relatedTarget||l.toElement,ae=ee,Me=Me?Cl(Me):null,Me!==null&&(yt=a(Me),Re=Me.tag,Me!==yt||Re!==5&&Re!==27&&Re!==6)&&(Me=null)):(ae=null,Me=ee),ae!==Me)){if(Re=dA,fe="onMouseLeave",Y="onMouseEnter",K="mouse",(s==="pointerout"||s==="pointerover")&&(Re=gA,fe="onPointerLeave",Y="onPointerEnter",K="pointer"),yt=ae==null?se:af(ae),W=Me==null?se:af(Me),se=new Re(fe,K+"leave",ae,l,he),se.target=yt,se.relatedTarget=W,fe=null,Cl(he)===ee&&(Re=new Re(Y,K+"enter",Me,l,he),Re.target=W,Re.relatedTarget=yt,fe=Re),yt=fe,ae&&Me)t:{for(Re=ae,Y=Me,K=0,W=Re;W;W=cu(W))K++;for(W=0,fe=Y;fe;fe=cu(fe))W++;for(;0<K-W;)Re=cu(Re),K--;for(;0<W-K;)Y=cu(Y),W--;for(;K--;){if(Re===Y||Y!==null&&Re===Y.alternate)break t;Re=cu(Re),Y=cu(Y)}Re=null}else Re=null;ae!==null&&i3(pe,se,ae,Re,!1),Me!==null&&yt!==null&&i3(pe,yt,Me,Re,!0)}}e:{if(se=ee?af(ee):window,ae=se.nodeName&&se.nodeName.toLowerCase(),ae==="select"||ae==="input"&&se.type==="file")var De=xA;else if(EA(se))if(SA)De=A6;else{De=v6;var qe=b6}else ae=se.nodeName,!ae||ae.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?ee&&_0(ee.elementType)&&(De=xA):De=E6;if(De&&(De=De(s,ee))){AA(pe,De,l,he);break e}qe&&qe(s,se,ee),s==="focusout"&&ee&&se.type==="number"&&ee.memoizedProps.value!=null&&C0(se,"number",se.value)}switch(qe=ee?af(ee):window,s){case"focusin":(EA(qe)||qe.contentEditable==="true")&&(kl=qe,F0=ee,gf=null);break;case"focusout":gf=F0=kl=null;break;case"mousedown":q0=!0;break;case"contextmenu":case"mouseup":case"dragend":q0=!1,RA(pe,l,he);break;case"selectionchange":if(S6)break;case"keydown":case"keyup":RA(pe,l,he)}var Ie;if(L0)e:{switch(s){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else $l?bA(s,l)&&(Pe="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Pe="onCompositionStart");Pe&&(yA&&l.locale!=="ko"&&($l||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&$l&&(Ie=hA()):(Ua=he,P0="value"in Ua?Ua.value:Ua.textContent,$l=!0)),qe=Lg(ee,Pe),0<qe.length&&(Pe=new pA(Pe,s,null,l,he),pe.push({event:Pe,listeners:qe}),Ie?Pe.data=Ie:(Ie=vA(l),Ie!==null&&(Pe.data=Ie)))),(Ie=p6?g6(s,l):y6(s,l))&&(Pe=Lg(ee,"onBeforeInput"),0<Pe.length&&(qe=new pA("onBeforeInput","beforeinput",null,l,he),pe.push({event:qe,listeners:Pe}),qe.data=Ie)),aB(pe,s,ee,l,he)}n3(pe,o)})}function Ff(s,o,l){return{instance:s,listener:o,currentTarget:l}}function Lg(s,o){for(var l=o+"Capture",f=[];s!==null;){var g=s,m=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||m===null||(g=of(s,l),g!=null&&f.unshift(Ff(s,g,m)),g=of(s,o),g!=null&&f.push(Ff(s,g,m))),s.tag===3)return f;s=s.return}return[]}function cu(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function i3(s,o,l,f,g){for(var m=o._reactName,x=[];l!==null&&l!==f;){var R=l,H=R.alternate,ee=R.stateNode;if(R=R.tag,H!==null&&H===f)break;R!==5&&R!==26&&R!==27||ee===null||(H=ee,g?(ee=of(l,m),ee!=null&&x.unshift(Ff(l,ee,H))):g||(ee=of(l,m),ee!=null&&x.push(Ff(l,ee,H)))),l=l.return}x.length!==0&&s.push({event:o,listeners:x})}var uB=/\r\n?/g,hB=/\u0000|\uFFFD/g;function s3(s){return(typeof s=="string"?s:""+s).replace(uB,`
`).replace(hB,"")}function a3(s,o){return o=s3(o),s3(s)===o}function jg(){}function gt(s,o,l,f,g,m){switch(l){case"children":typeof f=="string"?o==="body"||o==="textarea"&&f===""||Pl(s,f):(typeof f=="number"||typeof f=="bigint")&&o!=="body"&&Pl(s,""+f);break;case"className":Vp(s,"class",f);break;case"tabIndex":Vp(s,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Vp(s,l,f);break;case"style":cA(s,f,m);break;case"data":if(o!=="object"){Vp(s,"data",f);break}case"src":case"href":if(f===""&&(o!=="a"||l!=="href")){s.removeAttribute(l);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){s.removeAttribute(l);break}f=Qp(""+f),s.setAttribute(l,f);break;case"action":case"formAction":if(typeof f=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(l==="formAction"?(o!=="input"&&gt(s,o,"name",g.name,g,null),gt(s,o,"formEncType",g.formEncType,g,null),gt(s,o,"formMethod",g.formMethod,g,null),gt(s,o,"formTarget",g.formTarget,g,null)):(gt(s,o,"encType",g.encType,g,null),gt(s,o,"method",g.method,g,null),gt(s,o,"target",g.target,g,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){s.removeAttribute(l);break}f=Qp(""+f),s.setAttribute(l,f);break;case"onClick":f!=null&&(s.onclick=jg);break;case"onScroll":f!=null&&Ke("scroll",s);break;case"onScrollEnd":f!=null&&Ke("scrollend",s);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(l=f.__html,l!=null){if(g.children!=null)throw Error(r(60));s.innerHTML=l}}break;case"multiple":s.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":s.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){s.removeAttribute("xlink:href");break}l=Qp(""+f),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(l,""+f):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":f===!0?s.setAttribute(l,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(l,f):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?s.setAttribute(l,f):s.removeAttribute(l);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?s.removeAttribute(l):s.setAttribute(l,f);break;case"popover":Ke("beforetoggle",s),Ke("toggle",s),qp(s,"popover",f);break;case"xlinkActuate":Rs(s,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Rs(s,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Rs(s,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Rs(s,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Rs(s,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Rs(s,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Rs(s,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Rs(s,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Rs(s,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":qp(s,"is",f);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=z4.get(l)||l,qp(s,l,f))}}function db(s,o,l,f,g,m){switch(l){case"style":cA(s,f,m);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(l=f.__html,l!=null){if(g.children!=null)throw Error(r(60));s.innerHTML=l}}break;case"children":typeof f=="string"?Pl(s,f):(typeof f=="number"||typeof f=="bigint")&&Pl(s,""+f);break;case"onScroll":f!=null&&Ke("scroll",s);break;case"onScrollEnd":f!=null&&Ke("scrollend",s);break;case"onClick":f!=null&&(s.onclick=jg);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Z2.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),o=l.slice(2,g?l.length-7:void 0),m=s[cr]||null,m=m!=null?m[l]:null,typeof m=="function"&&s.removeEventListener(o,m,g),typeof f=="function")){typeof m!="function"&&m!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(o,f,g);break e}l in s?s[l]=f:f===!0?s.setAttribute(l,""):qp(s,l,f)}}}function vn(s,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",s),Ke("load",s);var f=!1,g=!1,m;for(m in l)if(l.hasOwnProperty(m)){var x=l[m];if(x!=null)switch(m){case"src":f=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:gt(s,o,m,x,l,null)}}g&&gt(s,o,"srcSet",l.srcSet,l,null),f&&gt(s,o,"src",l.src,l,null);return;case"input":Ke("invalid",s);var R=m=x=g=null,H=null,ee=null;for(f in l)if(l.hasOwnProperty(f)){var he=l[f];if(he!=null)switch(f){case"name":g=he;break;case"type":x=he;break;case"checked":H=he;break;case"defaultChecked":ee=he;break;case"value":m=he;break;case"defaultValue":R=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(r(137,o));break;default:gt(s,o,f,he,l,null)}}iA(s,m,R,H,ee,x,g,!1),Gp(s);return;case"select":Ke("invalid",s),f=x=m=null;for(g in l)if(l.hasOwnProperty(g)&&(R=l[g],R!=null))switch(g){case"value":m=R;break;case"defaultValue":x=R;break;case"multiple":f=R;default:gt(s,o,g,R,l,null)}o=m,l=x,s.multiple=!!f,o!=null?Bl(s,!!f,o,!1):l!=null&&Bl(s,!!f,l,!0);return;case"textarea":Ke("invalid",s),m=g=f=null;for(x in l)if(l.hasOwnProperty(x)&&(R=l[x],R!=null))switch(x){case"value":f=R;break;case"defaultValue":g=R;break;case"children":m=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(91));break;default:gt(s,o,x,R,l,null)}aA(s,f,g,m),Gp(s);return;case"option":for(H in l)if(l.hasOwnProperty(H)&&(f=l[H],f!=null))switch(H){case"selected":s.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:gt(s,o,H,f,l,null)}return;case"dialog":Ke("beforetoggle",s),Ke("toggle",s),Ke("cancel",s),Ke("close",s);break;case"iframe":case"object":Ke("load",s);break;case"video":case"audio":for(f=0;f<Hf.length;f++)Ke(Hf[f],s);break;case"image":Ke("error",s),Ke("load",s);break;case"details":Ke("toggle",s);break;case"embed":case"source":case"link":Ke("error",s),Ke("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in l)if(l.hasOwnProperty(ee)&&(f=l[ee],f!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:gt(s,o,ee,f,l,null)}return;default:if(_0(o)){for(he in l)l.hasOwnProperty(he)&&(f=l[he],f!==void 0&&db(s,o,he,f,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(f=l[R],f!=null&&gt(s,o,R,f,l,null))}function fB(s,o,l,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,m=null,x=null,R=null,H=null,ee=null,he=null;for(ae in l){var pe=l[ae];if(l.hasOwnProperty(ae)&&pe!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":H=pe;default:f.hasOwnProperty(ae)||gt(s,o,ae,null,f,pe)}}for(var se in f){var ae=f[se];if(pe=l[se],f.hasOwnProperty(se)&&(ae!=null||pe!=null))switch(se){case"type":m=ae;break;case"name":g=ae;break;case"checked":ee=ae;break;case"defaultChecked":he=ae;break;case"value":x=ae;break;case"defaultValue":R=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,o));break;default:ae!==pe&&gt(s,o,se,ae,f,pe)}}D0(s,x,R,H,ee,he,m,g);return;case"select":ae=x=R=se=null;for(m in l)if(H=l[m],l.hasOwnProperty(m)&&H!=null)switch(m){case"value":break;case"multiple":ae=H;default:f.hasOwnProperty(m)||gt(s,o,m,null,f,H)}for(g in f)if(m=f[g],H=l[g],f.hasOwnProperty(g)&&(m!=null||H!=null))switch(g){case"value":se=m;break;case"defaultValue":R=m;break;case"multiple":x=m;default:m!==H&&gt(s,o,g,m,f,H)}o=R,l=x,f=ae,se!=null?Bl(s,!!l,se,!1):!!f!=!!l&&(o!=null?Bl(s,!!l,o,!0):Bl(s,!!l,l?[]:"",!1));return;case"textarea":ae=se=null;for(R in l)if(g=l[R],l.hasOwnProperty(R)&&g!=null&&!f.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:gt(s,o,R,null,f,g)}for(x in f)if(g=f[x],m=l[x],f.hasOwnProperty(x)&&(g!=null||m!=null))switch(x){case"value":se=g;break;case"defaultValue":ae=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==m&&gt(s,o,x,g,f,m)}sA(s,se,ae);return;case"option":for(var Me in l)if(se=l[Me],l.hasOwnProperty(Me)&&se!=null&&!f.hasOwnProperty(Me))switch(Me){case"selected":s.selected=!1;break;default:gt(s,o,Me,null,f,se)}for(H in f)if(se=f[H],ae=l[H],f.hasOwnProperty(H)&&se!==ae&&(se!=null||ae!=null))switch(H){case"selected":s.selected=se&&typeof se!="function"&&typeof se!="symbol";break;default:gt(s,o,H,se,f,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in l)se=l[Re],l.hasOwnProperty(Re)&&se!=null&&!f.hasOwnProperty(Re)&&gt(s,o,Re,null,f,se);for(ee in f)if(se=f[ee],ae=l[ee],f.hasOwnProperty(ee)&&se!==ae&&(se!=null||ae!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,o));break;default:gt(s,o,ee,se,f,ae)}return;default:if(_0(o)){for(var yt in l)se=l[yt],l.hasOwnProperty(yt)&&se!==void 0&&!f.hasOwnProperty(yt)&&db(s,o,yt,void 0,f,se);for(he in f)se=f[he],ae=l[he],!f.hasOwnProperty(he)||se===ae||se===void 0&&ae===void 0||db(s,o,he,se,f,ae);return}}for(var Y in l)se=l[Y],l.hasOwnProperty(Y)&&se!=null&&!f.hasOwnProperty(Y)&&gt(s,o,Y,null,f,se);for(pe in f)se=f[pe],ae=l[pe],!f.hasOwnProperty(pe)||se===ae||se==null&&ae==null||gt(s,o,pe,se,f,ae)}var pb=null,gb=null;function zg(s){return s.nodeType===9?s:s.ownerDocument}function o3(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function c3(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function yb(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var mb=null;function dB(){var s=window.event;return s&&s.type==="popstate"?s===mb?!1:(mb=s,!0):(mb=null,!1)}var l3=typeof setTimeout=="function"?setTimeout:void 0,pB=typeof clearTimeout=="function"?clearTimeout:void 0,u3=typeof Promise=="function"?Promise:void 0,gB=typeof queueMicrotask=="function"?queueMicrotask:typeof u3<"u"?function(s){return u3.resolve(null).then(s).catch(yB)}:l3;function yB(s){setTimeout(function(){throw s})}function Za(s){return s==="head"}function h3(s,o){var l=o,f=0,g=0;do{var m=l.nextSibling;if(s.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"){if(0<f&&8>f){l=f;var x=s.ownerDocument;if(l&1&&qf(x.documentElement),l&2&&qf(x.body),l&4)for(l=x.head,qf(l),x=l.firstChild;x;){var R=x.nextSibling,H=x.nodeName;x[sf]||H==="SCRIPT"||H==="STYLE"||H==="LINK"&&x.rel.toLowerCase()==="stylesheet"||l.removeChild(x),x=R}}if(g===0){s.removeChild(m),Xf(o);return}g--}else l==="$"||l==="$?"||l==="$!"?g++:f=l.charCodeAt(0)-48;else f=0;l=m}while(l);Xf(o)}function wb(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":wb(l),x0(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function mB(s,o,l,f){for(;s.nodeType===1;){var g=l;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!f&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(f){if(!s[sf])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(m=s.getAttribute("rel"),m==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(m!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(m=s.getAttribute("src"),(m!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&m&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var m=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===m)return s}else return s;if(s=Ii(s.nextSibling),s===null)break}return null}function wB(s,o,l){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Ii(s.nextSibling),s===null))return null;return s}function bb(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function bB(s,o){var l=s.ownerDocument;if(s.data!=="$?"||l.readyState==="complete")o();else{var f=function(){o(),l.removeEventListener("DOMContentLoaded",f)};l.addEventListener("DOMContentLoaded",f),s._reactRetry=f}}function Ii(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return s}var vb=null;function f3(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return s;o--}else l==="/$"&&o++}s=s.previousSibling}return null}function d3(s,o,l){switch(o=zg(l),s){case"html":if(s=o.documentElement,!s)throw Error(r(452));return s;case"head":if(s=o.head,!s)throw Error(r(453));return s;case"body":if(s=o.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function qf(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);x0(s)}var si=new Map,p3=new Set;function Hg(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Gs=M.d;M.d={f:vB,r:EB,D:AB,C:xB,L:SB,m:OB,X:DB,S:TB,M:CB};function vB(){var s=Gs.f(),o=Bg();return s||o}function EB(s){var o=_l(s);o!==null&&o.tag===5&&o.type==="form"?Px(o):Gs.r(s)}var lu=typeof document>"u"?null:document;function g3(s,o,l){var f=lu;if(f&&typeof o=="string"&&o){var g=Xr(o);g='link[rel="'+s+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),p3.has(g)||(p3.add(g),s={rel:s,crossOrigin:l,href:o},f.querySelector(g)===null&&(o=f.createElement("link"),vn(o,"link",s),on(o),f.head.appendChild(o)))}}function AB(s){Gs.D(s),g3("dns-prefetch",s,null)}function xB(s,o){Gs.C(s,o),g3("preconnect",s,o)}function SB(s,o,l){Gs.L(s,o,l);var f=lu;if(f&&s&&o){var g='link[rel="preload"][as="'+Xr(o)+'"]';o==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+Xr(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+Xr(l.imageSizes)+'"]')):g+='[href="'+Xr(s)+'"]';var m=g;switch(o){case"style":m=uu(s);break;case"script":m=hu(s)}si.has(m)||(s=p({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:s,as:o},l),si.set(m,s),f.querySelector(g)!==null||o==="style"&&f.querySelector(Vf(m))||o==="script"&&f.querySelector(Gf(m))||(o=f.createElement("link"),vn(o,"link",s),on(o),f.head.appendChild(o)))}}function OB(s,o){Gs.m(s,o);var l=lu;if(l&&s){var f=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+Xr(f)+'"][href="'+Xr(s)+'"]',m=g;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=hu(s)}if(!si.has(m)&&(s=p({rel:"modulepreload",href:s},o),si.set(m,s),l.querySelector(g)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Gf(m)))return}f=l.createElement("link"),vn(f,"link",s),on(f),l.head.appendChild(f)}}}function TB(s,o,l){Gs.S(s,o,l);var f=lu;if(f&&s){var g=Nl(f).hoistableStyles,m=uu(s);o=o||"default";var x=g.get(m);if(!x){var R={loading:0,preload:null};if(x=f.querySelector(Vf(m)))R.loading=5;else{s=p({rel:"stylesheet",href:s,"data-precedence":o},l),(l=si.get(m))&&Eb(s,l);var H=x=f.createElement("link");on(H),vn(H,"link",s),H._p=new Promise(function(ee,he){H.onload=ee,H.onerror=he}),H.addEventListener("load",function(){R.loading|=1}),H.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Fg(x,o,f)}x={type:"stylesheet",instance:x,count:1,state:R},g.set(m,x)}}}function DB(s,o){Gs.X(s,o);var l=lu;if(l&&s){var f=Nl(l).hoistableScripts,g=hu(s),m=f.get(g);m||(m=l.querySelector(Gf(g)),m||(s=p({src:s,async:!0},o),(o=si.get(g))&&Ab(s,o),m=l.createElement("script"),on(m),vn(m,"link",s),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},f.set(g,m))}}function CB(s,o){Gs.M(s,o);var l=lu;if(l&&s){var f=Nl(l).hoistableScripts,g=hu(s),m=f.get(g);m||(m=l.querySelector(Gf(g)),m||(s=p({src:s,async:!0,type:"module"},o),(o=si.get(g))&&Ab(s,o),m=l.createElement("script"),on(m),vn(m,"link",s),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},f.set(g,m))}}function y3(s,o,l,f){var g=(g=le.current)?Hg(g):null;if(!g)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=uu(l.href),l=Nl(g).hoistableStyles,f=l.get(o),f||(f={type:"style",instance:null,count:0,state:null},l.set(o,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=uu(l.href);var m=Nl(g).hoistableStyles,x=m.get(s);if(x||(g=g.ownerDocument||g,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(s,x),(m=g.querySelector(Vf(s)))&&!m._p&&(x.instance=m,x.state.loading=5),si.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},si.set(s,l),m||_B(g,s,l,x.state))),o&&f===null)throw Error(r(528,""));return x}if(o&&f!==null)throw Error(r(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=hu(l),l=Nl(g).hoistableScripts,f=l.get(o),f||(f={type:"script",instance:null,count:0,state:null},l.set(o,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function uu(s){return'href="'+Xr(s)+'"'}function Vf(s){return'link[rel="stylesheet"]['+s+"]"}function m3(s){return p({},s,{"data-precedence":s.precedence,precedence:null})}function _B(s,o,l,f){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?f.loading=1:(o=s.createElement("link"),f.preload=o,o.addEventListener("load",function(){return f.loading|=1}),o.addEventListener("error",function(){return f.loading|=2}),vn(o,"link",l),on(o),s.head.appendChild(o))}function hu(s){return'[src="'+Xr(s)+'"]'}function Gf(s){return"script[async]"+s}function w3(s,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var f=s.querySelector('style[data-href~="'+Xr(l.href)+'"]');if(f)return o.instance=f,on(f),f;var g=p({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return f=(s.ownerDocument||s).createElement("style"),on(f),vn(f,"style",g),Fg(f,l.precedence,s),o.instance=f;case"stylesheet":g=uu(l.href);var m=s.querySelector(Vf(g));if(m)return o.state.loading|=4,o.instance=m,on(m),m;f=m3(l),(g=si.get(g))&&Eb(f,g),m=(s.ownerDocument||s).createElement("link"),on(m);var x=m;return x._p=new Promise(function(R,H){x.onload=R,x.onerror=H}),vn(m,"link",f),o.state.loading|=4,Fg(m,l.precedence,s),o.instance=m;case"script":return m=hu(l.src),(g=s.querySelector(Gf(m)))?(o.instance=g,on(g),g):(f=l,(g=si.get(m))&&(f=p({},l),Ab(f,g)),s=s.ownerDocument||s,g=s.createElement("script"),on(g),vn(g,"link",f),s.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(f=o.instance,o.state.loading|=4,Fg(f,l.precedence,s));return o.instance}function Fg(s,o,l){for(var f=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=f.length?f[f.length-1]:null,m=g,x=0;x<f.length;x++){var R=f[x];if(R.dataset.precedence===o)m=R;else if(m!==g)break}m?m.parentNode.insertBefore(s,m.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(s,o.firstChild))}function Eb(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function Ab(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var qg=null;function b3(s,o,l){if(qg===null){var f=new Map,g=qg=new Map;g.set(l,f)}else g=qg,f=g.get(l),f||(f=new Map,g.set(l,f));if(f.has(s))return f;for(f.set(s,null),l=l.getElementsByTagName(s),g=0;g<l.length;g++){var m=l[g];if(!(m[sf]||m[Bn]||s==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var x=m.getAttribute(o)||"";x=s+x;var R=f.get(x);R?R.push(m):f.set(x,[m])}}return f}function v3(s,o,l){s=s.ownerDocument||s,s.head.insertBefore(l,o==="title"?s.querySelector("head > title"):null)}function NB(s,o,l){if(l===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function E3(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Kf=null;function IB(){}function RB(s,o,l){if(Kf===null)throw Error(r(475));var f=Kf;if(o.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var g=uu(l.href),m=s.querySelector(Vf(g));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(f.count++,f=Vg.bind(f),s.then(f,f)),o.state.loading|=4,o.instance=m,on(m);return}m=s.ownerDocument||s,l=m3(l),(g=si.get(g))&&Eb(l,g),m=m.createElement("link"),on(m);var x=m;x._p=new Promise(function(R,H){x.onload=R,x.onerror=H}),vn(m,"link",l),o.instance=m}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(f.count++,o=Vg.bind(f),s.addEventListener("load",o),s.addEventListener("error",o))}}function BB(){if(Kf===null)throw Error(r(475));var s=Kf;return s.stylesheets&&s.count===0&&xb(s,s.stylesheets),0<s.count?function(o){var l=setTimeout(function(){if(s.stylesheets&&xb(s,s.stylesheets),s.unsuspend){var f=s.unsuspend;s.unsuspend=null,f()}},6e4);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(l)}}:null}function Vg(){if(this.count--,this.count===0){if(this.stylesheets)xb(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Gg=null;function xb(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Gg=new Map,o.forEach(PB,s),Gg=null,Vg.call(s))}function PB(s,o){if(!(o.state.loading&4)){var l=Gg.get(s);if(l)var f=l.get(null);else{l=new Map,Gg.set(s,l);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<g.length;m++){var x=g[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(l.set(x.dataset.precedence,x),f=x)}f&&l.set(null,f)}g=o.instance,x=g.getAttribute("data-precedence"),m=l.get(x)||f,m===f&&l.set(null,g),l.set(x,g),this.count++,f=Vg.bind(this),g.addEventListener("load",f),g.addEventListener("error",f),m?m.parentNode.insertBefore(g,m.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),o.state.loading|=4}}var Qf={$$typeof:D,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function UB(s,o,l,f,g,m,x,R){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ba(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ba(0),this.hiddenUpdates=Ba(null),this.identifierPrefix=f,this.onUncaughtError=g,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function A3(s,o,l,f,g,m,x,R,H,ee,he,pe){return s=new UB(s,o,l,x,R,H,ee,pe),o=1,m===!0&&(o|=24),m=Nr(3,null,null,o),s.current=m,m.stateNode=s,o=iw(),o.refCount++,s.pooledCache=o,o.refCount++,m.memoizedState={element:f,isDehydrated:l,cache:o},cw(m),s}function x3(s){return s?(s=Hl,s):Hl}function S3(s,o,l,f,g,m){g=x3(g),f.context===null?f.context=g:f.pendingContext=g,f=ka(o),f.payload={element:l},m=m===void 0?null:m,m!==null&&(f.callback=m),l=La(s,f,o),l!==null&&(Ur(l,s,o),Sf(l,s,o))}function O3(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<o?l:o}}function Sb(s,o){O3(s,o),(s=s.alternate)&&O3(s,o)}function T3(s){if(s.tag===13){var o=zl(s,67108864);o!==null&&Ur(o,s,67108864),Sb(s,67108864)}}var Kg=!0;function MB(s,o,l,f){var g=O.T;O.T=null;var m=M.p;try{M.p=2,Ob(s,o,l,f)}finally{M.p=m,O.T=g}}function $B(s,o,l,f){var g=O.T;O.T=null;var m=M.p;try{M.p=8,Ob(s,o,l,f)}finally{M.p=m,O.T=g}}function Ob(s,o,l,f){if(Kg){var g=Tb(f);if(g===null)fb(s,o,f,Qg,l),C3(s,f);else if(LB(g,s,o,l,f))f.stopPropagation();else if(C3(s,f),o&4&&-1<kB.indexOf(s)){for(;g!==null;){var m=_l(g);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=an(m.pendingLanes);if(x!==0){var R=m;for(R.pendingLanes|=2,R.entangledLanes|=2;x;){var H=1<<31-He(x);R.entanglements[1]|=H,x&=~H}rs(m),(ut&6)===0&&(Ig=Vt()+500,zf(0))}}break;case 13:R=zl(m,2),R!==null&&Ur(R,m,2),Bg(),Sb(m,2)}if(m=Tb(f),m===null&&fb(s,o,f,Qg,l),m===g)break;g=m}g!==null&&f.stopPropagation()}else fb(s,o,f,null,l)}}function Tb(s){return s=I0(s),Db(s)}var Qg=null;function Db(s){if(Qg=null,s=Cl(s),s!==null){var o=a(s);if(o===null)s=null;else{var l=o.tag;if(l===13){if(s=c(o),s!==null)return s;s=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return Qg=s,null}function D3(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Di()){case mn:return 2;case sr:return 8;case Xt:case Vn:return 32;case Jr:return 268435456;default:return 32}default:return 32}}var Cb=!1,Xa=null,Wa=null,eo=null,Yf=new Map,Jf=new Map,to=[],kB="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function C3(s,o){switch(s){case"focusin":case"focusout":Xa=null;break;case"dragenter":case"dragleave":Wa=null;break;case"mouseover":case"mouseout":eo=null;break;case"pointerover":case"pointerout":Yf.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jf.delete(o.pointerId)}}function Zf(s,o,l,f,g,m){return s===null||s.nativeEvent!==m?(s={blockedOn:o,domEventName:l,eventSystemFlags:f,nativeEvent:m,targetContainers:[g]},o!==null&&(o=_l(o),o!==null&&T3(o)),s):(s.eventSystemFlags|=f,o=s.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),s)}function LB(s,o,l,f,g){switch(o){case"focusin":return Xa=Zf(Xa,s,o,l,f,g),!0;case"dragenter":return Wa=Zf(Wa,s,o,l,f,g),!0;case"mouseover":return eo=Zf(eo,s,o,l,f,g),!0;case"pointerover":var m=g.pointerId;return Yf.set(m,Zf(Yf.get(m)||null,s,o,l,f,g)),!0;case"gotpointercapture":return m=g.pointerId,Jf.set(m,Zf(Jf.get(m)||null,s,o,l,f,g)),!0}return!1}function _3(s){var o=Cl(s.target);if(o!==null){var l=a(o);if(l!==null){if(o=l.tag,o===13){if(o=c(l),o!==null){s.blockedOn=o,R4(s.priority,function(){if(l.tag===13){var f=Pr();f=v0(f);var g=zl(l,f);g!==null&&Ur(g,l,f),Sb(l,f)}});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Yg(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var l=Tb(s.nativeEvent);if(l===null){l=s.nativeEvent;var f=new l.constructor(l.type,l);N0=f,l.target.dispatchEvent(f),N0=null}else return o=_l(l),o!==null&&T3(o),s.blockedOn=l,!1;o.shift()}return!0}function N3(s,o,l){Yg(s)&&l.delete(o)}function jB(){Cb=!1,Xa!==null&&Yg(Xa)&&(Xa=null),Wa!==null&&Yg(Wa)&&(Wa=null),eo!==null&&Yg(eo)&&(eo=null),Yf.forEach(N3),Jf.forEach(N3)}function Jg(s,o){s.blockedOn===o&&(s.blockedOn=null,Cb||(Cb=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,jB)))}var Zg=null;function I3(s){Zg!==s&&(Zg=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Zg===s&&(Zg=null);for(var o=0;o<s.length;o+=3){var l=s[o],f=s[o+1],g=s[o+2];if(typeof f!="function"){if(Db(f||l)===null)continue;break}var m=_l(l);m!==null&&(s.splice(o,3),o-=3,Dw(m,{pending:!0,data:g,method:l.method,action:f},f,g))}}))}function Xf(s){function o(H){return Jg(H,s)}Xa!==null&&Jg(Xa,s),Wa!==null&&Jg(Wa,s),eo!==null&&Jg(eo,s),Yf.forEach(o),Jf.forEach(o);for(var l=0;l<to.length;l++){var f=to[l];f.blockedOn===s&&(f.blockedOn=null)}for(;0<to.length&&(l=to[0],l.blockedOn===null);)_3(l),l.blockedOn===null&&to.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(f=0;f<l.length;f+=3){var g=l[f],m=l[f+1],x=g[cr]||null;if(typeof m=="function")x||I3(l);else if(x){var R=null;if(m&&m.hasAttribute("formAction")){if(g=m,x=m[cr]||null)R=x.formAction;else if(Db(g)!==null)continue}else R=x.action;typeof R=="function"?l[f+1]=R:(l.splice(f,3),f-=3),I3(l)}}}function _b(s){this._internalRoot=s}Xg.prototype.render=_b.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(r(409));var l=o.current,f=Pr();S3(l,f,s,o,null,null)},Xg.prototype.unmount=_b.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;S3(s.current,2,null,s,null,null),Bg(),o[Dl]=null}};function Xg(s){this._internalRoot=s}Xg.prototype.unstable_scheduleHydration=function(s){if(s){var o=Q2();s={blockedOn:null,target:s,priority:o};for(var l=0;l<to.length&&o!==0&&o<to[l].priority;l++);to.splice(l,0,s),l===0&&_3(s)}};var R3=e.version;if(R3!=="19.1.0")throw Error(r(527,R3,"19.1.0"));M.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=h(o),s=s!==null?d(s):null,s=s===null?null:s.stateNode,s};var zB={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wg.isDisabled&&Wg.supportsFiber)try{we=Wg.inject(zB),Se=Wg}catch{}}return td.createRoot=function(s,o){if(!i(s))throw Error(r(299));var l=!1,f="",g=Qx,m=Yx,x=Jx,R=null;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(m=o.onCaughtError),o.onRecoverableError!==void 0&&(x=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(R=o.unstable_transitionCallbacks)),o=A3(s,1,!1,null,null,l,f,g,m,x,R,null),s[Dl]=o.current,hb(s),new _b(o)},td.hydrateRoot=function(s,o,l){if(!i(s))throw Error(r(299));var f=!1,g="",m=Qx,x=Yx,R=Jx,H=null,ee=null;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(m=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(H=l.unstable_transitionCallbacks),l.formState!==void 0&&(ee=l.formState)),o=A3(s,1,!0,o,l??null,f,g,m,x,R,H,ee),o.context=x3(null),l=o.current,f=Pr(),f=v0(f),g=ka(f),g.callback=null,La(l,g,f),l=f,o.current.lanes=l,rf(o,l),rs(o),s[Dl]=o.current,hb(s),new Xg(o)},td.version="19.1.0",td}var F3;function eP(){if(F3)return Bb.exports;F3=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Bb.exports=WB(),Bb.exports}var tP=eP();const nP=xp(tP);var nd={},q3;function rP(){if(q3)return nd;q3=1,Object.defineProperty(nd,"__esModule",{value:!0}),nd.parse=c,nd.serialize=d;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,a=(()=>{const w=function(){};return w.prototype=Object.create(null),w})();function c(w,v){const b=new a,E=w.length;if(E<2)return b;const A=(v==null?void 0:v.decode)||p;let S=0;do{const B=w.indexOf("=",S);if(B===-1)break;const D=w.indexOf(";",S),U=D===-1?E:D;if(B>U){S=w.lastIndexOf(";",B-1)+1;continue}const I=u(w,S,B),N=h(w,B,I),k=w.slice(I,N);if(b[k]===void 0){let $=u(w,B+1,U),P=h(w,U,$);const L=A(w.slice($,P));b[k]=L}S=U+1}while(S<E);return b}function u(w,v,b){do{const E=w.charCodeAt(v);if(E!==32&&E!==9)return v}while(++v<b);return b}function h(w,v,b){for(;v>b;){const E=w.charCodeAt(--v);if(E!==32&&E!==9)return v+1}return b}function d(w,v,b){const E=(b==null?void 0:b.encode)||encodeURIComponent;if(!n.test(w))throw new TypeError(`argument name is invalid: ${w}`);const A=E(v);if(!e.test(A))throw new TypeError(`argument val is invalid: ${v}`);let S=w+"="+A;if(!b)return S;if(b.maxAge!==void 0){if(!Number.isInteger(b.maxAge))throw new TypeError(`option maxAge is invalid: ${b.maxAge}`);S+="; Max-Age="+b.maxAge}if(b.domain){if(!t.test(b.domain))throw new TypeError(`option domain is invalid: ${b.domain}`);S+="; Domain="+b.domain}if(b.path){if(!r.test(b.path))throw new TypeError(`option path is invalid: ${b.path}`);S+="; Path="+b.path}if(b.expires){if(!y(b.expires)||!Number.isFinite(b.expires.valueOf()))throw new TypeError(`option expires is invalid: ${b.expires}`);S+="; Expires="+b.expires.toUTCString()}if(b.httpOnly&&(S+="; HttpOnly"),b.secure&&(S+="; Secure"),b.partitioned&&(S+="; Partitioned"),b.priority)switch(typeof b.priority=="string"?b.priority.toLowerCase():void 0){case"low":S+="; Priority=Low";break;case"medium":S+="; Priority=Medium";break;case"high":S+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${b.priority}`)}if(b.sameSite)switch(typeof b.sameSite=="string"?b.sameSite.toLowerCase():b.sameSite){case!0:case"strict":S+="; SameSite=Strict";break;case"lax":S+="; SameSite=Lax";break;case"none":S+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${b.sameSite}`)}return S}function p(w){if(w.indexOf("%")===-1)return w;try{return decodeURIComponent(w)}catch{return w}}function y(w){return i.call(w)==="[object Date]"}return nd}rP();var V3="popstate";function iP(n={}){function e(r,i){let{pathname:a,search:c,hash:u}=r.location;return tv("",{pathname:a,search:c,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Vd(i)}return aP(e,t,null,n)}function It(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function _s(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sP(){return Math.random().toString(36).substring(2,10)}function G3(n,e){return{usr:n.state,key:n.key,idx:e}}function tv(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Kh(e):e,state:t,key:e&&e.key||r||sP()}}function Vd({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Kh(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function aP(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,c=i.history,u="POP",h=null,d=p();d==null&&(d=0,c.replaceState({...c.state,idx:d},""));function p(){return(c.state||{idx:null}).idx}function y(){u="POP";let A=p(),S=A==null?null:A-d;d=A,h&&h({action:u,location:E.location,delta:S})}function w(A,S){u="PUSH";let B=tv(E.location,A,S);d=p()+1;let D=G3(B,d),U=E.createHref(B);try{c.pushState(D,"",U)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;i.location.assign(U)}a&&h&&h({action:u,location:E.location,delta:1})}function v(A,S){u="REPLACE";let B=tv(E.location,A,S);d=p();let D=G3(B,d),U=E.createHref(B);c.replaceState(D,"",U),a&&h&&h({action:u,location:E.location,delta:0})}function b(A){let S=i.location.origin!=="null"?i.location.origin:i.location.href,B=typeof A=="string"?A:Vd(A);return B=B.replace(/ $/,"%20"),It(S,`No window.location.(origin|href) available to create URL for href: ${B}`),new URL(B,S)}let E={get action(){return u},get location(){return n(i,c)},listen(A){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(V3,y),h=A,()=>{i.removeEventListener(V3,y),h=null}},createHref(A){return e(i,A)},createURL:b,encodeLocation(A){let S=b(A);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:w,replace:v,go(A){return c.go(A)}};return E}function CC(n,e,t="/"){return oP(n,e,t,!1)}function oP(n,e,t,r){let i=typeof e=="string"?Kh(e):e,a=Oa(i.pathname||"/",t);if(a==null)return null;let c=_C(n);cP(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let d=bP(a);u=mP(c[h],d,r)}return u}function _C(n,e=[],t=[],r=""){let i=(a,c,u)=>{let h={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};h.relativePath.startsWith("/")&&(It(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length));let d=Ea([r,h.relativePath]),p=t.concat(h);a.children&&a.children.length>0&&(It(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),_C(a.children,e,p,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:gP(d,a.index),routesMeta:p})};return n.forEach((a,c)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))i(a,c);else for(let h of NC(a.path))i(a,c,h)}),e}function NC(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let c=NC(r.join("/")),u=[];return u.push(...c.map(h=>h===""?a:[a,h].join("/"))),i&&u.push(...c),u.map(h=>n.startsWith("/")&&h===""?"/":h)}function cP(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:yP(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var lP=/^:[\w-]+$/,uP=3,hP=2,fP=1,dP=10,pP=-2,K3=n=>n==="*";function gP(n,e){let t=n.split("/"),r=t.length;return t.some(K3)&&(r+=pP),e&&(r+=hP),t.filter(i=>!K3(i)).reduce((i,a)=>i+(lP.test(a)?uP:a===""?fP:dP),r)}function yP(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function mP(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",c=[];for(let u=0;u<r.length;++u){let h=r[u],d=u===r.length-1,p=a==="/"?e:e.slice(a.length)||"/",y=Zy({path:h.relativePath,caseSensitive:h.caseSensitive,end:d},p),w=h.route;if(!y&&d&&t&&!r[r.length-1].route.index&&(y=Zy({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!y)return null;Object.assign(i,y.params),c.push({params:i,pathname:Ea([a,y.pathname]),pathnameBase:xP(Ea([a,y.pathnameBase])),route:w}),y.pathnameBase!=="/"&&(a=Ea([a,y.pathnameBase]))}return c}function Zy(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=wP(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],c=a.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((d,{paramName:p,isOptional:y},w)=>{if(p==="*"){let b=u[w]||"";c=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const v=u[w];return y&&!v?d[p]=void 0:d[p]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:c,pattern:n}}function wP(n,e=!1,t=!0){_s(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(r.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function bP(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _s(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Oa(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function vP(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Kh(n):n;return{pathname:t?t.startsWith("/")?t:EP(t,e):e,search:SP(r),hash:OP(i)}}function EP(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function $b(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function AP(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function IC(n){let e=AP(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function RC(n,e,t,r=!1){let i;typeof n=="string"?i=Kh(n):(i={...n},It(!i.pathname||!i.pathname.includes("?"),$b("?","pathname","search",i)),It(!i.pathname||!i.pathname.includes("#"),$b("#","pathname","hash",i)),It(!i.search||!i.search.includes("#"),$b("#","search","hash",i)));let a=n===""||i.pathname==="",c=a?"/":i.pathname,u;if(c==null)u=t;else{let y=e.length-1;if(!r&&c.startsWith("..")){let w=c.split("/");for(;w[0]==="..";)w.shift(),y-=1;i.pathname=w.join("/")}u=y>=0?e[y]:"/"}let h=vP(i,u),d=c&&c!=="/"&&c.endsWith("/"),p=(a||c===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(d||p)&&(h.pathname+="/"),h}var Ea=n=>n.join("/").replace(/\/\/+/g,"/"),xP=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),SP=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,OP=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function TP(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var BC=["POST","PUT","PATCH","DELETE"];new Set(BC);var DP=["GET",...BC];new Set(DP);var Qh=oe.createContext(null);Qh.displayName="DataRouter";var km=oe.createContext(null);km.displayName="DataRouterState";var PC=oe.createContext({isTransitioning:!1});PC.displayName="ViewTransition";var CP=oe.createContext(new Map);CP.displayName="Fetchers";var _P=oe.createContext(null);_P.displayName="Await";var Is=oe.createContext(null);Is.displayName="Navigation";var Sp=oe.createContext(null);Sp.displayName="Location";var Na=oe.createContext({outlet:null,matches:[],isDataRoute:!1});Na.displayName="Route";var kE=oe.createContext(null);kE.displayName="RouteError";function NP(n,{relative:e}={}){It(Op(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=oe.useContext(Is),{hash:i,pathname:a,search:c}=Tp(n,{relative:e}),u=a;return t!=="/"&&(u=a==="/"?t:Ea([t,a])),r.createHref({pathname:u,search:c,hash:i})}function Op(){return oe.useContext(Sp)!=null}function vl(){return It(Op(),"useLocation() may be used only in the context of a <Router> component."),oe.useContext(Sp).location}var UC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function MC(n){oe.useContext(Is).static||oe.useLayoutEffect(n)}function IP(){let{isDataRoute:n}=oe.useContext(Na);return n?qP():RP()}function RP(){It(Op(),"useNavigate() may be used only in the context of a <Router> component.");let n=oe.useContext(Qh),{basename:e,navigator:t}=oe.useContext(Is),{matches:r}=oe.useContext(Na),{pathname:i}=vl(),a=JSON.stringify(IC(r)),c=oe.useRef(!1);return MC(()=>{c.current=!0}),oe.useCallback((h,d={})=>{if(_s(c.current,UC),!c.current)return;if(typeof h=="number"){t.go(h);return}let p=RC(h,JSON.parse(a),i,d.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Ea([e,p.pathname])),(d.replace?t.replace:t.push)(p,d.state,d)},[e,t,a,i,n])}oe.createContext(null);function Tp(n,{relative:e}={}){let{matches:t}=oe.useContext(Na),{pathname:r}=vl(),i=JSON.stringify(IC(t));return oe.useMemo(()=>RC(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function BP(n,e){return $C(n,e)}function $C(n,e,t,r){var B;It(Op(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:a}=oe.useContext(Is),{matches:c}=oe.useContext(Na),u=c[c.length-1],h=u?u.params:{},d=u?u.pathname:"/",p=u?u.pathnameBase:"/",y=u&&u.route;{let D=y&&y.path||"";kC(d,!y||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let w=vl(),v;if(e){let D=typeof e=="string"?Kh(e):e;It(p==="/"||((B=D.pathname)==null?void 0:B.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${D.pathname}" was given in the \`location\` prop.`),v=D}else v=w;let b=v.pathname||"/",E=b;if(p!=="/"){let D=p.replace(/^\//,"").split("/");E="/"+b.replace(/^\//,"").split("/").slice(D.length).join("/")}let A=!a&&t&&t.matches&&t.matches.length>0?t.matches:CC(n,{pathname:E});_s(y||A!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),_s(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=kP(A&&A.map(D=>Object.assign({},D,{params:Object.assign({},h,D.params),pathname:Ea([p,i.encodeLocation?i.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?p:Ea([p,i.encodeLocation?i.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),c,t,r);return e&&S?oe.createElement(Sp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},S):S}function PP(){let n=FP(),e=TP(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=oe.createElement(oe.Fragment,null,oe.createElement("p",null,"💿 Hey developer 👋"),oe.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",oe.createElement("code",{style:a},"ErrorBoundary")," or"," ",oe.createElement("code",{style:a},"errorElement")," prop on your route.")),oe.createElement(oe.Fragment,null,oe.createElement("h2",null,"Unexpected Application Error!"),oe.createElement("h3",{style:{fontStyle:"italic"}},e),t?oe.createElement("pre",{style:i},t):null,c)}var UP=oe.createElement(PP,null),MP=class extends oe.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?oe.createElement(Na.Provider,{value:this.props.routeContext},oe.createElement(kE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function $P({routeContext:n,match:e,children:t}){let r=oe.useContext(Qh);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),oe.createElement(Na.Provider,{value:n},t)}function kP(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,a=t==null?void 0:t.errors;if(a!=null){let h=i.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);It(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,h+1))}let c=!1,u=-1;if(t)for(let h=0;h<i.length;h++){let d=i[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:p,errors:y}=t,w=d.route.loader&&!p.hasOwnProperty(d.route.id)&&(!y||y[d.route.id]===void 0);if(d.route.lazy||w){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((h,d,p)=>{let y,w=!1,v=null,b=null;t&&(y=a&&d.route.id?a[d.route.id]:void 0,v=d.route.errorElement||UP,c&&(u<0&&p===0?(kC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,b=null):u===p&&(w=!0,b=d.route.hydrateFallbackElement||null)));let E=e.concat(i.slice(0,p+1)),A=()=>{let S;return y?S=v:w?S=b:d.route.Component?S=oe.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=h,oe.createElement($P,{match:d,routeContext:{outlet:h,matches:E,isDataRoute:t!=null},children:S})};return t&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?oe.createElement(MP,{location:t.location,revalidation:t.revalidation,component:v,error:y,children:A(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):A()},null)}function LE(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function LP(n){let e=oe.useContext(Qh);return It(e,LE(n)),e}function jP(n){let e=oe.useContext(km);return It(e,LE(n)),e}function zP(n){let e=oe.useContext(Na);return It(e,LE(n)),e}function jE(n){let e=zP(n),t=e.matches[e.matches.length-1];return It(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function HP(){return jE("useRouteId")}function FP(){var r;let n=oe.useContext(kE),e=jP("useRouteError"),t=jE("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function qP(){let{router:n}=LP("useNavigate"),e=jE("useNavigate"),t=oe.useRef(!1);return MC(()=>{t.current=!0}),oe.useCallback(async(i,a={})=>{_s(t.current,UC),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var Q3={};function kC(n,e,t){!e&&!Q3[n]&&(Q3[n]=!0,_s(!1,t))}oe.memo(VP);function VP({routes:n,future:e,state:t}){return $C(n,void 0,t,e)}function nv(n){It(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function GP({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1}){It(!Op(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),u=oe.useMemo(()=>({basename:c,navigator:i,static:a,future:{}}),[c,i,a]);typeof t=="string"&&(t=Kh(t));let{pathname:h="/",search:d="",hash:p="",state:y=null,key:w="default"}=t,v=oe.useMemo(()=>{let b=Oa(h,c);return b==null?null:{location:{pathname:b,search:d,hash:p,state:y,key:w},navigationType:r}},[c,h,d,p,y,w,r]);return _s(v!=null,`<Router basename="${c}"> is not able to match the URL "${h}${d}${p}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:oe.createElement(Is.Provider,{value:u},oe.createElement(Sp.Provider,{children:e,value:v}))}function KP({children:n,location:e}){return BP(rv(n),e)}function rv(n,e=[]){let t=[];return oe.Children.forEach(n,(r,i)=>{if(!oe.isValidElement(r))return;let a=[...e,i];if(r.type===oe.Fragment){t.push.apply(t,rv(r.props.children,a));return}It(r.type===nv,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),It(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=rv(r.props.children,a)),t.push(c)}),t}var Ny="get",Iy="application/x-www-form-urlencoded";function Lm(n){return n!=null&&typeof n.tagName=="string"}function QP(n){return Lm(n)&&n.tagName.toLowerCase()==="button"}function YP(n){return Lm(n)&&n.tagName.toLowerCase()==="form"}function JP(n){return Lm(n)&&n.tagName.toLowerCase()==="input"}function ZP(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function XP(n,e){return n.button===0&&(!e||e==="_self")&&!ZP(n)}var ey=null;function WP(){if(ey===null)try{new FormData(document.createElement("form"),0),ey=!1}catch{ey=!0}return ey}var e5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function kb(n){return n!=null&&!e5.has(n)?(_s(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Iy}"`),null):n}function t5(n,e){let t,r,i,a,c;if(YP(n)){let u=n.getAttribute("action");r=u?Oa(u,e):null,t=n.getAttribute("method")||Ny,i=kb(n.getAttribute("enctype"))||Iy,a=new FormData(n)}else if(QP(n)||JP(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||u.getAttribute("action");if(r=h?Oa(h,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||Ny,i=kb(n.getAttribute("formenctype"))||kb(u.getAttribute("enctype"))||Iy,a=new FormData(u,n),!WP()){let{name:d,type:p,value:y}=n;if(p==="image"){let w=d?`${d}.`:"";a.append(`${w}x`,"0"),a.append(`${w}y`,"0")}else d&&a.append(d,y)}}else{if(Lm(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Ny,r=null,i=Iy,c=n}return a&&i==="text/plain"&&(c=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:c}}function zE(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function n5(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function r5(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function i5(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let c=await n5(a,t);return c.links?c.links():[]}return[]}));return c5(r.flat(1).filter(r5).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Y3(n,e,t,r,i,a){let c=(h,d)=>t[d]?h.route.id!==t[d].route.id:!0,u=(h,d)=>{var p;return t[d].pathname!==h.pathname||((p=t[d].route.path)==null?void 0:p.endsWith("*"))&&t[d].params["*"]!==h.params["*"]};return a==="assets"?e.filter((h,d)=>c(h,d)||u(h,d)):a==="data"?e.filter((h,d)=>{var y;let p=r.routes[h.route.id];if(!p||!p.hasLoader)return!1;if(c(h,d)||u(h,d))return!0;if(h.route.shouldRevalidate){let w=h.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((y=t[0])==null?void 0:y.params)||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function s5(n,e,{includeHydrateFallback:t}={}){return a5(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function a5(n){return[...new Set(n)]}function o5(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function c5(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(o5(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}var l5=new Set([100,101,204,205]);function u5(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Oa(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function LC(){let n=oe.useContext(Qh);return zE(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function h5(){let n=oe.useContext(km);return zE(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var HE=oe.createContext(void 0);HE.displayName="FrameworkContext";function jC(){let n=oe.useContext(HE);return zE(n,"You must render this element inside a <HydratedRouter> element"),n}function f5(n,e){let t=oe.useContext(HE),[r,i]=oe.useState(!1),[a,c]=oe.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:d,onMouseLeave:p,onTouchStart:y}=e,w=oe.useRef(null);oe.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let E=S=>{S.forEach(B=>{c(B.isIntersecting)})},A=new IntersectionObserver(E,{threshold:.5});return w.current&&A.observe(w.current),()=>{A.disconnect()}}},[n]),oe.useEffect(()=>{if(r){let E=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(E)}}},[r]);let v=()=>{i(!0)},b=()=>{i(!1),c(!1)};return t?n!=="intent"?[a,w,{}]:[a,w,{onFocus:rd(u,v),onBlur:rd(h,b),onMouseEnter:rd(d,v),onMouseLeave:rd(p,b),onTouchStart:rd(y,v)}]:[!1,w,{}]}function rd(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function d5({page:n,...e}){let{router:t}=LC(),r=oe.useMemo(()=>CC(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?oe.createElement(g5,{page:n,matches:r,...e}):null}function p5(n){let{manifest:e,routeModules:t}=jC(),[r,i]=oe.useState([]);return oe.useEffect(()=>{let a=!1;return i5(n,e,t).then(c=>{a||i(c)}),()=>{a=!0}},[n,e,t]),r}function g5({page:n,matches:e,...t}){let r=vl(),{manifest:i,routeModules:a}=jC(),{basename:c}=LC(),{loaderData:u,matches:h}=h5(),d=oe.useMemo(()=>Y3(n,e,h,i,r,"data"),[n,e,h,i,r]),p=oe.useMemo(()=>Y3(n,e,h,i,r,"assets"),[n,e,h,i,r]),y=oe.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let b=new Set,E=!1;if(e.forEach(S=>{var D;let B=i.routes[S.route.id];!B||!B.hasLoader||(!d.some(U=>U.route.id===S.route.id)&&S.route.id in u&&((D=a[S.route.id])!=null&&D.shouldRevalidate)||B.hasClientLoader?E=!0:b.add(S.route.id))}),b.size===0)return[];let A=u5(n,c);return E&&b.size>0&&A.searchParams.set("_routes",e.filter(S=>b.has(S.route.id)).map(S=>S.route.id).join(",")),[A.pathname+A.search]},[c,u,r,i,d,e,n,a]),w=oe.useMemo(()=>s5(p,i),[p,i]),v=p5(p);return oe.createElement(oe.Fragment,null,y.map(b=>oe.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...t})),w.map(b=>oe.createElement("link",{key:b,rel:"modulepreload",href:b,...t})),v.map(({key:b,link:E})=>oe.createElement("link",{key:b,...E})))}function y5(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var zC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{zC&&(window.__reactRouterVersion="7.5.3")}catch{}function m5({basename:n,children:e,window:t}){let r=oe.useRef();r.current==null&&(r.current=iP({window:t,v5Compat:!0}));let i=r.current,[a,c]=oe.useState({action:i.action,location:i.location}),u=oe.useCallback(h=>{oe.startTransition(()=>c(h))},[c]);return oe.useLayoutEffect(()=>i.listen(u),[i,u]),oe.createElement(GP,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:i})}var HC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,FC=oe.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:c,state:u,target:h,to:d,preventScrollReset:p,viewTransition:y,...w},v){let{basename:b}=oe.useContext(Is),E=typeof d=="string"&&HC.test(d),A,S=!1;if(typeof d=="string"&&E&&(A=d,zC))try{let P=new URL(window.location.href),L=d.startsWith("//")?new URL(P.protocol+d):new URL(d),z=Oa(L.pathname,b);L.origin===P.origin&&z!=null?d=z+L.search+L.hash:S=!0}catch{_s(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let B=NP(d,{relative:i}),[D,U,I]=f5(r,w),N=E5(d,{replace:c,state:u,target:h,preventScrollReset:p,relative:i,viewTransition:y});function k(P){e&&e(P),P.defaultPrevented||N(P)}let $=oe.createElement("a",{...w,...I,href:A||B,onClick:S||a?e:k,ref:y5(v,U),target:h,"data-discover":!E&&t==="render"?"true":void 0});return D&&!E?oe.createElement(oe.Fragment,null,$,oe.createElement(d5,{page:B})):$});FC.displayName="Link";var w5=oe.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:c,viewTransition:u,children:h,...d},p){let y=Tp(c,{relative:d.relative}),w=vl(),v=oe.useContext(km),{navigator:b,basename:E}=oe.useContext(Is),A=v!=null&&T5(y)&&u===!0,S=b.encodeLocation?b.encodeLocation(y).pathname:y.pathname,B=w.pathname,D=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;t||(B=B.toLowerCase(),D=D?D.toLowerCase():null,S=S.toLowerCase()),D&&E&&(D=Oa(D,E)||D);const U=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let I=B===S||!i&&B.startsWith(S)&&B.charAt(U)==="/",N=D!=null&&(D===S||!i&&D.startsWith(S)&&D.charAt(S.length)==="/"),k={isActive:I,isPending:N,isTransitioning:A},$=I?e:void 0,P;typeof r=="function"?P=r(k):P=[r,I?"active":null,N?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let L=typeof a=="function"?a(k):a;return oe.createElement(FC,{...d,"aria-current":$,className:P,ref:p,style:L,to:c,viewTransition:u},typeof h=="function"?h(k):h)});w5.displayName="NavLink";var b5=oe.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:c=Ny,action:u,onSubmit:h,relative:d,preventScrollReset:p,viewTransition:y,...w},v)=>{let b=S5(),E=O5(u,{relative:d}),A=c.toLowerCase()==="get"?"get":"post",S=typeof u=="string"&&HC.test(u),B=D=>{if(h&&h(D),D.defaultPrevented)return;D.preventDefault();let U=D.nativeEvent.submitter,I=(U==null?void 0:U.getAttribute("formmethod"))||c;b(U||D.currentTarget,{fetcherKey:e,method:I,navigate:t,replace:i,state:a,relative:d,preventScrollReset:p,viewTransition:y})};return oe.createElement("form",{ref:v,method:A,action:E,onSubmit:r?h:B,...w,"data-discover":!S&&n==="render"?"true":void 0})});b5.displayName="Form";function v5(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qC(n){let e=oe.useContext(Qh);return It(e,v5(n)),e}function E5(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:c}={}){let u=IP(),h=vl(),d=Tp(n,{relative:a});return oe.useCallback(p=>{if(XP(p,e)){p.preventDefault();let y=t!==void 0?t:Vd(h)===Vd(d);u(n,{replace:y,state:r,preventScrollReset:i,relative:a,viewTransition:c})}},[h,u,d,t,r,e,n,i,a,c])}var A5=0,x5=()=>`__${String(++A5)}__`;function S5(){let{router:n}=qC("useSubmit"),{basename:e}=oe.useContext(Is),t=HP();return oe.useCallback(async(r,i={})=>{let{action:a,method:c,encType:u,formData:h,body:d}=t5(r,e);if(i.navigate===!1){let p=i.fetcherKey||x5();await n.fetch(p,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:h,body:d,formMethod:i.method||c,formEncType:i.encType||u,flushSync:i.flushSync})}else await n.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:h,body:d,formMethod:i.method||c,formEncType:i.encType||u,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function O5(n,{relative:e}={}){let{basename:t}=oe.useContext(Is),r=oe.useContext(Na);It(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Tp(n||".",{relative:e})},c=vl();if(n==null){a.search=c.search;let u=new URLSearchParams(a.search),h=u.getAll("index");if(h.some(p=>p==="")){u.delete("index"),h.filter(y=>y).forEach(y=>u.append("index",y));let p=u.toString();a.search=p?`?${p}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Ea([t,a.pathname])),Vd(a)}function T5(n,e={}){let t=oe.useContext(PC);It(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=qC("useViewTransitionState"),i=Tp(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Oa(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=Oa(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Zy(i.pathname,c)!=null||Zy(i.pathname,a)!=null}new TextEncoder;[...l5];const D5="6.13.7";function C5(n,e,t){const r=e.split("|").map(a=>a.trim());for(let a=0;a<r.length;a++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof n===e)return}const i=new Error(`invalid value for type ${e}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${t}`,i.value=n,i}async function Jn(n){const e=Object.keys(n);return(await Promise.all(e.map(r=>Promise.resolve(n[r])))).reduce((r,i,a)=>(r[e[a]]=i,r),{})}function Be(n,e,t){for(let r in e){let i=e[r];const a=t?t[r]:null;a&&C5(i,a,r),Object.defineProperty(n,r,{enumerable:!0,value:i,writable:!1})}}function ku(n){if(n==null)return"null";if(Array.isArray(n))return"[ "+n.map(ku).join(", ")+" ]";if(n instanceof Uint8Array){const e="0123456789abcdef";let t="0x";for(let r=0;r<n.length;r++)t+=e[n[r]>>4],t+=e[n[r]&15];return t}if(typeof n=="object"&&typeof n.toJSON=="function")return ku(n.toJSON());switch(typeof n){case"boolean":case"symbol":return n.toString();case"bigint":return BigInt(n).toString();case"number":return n.toString();case"string":return JSON.stringify(n);case"object":{const e=Object.keys(n);return e.sort(),"{ "+e.map(t=>`${ku(t)}: ${ku(n[t])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Dn(n,e){return n&&n.code===e}function FE(n){return Dn(n,"CALL_EXCEPTION")}function Pt(n,e,t){let r=n;{const a=[];if(t){if("message"in t||"code"in t||"name"in t)throw new Error(`value will overwrite populated values: ${ku(t)}`);for(const c in t){if(c==="shortMessage")continue;const u=t[c];a.push(c+"="+ku(u))}}a.push(`code=${e}`),a.push(`version=${D5}`),a.length&&(n+=" ("+a.join(", ")+")")}let i;switch(e){case"INVALID_ARGUMENT":i=new TypeError(n);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(n);break;default:i=new Error(n)}return Be(i,{code:e}),t&&Object.assign(i,t),i.shortMessage==null&&Be(i,{shortMessage:r}),i}function ye(n,e,t,r){if(!n)throw Pt(e,t,r)}function Q(n,e,t,r){ye(n,e,"INVALID_ARGUMENT",{argument:t,value:r})}function VC(n,e,t){t==null&&(t=""),t&&(t=": "+t),ye(n>=e,"missing argument"+t,"MISSING_ARGUMENT",{count:n,expectedCount:e}),ye(n<=e,"too many arguments"+t,"UNEXPECTED_ARGUMENT",{count:n,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((n,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");n.push(e)}catch{}return n},[]);function Dp(n,e,t){if(t==null&&(t=""),n!==e){let r=t,i="new";t&&(r+=".",i+=" "+t),ye(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function GC(n,e,t){if(n instanceof Uint8Array)return t?new Uint8Array(n):n;if(typeof n=="string"&&n.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((n.length-2)/2);let i=2;for(let a=0;a<r.length;a++)r[a]=parseInt(n.substring(i,i+2),16),i+=2;return r}Q(!1,"invalid BytesLike value",e||"value",n)}function We(n,e){return GC(n,e,!1)}function Zn(n,e){return GC(n,e,!0)}function xt(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&n.length!==2+2*e||e===!0&&n.length%2!==0)}function qE(n){return xt(n,!0)||n instanceof Uint8Array}const J3="0123456789abcdef";function Te(n){const e=We(n);let t="0x";for(let r=0;r<e.length;r++){const i=e[r];t+=J3[(i&240)>>4]+J3[i&15]}return t}function Ft(n){return"0x"+n.map(e=>Te(e).substring(2)).join("")}function Ku(n){return xt(n,!0)?(n.length-2)/2:We(n).length}function Ut(n,e,t){const r=We(n);return t!=null&&t>r.length&&ye(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:t}),Te(r.slice(e??0,t??r.length))}function KC(n,e,t){const r=We(n);ye(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const i=new Uint8Array(e);return i.fill(0),t?i.set(r,e-r.length):i.set(r,0),Te(i)}function ll(n,e){return KC(n,e,!0)}function _5(n,e){return KC(n,e,!1)}const jm=BigInt(0),Gi=BigInt(1),iv=9007199254740991;function Xy(n,e){const t=zm(n,"value"),r=BigInt(ke(e,"width"));if(ye(t>>r===jm,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:n}),t>>r-Gi){const i=(Gi<<r)-Gi;return-((~t&i)+Gi)}return t}function QC(n,e){let t=_e(n,"value");const r=BigInt(ke(e,"width")),i=Gi<<r-Gi;if(t<jm){t=-t,ye(t<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});const a=(Gi<<r)-Gi;return(~t&a)+Gi}else ye(t<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});return t}function Bc(n,e){const t=zm(n,"value"),r=BigInt(ke(e,"bits"));return t&(Gi<<r)-Gi}function _e(n,e){switch(typeof n){case"bigint":return n;case"number":return Q(Number.isInteger(n),"underflow",e||"value",n),Q(n>=-9007199254740991&&n<=iv,"overflow",e||"value",n),BigInt(n);case"string":try{if(n==="")throw new Error("empty string");return n[0]==="-"&&n[1]!=="-"?-BigInt(n.substring(1)):BigInt(n)}catch(t){Q(!1,`invalid BigNumberish string: ${t.message}`,e||"value",n)}}Q(!1,"invalid BigNumberish value",e||"value",n)}function zm(n,e){const t=_e(n,e);return ye(t>=jm,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:n}),t}const Z3="0123456789abcdef";function Hm(n){if(n instanceof Uint8Array){let e="0x0";for(const t of n)e+=Z3[t>>4],e+=Z3[t&15];return BigInt(e)}return _e(n)}function ke(n,e){switch(typeof n){case"bigint":return Q(n>=-9007199254740991&&n<=iv,"overflow",e||"value",n),Number(n);case"number":return Q(Number.isInteger(n),"underflow",e||"value",n),Q(n>=-9007199254740991&&n<=iv,"overflow",e||"value",n),n;case"string":try{if(n==="")throw new Error("empty string");return ke(BigInt(n),e)}catch(t){Q(!1,`invalid numeric string: ${t.message}`,e||"value",n)}}Q(!1,"invalid numeric value",e||"value",n)}function N5(n){return ke(Hm(n))}function Go(n,e){let r=zm(n,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const i=ke(e,"width");for(ye(i*2>=r.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:n});r.length<i*2;)r="0"+r}return"0x"+r}function Xn(n){const e=zm(n,"value");if(e===jm)return new Uint8Array([]);let t=e.toString(16);t.length%2&&(t="0"+t);const r=new Uint8Array(t.length/2);for(let i=0;i<r.length;i++){const a=i*2;r[i]=parseInt(t.substring(a,a+2),16)}return r}function Lu(n){let e=Te(qE(n)?n:Xn(n)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const X3="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const W3=BigInt(58);function I5(n){const e=We(n);let t=Hm(e),r="";for(;t;)r=X3[Number(t%W3)]+r,t/=W3;for(let i=0;i<e.length&&!e[i];i++)r=X3[0]+r;return r}function R5(n){n=atob(n);const e=new Uint8Array(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return We(e)}function B5(n){const e=We(n);let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}var Xu;class YC{constructor(e,t,r){te(this,"filter");te(this,"emitter");ce(this,Xu);j(this,Xu,t),Be(this,{emitter:e,filter:r})}async removeListener(){T(this,Xu)!=null&&await this.emitter.off(this.filter,T(this,Xu))}}Xu=new WeakMap;function P5(n,e,t,r,i){Q(!1,`invalid codepoint at offset ${e}; ${n}`,"bytes",t)}function JC(n,e,t,r,i){if(n==="BAD_PREFIX"||n==="UNEXPECTED_CONTINUE"){let a=0;for(let c=e+1;c<t.length&&t[c]>>6===2;c++)a++;return a}return n==="OVERRUN"?t.length-e-1:0}function U5(n,e,t,r,i){return n==="OVERLONG"?(Q(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),r.push(i),0):(r.push(65533),JC(n,e,t))}const M5=Object.freeze({error:P5,ignore:JC,replace:U5});function $5(n,e){e==null&&(e=M5.error);const t=We(n,"bytes"),r=[];let i=0;for(;i<t.length;){const a=t[i++];if(a>>7===0){r.push(a);continue}let c=null,u=null;if((a&224)===192)c=1,u=127;else if((a&240)===224)c=2,u=2047;else if((a&248)===240)c=3,u=65535;else{(a&192)===128?i+=e("UNEXPECTED_CONTINUE",i-1,t,r):i+=e("BAD_PREFIX",i-1,t,r);continue}if(i-1+c>=t.length){i+=e("OVERRUN",i-1,t,r);continue}let h=a&(1<<8-c-1)-1;for(let d=0;d<c;d++){let p=t[i];if((p&192)!=128){i+=e("MISSING_CONTINUE",i,t,r),h=null;break}h=h<<6|p&63,i++}if(h!==null){if(h>1114111){i+=e("OUT_OF_RANGE",i-1-c,t,r,h);continue}if(h>=55296&&h<=57343){i+=e("UTF16_SURROGATE",i-1-c,t,r,h);continue}if(h<=u){i+=e("OVERLONG",i-1-c,t,r,h);continue}r.push(h)}}return r}function Aa(n,e){Q(typeof n=="string","invalid string value","str",n);let t=[];for(let r=0;r<n.length;r++){const i=n.charCodeAt(r);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(i&63|128);else if((i&64512)==55296){r++;const a=n.charCodeAt(r);Q(r<n.length&&(a&64512)===56320,"invalid surrogate pair","str",n);const c=65536+((i&1023)<<10)+(a&1023);t.push(c>>18|240),t.push(c>>12&63|128),t.push(c>>6&63|128),t.push(c&63|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128)}return new Uint8Array(t)}function k5(n){return n.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Wy(n,e){return k5($5(n,e))}function ZC(n){async function e(t,r){ye(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const i=t.url.split(":")[0].toLowerCase();ye(i==="http"||i==="https",`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),ye(i==="https"||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let a=null;const c=new AbortController,u=setTimeout(()=>{a=Pt("request timeout","TIMEOUT"),c.abort()},t.timeout);r&&r.addListener(()=>{a=Pt("request cancelled","CANCELLED"),c.abort()});const h={method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:c.signal};let d;try{d=await fetch(t.url,h)}catch(v){throw clearTimeout(u),a||v}clearTimeout(u);const p={};d.headers.forEach((v,b)=>{p[b.toLowerCase()]=v});const y=await d.arrayBuffer(),w=y==null?null:new Uint8Array(y);return{statusCode:d.status,statusMessage:d.statusText,headers:p,body:w}}return e}const L5=12,j5=250;let eO=ZC();const z5=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),H5=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let Lb=!1;async function XC(n,e){try{const t=n.match(z5);if(!t)throw new Error("invalid data");return new Fo(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?R5(t[3]):q5(t[3]))}catch{return new Fo(599,"BAD REQUEST (invalid data: URI)",{},null,new Ko(n))}}function WC(n){async function e(t,r){try{const i=t.match(H5);if(!i)throw new Error("invalid link");return new Ko(`${n}${i[2]}`)}catch{return new Fo(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Ko(t))}}return e}const ty={data:XC,ipfs:WC("https://gateway.ipfs.io/ipfs/")},e_=new WeakMap;var zc,Oo;class F5{constructor(e){ce(this,zc);ce(this,Oo);j(this,zc,[]),j(this,Oo,!1),e_.set(e,()=>{if(!T(this,Oo)){j(this,Oo,!0);for(const t of T(this,zc))setTimeout(()=>{t()},0);j(this,zc,[])}})}addListener(e){ye(!T(this,Oo),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),T(this,zc).push(e)}get cancelled(){return T(this,Oo)}checkSignal(){ye(!this.cancelled,"cancelled","CANCELLED",{})}}zc=new WeakMap,Oo=new WeakMap;function ny(n){if(n==null)throw new Error("missing signal; should not happen");return n.checkSignal(),n}var Wu,eh,Li,oa,th,nh,dn,zr,ca,Hc,Fc,qc,fs,ji,To,Vc,Od;const Im=class Im{constructor(e){ce(this,Vc);ce(this,Wu);ce(this,eh);ce(this,Li);ce(this,oa);ce(this,th);ce(this,nh);ce(this,dn);ce(this,zr);ce(this,ca);ce(this,Hc);ce(this,Fc);ce(this,qc);ce(this,fs);ce(this,ji);ce(this,To);j(this,nh,String(e)),j(this,Wu,!1),j(this,eh,!0),j(this,Li,{}),j(this,oa,""),j(this,th,3e5),j(this,ji,{slotInterval:j5,maxAttempts:L5}),j(this,To,null)}get url(){return T(this,nh)}set url(e){j(this,nh,String(e))}get body(){return T(this,dn)==null?null:new Uint8Array(T(this,dn))}set body(e){if(e==null)j(this,dn,void 0),j(this,zr,void 0);else if(typeof e=="string")j(this,dn,Aa(e)),j(this,zr,"text/plain");else if(e instanceof Uint8Array)j(this,dn,e),j(this,zr,"application/octet-stream");else if(typeof e=="object")j(this,dn,Aa(JSON.stringify(e))),j(this,zr,"application/json");else throw new Error("invalid body")}hasBody(){return T(this,dn)!=null}get method(){return T(this,oa)?T(this,oa):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),j(this,oa,String(e).toUpperCase())}get headers(){const e=Object.assign({},T(this,Li));return T(this,ca)&&(e.authorization=`Basic ${B5(Aa(T(this,ca)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&T(this,zr)&&(e["content-type"]=T(this,zr)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){T(this,Li)[String(e).toLowerCase()]=String(t)}clearHeaders(){j(this,Li,{})}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let r=0;return{next:()=>{if(r<t.length){const i=t[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return T(this,ca)||null}setCredentials(e,t){Q(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),j(this,ca,`${e}:${t}`)}get allowGzip(){return T(this,eh)}set allowGzip(e){j(this,eh,!!e)}get allowInsecureAuthentication(){return!!T(this,Wu)}set allowInsecureAuthentication(e){j(this,Wu,!!e)}get timeout(){return T(this,th)}set timeout(e){Q(e>=0,"timeout must be non-zero","timeout",e),j(this,th,e)}get preflightFunc(){return T(this,Hc)||null}set preflightFunc(e){j(this,Hc,e)}get processFunc(){return T(this,Fc)||null}set processFunc(e){j(this,Fc,e)}get retryFunc(){return T(this,qc)||null}set retryFunc(e){j(this,qc,e)}get getUrlFunc(){return T(this,To)||eO}set getUrlFunc(e){j(this,To,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${T(this,dn)?Te(T(this,dn)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(T(this,ji).slotInterval=e.slotInterval),e.maxAttempts!=null&&(T(this,ji).maxAttempts=e.maxAttempts)}send(){return ye(T(this,fs)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),j(this,fs,new F5(this)),be(this,Vc,Od).call(this,0,tO()+this.timeout,0,this,new Fo(0,"",{},null,this))}cancel(){ye(T(this,fs)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=e_.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const t=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();ye(this.method==="GET"&&(t!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const i=new Im(e);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,j(i,Li,Object.assign({},T(this,Li))),T(this,dn)&&j(i,dn,new Uint8Array(T(this,dn))),j(i,zr,T(this,zr)),i}clone(){const e=new Im(this.url);return j(e,oa,T(this,oa)),T(this,dn)&&j(e,dn,T(this,dn)),j(e,zr,T(this,zr)),j(e,Li,Object.assign({},T(this,Li))),j(e,ca,T(this,ca)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),j(e,Hc,T(this,Hc)),j(e,Fc,T(this,Fc)),j(e,qc,T(this,qc)),j(e,ji,Object.assign({},T(this,ji))),j(e,To,T(this,To)),e}static lockConfig(){Lb=!0}static getGateway(e){return ty[e.toLowerCase()]||null}static registerGateway(e,t){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(Lb)throw new Error("gateways locked");ty[e]=t}static registerGetUrl(e){if(Lb)throw new Error("gateways locked");eO=e}static createGetUrlFunc(e){return ZC()}static createDataGateway(){return XC}static createIpfsGatewayFunc(e){return WC(e)}};Wu=new WeakMap,eh=new WeakMap,Li=new WeakMap,oa=new WeakMap,th=new WeakMap,nh=new WeakMap,dn=new WeakMap,zr=new WeakMap,ca=new WeakMap,Hc=new WeakMap,Fc=new WeakMap,qc=new WeakMap,fs=new WeakMap,ji=new WeakMap,To=new WeakMap,Vc=new WeakSet,Od=async function(e,t,r,i,a){var p,y,w;if(e>=T(this,ji).maxAttempts)return a.makeServerError("exceeded maximum retry limit");ye(tO()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),r>0&&await V5(r);let c=this.clone();const u=(c.url.split(":")[0]||"").toLowerCase();if(u in ty){const v=await ty[u](c.url,ny(T(i,fs)));if(v instanceof Fo){let b=v;if(this.processFunc){ny(T(i,fs));try{b=await this.processFunc(c,b)}catch(E){(E.throttle==null||typeof E.stall!="number")&&b.makeServerError("error in post-processing function",E).assertOk()}}return b}c=v}this.preflightFunc&&(c=await this.preflightFunc(c));const h=await this.getUrlFunc(c,ny(T(i,fs)));let d=new Fo(h.statusCode,h.statusMessage,h.headers,h.body,i);if(d.statusCode===301||d.statusCode===302){try{const v=d.headers.location||"";return be(p=c.redirect(v),Vc,Od).call(p,e+1,t,0,i,d)}catch{}return d}else if(d.statusCode===429&&(this.retryFunc==null||await this.retryFunc(c,d,e))){const v=d.headers["retry-after"];let b=T(this,ji).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof v=="string"&&v.match(/^[1-9][0-9]*$/)&&(b=parseInt(v)),be(y=c.clone(),Vc,Od).call(y,e+1,t,b,i,d)}if(this.processFunc){ny(T(i,fs));try{d=await this.processFunc(c,d)}catch(v){(v.throttle==null||typeof v.stall!="number")&&d.makeServerError("error in post-processing function",v).assertOk();let b=T(this,ji).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return v.stall>=0&&(b=v.stall),be(w=c.clone(),Vc,Od).call(w,e+1,t,b,i,d)}}return d};let Ko=Im;var hp,fp,dp,Hr,rh,Gc;const F2=class F2{constructor(e,t,r,i,a){ce(this,hp);ce(this,fp);ce(this,dp);ce(this,Hr);ce(this,rh);ce(this,Gc);j(this,hp,e),j(this,fp,t),j(this,dp,Object.keys(r).reduce((c,u)=>(c[u.toLowerCase()]=String(r[u]),c),{})),j(this,Hr,i==null?null:new Uint8Array(i)),j(this,rh,a||null),j(this,Gc,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${T(this,Hr)?Te(T(this,Hr)):"null"}>`}get statusCode(){return T(this,hp)}get statusMessage(){return T(this,fp)}get headers(){return Object.assign({},T(this,dp))}get body(){return T(this,Hr)==null?null:new Uint8Array(T(this,Hr))}get bodyText(){try{return T(this,Hr)==null?"":Wy(T(this,Hr))}catch{ye(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{ye(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let r=0;return{next:()=>{if(r<t.length){const i=t[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,t){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const i=new F2(599,r,this.headers,this.body,T(this,rh)||void 0);return j(i,Gc,{message:e,error:t}),i}throwThrottleError(e,t){t==null?t=-1:Q(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);const r=new Error(e||"throttling requests");throw Be(r,{stall:t,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return T(this,Hr)!=null}get request(){return T(this,rh)}ok(){return T(this,Gc).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=T(this,Gc);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let i=null;try{T(this,Hr)&&(i=Wy(T(this,Hr)))}catch{}ye(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:r,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};hp=new WeakMap,fp=new WeakMap,dp=new WeakMap,Hr=new WeakMap,rh=new WeakMap,Gc=new WeakMap;let Fo=F2;function tO(){return new Date().getTime()}function q5(n){return Aa(n.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function V5(n){return new Promise(e=>setTimeout(e,n))}const G5=BigInt(-1),Ui=BigInt(0),ju=BigInt(1),K5=BigInt(5),fu={};let Qu="0000";for(;Qu.length<80;)Qu+=Qu;function mc(n){let e=Qu;for(;e.length<n;)e+=e;return BigInt("1"+e.substring(0,n))}function id(n,e,t){const r=BigInt(e.width);if(e.signed){const i=ju<<r-ju;ye(t==null||n>=-i&&n<i,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:n}),n>Ui?n=Xy(Bc(n,r),r):n=-Xy(Bc(-n,r),r)}else{const i=ju<<r;ye(t==null||n>=0&&n<i,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:n}),n=(n%i+i)%i&i-ju}return n}function jb(n){typeof n=="number"&&(n=`fixed128x${n}`);let e=!0,t=128,r=18;if(typeof n=="string"){if(n!=="fixed")if(n==="ufixed")e=!1;else{const a=n.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);Q(a,"invalid fixed format","format",n),e=a[1]!=="u",t=parseInt(a[2]),r=parseInt(a[3])}}else if(n){const a=n,c=(u,h,d)=>a[u]==null?d:(Q(typeof a[u]===h,"invalid fixed format ("+u+" not "+h+")","format."+u,a[u]),a[u]);e=c("signed","boolean",e),t=c("width","number",t),r=c("decimals","number",r)}Q(t%8===0,"invalid FixedNumber width (not byte aligned)","format.width",t),Q(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const i=(e?"":"u")+"fixed"+String(t)+"x"+String(r);return{signed:e,width:t,decimals:r,name:i}}function Q5(n,e){let t="";n<Ui&&(t="-",n*=G5);let r=n.toString();if(e===0)return t+r;for(;r.length<=e;)r=Qu+r;const i=r.length-e;for(r=r.substring(0,i)+"."+r.substring(i);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return t+r}var zi,mt,Qn,ct,Ac,Ws,sv,av,ov,cv;const xo=class xo{constructor(e,t,r){ce(this,ct);te(this,"format");ce(this,zi);ce(this,mt);ce(this,Qn);te(this,"_value");Dp(e,fu,"FixedNumber"),j(this,mt,t),j(this,zi,r);const i=Q5(t,r.decimals);Be(this,{format:r.name,_value:i}),j(this,Qn,mc(r.decimals))}get signed(){return T(this,zi).signed}get width(){return T(this,zi).width}get decimals(){return T(this,zi).decimals}get value(){return T(this,mt)}addUnsafe(e){return be(this,ct,sv).call(this,e)}add(e){return be(this,ct,sv).call(this,e,"add")}subUnsafe(e){return be(this,ct,av).call(this,e)}sub(e){return be(this,ct,av).call(this,e,"sub")}mulUnsafe(e){return be(this,ct,ov).call(this,e)}mul(e){return be(this,ct,ov).call(this,e,"mul")}mulSignal(e){be(this,ct,Ac).call(this,e);const t=T(this,mt)*T(e,mt);return ye(t%T(this,Qn)===Ui,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),be(this,ct,Ws).call(this,t/T(this,Qn),"mulSignal")}divUnsafe(e){return be(this,ct,cv).call(this,e)}div(e){return be(this,ct,cv).call(this,e,"div")}divSignal(e){ye(T(e,mt)!==Ui,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),be(this,ct,Ac).call(this,e);const t=T(this,mt)*T(this,Qn);return ye(t%T(e,mt)===Ui,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),be(this,ct,Ws).call(this,t/T(e,mt),"divSignal")}cmp(e){let t=this.value,r=e.value;const i=this.decimals-e.decimals;return i>0?r*=mc(i):i<0&&(t*=mc(-i)),t<r?-1:t>r?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=T(this,mt);return T(this,mt)<Ui&&(e-=T(this,Qn)-ju),e=T(this,mt)/T(this,Qn)*T(this,Qn),be(this,ct,Ws).call(this,e,"floor")}ceiling(){let e=T(this,mt);return T(this,mt)>Ui&&(e+=T(this,Qn)-ju),e=T(this,mt)/T(this,Qn)*T(this,Qn),be(this,ct,Ws).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const t=this.decimals-e,r=K5*mc(t-1);let i=this.value+r;const a=mc(t);return i=i/a*a,id(i,T(this,zi),"round"),new xo(fu,i,T(this,zi))}isZero(){return T(this,mt)===Ui}isNegative(){return T(this,mt)<Ui}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return xo.fromString(this.toString(),e)}static fromValue(e,t,r){const i=t==null?0:ke(t),a=jb(r);let c=_e(e,"value");const u=i-a.decimals;if(u>0){const h=mc(u);ye(c%h===Ui,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),c/=h}else u<0&&(c*=mc(-u));return id(c,a,"fromValue"),new xo(fu,c,a)}static fromString(e,t){const r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);Q(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);const i=jb(t);let a=r[2]||"0",c=r[3]||"";for(;c.length<i.decimals;)c+=Qu;ye(c.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),c=c.substring(0,i.decimals);const u=BigInt(r[1]+a+c);return id(u,i,"fromString"),new xo(fu,u,i)}static fromBytes(e,t){let r=Hm(We(e,"value"));const i=jb(t);return i.signed&&(r=Xy(r,i.width)),id(r,i,"fromBytes"),new xo(fu,r,i)}};zi=new WeakMap,mt=new WeakMap,Qn=new WeakMap,ct=new WeakSet,Ac=function(e){Q(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},Ws=function(e,t){return e=id(e,T(this,zi),t),new xo(fu,e,T(this,zi))},sv=function(e,t){return be(this,ct,Ac).call(this,e),be(this,ct,Ws).call(this,T(this,mt)+T(e,mt),t)},av=function(e,t){return be(this,ct,Ac).call(this,e),be(this,ct,Ws).call(this,T(this,mt)-T(e,mt),t)},ov=function(e,t){return be(this,ct,Ac).call(this,e),be(this,ct,Ws).call(this,T(this,mt)*T(e,mt)/T(this,Qn),t)},cv=function(e,t){return ye(T(e,mt)!==Ui,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),be(this,ct,Ac).call(this,e),be(this,ct,Ws).call(this,T(this,mt)*T(this,Qn)/T(e,mt),t)};let em=xo;function Y5(n){let e=n.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function nO(n,e,t){let r=0;for(let i=0;i<t;i++)r=r*256+n[e+i];return r}function rO(n,e,t,r){const i=[];for(;t<e+1+r;){const a=t_(n,t);i.push(a.result),t+=a.consumed,ye(t<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:n,length:r,offset:e})}return{consumed:1+r,result:i}}function t_(n,e){ye(n.length!==0,"data too short","BUFFER_OVERRUN",{buffer:n,length:0,offset:1});const t=r=>{ye(r<=n.length,"data short segment too short","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:r})};if(n[e]>=248){const r=n[e]-247;t(e+1+r);const i=nO(n,e+1,r);return t(e+1+r+i),rO(n,e,e+1+r,r+i)}else if(n[e]>=192){const r=n[e]-192;return t(e+1+r),rO(n,e,e+1,r)}else if(n[e]>=184){const r=n[e]-183;t(e+1+r);const i=nO(n,e+1,r);t(e+1+r+i);const a=Te(n.slice(e+1+r,e+1+r+i));return{consumed:1+r+i,result:a}}else if(n[e]>=128){const r=n[e]-128;t(e+1+r);const i=Te(n.slice(e+1,e+1+r));return{consumed:1+r,result:i}}return{consumed:1,result:Y5(n[e])}}function Fm(n){const e=We(n,"data"),t=t_(e,0);return Q(t.consumed===e.length,"unexpected junk after rlp payload","data",n),t.result}function iO(n){const e=[];for(;n;)e.unshift(n&255),n>>=8;return e}function n_(n){if(Array.isArray(n)){let r=[];if(n.forEach(function(a){r=r.concat(n_(a))}),r.length<=55)return r.unshift(192+r.length),r;const i=iO(r.length);return i.unshift(247+i.length),i.concat(r)}const e=Array.prototype.slice.call(We(n,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=iO(e.length);return t.unshift(183+t.length),t.concat(e)}const sO="0123456789abcdef";function ul(n){let e="0x";for(const t of n_(n))e+=sO[t>>4],e+=sO[t&15];return e}function J5(n,e){let t=18;return t=ke(e,"unit"),em.fromValue(n,t,{decimals:t,width:512}).toString()}function Z5(n,e){Q(typeof n=="string","value must be a string","value",n);let t=18;return t=ke(e,"unit"),em.fromString(n,{decimals:t,width:512}).value}function X5(n){return J5(n,18)}function Ry(n){return Z5(n,18)}const Wn=32,lv=new Uint8Array(Wn),W5=["then"],ry={},r_=new WeakMap;function Tc(n){return r_.get(n)}function aO(n,e){r_.set(n,e)}function sd(n,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${n}`);throw t.error=e,t}function uv(n,e,t){return n.indexOf(null)>=0?e.map((r,i)=>r instanceof $h?uv(Tc(r),r,t):r):n.reduce((r,i,a)=>{let c=e.getValue(i);return i in r||(t&&c instanceof $h&&(c=uv(Tc(c),c,t)),r[i]=c),r},{})}var ih;const qu=class qu extends Array{constructor(...t){const r=t[0];let i=t[1],a=(t[2]||[]).slice(),c=!0;r!==ry&&(i=t,a=[],c=!1);super(i.length);ce(this,ih);i.forEach((d,p)=>{this[p]=d});const u=a.reduce((d,p)=>(typeof p=="string"&&d.set(p,(d.get(p)||0)+1),d),new Map);if(aO(this,Object.freeze(i.map((d,p)=>{const y=a[p];return y!=null&&u.get(y)===1?y:null}))),j(this,ih,[]),T(this,ih)==null&&T(this,ih),!c)return;Object.freeze(this);const h=new Proxy(this,{get:(d,p,y)=>{if(typeof p=="string"){if(p.match(/^[0-9]+$/)){const v=ke(p,"%index");if(v<0||v>=this.length)throw new RangeError("out of result range");const b=d[v];return b instanceof Error&&sd(`index ${v}`,b),b}if(W5.indexOf(p)>=0)return Reflect.get(d,p,y);const w=d[p];if(w instanceof Function)return function(...v){return w.apply(this===y?d:this,v)};if(!(p in d))return d.getValue.apply(this===y?d:this,[p])}return Reflect.get(d,p,y)}});return aO(h,Tc(this)),h}toArray(t){const r=[];return this.forEach((i,a)=>{i instanceof Error&&sd(`index ${a}`,i),t&&i instanceof qu&&(i=i.toArray(t)),r.push(i)}),r}toObject(t){const r=Tc(this);return r.reduce((i,a,c)=>(ye(a!=null,`value at index ${c} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),uv(r,this,t)),{})}slice(t,r){t==null&&(t=0),t<0&&(t+=this.length,t<0&&(t=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const i=Tc(this),a=[],c=[];for(let u=t;u<r;u++)a.push(this[u]),c.push(i[u]);return new qu(ry,a,c)}filter(t,r){const i=Tc(this),a=[],c=[];for(let u=0;u<this.length;u++){const h=this[u];h instanceof Error&&sd(`index ${u}`,h),t.call(r,h,u,this)&&(a.push(h),c.push(i[u]))}return new qu(ry,a,c)}map(t,r){const i=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&sd(`index ${a}`,c),i.push(t.call(r,c,a,this))}return i}getValue(t){const r=Tc(this).indexOf(t);if(r===-1)return;const i=this[r];return i instanceof Error&&sd(`property ${JSON.stringify(t)}`,i.error),i}static fromItems(t,r){return new qu(ry,t,r)}};ih=new WeakMap;let $h=qu;function oO(n){let e=Xn(n);return ye(e.length<=Wn,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:Wn,offset:e.length}),e.length!==Wn&&(e=Zn(Ft([lv.slice(e.length%Wn),e]))),e}class Ia{constructor(e,t,r,i){te(this,"name");te(this,"type");te(this,"localName");te(this,"dynamic");Be(this,{name:e,type:t,localName:r,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){Q(!1,e,this.localName,t)}}var la,Kc,sh,By;class hv{constructor(){ce(this,sh);ce(this,la);ce(this,Kc);j(this,la,[]),j(this,Kc,0)}get data(){return Ft(T(this,la))}get length(){return T(this,Kc)}appendWriter(e){return be(this,sh,By).call(this,Zn(e.data))}writeBytes(e){let t=Zn(e);const r=t.length%Wn;return r&&(t=Zn(Ft([t,lv.slice(r)]))),be(this,sh,By).call(this,t)}writeValue(e){return be(this,sh,By).call(this,oO(e))}writeUpdatableValue(){const e=T(this,la).length;return T(this,la).push(lv),j(this,Kc,T(this,Kc)+Wn),t=>{T(this,la)[e]=oO(t)}}}la=new WeakMap,Kc=new WeakMap,sh=new WeakSet,By=function(e){return T(this,la).push(e),j(this,Kc,T(this,Kc)+e.length),e.length};var mr,Fr,Qc,Yc,Do,bl,dv,i_;const q2=class q2{constructor(e,t,r){ce(this,bl);te(this,"allowLoose");ce(this,mr);ce(this,Fr);ce(this,Qc);ce(this,Yc);ce(this,Do);Be(this,{allowLoose:!!t}),j(this,mr,Zn(e)),j(this,Qc,0),j(this,Yc,null),j(this,Do,r??1024),j(this,Fr,0)}get data(){return Te(T(this,mr))}get dataLength(){return T(this,mr).length}get consumed(){return T(this,Fr)}get bytes(){return new Uint8Array(T(this,mr))}subReader(e){const t=new q2(T(this,mr).slice(T(this,Fr)+e),this.allowLoose,T(this,Do));return j(t,Yc,this),t}readBytes(e,t){let r=be(this,bl,i_).call(this,0,e,!!t);return be(this,bl,dv).call(this,e),j(this,Fr,T(this,Fr)+r.length),r.slice(0,e)}readValue(){return Hm(this.readBytes(Wn))}readIndex(){return N5(this.readBytes(Wn))}};mr=new WeakMap,Fr=new WeakMap,Qc=new WeakMap,Yc=new WeakMap,Do=new WeakMap,bl=new WeakSet,dv=function(e){var t;if(T(this,Yc))return be(t=T(this,Yc),bl,dv).call(t,e);j(this,Qc,T(this,Qc)+e),ye(T(this,Do)<1||T(this,Qc)<=T(this,Do)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${T(this,Do)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:Zn(T(this,mr)),offset:T(this,Fr),length:e,info:{bytesRead:T(this,Qc),dataLength:this.dataLength}})},i_=function(e,t,r){let i=Math.ceil(t/Wn)*Wn;return T(this,Fr)+i>T(this,mr).length&&(this.allowLoose&&r&&T(this,Fr)+t<=T(this,mr).length?i=t:ye(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:Zn(T(this,mr)),length:T(this,mr).length,offset:T(this,Fr)+i})),T(this,mr).slice(T(this,Fr),T(this,Fr)+i)};let fv=q2;function tm(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function VE(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function eU(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");tm(n.outputLen),tm(n.blockLen)}function kh(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function s_(n,e){VE(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const zb=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const a_=n=>n instanceof Uint8Array,tU=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),Hb=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),is=(n,e)=>n<<32-e|n>>>e,nU=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!nU)throw new Error("Non little-endian hardware is not supported");function rU(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function qm(n){if(typeof n=="string"&&(n=rU(n)),!a_(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function iU(...n){const e=new Uint8Array(n.reduce((r,i)=>r+i.length,0));let t=0;return n.forEach(r=>{if(!a_(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}let GE=class{clone(){return this._cloneInto()}};function KE(n){const e=r=>n().update(qm(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function sU(n=32){if(zb&&typeof zb.getRandomValues=="function")return zb.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}class o_ extends GE{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,eU(e);const r=qm(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,a=new Uint8Array(i);a.set(r.length>i?e.create().update(r).digest():r);for(let c=0;c<a.length;c++)a[c]^=54;this.iHash.update(a),this.oHash=e.create();for(let c=0;c<a.length;c++)a[c]^=106;this.oHash.update(a),a.fill(0)}update(e){return kh(this),this.iHash.update(e),this}digestInto(e){kh(this),VE(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:a,blockLen:c,outputLen:u}=this;return e=e,e.finished=i,e.destroyed=a,e.blockLen=c,e.outputLen=u,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const c_=(n,e,t)=>new o_(n,e).update(t).digest();c_.create=(n,e)=>new o_(n,e);function aU(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),a=BigInt(4294967295),c=Number(t>>i&a),u=Number(t&a),h=r?4:0,d=r?0:4;n.setUint32(e+h,c,r),n.setUint32(e+d,u,r)}class l_ extends GE{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Hb(this.buffer)}update(e){kh(this);const{view:t,buffer:r,blockLen:i}=this;e=qm(e);const a=e.length;for(let c=0;c<a;){const u=Math.min(i-this.pos,a-c);if(u===i){const h=Hb(e);for(;i<=a-c;c+=i)this.process(h,c);continue}r.set(e.subarray(c,c+u),this.pos),this.pos+=u,c+=u,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){kh(this),s_(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:a}=this;let{pos:c}=this;t[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>i-c&&(this.process(r,0),c=0);for(let y=c;y<i;y++)t[y]=0;aU(r,i-8,BigInt(this.length*8),a),this.process(r,0);const u=Hb(e),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=h/4,p=this.get();if(d>p.length)throw new Error("_sha2: outputLen bigger than state");for(let y=0;y<d;y++)u.setUint32(4*y,p[y],a)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:a,destroyed:c,pos:u}=this;return e.length=i,e.pos=u,e.finished=a,e.destroyed=c,i%t&&e.buffer.set(r),e}}const oU=(n,e,t)=>n&e^~n&t,cU=(n,e,t)=>n&e^n&t^e&t,lU=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ro=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),io=new Uint32Array(64);class uU extends l_{constructor(){super(64,32,8,!1),this.A=ro[0]|0,this.B=ro[1]|0,this.C=ro[2]|0,this.D=ro[3]|0,this.E=ro[4]|0,this.F=ro[5]|0,this.G=ro[6]|0,this.H=ro[7]|0}get(){const{A:e,B:t,C:r,D:i,E:a,F:c,G:u,H:h}=this;return[e,t,r,i,a,c,u,h]}set(e,t,r,i,a,c,u,h){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=a|0,this.F=c|0,this.G=u|0,this.H=h|0}process(e,t){for(let y=0;y<16;y++,t+=4)io[y]=e.getUint32(t,!1);for(let y=16;y<64;y++){const w=io[y-15],v=io[y-2],b=is(w,7)^is(w,18)^w>>>3,E=is(v,17)^is(v,19)^v>>>10;io[y]=E+io[y-7]+b+io[y-16]|0}let{A:r,B:i,C:a,D:c,E:u,F:h,G:d,H:p}=this;for(let y=0;y<64;y++){const w=is(u,6)^is(u,11)^is(u,25),v=p+w+oU(u,h,d)+lU[y]+io[y]|0,E=(is(r,2)^is(r,13)^is(r,22))+cU(r,i,a)|0;p=d,d=h,h=u,u=c+v|0,c=a,a=i,i=r,r=v+E|0}r=r+this.A|0,i=i+this.B|0,a=a+this.C|0,c=c+this.D|0,u=u+this.E|0,h=h+this.F|0,d=d+this.G|0,p=p+this.H|0,this.set(r,i,a,c,u,h,d,p)}roundClean(){io.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const u_=KE(()=>new uU),iy=BigInt(2**32-1),pv=BigInt(32);function h_(n,e=!1){return e?{h:Number(n&iy),l:Number(n>>pv&iy)}:{h:Number(n>>pv&iy)|0,l:Number(n&iy)|0}}function f_(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let i=0;i<n.length;i++){const{h:a,l:c}=h_(n[i],e);[t[i],r[i]]=[a,c]}return[t,r]}const hU=(n,e)=>BigInt(n>>>0)<<pv|BigInt(e>>>0),fU=(n,e,t)=>n>>>t,dU=(n,e,t)=>n<<32-t|e>>>t,pU=(n,e,t)=>n>>>t|e<<32-t,gU=(n,e,t)=>n<<32-t|e>>>t,yU=(n,e,t)=>n<<64-t|e>>>t-32,mU=(n,e,t)=>n>>>t-32|e<<64-t,wU=(n,e)=>e,bU=(n,e)=>n,d_=(n,e,t)=>n<<t|e>>>32-t,p_=(n,e,t)=>e<<t|n>>>32-t,g_=(n,e,t)=>e<<t-32|n>>>64-t,y_=(n,e,t)=>n<<t-32|e>>>64-t;function vU(n,e,t,r){const i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}const EU=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),AU=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,xU=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),SU=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,OU=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),TU=(n,e,t,r,i,a)=>e+t+r+i+a+(n/2**32|0)|0,Le={fromBig:h_,split:f_,toBig:hU,shrSH:fU,shrSL:dU,rotrSH:pU,rotrSL:gU,rotrBH:yU,rotrBL:mU,rotr32H:wU,rotr32L:bU,rotlSH:d_,rotlSL:p_,rotlBH:g_,rotlBL:y_,add:vU,add3L:EU,add3H:AU,add4L:xU,add4H:SU,add5H:TU,add5L:OU},[DU,CU]=Le.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),so=new Uint32Array(80),ao=new Uint32Array(80);class _U extends l_{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:a,Cl:c,Dh:u,Dl:h,Eh:d,El:p,Fh:y,Fl:w,Gh:v,Gl:b,Hh:E,Hl:A}=this;return[e,t,r,i,a,c,u,h,d,p,y,w,v,b,E,A]}set(e,t,r,i,a,c,u,h,d,p,y,w,v,b,E,A){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=a|0,this.Cl=c|0,this.Dh=u|0,this.Dl=h|0,this.Eh=d|0,this.El=p|0,this.Fh=y|0,this.Fl=w|0,this.Gh=v|0,this.Gl=b|0,this.Hh=E|0,this.Hl=A|0}process(e,t){for(let D=0;D<16;D++,t+=4)so[D]=e.getUint32(t),ao[D]=e.getUint32(t+=4);for(let D=16;D<80;D++){const U=so[D-15]|0,I=ao[D-15]|0,N=Le.rotrSH(U,I,1)^Le.rotrSH(U,I,8)^Le.shrSH(U,I,7),k=Le.rotrSL(U,I,1)^Le.rotrSL(U,I,8)^Le.shrSL(U,I,7),$=so[D-2]|0,P=ao[D-2]|0,L=Le.rotrSH($,P,19)^Le.rotrBH($,P,61)^Le.shrSH($,P,6),z=Le.rotrSL($,P,19)^Le.rotrBL($,P,61)^Le.shrSL($,P,6),V=Le.add4L(k,z,ao[D-7],ao[D-16]),ne=Le.add4H(V,N,L,so[D-7],so[D-16]);so[D]=ne|0,ao[D]=V|0}let{Ah:r,Al:i,Bh:a,Bl:c,Ch:u,Cl:h,Dh:d,Dl:p,Eh:y,El:w,Fh:v,Fl:b,Gh:E,Gl:A,Hh:S,Hl:B}=this;for(let D=0;D<80;D++){const U=Le.rotrSH(y,w,14)^Le.rotrSH(y,w,18)^Le.rotrBH(y,w,41),I=Le.rotrSL(y,w,14)^Le.rotrSL(y,w,18)^Le.rotrBL(y,w,41),N=y&v^~y&E,k=w&b^~w&A,$=Le.add5L(B,I,k,CU[D],ao[D]),P=Le.add5H($,S,U,N,DU[D],so[D]),L=$|0,z=Le.rotrSH(r,i,28)^Le.rotrBH(r,i,34)^Le.rotrBH(r,i,39),V=Le.rotrSL(r,i,28)^Le.rotrBL(r,i,34)^Le.rotrBL(r,i,39),ne=r&a^r&u^a&u,Z=i&c^i&h^c&h;S=E|0,B=A|0,E=v|0,A=b|0,v=y|0,b=w|0,{h:y,l:w}=Le.add(d|0,p|0,P|0,L|0),d=u|0,p=h|0,u=a|0,h=c|0,a=r|0,c=i|0;const C=Le.add3L(L,V,Z);r=Le.add3H(C,P,z,ne),i=C|0}({h:r,l:i}=Le.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:a,l:c}=Le.add(this.Bh|0,this.Bl|0,a|0,c|0),{h:u,l:h}=Le.add(this.Ch|0,this.Cl|0,u|0,h|0),{h:d,l:p}=Le.add(this.Dh|0,this.Dl|0,d|0,p|0),{h:y,l:w}=Le.add(this.Eh|0,this.El|0,y|0,w|0),{h:v,l:b}=Le.add(this.Fh|0,this.Fl|0,v|0,b|0),{h:E,l:A}=Le.add(this.Gh|0,this.Gl|0,E|0,A|0),{h:S,l:B}=Le.add(this.Hh|0,this.Hl|0,S|0,B|0),this.set(r,i,a,c,u,h,d,p,y,w,v,b,E,A,S,B)}roundClean(){so.fill(0),ao.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const NU=KE(()=>new _U);function IU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const cO=IU();cO.crypto||cO.msCrypto;function RU(n){switch(n){case"sha256":return u_.create();case"sha512":return NU.create()}Q(!1,"invalid hashing algorithm name","algorithm",n)}const[m_,w_,b_]=[[],[],[]],BU=BigInt(0),ad=BigInt(1),PU=BigInt(2),UU=BigInt(7),MU=BigInt(256),$U=BigInt(113);for(let n=0,e=ad,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],m_.push(2*(5*r+t)),w_.push((n+1)*(n+2)/2%64);let i=BU;for(let a=0;a<7;a++)e=(e<<ad^(e>>UU)*$U)%MU,e&PU&&(i^=ad<<(ad<<BigInt(a))-ad);b_.push(i)}const[kU,LU]=f_(b_,!0),lO=(n,e,t)=>t>32?g_(n,e,t):d_(n,e,t),uO=(n,e,t)=>t>32?y_(n,e,t):p_(n,e,t);function jU(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let c=0;c<10;c++)t[c]=n[c]^n[c+10]^n[c+20]^n[c+30]^n[c+40];for(let c=0;c<10;c+=2){const u=(c+8)%10,h=(c+2)%10,d=t[h],p=t[h+1],y=lO(d,p,1)^t[u],w=uO(d,p,1)^t[u+1];for(let v=0;v<50;v+=10)n[c+v]^=y,n[c+v+1]^=w}let i=n[2],a=n[3];for(let c=0;c<24;c++){const u=w_[c],h=lO(i,a,u),d=uO(i,a,u),p=m_[c];i=n[p],a=n[p+1],n[p]=h,n[p+1]=d}for(let c=0;c<50;c+=10){for(let u=0;u<10;u++)t[u]=n[c+u];for(let u=0;u<10;u++)n[c+u]^=~t[(u+2)%10]&t[(u+4)%10]}n[0]^=kU[r],n[1]^=LU[r]}t.fill(0)}let zU=class v_ extends GE{constructor(e,t,r,i=!1,a=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=a,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,tm(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=tU(this.state)}keccak(){jU(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){kh(this);const{blockLen:t,state:r}=this;e=qm(e);const i=e.length;for(let a=0;a<i;){const c=Math.min(t-this.pos,i-a);for(let u=0;u<c;u++)r[this.pos++]^=e[a++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(t&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){kh(this,!1),VE(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,a=e.length;i<a;){this.posOut>=r&&this.keccak();const c=Math.min(r-this.posOut,a-i);e.set(t.subarray(this.posOut,this.posOut+c),i),this.posOut+=c,i+=c}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return tm(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(s_(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:a,enableXOF:c}=this;return e||(e=new v_(t,r,i,c,a)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=a,e.suffix=r,e.outputLen=i,e.enableXOF=c,e.destroyed=this.destroyed,e}};const HU=(n,e,t)=>KE(()=>new zU(e,n,t)),FU=HU(1,136,256/8);let E_=!1;const A_=function(n){return FU(n)};let x_=A_;function Zt(n){const e=We(n,"data");return Te(x_(e))}Zt._=A_;Zt.lock=function(){E_=!0};Zt.register=function(n){if(E_)throw new TypeError("keccak256 is locked");x_=n};Object.freeze(Zt);const S_=function(n){return RU("sha256").update(n).digest()};let O_=S_,T_=!1;function Yh(n){const e=We(n,"data");return Te(O_(e))}Yh._=S_;Yh.lock=function(){T_=!0};Yh.register=function(n){if(T_)throw new Error("sha256 is locked");O_=n};Object.freeze(Yh);Object.freeze(Yh);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const D_=BigInt(0),Vm=BigInt(1),qU=BigInt(2),Gm=n=>n instanceof Uint8Array,VU=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Lh(n){if(!Gm(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=VU[n[t]];return e}function C_(n){const e=n.toString(16);return e.length&1?`0${e}`:e}function QE(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}function jh(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let r=0;r<t.length;r++){const i=r*2,a=n.slice(i,i+2),c=Number.parseInt(a,16);if(Number.isNaN(c)||c<0)throw new Error("Invalid byte sequence");t[r]=c}return t}function ol(n){return QE(Lh(n))}function YE(n){if(!Gm(n))throw new Error("Uint8Array expected");return QE(Lh(Uint8Array.from(n).reverse()))}function zh(n,e){return jh(n.toString(16).padStart(e*2,"0"))}function JE(n,e){return zh(n,e).reverse()}function GU(n){return jh(C_(n))}function ki(n,e,t){let r;if(typeof e=="string")try{r=jh(e)}catch(a){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${a}`)}else if(Gm(e))r=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(`${n} expected ${t} bytes, got ${i}`);return r}function Gd(...n){const e=new Uint8Array(n.reduce((r,i)=>r+i.length,0));let t=0;return n.forEach(r=>{if(!Gm(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}function KU(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function QU(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function YU(n){let e;for(e=0;n>D_;n>>=Vm,e+=1);return e}function JU(n,e){return n>>BigInt(e)&Vm}const ZU=(n,e,t)=>n|(t?Vm:D_)<<BigInt(e),ZE=n=>(qU<<BigInt(n-1))-Vm,Fb=n=>new Uint8Array(n),hO=n=>Uint8Array.from(n);function __(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=Fb(n),i=Fb(n),a=0;const c=()=>{r.fill(1),i.fill(0),a=0},u=(...y)=>t(i,r,...y),h=(y=Fb())=>{i=u(hO([0]),y),r=u(),y.length!==0&&(i=u(hO([1]),y),r=u())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let y=0;const w=[];for(;y<e;){r=u();const v=r.slice();w.push(v),y+=r.length}return Gd(...w)};return(y,w)=>{c(),h(y);let v;for(;!(v=w(d()));)h();return c(),v}}const XU={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||n instanceof Uint8Array,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function Cp(n,e,t={}){const r=(i,a,c)=>{const u=XU[a];if(typeof u!="function")throw new Error(`Invalid validator "${a}", expected function`);const h=n[i];if(!(c&&h===void 0)&&!u(h,n))throw new Error(`Invalid param ${String(i)}=${h} (${typeof h}), expected ${a}`)};for(const[i,a]of Object.entries(e))r(i,a,!1);for(const[i,a]of Object.entries(t))r(i,a,!0);return n}const WU=Object.freeze(Object.defineProperty({__proto__:null,bitGet:JU,bitLen:YU,bitMask:ZE,bitSet:ZU,bytesToHex:Lh,bytesToNumberBE:ol,bytesToNumberLE:YE,concatBytes:Gd,createHmacDrbg:__,ensureBytes:ki,equalBytes:KU,hexToBytes:jh,hexToNumber:QE,numberToBytesBE:zh,numberToBytesLE:JE,numberToHexUnpadded:C_,numberToVarBytesBE:GU,utf8ToBytes:QU,validateObject:Cp},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gn=BigInt(0),jt=BigInt(1),Dc=BigInt(2),eM=BigInt(3),gv=BigInt(4),fO=BigInt(5),dO=BigInt(8);BigInt(9);BigInt(16);function vr(n,e){const t=n%e;return t>=gn?t:e+t}function tM(n,e,t){if(t<=gn||e<gn)throw new Error("Expected power/modulo > 0");if(t===jt)return gn;let r=jt;for(;e>gn;)e&jt&&(r=r*n%t),n=n*n%t,e>>=jt;return r}function ai(n,e,t){let r=n;for(;e-- >gn;)r*=r,r%=t;return r}function yv(n,e){if(n===gn||e<=gn)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=vr(n,e),r=e,i=gn,a=jt;for(;t!==gn;){const u=r/t,h=r%t,d=i-a*u;r=t,t=h,i=a,a=d}if(r!==jt)throw new Error("invert: does not exist");return vr(i,e)}function nM(n){const e=(n-jt)/Dc;let t,r,i;for(t=n-jt,r=0;t%Dc===gn;t/=Dc,r++);for(i=Dc;i<n&&tM(i,e,n)!==n-jt;i++);if(r===1){const c=(n+jt)/gv;return function(h,d){const p=h.pow(d,c);if(!h.eql(h.sqr(p),d))throw new Error("Cannot find square root");return p}}const a=(t+jt)/Dc;return function(u,h){if(u.pow(h,e)===u.neg(u.ONE))throw new Error("Cannot find square root");let d=r,p=u.pow(u.mul(u.ONE,i),t),y=u.pow(h,a),w=u.pow(h,t);for(;!u.eql(w,u.ONE);){if(u.eql(w,u.ZERO))return u.ZERO;let v=1;for(let E=u.sqr(w);v<d&&!u.eql(E,u.ONE);v++)E=u.sqr(E);const b=u.pow(p,jt<<BigInt(d-v-1));p=u.sqr(b),y=u.mul(y,b),w=u.mul(w,p),d=v}return y}}function rM(n){if(n%gv===eM){const e=(n+jt)/gv;return function(r,i){const a=r.pow(i,e);if(!r.eql(r.sqr(a),i))throw new Error("Cannot find square root");return a}}if(n%dO===fO){const e=(n-fO)/dO;return function(r,i){const a=r.mul(i,Dc),c=r.pow(a,e),u=r.mul(i,c),h=r.mul(r.mul(u,Dc),c),d=r.mul(u,r.sub(h,r.ONE));if(!r.eql(r.sqr(d),i))throw new Error("Cannot find square root");return d}}return nM(n)}const iM=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function sM(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=iM.reduce((r,i)=>(r[i]="function",r),e);return Cp(n,t)}function aM(n,e,t){if(t<gn)throw new Error("Expected power > 0");if(t===gn)return n.ONE;if(t===jt)return e;let r=n.ONE,i=e;for(;t>gn;)t&jt&&(r=n.mul(r,i)),i=n.sqr(i),t>>=jt;return r}function oM(n,e){const t=new Array(e.length),r=e.reduce((a,c,u)=>n.is0(c)?a:(t[u]=a,n.mul(a,c)),n.ONE),i=n.inv(r);return e.reduceRight((a,c,u)=>n.is0(c)?a:(t[u]=n.mul(a,t[u]),n.mul(a,c)),i),t}function N_(n,e){const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function cM(n,e,t=!1,r={}){if(n<=gn)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:i,nByteLength:a}=N_(n,e);if(a>2048)throw new Error("Field lengths over 2048 bytes are not supported");const c=rM(n),u=Object.freeze({ORDER:n,BITS:i,BYTES:a,MASK:ZE(i),ZERO:gn,ONE:jt,create:h=>vr(h,n),isValid:h=>{if(typeof h!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof h}`);return gn<=h&&h<n},is0:h=>h===gn,isOdd:h=>(h&jt)===jt,neg:h=>vr(-h,n),eql:(h,d)=>h===d,sqr:h=>vr(h*h,n),add:(h,d)=>vr(h+d,n),sub:(h,d)=>vr(h-d,n),mul:(h,d)=>vr(h*d,n),pow:(h,d)=>aM(u,h,d),div:(h,d)=>vr(h*yv(d,n),n),sqrN:h=>h*h,addN:(h,d)=>h+d,subN:(h,d)=>h-d,mulN:(h,d)=>h*d,inv:h=>yv(h,n),sqrt:r.sqrt||(h=>c(u,h)),invertBatch:h=>oM(u,h),cmov:(h,d,p)=>p?d:h,toBytes:h=>t?JE(h,a):zh(h,a),fromBytes:h=>{if(h.length!==a)throw new Error(`Fp.fromBytes: expected ${a}, got ${h.length}`);return t?YE(h):ol(h)}});return Object.freeze(u)}function I_(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function R_(n){const e=I_(n);return e+Math.ceil(e/2)}function lM(n,e,t=!1){const r=n.length,i=I_(e),a=R_(e);if(r<16||r<a||r>1024)throw new Error(`expected ${a}-1024 bytes of input, got ${r}`);const c=t?ol(n):YE(n),u=vr(c,e-jt)+jt;return t?JE(u,i):zh(u,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const uM=BigInt(0),qb=BigInt(1);function hM(n,e){const t=(i,a)=>{const c=a.negate();return i?c:a},r=i=>{const a=Math.ceil(e/i)+1,c=2**(i-1);return{windows:a,windowSize:c}};return{constTimeNegate:t,unsafeLadder(i,a){let c=n.ZERO,u=i;for(;a>uM;)a&qb&&(c=c.add(u)),u=u.double(),a>>=qb;return c},precomputeWindow(i,a){const{windows:c,windowSize:u}=r(a),h=[];let d=i,p=d;for(let y=0;y<c;y++){p=d,h.push(p);for(let w=1;w<u;w++)p=p.add(d),h.push(p);d=p.double()}return h},wNAF(i,a,c){const{windows:u,windowSize:h}=r(i);let d=n.ZERO,p=n.BASE;const y=BigInt(2**i-1),w=2**i,v=BigInt(i);for(let b=0;b<u;b++){const E=b*h;let A=Number(c&y);c>>=v,A>h&&(A-=w,c+=qb);const S=E,B=E+Math.abs(A)-1,D=b%2!==0,U=A<0;A===0?p=p.add(t(D,a[S])):d=d.add(t(U,a[B]))}return{p:d,f:p}},wNAFCached(i,a,c,u){const h=i._WINDOW_SIZE||1;let d=a.get(i);return d||(d=this.precomputeWindow(i,h),h!==1&&a.set(i,u(d))),this.wNAF(h,d,c)}}}function B_(n){return sM(n.Fp),Cp(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...N_(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function fM(n){const e=B_(n);Cp(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:r,a:i}=e;if(t){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:dM,hexToBytes:pM}=WU,Pc={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){const{Err:e}=Pc;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");const t=n[1],r=n.subarray(2,t+2);if(!t||r.length!==t)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:dM(r),l:n.subarray(t+2)}},toSig(n){const{Err:e}=Pc,t=typeof n=="string"?pM(n):n;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let r=t.length;if(r<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:a}=Pc._parseInt(t.subarray(2)),{d:c,l:u}=Pc._parseInt(a);if(u.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:c}},hexFromSig(n){const e=d=>Number.parseInt(d[0],16)&8?"00"+d:d,t=d=>{const p=d.toString(16);return p.length&1?`0${p}`:p},r=e(t(n.s)),i=e(t(n.r)),a=r.length/2,c=i.length/2,u=t(a),h=t(c);return`30${t(c+a+4)}02${h}${i}02${u}${r}`}},ba=BigInt(0),mi=BigInt(1);BigInt(2);const pO=BigInt(3);BigInt(4);function gM(n){const e=fM(n),{Fp:t}=e,r=e.toBytes||((b,E,A)=>{const S=E.toAffine();return Gd(Uint8Array.from([4]),t.toBytes(S.x),t.toBytes(S.y))}),i=e.fromBytes||(b=>{const E=b.subarray(1),A=t.fromBytes(E.subarray(0,t.BYTES)),S=t.fromBytes(E.subarray(t.BYTES,2*t.BYTES));return{x:A,y:S}});function a(b){const{a:E,b:A}=e,S=t.sqr(b),B=t.mul(S,b);return t.add(t.add(B,t.mul(b,E)),A)}if(!t.eql(t.sqr(e.Gy),a(e.Gx)))throw new Error("bad generator point: equation left != right");function c(b){return typeof b=="bigint"&&ba<b&&b<e.n}function u(b){if(!c(b))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function h(b){const{allowedPrivateKeyLengths:E,nByteLength:A,wrapPrivateKey:S,n:B}=e;if(E&&typeof b!="bigint"){if(b instanceof Uint8Array&&(b=Lh(b)),typeof b!="string"||!E.includes(b.length))throw new Error("Invalid key");b=b.padStart(A*2,"0")}let D;try{D=typeof b=="bigint"?b:ol(ki("private key",b,A))}catch{throw new Error(`private key must be ${A} bytes, hex or bigint, not ${typeof b}`)}return S&&(D=vr(D,B)),u(D),D}const d=new Map;function p(b){if(!(b instanceof y))throw new Error("ProjectivePoint expected")}class y{constructor(E,A,S){if(this.px=E,this.py=A,this.pz=S,E==null||!t.isValid(E))throw new Error("x required");if(A==null||!t.isValid(A))throw new Error("y required");if(S==null||!t.isValid(S))throw new Error("z required")}static fromAffine(E){const{x:A,y:S}=E||{};if(!E||!t.isValid(A)||!t.isValid(S))throw new Error("invalid affine point");if(E instanceof y)throw new Error("projective point not allowed");const B=D=>t.eql(D,t.ZERO);return B(A)&&B(S)?y.ZERO:new y(A,S,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(E){const A=t.invertBatch(E.map(S=>S.pz));return E.map((S,B)=>S.toAffine(A[B])).map(y.fromAffine)}static fromHex(E){const A=y.fromAffine(i(ki("pointHex",E)));return A.assertValidity(),A}static fromPrivateKey(E){return y.BASE.multiply(h(E))}_setWindowSize(E){this._WINDOW_SIZE=E,d.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:E,y:A}=this.toAffine();if(!t.isValid(E)||!t.isValid(A))throw new Error("bad point: x or y not FE");const S=t.sqr(A),B=a(E);if(!t.eql(S,B))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:E}=this.toAffine();if(t.isOdd)return!t.isOdd(E);throw new Error("Field doesn't support isOdd")}equals(E){p(E);const{px:A,py:S,pz:B}=this,{px:D,py:U,pz:I}=E,N=t.eql(t.mul(A,I),t.mul(D,B)),k=t.eql(t.mul(S,I),t.mul(U,B));return N&&k}negate(){return new y(this.px,t.neg(this.py),this.pz)}double(){const{a:E,b:A}=e,S=t.mul(A,pO),{px:B,py:D,pz:U}=this;let I=t.ZERO,N=t.ZERO,k=t.ZERO,$=t.mul(B,B),P=t.mul(D,D),L=t.mul(U,U),z=t.mul(B,D);return z=t.add(z,z),k=t.mul(B,U),k=t.add(k,k),I=t.mul(E,k),N=t.mul(S,L),N=t.add(I,N),I=t.sub(P,N),N=t.add(P,N),N=t.mul(I,N),I=t.mul(z,I),k=t.mul(S,k),L=t.mul(E,L),z=t.sub($,L),z=t.mul(E,z),z=t.add(z,k),k=t.add($,$),$=t.add(k,$),$=t.add($,L),$=t.mul($,z),N=t.add(N,$),L=t.mul(D,U),L=t.add(L,L),$=t.mul(L,z),I=t.sub(I,$),k=t.mul(L,P),k=t.add(k,k),k=t.add(k,k),new y(I,N,k)}add(E){p(E);const{px:A,py:S,pz:B}=this,{px:D,py:U,pz:I}=E;let N=t.ZERO,k=t.ZERO,$=t.ZERO;const P=e.a,L=t.mul(e.b,pO);let z=t.mul(A,D),V=t.mul(S,U),ne=t.mul(B,I),Z=t.add(A,S),C=t.add(D,U);Z=t.mul(Z,C),C=t.add(z,V),Z=t.sub(Z,C),C=t.add(A,B);let O=t.add(D,I);return C=t.mul(C,O),O=t.add(z,ne),C=t.sub(C,O),O=t.add(S,B),N=t.add(U,I),O=t.mul(O,N),N=t.add(V,ne),O=t.sub(O,N),$=t.mul(P,C),N=t.mul(L,ne),$=t.add(N,$),N=t.sub(V,$),$=t.add(V,$),k=t.mul(N,$),V=t.add(z,z),V=t.add(V,z),ne=t.mul(P,ne),C=t.mul(L,C),V=t.add(V,ne),ne=t.sub(z,ne),ne=t.mul(P,ne),C=t.add(C,ne),z=t.mul(V,C),k=t.add(k,z),z=t.mul(O,C),N=t.mul(Z,N),N=t.sub(N,z),z=t.mul(Z,V),$=t.mul(O,$),$=t.add($,z),new y(N,k,$)}subtract(E){return this.add(E.negate())}is0(){return this.equals(y.ZERO)}wNAF(E){return v.wNAFCached(this,d,E,A=>{const S=t.invertBatch(A.map(B=>B.pz));return A.map((B,D)=>B.toAffine(S[D])).map(y.fromAffine)})}multiplyUnsafe(E){const A=y.ZERO;if(E===ba)return A;if(u(E),E===mi)return this;const{endo:S}=e;if(!S)return v.unsafeLadder(this,E);let{k1neg:B,k1:D,k2neg:U,k2:I}=S.splitScalar(E),N=A,k=A,$=this;for(;D>ba||I>ba;)D&mi&&(N=N.add($)),I&mi&&(k=k.add($)),$=$.double(),D>>=mi,I>>=mi;return B&&(N=N.negate()),U&&(k=k.negate()),k=new y(t.mul(k.px,S.beta),k.py,k.pz),N.add(k)}multiply(E){u(E);let A=E,S,B;const{endo:D}=e;if(D){const{k1neg:U,k1:I,k2neg:N,k2:k}=D.splitScalar(A);let{p:$,f:P}=this.wNAF(I),{p:L,f:z}=this.wNAF(k);$=v.constTimeNegate(U,$),L=v.constTimeNegate(N,L),L=new y(t.mul(L.px,D.beta),L.py,L.pz),S=$.add(L),B=P.add(z)}else{const{p:U,f:I}=this.wNAF(A);S=U,B=I}return y.normalizeZ([S,B])[0]}multiplyAndAddUnsafe(E,A,S){const B=y.BASE,D=(I,N)=>N===ba||N===mi||!I.equals(B)?I.multiplyUnsafe(N):I.multiply(N),U=D(this,A).add(D(E,S));return U.is0()?void 0:U}toAffine(E){const{px:A,py:S,pz:B}=this,D=this.is0();E==null&&(E=D?t.ONE:t.inv(B));const U=t.mul(A,E),I=t.mul(S,E),N=t.mul(B,E);if(D)return{x:t.ZERO,y:t.ZERO};if(!t.eql(N,t.ONE))throw new Error("invZ was invalid");return{x:U,y:I}}isTorsionFree(){const{h:E,isTorsionFree:A}=e;if(E===mi)return!0;if(A)return A(y,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:E,clearCofactor:A}=e;return E===mi?this:A?A(y,this):this.multiplyUnsafe(e.h)}toRawBytes(E=!0){return this.assertValidity(),r(y,this,E)}toHex(E=!0){return Lh(this.toRawBytes(E))}}y.BASE=new y(e.Gx,e.Gy,t.ONE),y.ZERO=new y(t.ZERO,t.ONE,t.ZERO);const w=e.nBitLength,v=hM(y,e.endo?Math.ceil(w/2):w);return{CURVE:e,ProjectivePoint:y,normPrivateKeyToScalar:h,weierstrassEquation:a,isWithinCurveOrder:c}}function yM(n){const e=B_(n);return Cp(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function mM(n){const e=yM(n),{Fp:t,n:r}=e,i=t.BYTES+1,a=2*t.BYTES+1;function c(C){return ba<C&&C<t.ORDER}function u(C){return vr(C,r)}function h(C){return yv(C,r)}const{ProjectivePoint:d,normPrivateKeyToScalar:p,weierstrassEquation:y,isWithinCurveOrder:w}=gM({...e,toBytes(C,O,M){const q=O.toAffine(),G=t.toBytes(q.x),_=Gd;return M?_(Uint8Array.from([O.hasEvenY()?2:3]),G):_(Uint8Array.from([4]),G,t.toBytes(q.y))},fromBytes(C){const O=C.length,M=C[0],q=C.subarray(1);if(O===i&&(M===2||M===3)){const G=ol(q);if(!c(G))throw new Error("Point is not on curve");const _=y(G);let F=t.sqrt(_);const X=(F&mi)===mi;return(M&1)===1!==X&&(F=t.neg(F)),{x:G,y:F}}else if(O===a&&M===4){const G=t.fromBytes(q.subarray(0,t.BYTES)),_=t.fromBytes(q.subarray(t.BYTES,2*t.BYTES));return{x:G,y:_}}else throw new Error(`Point of length ${O} was invalid. Expected ${i} compressed bytes or ${a} uncompressed bytes`)}}),v=C=>Lh(zh(C,e.nByteLength));function b(C){const O=r>>mi;return C>O}function E(C){return b(C)?u(-C):C}const A=(C,O,M)=>ol(C.slice(O,M));class S{constructor(O,M,q){this.r=O,this.s=M,this.recovery=q,this.assertValidity()}static fromCompact(O){const M=e.nByteLength;return O=ki("compactSignature",O,M*2),new S(A(O,0,M),A(O,M,2*M))}static fromDER(O){const{r:M,s:q}=Pc.toSig(ki("DER",O));return new S(M,q)}assertValidity(){if(!w(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!w(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(O){return new S(this.r,this.s,O)}recoverPublicKey(O){const{r:M,s:q,recovery:G}=this,_=k(ki("msgHash",O));if(G==null||![0,1,2,3].includes(G))throw new Error("recovery id invalid");const F=G===2||G===3?M+e.n:M;if(F>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const X=(G&1)===0?"02":"03",re=d.fromHex(X+v(F)),ie=h(F),ge=u(-_*ie),le=u(q*ie),ue=d.BASE.multiplyAndAddUnsafe(re,ge,le);if(!ue)throw new Error("point at infinify");return ue.assertValidity(),ue}hasHighS(){return b(this.s)}normalizeS(){return this.hasHighS()?new S(this.r,u(-this.s),this.recovery):this}toDERRawBytes(){return jh(this.toDERHex())}toDERHex(){return Pc.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return jh(this.toCompactHex())}toCompactHex(){return v(this.r)+v(this.s)}}const B={isValidPrivateKey(C){try{return p(C),!0}catch{return!1}},normPrivateKeyToScalar:p,randomPrivateKey:()=>{const C=R_(e.n);return lM(e.randomBytes(C),e.n)},precompute(C=8,O=d.BASE){return O._setWindowSize(C),O.multiply(BigInt(3)),O}};function D(C,O=!0){return d.fromPrivateKey(C).toRawBytes(O)}function U(C){const O=C instanceof Uint8Array,M=typeof C=="string",q=(O||M)&&C.length;return O?q===i||q===a:M?q===2*i||q===2*a:C instanceof d}function I(C,O,M=!0){if(U(C))throw new Error("first arg must be private key");if(!U(O))throw new Error("second arg must be public key");return d.fromHex(O).multiply(p(C)).toRawBytes(M)}const N=e.bits2int||function(C){const O=ol(C),M=C.length*8-e.nBitLength;return M>0?O>>BigInt(M):O},k=e.bits2int_modN||function(C){return u(N(C))},$=ZE(e.nBitLength);function P(C){if(typeof C!="bigint")throw new Error("bigint expected");if(!(ba<=C&&C<$))throw new Error(`bigint expected < 2^${e.nBitLength}`);return zh(C,e.nByteLength)}function L(C,O,M=z){if(["recovered","canonical"].some(ve=>ve in M))throw new Error("sign() legacy options not supported");const{hash:q,randomBytes:G}=e;let{lowS:_,prehash:F,extraEntropy:X}=M;_==null&&(_=!0),C=ki("msgHash",C),F&&(C=ki("prehashed msgHash",q(C)));const re=k(C),ie=p(O),ge=[P(ie),P(re)];if(X!=null){const ve=X===!0?G(t.BYTES):X;ge.push(ki("extraEntropy",ve))}const le=Gd(...ge),ue=re;function de(ve){const Ne=N(ve);if(!w(Ne))return;const Ce=h(Ne),ze=d.BASE.multiply(Ne).toAffine(),Qe=u(ze.x);if(Qe===ba)return;const st=u(Ce*u(ue+Qe*ie));if(st===ba)return;let Ct=(ze.x===Qe?0:2)|Number(ze.y&mi),qt=st;return _&&b(st)&&(qt=E(st),Ct^=1),new S(Qe,qt,Ct)}return{seed:le,k2sig:de}}const z={lowS:e.lowS,prehash:!1},V={lowS:e.lowS,prehash:!1};function ne(C,O,M=z){const{seed:q,k2sig:G}=L(C,O,M),_=e;return __(_.hash.outputLen,_.nByteLength,_.hmac)(q,G)}d.BASE._setWindowSize(8);function Z(C,O,M,q=V){var ze;const G=C;if(O=ki("msgHash",O),M=ki("publicKey",M),"strict"in q)throw new Error("options.strict was renamed to lowS");const{lowS:_,prehash:F}=q;let X,re;try{if(typeof G=="string"||G instanceof Uint8Array)try{X=S.fromDER(G)}catch(Qe){if(!(Qe instanceof Pc.Err))throw Qe;X=S.fromCompact(G)}else if(typeof G=="object"&&typeof G.r=="bigint"&&typeof G.s=="bigint"){const{r:Qe,s:st}=G;X=new S(Qe,st)}else throw new Error("PARSE");re=d.fromHex(M)}catch(Qe){if(Qe.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(_&&X.hasHighS())return!1;F&&(O=e.hash(O));const{r:ie,s:ge}=X,le=k(O),ue=h(ge),de=u(le*ue),ve=u(ie*ue),Ne=(ze=d.BASE.multiplyAndAddUnsafe(re,de,ve))==null?void 0:ze.toAffine();return Ne?u(Ne.x)===ie:!1}return{CURVE:e,getPublicKey:D,getSharedSecret:I,sign:ne,verify:Z,ProjectivePoint:d,Signature:S,utils:B}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function wM(n){return{hash:n,hmac:(e,...t)=>c_(n,e,iU(...t)),randomBytes:sU}}function bM(n,e){const t=r=>mM({...n,...wM(r)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const P_=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),gO=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),vM=BigInt(1),mv=BigInt(2),yO=(n,e)=>(n+e/mv)/e;function EM(n){const e=P_,t=BigInt(3),r=BigInt(6),i=BigInt(11),a=BigInt(22),c=BigInt(23),u=BigInt(44),h=BigInt(88),d=n*n*n%e,p=d*d*n%e,y=ai(p,t,e)*p%e,w=ai(y,t,e)*p%e,v=ai(w,mv,e)*d%e,b=ai(v,i,e)*v%e,E=ai(b,a,e)*b%e,A=ai(E,u,e)*E%e,S=ai(A,h,e)*A%e,B=ai(S,u,e)*E%e,D=ai(B,t,e)*p%e,U=ai(D,c,e)*b%e,I=ai(U,r,e)*d%e,N=ai(I,mv,e);if(!wv.eql(wv.sqr(N),n))throw new Error("Cannot find square root");return N}const wv=cM(P_,void 0,void 0,{sqrt:EM}),bo=bM({a:BigInt(0),b:BigInt(7),Fp:wv,n:gO,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=gO,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-vM*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=t,c=BigInt("0x100000000000000000000000000000000"),u=yO(a*n,e),h=yO(-r*n,e);let d=vr(n-u*t-h*i,e),p=vr(-u*r-h*a,e);const y=d>c,w=p>c;if(y&&(d=e-d),w&&(p=e-p),d>c||p>c)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:y,k1:d,k2neg:w,k2:p}}}},u_);BigInt(0);bo.ProjectivePoint;const Kd="0x0000000000000000000000000000000000000000",mO="0x0000000000000000000000000000000000000000000000000000000000000000",wO=BigInt(0),bO=BigInt(1),vO=BigInt(2),EO=BigInt(27),AO=BigInt(28),sy=BigInt(35),du={};function xO(n){return ll(Xn(n),32)}var ah,oh,ch,Jc;const $i=class $i{constructor(e,t,r,i){ce(this,ah);ce(this,oh);ce(this,ch);ce(this,Jc);Dp(e,du,"Signature"),j(this,ah,t),j(this,oh,r),j(this,ch,i),j(this,Jc,null)}get r(){return T(this,ah)}set r(e){Q(Ku(e)===32,"invalid r","value",e),j(this,ah,Te(e))}get s(){return T(this,oh)}set s(e){Q(Ku(e)===32,"invalid s","value",e);const t=Te(e);Q(parseInt(t.substring(0,3))<8,"non-canonical s","value",t),j(this,oh,t)}get v(){return T(this,ch)}set v(e){const t=ke(e,"value");Q(t===27||t===28,"invalid v","v",e),j(this,ch,t)}get networkV(){return T(this,Jc)}get legacyChainId(){const e=this.networkV;return e==null?null:$i.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=We(this.s);return this.yParity&&(e[0]|=128),Te(e)}get compactSerialized(){return Ft([this.r,this.yParityAndS])}get serialized(){return Ft([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new $i(du,this.r,this.s,this.v);return this.networkV&&j(e,Jc,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){const t=_e(e,"v");return t==EO||t==AO?wO:(Q(t>=sy,"invalid EIP-155 v","v",e),(t-sy)/vO)}static getChainIdV(e,t){return _e(e)*vO+BigInt(35+t-27)}static getNormalizedV(e){const t=_e(e);return t===wO||t===EO?27:t===bO||t===AO?28:(Q(t>=sy,"invalid v","v",e),t&bO?27:28)}static from(e){function t(d,p){Q(d,p,"signature",e)}if(e==null)return new $i(du,mO,mO,27);if(typeof e=="string"){const d=We(e,"signature");if(d.length===64){const p=Te(d.slice(0,32)),y=d.slice(32,64),w=y[0]&128?28:27;return y[0]&=127,new $i(du,p,Te(y),w)}if(d.length===65){const p=Te(d.slice(0,32)),y=d.slice(32,64);t((y[0]&128)===0,"non-canonical s");const w=$i.getNormalizedV(d[64]);return new $i(du,p,Te(y),w)}t(!1,"invalid raw signature length")}if(e instanceof $i)return e.clone();const r=e.r;t(r!=null,"missing r");const i=xO(r),a=function(d,p){if(d!=null)return xO(d);if(p!=null){t(xt(p,32),"invalid yParityAndS");const y=We(p);return y[0]&=127,Te(y)}t(!1,"missing s")}(e.s,e.yParityAndS);t((We(a)[0]&128)==0,"non-canonical s");const{networkV:c,v:u}=function(d,p,y){if(d!=null){const w=_e(d);return{networkV:w>=sy?w:void 0,v:$i.getNormalizedV(w)}}if(p!=null)return t(xt(p,32),"invalid yParityAndS"),{v:We(p)[0]&128?28:27};if(y!=null){switch(ke(y,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),h=new $i(du,i,a,u);return c&&j(h,Jc,c),t(e.yParity==null||ke(e.yParity,"sig.yParity")===h.yParity,"yParity mismatch"),t(e.yParityAndS==null||e.yParityAndS===h.yParityAndS,"yParityAndS mismatch"),h}};ah=new WeakMap,oh=new WeakMap,ch=new WeakMap,Jc=new WeakMap;let Qi=$i;var ua;const Ic=class Ic{constructor(e){ce(this,ua);Q(Ku(e)===32,"invalid private key","privateKey","[REDACTED]"),j(this,ua,Te(e))}get privateKey(){return T(this,ua)}get publicKey(){return Ic.computePublicKey(T(this,ua))}get compressedPublicKey(){return Ic.computePublicKey(T(this,ua),!0)}sign(e){Q(Ku(e)===32,"invalid digest length","digest",e);const t=bo.sign(Zn(e),Zn(T(this,ua)),{lowS:!0});return Qi.from({r:Go(t.r,32),s:Go(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=Ic.computePublicKey(e);return Te(bo.getSharedSecret(Zn(T(this,ua)),We(t),!1))}static computePublicKey(e,t){let r=We(e,"key");if(r.length===32){const a=bo.getPublicKey(r,!!t);return Te(a)}if(r.length===64){const a=new Uint8Array(65);a[0]=4,a.set(r,1),r=a}const i=bo.ProjectivePoint.fromHex(r);return Te(i.toRawBytes(t))}static recoverPublicKey(e,t){Q(Ku(e)===32,"invalid digest length","digest",e);const r=Qi.from(t);let i=bo.Signature.fromCompact(Zn(Ft([r.r,r.s])));i=i.addRecoveryBit(r.yParity);const a=i.recoverPublicKey(Zn(e));return Q(a!=null,"invalid signature for digest","signature",t),"0x"+a.toHex(!1)}static addPoints(e,t,r){const i=bo.ProjectivePoint.fromHex(Ic.computePublicKey(e).substring(2)),a=bo.ProjectivePoint.fromHex(Ic.computePublicKey(t).substring(2));return"0x"+i.add(a).toHex(!!r)}};ua=new WeakMap;let Qd=Ic;const AM=BigInt(0),xM=BigInt(36);function SO(n){n=n.toLowerCase();const e=n.substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);const r=We(Zt(t));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(r[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const XE={};for(let n=0;n<10;n++)XE[String(n)]=String(n);for(let n=0;n<26;n++)XE[String.fromCharCode(65+n)]=String(10+n);const OO=15;function SM(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let e=n.split("").map(r=>XE[r]).join("");for(;e.length>=OO;){let r=e.substring(0,OO);e=parseInt(r,10)%97+e.substring(r.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}const OM=function(){const n={};for(let e=0;e<36;e++){const t="0123456789abcdefghijklmnopqrstuvwxyz"[e];n[t]=BigInt(e)}return n}();function TM(n){n=n.toLowerCase();let e=AM;for(let t=0;t<n.length;t++)e=e*xM+OM[n[t]];return e}function dt(n){if(Q(typeof n=="string","invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/)){n.startsWith("0x")||(n="0x"+n);const e=SO(n);return Q(!n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===n,"bad address checksum","address",n),e}if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){Q(n.substring(2,4)===SM(n),"bad icap checksum","address",n);let e=TM(n.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return SO("0x"+e)}Q(!1,"invalid address","address",n)}function DM(n){const e=dt(n.from);let r=_e(n.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,dt(Ut(Zt(ul([e,r])),12))}function U_(n){return n&&typeof n.getAddress=="function"}function Py(n){try{return dt(n),!0}catch{}return!1}async function Vb(n,e){const t=await e;return(t==null||t==="0x0000000000000000000000000000000000000000")&&(ye(typeof n!="string","unconfigured name","UNCONFIGURED_NAME",{value:n}),Q(!1,"invalid AddressLike value; did not resolve to a value address","target",n)),dt(t)}function er(n,e){if(typeof n=="string")return n.match(/^0x[0-9a-f]{40}$/i)?dt(n):(ye(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),Vb(n,e.resolveName(n)));if(U_(n))return Vb(n,n.getAddress());if(n&&typeof n.then=="function")return Vb(n,n);Q(!1,"unsupported addressable value","target",n)}const na={};function Oe(n,e){let t=!1;return e<0&&(t=!0,e*=-1),new qn(na,`${t?"":"u"}int${e}`,n,{signed:t,width:e})}function tt(n,e){return new qn(na,`bytes${e||""}`,n,{size:e})}const TO=Symbol.for("_ethers_typed");var Zc;const ra=class ra{constructor(e,t,r,i){te(this,"type");te(this,"value");ce(this,Zc);te(this,"_typedSymbol");i==null&&(i=null),Dp(na,e,"Typed"),Be(this,{_typedSymbol:TO,type:t,value:r}),j(this,Zc,i),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return T(this,Zc)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return T(this,Zc)===!0?-1:T(this,Zc)===!1?this.value.length:null}static from(e,t){return new ra(na,e,t)}static uint8(e){return Oe(e,8)}static uint16(e){return Oe(e,16)}static uint24(e){return Oe(e,24)}static uint32(e){return Oe(e,32)}static uint40(e){return Oe(e,40)}static uint48(e){return Oe(e,48)}static uint56(e){return Oe(e,56)}static uint64(e){return Oe(e,64)}static uint72(e){return Oe(e,72)}static uint80(e){return Oe(e,80)}static uint88(e){return Oe(e,88)}static uint96(e){return Oe(e,96)}static uint104(e){return Oe(e,104)}static uint112(e){return Oe(e,112)}static uint120(e){return Oe(e,120)}static uint128(e){return Oe(e,128)}static uint136(e){return Oe(e,136)}static uint144(e){return Oe(e,144)}static uint152(e){return Oe(e,152)}static uint160(e){return Oe(e,160)}static uint168(e){return Oe(e,168)}static uint176(e){return Oe(e,176)}static uint184(e){return Oe(e,184)}static uint192(e){return Oe(e,192)}static uint200(e){return Oe(e,200)}static uint208(e){return Oe(e,208)}static uint216(e){return Oe(e,216)}static uint224(e){return Oe(e,224)}static uint232(e){return Oe(e,232)}static uint240(e){return Oe(e,240)}static uint248(e){return Oe(e,248)}static uint256(e){return Oe(e,256)}static uint(e){return Oe(e,256)}static int8(e){return Oe(e,-8)}static int16(e){return Oe(e,-16)}static int24(e){return Oe(e,-24)}static int32(e){return Oe(e,-32)}static int40(e){return Oe(e,-40)}static int48(e){return Oe(e,-48)}static int56(e){return Oe(e,-56)}static int64(e){return Oe(e,-64)}static int72(e){return Oe(e,-72)}static int80(e){return Oe(e,-80)}static int88(e){return Oe(e,-88)}static int96(e){return Oe(e,-96)}static int104(e){return Oe(e,-104)}static int112(e){return Oe(e,-112)}static int120(e){return Oe(e,-120)}static int128(e){return Oe(e,-128)}static int136(e){return Oe(e,-136)}static int144(e){return Oe(e,-144)}static int152(e){return Oe(e,-152)}static int160(e){return Oe(e,-160)}static int168(e){return Oe(e,-168)}static int176(e){return Oe(e,-176)}static int184(e){return Oe(e,-184)}static int192(e){return Oe(e,-192)}static int200(e){return Oe(e,-200)}static int208(e){return Oe(e,-208)}static int216(e){return Oe(e,-216)}static int224(e){return Oe(e,-224)}static int232(e){return Oe(e,-232)}static int240(e){return Oe(e,-240)}static int248(e){return Oe(e,-248)}static int256(e){return Oe(e,-256)}static int(e){return Oe(e,-256)}static bytes1(e){return tt(e,1)}static bytes2(e){return tt(e,2)}static bytes3(e){return tt(e,3)}static bytes4(e){return tt(e,4)}static bytes5(e){return tt(e,5)}static bytes6(e){return tt(e,6)}static bytes7(e){return tt(e,7)}static bytes8(e){return tt(e,8)}static bytes9(e){return tt(e,9)}static bytes10(e){return tt(e,10)}static bytes11(e){return tt(e,11)}static bytes12(e){return tt(e,12)}static bytes13(e){return tt(e,13)}static bytes14(e){return tt(e,14)}static bytes15(e){return tt(e,15)}static bytes16(e){return tt(e,16)}static bytes17(e){return tt(e,17)}static bytes18(e){return tt(e,18)}static bytes19(e){return tt(e,19)}static bytes20(e){return tt(e,20)}static bytes21(e){return tt(e,21)}static bytes22(e){return tt(e,22)}static bytes23(e){return tt(e,23)}static bytes24(e){return tt(e,24)}static bytes25(e){return tt(e,25)}static bytes26(e){return tt(e,26)}static bytes27(e){return tt(e,27)}static bytes28(e){return tt(e,28)}static bytes29(e){return tt(e,29)}static bytes30(e){return tt(e,30)}static bytes31(e){return tt(e,31)}static bytes32(e){return tt(e,32)}static address(e){return new ra(na,"address",e)}static bool(e){return new ra(na,"bool",!!e)}static bytes(e){return new ra(na,"bytes",e)}static string(e){return new ra(na,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new ra(na,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===TO}static dereference(e,t){if(ra.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}};Zc=new WeakMap;let qn=ra;class CM extends Ia{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let r=qn.dereference(t,"string");try{r=dt(r)}catch(i){return this._throwError(i.message,t)}return e.writeValue(r)}decode(e){return dt(Go(e.readValue(),20))}}class _M extends Ia{constructor(t){super(t.name,t.type,"_",t.dynamic);te(this,"coder");this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,r){return this.coder.encode(t,r)}decode(t){return this.coder.decode(t)}}function M_(n,e,t){let r=[];if(Array.isArray(t))r=t;else if(t&&typeof t=="object"){let h={};r=e.map(d=>{const p=d.localName;return ye(p,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:d},value:t}),ye(!h[p],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:d},value:t}),h[p]=!0,t[p]})}else Q(!1,"invalid tuple value","tuple",t);Q(e.length===r.length,"types/value length mismatch","tuple",t);let i=new hv,a=new hv,c=[];e.forEach((h,d)=>{let p=r[d];if(h.dynamic){let y=a.length;h.encode(a,p);let w=i.writeUpdatableValue();c.push(v=>{w(v+y)})}else h.encode(i,p)}),c.forEach(h=>{h(i.length)});let u=n.appendWriter(i);return u+=n.appendWriter(a),u}function $_(n,e){let t=[],r=[],i=n.subReader(0);return e.forEach(a=>{let c=null;if(a.dynamic){let u=n.readIndex(),h=i.subReader(u);try{c=a.decode(h)}catch(d){if(Dn(d,"BUFFER_OVERRUN"))throw d;c=d,c.baseType=a.name,c.name=a.localName,c.type=a.type}}else try{c=a.decode(n)}catch(u){if(Dn(u,"BUFFER_OVERRUN"))throw u;c=u,c.baseType=a.name,c.name=a.localName,c.type=a.type}if(c==null)throw new Error("investigate");t.push(c),r.push(a.localName||null)}),$h.fromItems(t,r)}class NM extends Ia{constructor(t,r,i){const a=t.type+"["+(r>=0?r:"")+"]",c=r===-1||t.dynamic;super("array",a,i,c);te(this,"coder");te(this,"length");Be(this,{coder:t,length:r})}defaultValue(){const t=this.coder.defaultValue(),r=[];for(let i=0;i<this.length;i++)r.push(t);return r}encode(t,r){const i=qn.dereference(r,"array");Array.isArray(i)||this._throwError("expected array value",i);let a=this.length;a===-1&&(a=i.length,t.writeValue(i.length)),VC(i.length,a,"coder array"+(this.localName?" "+this.localName:""));let c=[];for(let u=0;u<i.length;u++)c.push(this.coder);return M_(t,c,i)}decode(t){let r=this.length;r===-1&&(r=t.readIndex(),ye(r*Wn<=t.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:t.bytes,offset:r*Wn,length:t.dataLength}));let i=[];for(let a=0;a<r;a++)i.push(new _M(this.coder));return $_(t,i)}}class IM extends Ia{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const r=qn.dereference(t,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class k_ extends Ia{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=Zn(t);let r=e.writeValue(t.length);return r+=e.writeBytes(t),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class RM extends k_{constructor(e){super("bytes",e)}decode(e){return Te(super.decode(e))}}class BM extends Ia{constructor(t,r){let i="bytes"+String(t);super(i,i,r,!1);te(this,"size");Be(this,{size:t},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(t,r){let i=Zn(qn.dereference(r,this.type));return i.length!==this.size&&this._throwError("incorrect data length",r),t.writeBytes(i)}decode(t){return Te(t.readBytes(this.size))}}const PM=new Uint8Array([]);class UM extends Ia{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes(PM)}decode(e){return e.readBytes(0),null}}const MM=BigInt(0),$M=BigInt(1),kM=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class LM extends Ia{constructor(t,r,i){const a=(r?"int":"uint")+t*8;super(a,a,i,!1);te(this,"size");te(this,"signed");Be(this,{size:t,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(t,r){let i=_e(qn.dereference(r,this.type)),a=Bc(kM,Wn*8);if(this.signed){let c=Bc(a,this.size*8-1);(i>c||i<-(c+$M))&&this._throwError("value out-of-bounds",r),i=QC(i,8*Wn)}else(i<MM||i>Bc(a,this.size*8))&&this._throwError("value out-of-bounds",r);return t.writeValue(i)}decode(t){let r=Bc(t.readValue(),this.size*8);return this.signed&&(r=Xy(r,this.size*8)),r}}class jM extends k_{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Aa(qn.dereference(t,"string")))}decode(e){return Wy(super.decode(e))}}class ay extends Ia{constructor(t,r){let i=!1;const a=[];t.forEach(u=>{u.dynamic&&(i=!0),a.push(u.type)});const c="tuple("+a.join(",")+")";super("tuple",c,r,i);te(this,"coders");Be(this,{coders:Object.freeze(t.slice())})}defaultValue(){const t=[];this.coders.forEach(i=>{t.push(i.defaultValue())});const r=this.coders.reduce((i,a)=>{const c=a.localName;return c&&(i[c]||(i[c]=0),i[c]++),i},{});return this.coders.forEach((i,a)=>{let c=i.localName;!c||r[c]!==1||(c==="length"&&(c="_length"),t[c]==null&&(t[c]=t[a]))}),Object.freeze(t)}encode(t,r){const i=qn.dereference(r,"tuple");return M_(t,this.coders,i)}decode(t){return $_(t,this.coders)}}function hl(n){return Zt(Aa(n))}var zM="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const DO=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),CO=4;function HM(n){let e=0;function t(){return n[e++]<<8|n[e++]}let r=t(),i=1,a=[0,1];for(let I=1;I<r;I++)a.push(i+=t());let c=t(),u=e;e+=c;let h=0,d=0;function p(){return h==0&&(d=d<<8|n[e++],h=8),d>>--h&1}const y=31,w=2**y,v=w>>>1,b=v>>1,E=w-1;let A=0;for(let I=0;I<y;I++)A=A<<1|p();let S=[],B=0,D=w;for(;;){let I=Math.floor(((A-B+1)*i-1)/D),N=0,k=r;for(;k-N>1;){let L=N+k>>>1;I<a[L]?k=L:N=L}if(N==0)break;S.push(N);let $=B+Math.floor(D*a[N]/i),P=B+Math.floor(D*a[N+1]/i)-1;for(;(($^P)&v)==0;)A=A<<1&E|p(),$=$<<1&E,P=P<<1&E|1;for(;$&~P&b;)A=A&v|A<<1&E>>>1|p(),$=$<<1^v,P=(P^v)<<1|v|1;B=$,D=1+P-$}let U=r-4;return S.map(I=>{switch(I-U){case 3:return U+65792+(n[u++]<<16|n[u++]<<8|n[u++]);case 2:return U+256+(n[u++]<<8|n[u++]);case 1:return U+n[u++];default:return I-1}})}function FM(n){let e=0;return()=>n[e++]}function L_(n){return FM(HM(qM(n)))}function qM(n){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,a)=>e[i.charCodeAt(0)]=a);let t=n.length,r=new Uint8Array(6*t>>3);for(let i=0,a=0,c=0,u=0;i<t;i++)u=u<<6|e[n.charCodeAt(i)],c+=6,c>=8&&(r[a++]=u>>(c-=8));return r}function VM(n){return n&1?~n>>1:n>>1}function GM(n,e){let t=Array(n);for(let r=0,i=0;r<n;r++)t[r]=i+=VM(e());return t}function Yd(n,e=0){let t=[];for(;;){let r=n(),i=n();if(!i)break;e+=r;for(let a=0;a<i;a++)t.push(e+a);e+=i+1}return t}function j_(n){return Jd(()=>{let e=Yd(n);if(e.length)return e})}function z_(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(KM(t,n))}for(;;){let t=n()-1;if(t<0)break;e.push(QM(t,n))}return e.flat()}function Jd(n){let e=[];for(;;){let t=n(e.length);if(!t)break;e.push(t)}return e}function H_(n,e,t){let r=Array(n).fill().map(()=>[]);for(let i=0;i<e;i++)GM(n,t).forEach((a,c)=>r[c].push(a));return r}function KM(n,e){let t=1+e(),r=e(),i=Jd(e);return H_(i.length,1+n,e).flatMap((c,u)=>{let[h,...d]=c;return Array(i[u]).fill().map((p,y)=>{let w=y*r;return[h+y*t,d.map(v=>v+w)]})})}function QM(n,e){let t=1+e();return H_(t,1+n,e).map(i=>[i[0],i.slice(1)])}function YM(n){let e=[],t=Yd(n);return i(r([]),[]),e;function r(a){let c=n(),u=Jd(()=>{let h=Yd(n).map(d=>t[d]);if(h.length)return r(h)});return{S:c,B:u,Q:a}}function i({S:a,B:c},u,h){if(!(a&4&&h===u[u.length-1])){a&2&&(h=u[u.length-1]),a&1&&e.push(u);for(let d of c)for(let p of d.Q)i(d,[...u,p],h)}}}function JM(n){return n.toString(16).toUpperCase().padStart(2,"0")}function F_(n){return`{${JM(n)}}`}function ZM(n){let e=[];for(let t=0,r=n.length;t<r;){let i=n.codePointAt(t);t+=i<65536?1:2,e.push(i)}return e}function Hh(n){let t=n.length;if(t<4096)return String.fromCodePoint(...n);let r=[];for(let i=0;i<t;)r.push(String.fromCodePoint(...n.slice(i,i+=4096)));return r.join("")}function XM(n,e){let t=n.length,r=t-e.length;for(let i=0;r==0&&i<t;i++)r=n[i]-e[i];return r}var WM="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const Zd=44032,nm=4352,rm=4449,im=4519,q_=19,V_=21,Fh=28,sm=V_*Fh,e$=q_*sm,t$=Zd+e$,n$=nm+q_,r$=rm+V_,i$=im+Fh;function Td(n){return n>>24&255}function G_(n){return n&16777215}let bv,_O,vv,Uy;function s$(){let n=L_(WM);bv=new Map(j_(n).flatMap((e,t)=>e.map(r=>[r,t+1<<24]))),_O=new Set(Yd(n)),vv=new Map,Uy=new Map;for(let[e,t]of z_(n)){if(!_O.has(e)&&t.length==2){let[r,i]=t,a=Uy.get(r);a||(a=new Map,Uy.set(r,a)),a.set(i,e)}vv.set(e,t.reverse())}}function K_(n){return n>=Zd&&n<t$}function a$(n,e){if(n>=nm&&n<n$&&e>=rm&&e<r$)return Zd+(n-nm)*sm+(e-rm)*Fh;if(K_(n)&&e>im&&e<i$&&(n-Zd)%Fh==0)return n+(e-im);{let t=Uy.get(n);return t&&(t=t.get(e),t)?t:-1}}function Q_(n){bv||s$();let e=[],t=[],r=!1;function i(a){let c=bv.get(a);c&&(r=!0,a|=c),e.push(a)}for(let a of n)for(;;){if(a<128)e.push(a);else if(K_(a)){let c=a-Zd,u=c/sm|0,h=c%sm/Fh|0,d=c%Fh;i(nm+u),i(rm+h),d>0&&i(im+d)}else{let c=vv.get(a);c?t.push(...c):i(a)}if(!t.length)break;a=t.pop()}if(r&&e.length>1){let a=Td(e[0]);for(let c=1;c<e.length;c++){let u=Td(e[c]);if(u==0||a<=u){a=u;continue}let h=c-1;for(;;){let d=e[h+1];if(e[h+1]=e[h],e[h]=d,!h||(a=Td(e[--h]),a<=u))break}a=Td(e[c])}}return e}function o$(n){let e=[],t=[],r=-1,i=0;for(let a of n){let c=Td(a),u=G_(a);if(r==-1)c==0?r=u:e.push(u);else if(i>0&&i>=c)c==0?(e.push(r,...t),t.length=0,r=u):t.push(u),i=c;else{let h=a$(r,u);h>=0?r=h:i==0&&c==0?(e.push(r),r=u):(t.push(u),i=c)}}return r>=0&&e.push(r,...t),e}function Y_(n){return Q_(n).map(G_)}function c$(n){return o$(Q_(n))}const NO=45,J_=".",Z_=65039,X_=1,am=n=>Array.from(n);function Xd(n,e){return n.P.has(e)||n.Q.has(e)}class l$ extends Array{get is_emoji(){return!0}}let Ev,W_,Uc,Av,eN,Yu,Gb,Pu,xc,IO,xv;function WE(){if(Ev)return;let n=L_(zM);const e=()=>Yd(n),t=()=>new Set(e()),r=(p,y)=>y.forEach(w=>p.add(w));Ev=new Map(z_(n)),W_=t(),Uc=e(),Av=new Set(e().map(p=>Uc[p])),Uc=new Set(Uc),eN=t(),t();let i=j_(n),a=n();const c=()=>{let p=new Set;return e().forEach(y=>r(p,i[y])),r(p,e()),p};Yu=Jd(p=>{let y=Jd(n).map(w=>w+96);if(y.length){let w=p>=a;y[0]-=32,y=Hh(y),w&&(y=`Restricted[${y}]`);let v=c(),b=c(),E=!n();return{N:y,P:v,Q:b,M:E,R:w}}}),Gb=t(),Pu=new Map;let u=e().concat(am(Gb)).sort((p,y)=>p-y);u.forEach((p,y)=>{let w=n(),v=u[y]=w?u[y-w]:{V:[],M:new Map};v.V.push(p),Gb.has(p)||Pu.set(p,v)});for(let{V:p,M:y}of new Set(Pu.values())){let w=[];for(let b of p){let E=Yu.filter(S=>Xd(S,b)),A=w.find(({G:S})=>E.some(B=>S.has(B)));A||(A={G:new Set,V:[]},w.push(A)),A.V.push(b),r(A.G,E)}let v=w.flatMap(b=>am(b.G));for(let{G:b,V:E}of w){let A=new Set(v.filter(S=>!b.has(S)));for(let S of E)y.set(S,A)}}xc=new Set;let h=new Set;const d=p=>xc.has(p)?h.add(p):xc.add(p);for(let p of Yu){for(let y of p.P)d(y);for(let y of p.Q)d(y)}for(let p of xc)!Pu.has(p)&&!h.has(p)&&Pu.set(p,X_);r(xc,Y_(xc)),IO=YM(n).map(p=>l$.from(p)).sort(XM),xv=new Map;for(let p of IO){let y=[xv];for(let w of p){let v=y.map(b=>{let E=b.get(w);return E||(E=new Map,b.set(w,E)),E});w===Z_?y.push(...v):y=v}for(let w of y)w.V=p}}function e2(n){return(tN(n)?"":`${t2(Km([n]))} `)+F_(n)}function t2(n){return`"${n}"‎`}function u$(n){if(n.length>=4&&n[2]==NO&&n[3]==NO)throw new Error(`invalid label extension: "${Hh(n.slice(0,4))}"`)}function h$(n){for(let t=n.lastIndexOf(95);t>0;)if(n[--t]!==95)throw new Error("underscore allowed only at start")}function f$(n){let e=n[0],t=DO.get(e);if(t)throw Pd(`leading ${t}`);let r=n.length,i=-1;for(let a=1;a<r;a++){e=n[a];let c=DO.get(e);if(c){if(i==a)throw Pd(`${t} + ${c}`);i=a+1,t=c}}if(i==r)throw Pd(`trailing ${t}`)}function Km(n,e=1/0,t=F_){let r=[];d$(n[0])&&r.push("◌"),n.length>e&&(e>>=1,n=[...n.slice(0,e),8230,...n.slice(-e)]);let i=0,a=n.length;for(let c=0;c<a;c++){let u=n[c];tN(u)&&(r.push(Hh(n.slice(i,c))),r.push(t(u)),i=c+1)}return r.push(Hh(n.slice(i,a))),r.join("")}function d$(n){return WE(),Uc.has(n)}function tN(n){return WE(),eN.has(n)}function p$(n){return w$(g$(n,c$,E$))}function g$(n,e,t){if(!n)return[];WE();let r=0;return n.split(J_).map(i=>{let a=ZM(i),c={input:a,offset:r};r+=a.length+1;try{let u=c.tokens=v$(a,e,t),h=u.length,d;if(!h)throw new Error("empty label");let p=c.output=u.flat();if(h$(p),!(c.emoji=h>1||u[0].is_emoji)&&p.every(w=>w<128))u$(p),d="ASCII";else{let w=u.flatMap(v=>v.is_emoji?[]:v);if(!w.length)d="Emoji";else{if(Uc.has(p[0]))throw Pd("leading combining mark");for(let E=1;E<h;E++){let A=u[E];if(!A.is_emoji&&Uc.has(A[0]))throw Pd(`emoji + combining mark: "${Hh(u[E-1])} + ${Km([A[0]])}"`)}f$(p);let v=am(new Set(w)),[b]=m$(v);b$(b,w),y$(b,v),d=b.N}}c.type=d}catch(u){c.error=u}return c})}function y$(n,e){let t,r=[];for(let i of e){let a=Pu.get(i);if(a===X_)return;if(a){let c=a.M.get(i);if(t=t?t.filter(u=>c.has(u)):am(c),!t.length)return}else r.push(i)}if(t){for(let i of t)if(r.every(a=>Xd(i,a)))throw new Error(`whole-script confusable: ${n.N}/${i.N}`)}}function m$(n){let e=Yu;for(let t of n){let r=e.filter(i=>Xd(i,t));if(!r.length)throw Yu.some(i=>Xd(i,t))?rN(e[0],t):nN(t);if(e=r,r.length==1)break}return e}function w$(n){return n.map(({input:e,error:t,output:r})=>{if(t){let i=t.message;throw new Error(n.length==1?i:`Invalid label ${t2(Km(e,63))}: ${i}`)}return Hh(r)}).join(J_)}function nN(n){return new Error(`disallowed character: ${e2(n)}`)}function rN(n,e){let t=e2(e),r=Yu.find(i=>i.P.has(e));return r&&(t=`${r.N} ${t}`),new Error(`illegal mixture: ${n.N} + ${t}`)}function Pd(n){return new Error(`illegal placement: ${n}`)}function b$(n,e){for(let t of e)if(!Xd(n,t))throw rN(n,t);if(n.M){let t=Y_(e);for(let r=1,i=t.length;r<i;r++)if(Av.has(t[r])){let a=r+1;for(let c;a<i&&Av.has(c=t[a]);a++)for(let u=r;u<a;u++)if(t[u]==c)throw new Error(`duplicate non-spacing marks: ${e2(c)}`);if(a-r>CO)throw new Error(`excessive non-spacing marks: ${t2(Km(t.slice(r-1,a)))} (${a-r}/${CO})`);r=a}}}function v$(n,e,t){let r=[],i=[];for(n=n.slice().reverse();n.length;){let a=A$(n);if(a)i.length&&(r.push(e(i)),i=[]),r.push(t(a));else{let c=n.pop();if(xc.has(c))i.push(c);else{let u=Ev.get(c);if(u)i.push(...u);else if(!W_.has(c))throw nN(c)}}}return i.length&&r.push(e(i)),r}function E$(n){return n.filter(e=>e!=Z_)}function A$(n,e){let t=xv,r,i=n.length;for(;i&&(t=t.get(n[--i]),!!t);){let{V:a}=t;a&&(r=a,n.length=i)}return r}const iN=new Uint8Array(32);iN.fill(0);function RO(n){return Q(n.length!==0,"invalid ENS name; empty component","comp",n),n}function sN(n){const e=Aa(x$(n)),t=[];if(n.length===0)return t;let r=0;for(let i=0;i<e.length;i++)e[i]===46&&(t.push(RO(e.slice(r,i))),r=i+1);return Q(r<e.length,"invalid ENS name; empty component","name",n),t.push(RO(e.slice(r))),t}function x$(n){try{if(n.length===0)throw new Error("empty label");return p$(n)}catch(e){Q(!1,`invalid ENS name (${e.message})`,"name",n)}}function Sv(n){Q(typeof n=="string","invalid ENS name; not a string","name",n),Q(n.length,"invalid ENS name (empty label)","name",n);let e=iN;const t=sN(n);for(;t.length;)e=Zt(Ft([e,Zt(t.pop())]));return Te(e)}function S$(n,e){const t=e;return Q(t<=255,"DNS encoded label cannot exceed 255","length",t),Te(Ft(sN(n).map(r=>{Q(r.length<=t,`label ${JSON.stringify(n)} exceeds ${t} bytes`,"name",n);const i=new Uint8Array(r.length+1);return i.set(r,1),i[0]=i.length-1,i})))+"00"}function Kb(n,e){return{address:dt(n),storageKeys:e.map((t,r)=>(Q(xt(t,32),"invalid slot",`storageKeys[${r}]`,t),t.toLowerCase()))}}function El(n){if(Array.isArray(n))return n.map((t,r)=>Array.isArray(t)?(Q(t.length===2,"invalid slot set",`value[${r}]`,t),Kb(t[0],t[1])):(Q(t!=null&&typeof t=="object","invalid address-slot set","value",n),Kb(t.address,t.storageKeys)));Q(n!=null&&typeof n=="object","invalid access list","value",n);const e=Object.keys(n).map(t=>{const r=n[t].reduce((i,a)=>(i[a]=!0,i),{});return Kb(t,Object.keys(r).sort())});return e.sort((t,r)=>t.address.localeCompare(r.address)),e}function O$(n){let e;return typeof n=="string"?e=Qd.computePublicKey(n,!1):e=n.publicKey,dt(Zt("0x"+e.substring(4)).substring(26))}function T$(n,e){return O$(Qd.recoverPublicKey(n,e))}const pn=BigInt(0),D$=BigInt(2),C$=BigInt(27),_$=BigInt(28),N$=BigInt(35),I$=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Qb=4096*32;function BO(n,e){let t=n.toString(16);for(;t.length<2;)t="0"+t;return t+=Yh(e).substring(4),"0x"+t}function Qm(n){return n==="0x"?null:dt(n)}function n2(n,e){try{return El(n)}catch(t){Q(!1,t.message,e,n)}}function _p(n,e){return n==="0x"?0:ke(n,e)}function zt(n,e){if(n==="0x")return pn;const t=_e(n,e);return Q(t<=I$,"value exceeds uint size",e,t),t}function Tt(n,e){const t=_e(n,"value"),r=Xn(t);return Q(r.length<=32,"value too large",`tx.${e}`,t),r}function r2(n){return El(n).map(e=>[e.address,e.storageKeys])}function R$(n,e){Q(Array.isArray(n),`invalid ${e}`,"value",n);for(let t=0;t<n.length;t++)Q(xt(n[t],32),"invalid ${ param } hash",`value[${t}]`,n[t]);return n}function B$(n){const e=Fm(n);Q(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",n);const t={type:0,nonce:_p(e[0],"nonce"),gasPrice:zt(e[1],"gasPrice"),gasLimit:zt(e[2],"gasLimit"),to:Qm(e[3]),value:zt(e[4],"value"),data:Te(e[5]),chainId:pn};if(e.length===6)return t;const r=zt(e[6],"v"),i=zt(e[7],"r"),a=zt(e[8],"s");if(i===pn&&a===pn)t.chainId=r;else{let c=(r-N$)/D$;c<pn&&(c=pn),t.chainId=c,Q(c!==pn||r===C$||r===_$,"non-canonical legacy v","v",e[6]),t.signature=Qi.from({r:ll(e[7],32),s:ll(e[8],32),v:r})}return t}function P$(n,e){const t=[Tt(n.nonce,"nonce"),Tt(n.gasPrice||0,"gasPrice"),Tt(n.gasLimit,"gasLimit"),n.to||"0x",Tt(n.value,"value"),n.data];let r=pn;if(n.chainId!=pn)r=_e(n.chainId,"tx.chainId"),Q(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(n.signature){const a=n.signature.legacyChainId;a!=null&&(r=a)}if(!e)return r!==pn&&(t.push(Xn(r)),t.push("0x"),t.push("0x")),ul(t);let i=BigInt(27+e.yParity);return r!==pn?i=Qi.getChainIdV(r,e.v):BigInt(e.v)!==i&&Q(!1,"tx.chainId/sig.v mismatch","sig",e),t.push(Xn(i)),t.push(Xn(e.r)),t.push(Xn(e.s)),ul(t)}function i2(n,e){let t;try{if(t=_p(e[0],"yParity"),t!==0&&t!==1)throw new Error("bad yParity")}catch{Q(!1,"invalid yParity","yParity",e[0])}const r=ll(e[1],32),i=ll(e[2],32),a=Qi.from({r,s:i,yParity:t});n.signature=a}function U$(n){const e=Fm(We(n).slice(1));Q(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Te(n));const t={type:2,chainId:zt(e[0],"chainId"),nonce:_p(e[1],"nonce"),maxPriorityFeePerGas:zt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:zt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:zt(e[4],"gasLimit"),to:Qm(e[5]),value:zt(e[6],"value"),data:Te(e[7]),accessList:n2(e[8],"accessList")};return e.length===9||i2(t,e.slice(9)),t}function M$(n,e){const t=[Tt(n.chainId,"chainId"),Tt(n.nonce,"nonce"),Tt(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Tt(n.maxFeePerGas||0,"maxFeePerGas"),Tt(n.gasLimit,"gasLimit"),n.to||"0x",Tt(n.value,"value"),n.data,r2(n.accessList||[])];return e&&(t.push(Tt(e.yParity,"yParity")),t.push(Xn(e.r)),t.push(Xn(e.s))),Ft(["0x02",ul(t)])}function $$(n){const e=Fm(We(n).slice(1));Q(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Te(n));const t={type:1,chainId:zt(e[0],"chainId"),nonce:_p(e[1],"nonce"),gasPrice:zt(e[2],"gasPrice"),gasLimit:zt(e[3],"gasLimit"),to:Qm(e[4]),value:zt(e[5],"value"),data:Te(e[6]),accessList:n2(e[7],"accessList")};return e.length===8||i2(t,e.slice(8)),t}function k$(n,e){const t=[Tt(n.chainId,"chainId"),Tt(n.nonce,"nonce"),Tt(n.gasPrice||0,"gasPrice"),Tt(n.gasLimit,"gasLimit"),n.to||"0x",Tt(n.value,"value"),n.data,r2(n.accessList||[])];return e&&(t.push(Tt(e.yParity,"recoveryParam")),t.push(Xn(e.r)),t.push(Xn(e.s))),Ft(["0x01",ul(t)])}function L$(n){let e=Fm(We(n).slice(1)),t="3",r=null;if(e.length===4&&Array.isArray(e[0])){t="3 (network format)";const a=e[1],c=e[2],u=e[3];Q(Array.isArray(a),"invalid network format: blobs not an array","fields[1]",a),Q(Array.isArray(c),"invalid network format: commitments not an array","fields[2]",c),Q(Array.isArray(u),"invalid network format: proofs not an array","fields[3]",u),Q(a.length===c.length,"invalid network format: blobs/commitments length mismatch","fields",e),Q(a.length===u.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let h=0;h<e[1].length;h++)r.push({data:a[h],commitment:c[h],proof:u[h]});e=e[0]}Q(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${t}`,"data",Te(n));const i={type:3,chainId:zt(e[0],"chainId"),nonce:_p(e[1],"nonce"),maxPriorityFeePerGas:zt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:zt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:zt(e[4],"gasLimit"),to:Qm(e[5]),value:zt(e[6],"value"),data:Te(e[7]),accessList:n2(e[8],"accessList"),maxFeePerBlobGas:zt(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(i.blobs=r),Q(i.to!=null,`invalid address for transaction type: ${t}`,"data",n),Q(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",n);for(let a=0;a<i.blobVersionedHashes.length;a++)Q(xt(i.blobVersionedHashes[a],32),`invalid blobVersionedHash at index ${a}: must be length 32`,"data",n);return e.length===11||i2(i,e.slice(11)),i}function j$(n,e,t){const r=[Tt(n.chainId,"chainId"),Tt(n.nonce,"nonce"),Tt(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Tt(n.maxFeePerGas||0,"maxFeePerGas"),Tt(n.gasLimit,"gasLimit"),n.to||Kd,Tt(n.value,"value"),n.data,r2(n.accessList||[]),Tt(n.maxFeePerBlobGas||0,"maxFeePerBlobGas"),R$(n.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(Tt(e.yParity,"yParity")),r.push(Xn(e.r)),r.push(Xn(e.s)),t)?Ft(["0x03",ul([r,t.map(i=>i.data),t.map(i=>i.commitment),t.map(i=>i.proof)])]):Ft(["0x03",ul(r)])}var ds,lh,uh,hh,fh,dh,ph,gh,yh,mh,wh,bh,Xc,Co,ha,_o,vh,My;const ia=class ia{constructor(){ce(this,vh);ce(this,ds);ce(this,lh);ce(this,uh);ce(this,hh);ce(this,fh);ce(this,dh);ce(this,ph);ce(this,gh);ce(this,yh);ce(this,mh);ce(this,wh);ce(this,bh);ce(this,Xc);ce(this,Co);ce(this,ha);ce(this,_o);j(this,ds,null),j(this,lh,null),j(this,hh,0),j(this,fh,pn),j(this,dh,null),j(this,ph,null),j(this,gh,null),j(this,uh,"0x"),j(this,yh,pn),j(this,mh,pn),j(this,wh,null),j(this,bh,null),j(this,Xc,null),j(this,Co,null),j(this,_o,null),j(this,ha,null)}get type(){return T(this,ds)}set type(e){switch(e){case null:j(this,ds,null);break;case 0:case"legacy":j(this,ds,0);break;case 1:case"berlin":case"eip-2930":j(this,ds,1);break;case 2:case"london":case"eip-1559":j(this,ds,2);break;case 3:case"cancun":case"eip-4844":j(this,ds,3);break;default:Q(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844"}return null}get to(){const e=T(this,lh);return e==null&&this.type===3?Kd:e}set to(e){j(this,lh,e==null?null:dt(e))}get nonce(){return T(this,hh)}set nonce(e){j(this,hh,ke(e,"value"))}get gasLimit(){return T(this,fh)}set gasLimit(e){j(this,fh,_e(e))}get gasPrice(){const e=T(this,dh);return e==null&&(this.type===0||this.type===1)?pn:e}set gasPrice(e){j(this,dh,e==null?null:_e(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=T(this,ph);return e??(this.type===2||this.type===3?pn:null)}set maxPriorityFeePerGas(e){j(this,ph,e==null?null:_e(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=T(this,gh);return e??(this.type===2||this.type===3?pn:null)}set maxFeePerGas(e){j(this,gh,e==null?null:_e(e,"maxFeePerGas"))}get data(){return T(this,uh)}set data(e){j(this,uh,Te(e))}get value(){return T(this,yh)}set value(e){j(this,yh,_e(e,"value"))}get chainId(){return T(this,mh)}set chainId(e){j(this,mh,_e(e))}get signature(){return T(this,wh)||null}set signature(e){j(this,wh,e==null?null:Qi.from(e))}get accessList(){const e=T(this,bh)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){j(this,bh,e==null?null:El(e))}get maxFeePerBlobGas(){const e=T(this,Xc);return e==null&&this.type===3?pn:e}set maxFeePerBlobGas(e){j(this,Xc,e==null?null:_e(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=T(this,Co);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){Q(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)Q(xt(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}j(this,Co,e)}get blobs(){return T(this,_o)==null?null:T(this,_o).map(e=>Object.assign({},e))}set blobs(e){if(e==null){j(this,_o,null);return}const t=[],r=[];for(let i=0;i<e.length;i++){const a=e[i];if(qE(a)){ye(T(this,ha),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let c=We(a);if(Q(c.length<=Qb,"blob is too large",`blobs[${i}]`,a),c.length!==Qb){const d=new Uint8Array(Qb);d.set(c),c=d}const u=T(this,ha).blobToKzgCommitment(c),h=Te(T(this,ha).computeBlobKzgProof(c,u));t.push({data:Te(c),commitment:Te(u),proof:h}),r.push(BO(1,u))}else{const c=Te(a.commitment);t.push({data:Te(a.data),commitment:c,proof:Te(a.proof)}),r.push(BO(1,c))}}j(this,_o,t),j(this,Co,r)}get kzg(){return T(this,ha)}set kzg(e){j(this,ha,e)}get hash(){return this.signature==null?null:Zt(be(this,vh,My).call(this,!0,!1))}get unsignedHash(){return Zt(this.unsignedSerialized)}get from(){return this.signature==null?null:T$(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:Qd.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return be(this,vh,My).call(this,!0,!0)}get unsignedSerialized(){return be(this,vh,My).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,t=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,i=T(this,Xc)!=null||T(this,Co);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&ye(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),ye(!t||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),ye(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const a=[];return this.type!=null?a.push(this.type):t?a.push(2):e?(a.push(1),r||a.push(0)):r?(a.push(1),a.push(2)):(i&&this.to||(a.push(0),a.push(1),a.push(2)),a.push(3)),a.sort(),a}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return ia.from(this)}toJSON(){const e=t=>t==null?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new ia;if(typeof e=="string"){const r=We(e);if(r[0]>=127)return ia.from(B$(r));switch(r[0]){case 1:return ia.from($$(r));case 2:return ia.from(U$(r));case 3:return ia.from(L$(r))}ye(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new ia;return e.type!=null&&(t.type=e.type),e.to!=null&&(t.to=e.to),e.nonce!=null&&(t.nonce=e.nonce),e.gasLimit!=null&&(t.gasLimit=e.gasLimit),e.gasPrice!=null&&(t.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(t.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(t.data=e.data),e.value!=null&&(t.value=e.value),e.chainId!=null&&(t.chainId=e.chainId),e.signature!=null&&(t.signature=Qi.from(e.signature)),e.accessList!=null&&(t.accessList=e.accessList),e.blobVersionedHashes!=null&&(t.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(t.kzg=e.kzg),e.blobs!=null&&(t.blobs=e.blobs),e.hash!=null&&(Q(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),Q(t.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(Q(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),Q(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}};ds=new WeakMap,lh=new WeakMap,uh=new WeakMap,hh=new WeakMap,fh=new WeakMap,dh=new WeakMap,ph=new WeakMap,gh=new WeakMap,yh=new WeakMap,mh=new WeakMap,wh=new WeakMap,bh=new WeakMap,Xc=new WeakMap,Co=new WeakMap,ha=new WeakMap,_o=new WeakMap,vh=new WeakSet,My=function(e,t){ye(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return P$(this,r);case 1:return k$(this,r);case 2:return M$(this,r);case 3:return j$(this,r,t?this.blobs:null)}ye(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let om=ia;const aN=new Uint8Array(32);aN.fill(0);const z$=BigInt(-1),oN=BigInt(0),cN=BigInt(1),H$=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function F$(n){const e=We(n),t=e.length%32;return t?Ft([e,aN.slice(t)]):Te(e)}const q$=Go(cN,32),V$=Go(oN,32),PO={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Yb=["name","version","chainId","verifyingContract","salt"];function UO(n){return function(e){return Q(typeof e=="string",`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,e),e}}const G$={name:UO("name"),version:UO("version"),chainId:function(n){const e=_e(n,"domain.chainId");return Q(e>=0,"invalid chain ID","domain.chainId",n),Number.isSafeInteger(e)?Number(e):Lu(e)},verifyingContract:function(n){try{return dt(n).toLowerCase()}catch{}Q(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){const e=We(n,"domain.salt");return Q(e.length===32,'invalid domain value "salt"',"domain.salt",n),Te(e)}};function Jb(n){{const e=n.match(/^(u?)int(\d+)$/);if(e){const t=e[1]==="",r=parseInt(e[2]);Q(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",n);const i=Bc(H$,t?r-1:r),a=t?(i+cN)*z$:oN;return function(c){const u=_e(c,"value");return Q(u>=a&&u<=i,`value out-of-bounds for ${n}`,"value",u),Go(t?QC(u,256):u,32)}}}{const e=n.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return Q(t!==0&&t<=32&&e[1]===String(t),"invalid bytes width","type",n),function(r){const i=We(r);return Q(i.length===t,`invalid length for ${n}`,"value",r),F$(r)}}}switch(n){case"address":return function(e){return ll(dt(e),32)};case"bool":return function(e){return e?q$:V$};case"bytes":return function(e){return Zt(e)};case"string":return function(e){return hl(e)}}return null}function MO(n,e){return`${n}(${e.map(({name:t,type:r})=>r+" "+t).join(",")})`}function oy(n){const e=n.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:n}}var pp,fa,Eh,Rm,lN;const hi=class hi{constructor(e){ce(this,Rm);te(this,"primaryType");ce(this,pp);ce(this,fa);ce(this,Eh);j(this,fa,new Map),j(this,Eh,new Map);const t=new Map,r=new Map,i=new Map,a={};Object.keys(e).forEach(h=>{a[h]=e[h].map(({name:d,type:p})=>{let{base:y,index:w}=oy(p);return y==="int"&&!e.int&&(y="int256"),y==="uint"&&!e.uint&&(y="uint256"),{name:d,type:y+(w||"")}}),t.set(h,new Set),r.set(h,[]),i.set(h,new Set)}),j(this,pp,JSON.stringify(a));for(const h in a){const d=new Set;for(const p of a[h]){Q(!d.has(p.name),`duplicate variable name ${JSON.stringify(p.name)} in ${JSON.stringify(h)}`,"types",e),d.add(p.name);const y=oy(p.type).base;Q(y!==h,`circular type reference to ${JSON.stringify(y)}`,"types",e),!Jb(y)&&(Q(r.has(y),`unknown type ${JSON.stringify(y)}`,"types",e),r.get(y).push(h),t.get(h).add(y))}}const c=Array.from(r.keys()).filter(h=>r.get(h).length===0);Q(c.length!==0,"missing primary type","types",e),Q(c.length===1,`ambiguous primary types or unused types: ${c.map(h=>JSON.stringify(h)).join(", ")}`,"types",e),Be(this,{primaryType:c[0]});function u(h,d){Q(!d.has(h),`circular type reference to ${JSON.stringify(h)}`,"types",e),d.add(h);for(const p of t.get(h))if(r.has(p)){u(p,d);for(const y of d)i.get(y).add(p)}d.delete(h)}u(this.primaryType,new Set);for(const[h,d]of i){const p=Array.from(d);p.sort(),T(this,fa).set(h,MO(h,a[h])+p.map(y=>MO(y,a[y])).join(""))}}get types(){return JSON.parse(T(this,pp))}getEncoder(e){let t=T(this,Eh).get(e);return t||(t=be(this,Rm,lN).call(this,e),T(this,Eh).set(e,t)),t}encodeType(e){const t=T(this,fa).get(e);return Q(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return Zt(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(Jb(e))return r(e,t);const i=oy(e).array;if(i)return Q(i.count===-1||i.count===t.length,`array length mismatch; expected length ${i.count}`,"value",t),t.map(c=>this._visit(i.prefix,c,r));const a=this.types[e];if(a)return a.reduce((c,{name:u,type:h})=>(c[u]=this._visit(h,t[u],r),c),{});Q(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new hi(e)}static getPrimaryType(e){return hi.from(e).primaryType}static hashStruct(e,t,r){return hi.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){if(e[r]==null)continue;const i=PO[r];Q(i,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:i})}return t.sort((r,i)=>Yb.indexOf(r.name)-Yb.indexOf(i.name)),hi.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return Ft(["0x1901",hi.hashDomain(e),hi.from(t).hash(r)])}static hash(e,t,r){return Zt(hi.encode(e,t,r))}static async resolveNames(e,t,r,i){e=Object.assign({},e);for(const u in e)e[u]==null&&delete e[u];const a={};e.verifyingContract&&!xt(e.verifyingContract,20)&&(a[e.verifyingContract]="0x");const c=hi.from(t);c.visit(r,(u,h)=>(u==="address"&&!xt(h,20)&&(a[h]="0x"),h));for(const u in a)a[u]=await i(u);return e.verifyingContract&&a[e.verifyingContract]&&(e.verifyingContract=a[e.verifyingContract]),r=c.visit(r,(u,h)=>u==="address"&&a[h]?a[h]:h),{domain:e,value:r}}static getPayload(e,t,r){hi.hashDomain(e);const i={},a=[];Yb.forEach(h=>{const d=e[h];d!=null&&(i[h]=G$[h](d),a.push({name:h,type:PO[h]}))});const c=hi.from(t);t=c.types;const u=Object.assign({},t);return Q(u.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",t),u.EIP712Domain=a,c.encode(r),{types:u,domain:i,primaryType:c.primaryType,message:c.visit(r,(h,d)=>{if(h.match(/^bytes(\d*)/))return Te(We(d));if(h.match(/^u?int/))return _e(d).toString();switch(h){case"address":return d.toLowerCase();case"bool":return!!d;case"string":return Q(typeof d=="string","invalid string","value",d),d}Q(!1,"unsupported type","type",h)})}}};pp=new WeakMap,fa=new WeakMap,Eh=new WeakMap,Rm=new WeakSet,lN=function(e){{const i=Jb(e);if(i)return i}const t=oy(e).array;if(t){const i=t.prefix,a=this.getEncoder(i);return c=>{Q(t.count===-1||t.count===c.length,`array length mismatch; expected length ${t.count}`,"value",c);let u=c.map(a);return T(this,fa).has(i)&&(u=u.map(Zt)),Zt(Ft(u))}}const r=this.types[e];if(r){const i=hl(T(this,fa).get(e));return a=>{const c=r.map(({name:u,type:h})=>{const d=this.getEncoder(h)(a[u]);return T(this,fa).has(h)?Zt(d):d});return c.unshift(i),Ft(c)}}Q(!1,`unknown type: ${e}`,"type",e)};let cm=hi;function tr(n){const e=new Set;return n.forEach(t=>e.add(t)),Object.freeze(e)}const K$="external public payable override",Q$=tr(K$.split(" ")),uN="constant external internal payable private public pure view override",Y$=tr(uN.split(" ")),hN="constructor error event fallback function receive struct",fN=tr(hN.split(" ")),dN="calldata memory storage payable indexed",J$=tr(dN.split(" ")),Z$="tuple returns",X$=[hN,dN,Z$,uN].join(" "),W$=tr(X$.split(" ")),ek={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},tk=new RegExp("^(\\s*)"),nk=new RegExp("^([0-9]+)"),rk=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),pN=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),gN=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var On,Hi,gp,Ov;const Bm=class Bm{constructor(e){ce(this,gp);ce(this,On);ce(this,Hi);j(this,On,0),j(this,Hi,e.slice())}get offset(){return T(this,On)}get length(){return T(this,Hi).length-T(this,On)}clone(){return new Bm(T(this,Hi))}reset(){j(this,On,0)}popKeyword(e){const t=this.peek();if(t.type!=="KEYWORD"||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const t=this.peek();throw new Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=be(this,gp,Ov).call(this,T(this,On)+1,e.match+1);return j(this,On,e.match+1),t}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=[];for(;T(this,On)<e.match-1;){const r=this.peek().linkNext;t.push(be(this,gp,Ov).call(this,T(this,On)+1,r)),j(this,On,r)}return j(this,On,e.match+1),t}peek(){if(T(this,On)>=T(this,Hi).length)throw new Error("out-of-bounds");return T(this,Hi)[T(this,On)]}peekKeyword(e){const t=this.peekType("KEYWORD");return t!=null&&e.has(t)?t:null}peekType(e){if(this.length===0)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return Wf(this,On)._++,e}toString(){const e=[];for(let t=T(this,On);t<T(this,Hi).length;t++){const r=T(this,Hi)[t];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};On=new WeakMap,Hi=new WeakMap,gp=new WeakSet,Ov=function(e=0,t=0){return new Bm(T(this,Hi).slice(e,t).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let Yi=Bm;function Jo(n){const e=[],t=c=>{const u=a<n.length?JSON.stringify(n[a]):"$EOI";throw new Error(`invalid token ${u} at ${a}: ${c}`)};let r=[],i=[],a=0;for(;a<n.length;){let c=n.substring(a),u=c.match(tk);u&&(a+=u[1].length,c=n.substring(a));const h={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:a,value:-1};e.push(h);let d=ek[c[0]]||"";if(d){if(h.type=d,h.text=c[0],a++,d==="OPEN_PAREN")r.push(e.length-1),i.push(e.length-1);else if(d=="CLOSE_PAREN")r.length===0&&t("no matching open bracket"),h.match=r.pop(),e[h.match].match=e.length-1,h.depth--,h.linkBack=i.pop(),e[h.linkBack].linkNext=e.length-1;else if(d==="COMMA")h.linkBack=i.pop(),e[h.linkBack].linkNext=e.length-1,i.push(e.length-1);else if(d==="OPEN_BRACKET")h.type="BRACKET";else if(d==="CLOSE_BRACKET"){let p=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const y=e.pop().text;p=y+p,e[e.length-1].value=ke(y)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=p}continue}if(u=c.match(rk),u){if(h.text=u[1],a+=h.text.length,W$.has(h.text)){h.type="KEYWORD";continue}if(h.text.match(gN)){h.type="TYPE";continue}h.type="ID";continue}if(u=c.match(nk),u){h.text=u[1],h.type="NUMBER",a+=h.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(c[0])} at position ${a}`)}return new Yi(e.map(c=>Object.freeze(c)))}function $O(n,e){let t=[];for(const r in e.keys())n.has(r)&&t.push(r);if(t.length>1)throw new Error(`conflicting types: ${t.join(", ")}`)}function Ym(n,e){if(e.peekKeyword(fN)){const t=e.pop().text;if(t!==n)throw new Error(`expected ${n}, got ${t}`)}return e.popType("ID")}function Ta(n,e){const t=new Set;for(;;){const r=n.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(n.pop(),t.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);t.add(r)}return Object.freeze(t)}function yN(n){let e=Ta(n,Y$);return $O(e,tr("constant payable nonpayable".split(" "))),$O(e,tr("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function xa(n,e){return n.popParams().map(t=>Cn.from(t,e))}function mN(n){if(n.peekType("AT")){if(n.pop(),n.peekType("NUMBER"))return _e(n.pop().text);throw new Error("invalid gas")}return null}function fl(n){if(n.length)throw new Error(`unexpected tokens at offset ${n.offset}: ${n.toString()}`)}const ik=new RegExp(/^(.*)\[([0-9]*)\]$/);function kO(n){const e=n.match(gN);if(Q(e,"invalid type","type",n),n==="uint")return"uint256";if(n==="int")return"int256";if(e[2]){const t=parseInt(e[2]);Q(t!==0&&t<=32,"invalid bytes length","type",n)}else if(e[3]){const t=parseInt(e[3]);Q(t!==0&&t<=256&&t%8===0,"invalid numeric width","type",n)}return n}const Nt={},Tr=Symbol.for("_ethers_internal"),LO="_ParamTypeInternal",jO="_ErrorInternal",zO="_EventInternal",HO="_ConstructorInternal",FO="_FallbackInternal",qO="_FunctionInternal",VO="_StructInternal";var Ah,$y;const fi=class fi{constructor(e,t,r,i,a,c,u,h){ce(this,Ah);te(this,"name");te(this,"type");te(this,"baseType");te(this,"indexed");te(this,"components");te(this,"arrayLength");te(this,"arrayChildren");if(Dp(e,Nt,"ParamType"),Object.defineProperty(this,Tr,{value:LO}),c&&(c=Object.freeze(c.slice())),i==="array"){if(u==null||h==null)throw new Error("")}else if(u!=null||h!=null)throw new Error("");if(i==="tuple"){if(c==null)throw new Error("")}else if(c!=null)throw new Error("");Be(this,{name:t,type:r,baseType:i,indexed:a,components:c,arrayLength:u,arrayChildren:h})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const a=JSON.parse(this.arrayChildren.format("json"));return a.name=r,a.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(a)}const i={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(a=>JSON.parse(a.format(e)))),JSON.stringify(i)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":t+=this.type,e!=="sighash"&&(this.indexed===!0&&(t+=" indexed"),e==="full"&&this.name&&(t+=" "+this.name)),t}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(i=>r.arrayChildren.walk(i,t))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((i,a)=>r.components[a].walk(i,t))}return t(this.type,e)}async walkAsync(e,t){const r=[],i=[e];return be(this,Ah,$y).call(this,r,e,t,a=>{i[0]=a}),r.length&&await Promise.all(r),i[0]}static from(e,t){if(fi.isParamType(e))return e;if(typeof e=="string")try{return fi.from(Jo(e),t)}catch{Q(!1,"invalid param type","obj",e)}else if(e instanceof Yi){let u="",h="",d=null;Ta(e,tr(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(h="tuple",d=e.popParams().map(E=>fi.from(E)),u=`tuple(${d.map(E=>E.format()).join(",")})`):(u=kO(e.popType("TYPE")),h=u);let p=null,y=null;for(;e.length&&e.peekType("BRACKET");){const E=e.pop();p=new fi(Nt,"",u,h,null,d,y,p),y=E.value,u+=E.text,h="array",d=null}let w=null;if(Ta(e,J$).has("indexed")){if(!t)throw new Error("");w=!0}const b=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new fi(Nt,b,u,h,w,d,y,p)}const r=e.name;Q(!r||typeof r=="string"&&r.match(pN),"invalid name","obj.name",r);let i=e.indexed;i!=null&&(Q(t,"parameter cannot be indexed","obj.indexed",e.indexed),i=!!i);let a=e.type,c=a.match(ik);if(c){const u=parseInt(c[2]||"-1"),h=fi.from({type:c[1],components:e.components});return new fi(Nt,r||"",a,"array",i,null,u,h)}if(a==="tuple"||a.startsWith("tuple(")||a.startsWith("(")){const u=e.components!=null?e.components.map(d=>fi.from(d)):null;return new fi(Nt,r||"",a,"tuple",i,u,null,null)}return a=kO(e.type),new fi(Nt,r||"",a,a,i,null,null,null)}static isParamType(e){return e&&e[Tr]===LO}};Ah=new WeakSet,$y=function(e,t,r,i){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const c=this.arrayChildren,u=t.slice();u.forEach((h,d)=>{var p;be(p=c,Ah,$y).call(p,e,h,r,y=>{u[d]=y})}),i(u);return}if(this.isTuple()){const c=this.components;let u;if(Array.isArray(t))u=t.slice();else{if(t==null||typeof t!="object")throw new Error("invalid tuple value");u=c.map(h=>{if(!h.name)throw new Error("cannot use object value with unnamed components");if(!(h.name in t))throw new Error(`missing value for component ${h.name}`);return t[h.name]})}if(u.length!==this.components.length)throw new Error("array is wrong length");u.forEach((h,d)=>{var p;be(p=c[d],Ah,$y).call(p,e,h,r,y=>{u[d]=y})}),i(u);return}const a=r(this.type,t);a.then?e.push(async function(){i(await a)}()):i(a)};let Cn=fi;class dl{constructor(e,t,r){te(this,"type");te(this,"inputs");Dp(e,Nt,"Fragment"),r=Object.freeze(r.slice()),Be(this,{type:t,inputs:r})}static from(e){if(typeof e=="string"){try{dl.from(JSON.parse(e))}catch{}return dl.from(Jo(e))}if(e instanceof Yi)switch(e.peekKeyword(fN)){case"constructor":return va.from(e);case"error":return xr.from(e);case"event":return As.from(e);case"fallback":case"receive":return sa.from(e);case"function":return xs.from(e);case"struct":return cl.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return va.from(e);case"error":return xr.from(e);case"event":return As.from(e);case"fallback":case"receive":return sa.from(e);case"function":return xs.from(e);case"struct":return cl.from(e)}ye(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}Q(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return va.isFragment(e)}static isError(e){return xr.isFragment(e)}static isEvent(e){return As.isFragment(e)}static isFunction(e){return xs.isFragment(e)}static isStruct(e){return cl.isFragment(e)}}class Jm extends dl{constructor(t,r,i,a){super(t,r,a);te(this,"name");Q(typeof i=="string"&&i.match(pN),"invalid identifier","name",i),a=Object.freeze(a.slice()),Be(this,{name:i})}}function Wd(n,e){return"("+e.map(t=>t.format(n)).join(n==="full"?", ":",")+")"}class xr extends Jm{constructor(e,t,r){super(e,"error",t,r),Object.defineProperty(this,Tr,{value:jO})}get selector(){return hl(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const t=[];return e!=="sighash"&&t.push("error"),t.push(this.name+Wd(e,this.inputs)),t.join(" ")}static from(e){if(xr.isFragment(e))return e;if(typeof e=="string")return xr.from(Jo(e));if(e instanceof Yi){const t=Ym("error",e),r=xa(e);return fl(e),new xr(Nt,t,r)}return new xr(Nt,e.name,e.inputs?e.inputs.map(Cn.from):[])}static isFragment(e){return e&&e[Tr]===jO}}class As extends Jm{constructor(t,r,i,a){super(t,"event",r,i);te(this,"anonymous");Object.defineProperty(this,Tr,{value:zO}),Be(this,{anonymous:a})}get topicHash(){return hl(this.format("sighash"))}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(i=>JSON.parse(i.format(t)))});const r=[];return t!=="sighash"&&r.push("event"),r.push(this.name+Wd(t,this.inputs)),t!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(t,r){return r=(r||[]).map(a=>Cn.from(a)),new As(Nt,t,r,!1).topicHash}static from(t){if(As.isFragment(t))return t;if(typeof t=="string")try{return As.from(Jo(t))}catch{Q(!1,"invalid event fragment","obj",t)}else if(t instanceof Yi){const r=Ym("event",t),i=xa(t,!0),a=!!Ta(t,tr(["anonymous"])).has("anonymous");return fl(t),new As(Nt,r,i,a)}return new As(Nt,t.name,t.inputs?t.inputs.map(r=>Cn.from(r,!0)):[],!!t.anonymous)}static isFragment(t){return t&&t[Tr]===zO}}class va extends dl{constructor(t,r,i,a,c){super(t,r,i);te(this,"payable");te(this,"gas");Object.defineProperty(this,Tr,{value:HO}),Be(this,{payable:a,gas:c})}format(t){if(ye(t!=null&&t!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),t==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(t)))});const r=[`constructor${Wd(t,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(t){if(va.isFragment(t))return t;if(typeof t=="string")try{return va.from(Jo(t))}catch{Q(!1,"invalid constuctor fragment","obj",t)}else if(t instanceof Yi){Ta(t,tr(["constructor"]));const r=xa(t),i=!!Ta(t,Q$).has("payable"),a=mN(t);return fl(t),new va(Nt,"constructor",r,i,a)}return new va(Nt,"constructor",t.inputs?t.inputs.map(Cn.from):[],!!t.payable,t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[Tr]===HO}}class sa extends dl{constructor(t,r,i){super(t,"fallback",r);te(this,"payable");Object.defineProperty(this,Tr,{value:FO}),Be(this,{payable:i})}format(t){const r=this.inputs.length===0?"receive":"fallback";if(t==="json"){const i=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:i})}return`${r}()${this.payable?" payable":""}`}static from(t){if(sa.isFragment(t))return t;if(typeof t=="string")try{return sa.from(Jo(t))}catch{Q(!1,"invalid fallback fragment","obj",t)}else if(t instanceof Yi){const r=t.toString(),i=t.peekKeyword(tr(["fallback","receive"]));if(Q(i,"type must be fallback or receive","obj",r),t.popKeyword(tr(["fallback","receive"]))==="receive"){const h=xa(t);return Q(h.length===0,"receive cannot have arguments","obj.inputs",h),Ta(t,tr(["payable"])),fl(t),new sa(Nt,[],!0)}let c=xa(t);c.length?Q(c.length===1&&c[0].type==="bytes","invalid fallback inputs","obj.inputs",c.map(h=>h.format("minimal")).join(", ")):c=[Cn.from("bytes")];const u=yN(t);if(Q(u==="nonpayable"||u==="payable","fallback cannot be constants","obj.stateMutability",u),Ta(t,tr(["returns"])).has("returns")){const h=xa(t);Q(h.length===1&&h[0].type==="bytes","invalid fallback outputs","obj.outputs",h.map(d=>d.format("minimal")).join(", "))}return fl(t),new sa(Nt,c,u==="payable")}if(t.type==="receive")return new sa(Nt,[],!0);if(t.type==="fallback"){const r=[Cn.from("bytes")],i=t.stateMutability==="payable";return new sa(Nt,r,i)}Q(!1,"invalid fallback description","obj",t)}static isFragment(t){return t&&t[Tr]===FO}}class xs extends Jm{constructor(t,r,i,a,c,u){super(t,"function",r,a);te(this,"constant");te(this,"outputs");te(this,"stateMutability");te(this,"payable");te(this,"gas");Object.defineProperty(this,Tr,{value:qO}),c=Object.freeze(c.slice()),Be(this,{constant:i==="view"||i==="pure",gas:u,outputs:c,payable:i==="payable",stateMutability:i})}get selector(){return hl(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(t))),outputs:this.outputs.map(i=>JSON.parse(i.format(t)))});const r=[];return t!=="sighash"&&r.push("function"),r.push(this.name+Wd(t,this.inputs)),t!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(Wd(t,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(t,r){return r=(r||[]).map(a=>Cn.from(a)),new xs(Nt,t,"view",r,[],null).selector}static from(t){if(xs.isFragment(t))return t;if(typeof t=="string")try{return xs.from(Jo(t))}catch{Q(!1,"invalid function fragment","obj",t)}else if(t instanceof Yi){const i=Ym("function",t),a=xa(t),c=yN(t);let u=[];Ta(t,tr(["returns"])).has("returns")&&(u=xa(t));const h=mN(t);return fl(t),new xs(Nt,i,c,a,u,h)}let r=t.stateMutability;return r==null&&(r="payable",typeof t.constant=="boolean"?(r="view",t.constant||(r="payable",typeof t.payable=="boolean"&&!t.payable&&(r="nonpayable"))):typeof t.payable=="boolean"&&!t.payable&&(r="nonpayable")),new xs(Nt,t.name,r,t.inputs?t.inputs.map(Cn.from):[],t.outputs?t.outputs.map(Cn.from):[],t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[Tr]===qO}}class cl extends Jm{constructor(e,t,r){super(e,"struct",t,r),Object.defineProperty(this,Tr,{value:VO})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return cl.from(Jo(e))}catch{Q(!1,"invalid struct fragment","obj",e)}else if(e instanceof Yi){const t=Ym("struct",e),r=xa(e);return fl(e),new cl(Nt,t,r)}return new cl(Nt,e.name,e.inputs?e.inputs.map(Cn.from):[])}static isFragment(e){return e&&e[Tr]===VO}}const Ji=new Map;Ji.set(0,"GENERIC_PANIC");Ji.set(1,"ASSERT_FALSE");Ji.set(17,"OVERFLOW");Ji.set(18,"DIVIDE_BY_ZERO");Ji.set(33,"ENUM_RANGE_ERROR");Ji.set(34,"BAD_STORAGE_DATA");Ji.set(49,"STACK_UNDERFLOW");Ji.set(50,"ARRAY_RANGE_ERROR");Ji.set(65,"OUT_OF_MEMORY");Ji.set(81,"UNINITIALIZED_FUNCTION_CALL");const sk=new RegExp(/^bytes([0-9]*)$/),ak=new RegExp(/^(u?int)([0-9]*)$/);let Zb=null,GO=1024;function ok(n,e,t,r){let i="missing revert data",a=null;const c=null;let u=null;if(t){i="execution reverted";const d=We(t);if(t=Te(t),d.length===0)i+=" (no data present; likely require(false) occurred",a="require(false)";else if(d.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(Te(d.slice(0,4))==="0x08c379a0")try{a=r.decode(["string"],d.slice(4))[0],u={signature:"Error(string)",name:"Error",args:[a]},i+=`: ${JSON.stringify(a)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(Te(d.slice(0,4))==="0x4e487b71")try{const p=Number(r.decode(["uint256"],d.slice(4))[0]);u={signature:"Panic(uint256)",name:"Panic",args:[p]},a=`Panic due to ${Ji.get(p)||"UNKNOWN"}(${p})`,i+=`: ${a}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const h={to:e.to?dt(e.to):null,data:e.data||"0x"};return e.from&&(h.from=dt(e.from)),Pt(i,"CALL_EXCEPTION",{action:n,data:t,reason:a,transaction:h,invocation:c,revert:u})}var No,Uu;const Pm=class Pm{constructor(){ce(this,No)}getDefaultValue(e){const t=e.map(i=>be(this,No,Uu).call(this,Cn.from(i)));return new ay(t,"_").defaultValue()}encode(e,t){VC(t.length,e.length,"types/values length mismatch");const r=e.map(c=>be(this,No,Uu).call(this,Cn.from(c))),i=new ay(r,"_"),a=new hv;return i.encode(a,t),a.data}decode(e,t,r){const i=e.map(c=>be(this,No,Uu).call(this,Cn.from(c)));return new ay(i,"_").decode(new fv(t,r,GO))}static _setDefaultMaxInflation(e){Q(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),GO=e}static defaultAbiCoder(){return Zb==null&&(Zb=new Pm),Zb}static getBuiltinCallException(e,t,r){return ok(e,t,r,Pm.defaultAbiCoder())}};No=new WeakSet,Uu=function(e){if(e.isArray())return new NM(be(this,No,Uu).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new ay(e.components.map(r=>be(this,No,Uu).call(this,r)),e.name);switch(e.baseType){case"address":return new CM(e.name);case"bool":return new IM(e.name);case"string":return new jM(e.name);case"bytes":return new RM(e.name);case"":return new UM(e.name)}let t=e.type.match(ak);if(t){let r=parseInt(t[2]||"256");return Q(r!==0&&r<=256&&r%8===0,"invalid "+t[1]+" bit length","param",e),new LM(r/8,t[1]==="int",e.name)}if(t=e.type.match(sk),t){let r=parseInt(t[1]);return Q(r!==0&&r<=32,"invalid bytes length","param",e),new BM(r,e.name)}Q(!1,"invalid type","type",e.type)};let ep=Pm;class ck{constructor(e,t,r){te(this,"fragment");te(this,"name");te(this,"signature");te(this,"topic");te(this,"args");const i=e.name,a=e.format();Be(this,{fragment:e,name:i,signature:a,topic:t,args:r})}}class lk{constructor(e,t,r,i){te(this,"fragment");te(this,"name");te(this,"args");te(this,"signature");te(this,"selector");te(this,"value");const a=e.name,c=e.format();Be(this,{fragment:e,name:a,args:r,signature:c,selector:t,value:i})}}class uk{constructor(e,t,r){te(this,"fragment");te(this,"name");te(this,"args");te(this,"signature");te(this,"selector");const i=e.name,a=e.format();Be(this,{fragment:e,name:i,args:r,signature:a,selector:t})}}class KO{constructor(e){te(this,"hash");te(this,"_isIndexed");Be(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const QO={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},YO={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:n=>`reverted with reason string ${JSON.stringify(n)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:n=>{let e="unknown panic code";return n>=0&&n<=255&&QO[n.toString()]&&(e=QO[n.toString()]),`reverted with panic code 0x${n.toString(16)} (${e})`}}};var ps,gs,ys,zn,Cs,ky,Ly;const Rc=class Rc{constructor(e){ce(this,Cs);te(this,"fragments");te(this,"deploy");te(this,"fallback");te(this,"receive");ce(this,ps);ce(this,gs);ce(this,ys);ce(this,zn);let t=[];typeof e=="string"?t=JSON.parse(e):t=e,j(this,ys,new Map),j(this,ps,new Map),j(this,gs,new Map);const r=[];for(const c of t)try{r.push(dl.from(c))}catch(u){console.log(`[Warning] Invalid Fragment ${JSON.stringify(c)}:`,u.message)}Be(this,{fragments:Object.freeze(r)});let i=null,a=!1;j(this,zn,this.getAbiCoder()),this.fragments.forEach((c,u)=>{let h;switch(c.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Be(this,{deploy:c});return;case"fallback":c.inputs.length===0?a=!0:(Q(!i||c.payable!==i.payable,"conflicting fallback fragments",`fragments[${u}]`,c),i=c,a=i.payable);return;case"function":h=T(this,ys);break;case"event":h=T(this,gs);break;case"error":h=T(this,ps);break;default:return}const d=c.format();h.has(d)||h.set(d,c)}),this.deploy||Be(this,{deploy:va.from("constructor()")}),Be(this,{fallback:i,receive:a})}format(e){const t=e?"minimal":"full";return this.fragments.map(i=>i.format(t))}formatJson(){const e=this.fragments.map(t=>t.format("json"));return JSON.stringify(e.map(t=>JSON.parse(t)))}getAbiCoder(){return ep.defaultAbiCoder()}getFunctionName(e){const t=be(this,Cs,ky).call(this,e,null,!1);return Q(t,"no matching function","key",e),t.name}hasFunction(e){return!!be(this,Cs,ky).call(this,e,null,!1)}getFunction(e,t){return be(this,Cs,ky).call(this,e,t||null,!0)}forEachFunction(e){const t=Array.from(T(this,ys).keys());t.sort((r,i)=>r.localeCompare(i));for(let r=0;r<t.length;r++){const i=t[r];e(T(this,ys).get(i),r)}}getEventName(e){const t=be(this,Cs,Ly).call(this,e,null,!1);return Q(t,"no matching event","key",e),t.name}hasEvent(e){return!!be(this,Cs,Ly).call(this,e,null,!1)}getEvent(e,t){return be(this,Cs,Ly).call(this,e,t||null,!0)}forEachEvent(e){const t=Array.from(T(this,gs).keys());t.sort((r,i)=>r.localeCompare(i));for(let r=0;r<t.length;r++){const i=t[r];e(T(this,gs).get(i),r)}}getError(e,t){if(xt(e)){const i=e.toLowerCase();if(YO[i])return xr.from(YO[i].signature);for(const a of T(this,ps).values())if(i===a.selector)return a;return null}if(e.indexOf("(")===-1){const i=[];for(const[a,c]of T(this,ps))a.split("(")[0]===e&&i.push(c);if(i.length===0)return e==="Error"?xr.from("error Error(string)"):e==="Panic"?xr.from("error Panic(uint256)"):null;if(i.length>1){const a=i.map(c=>JSON.stringify(c.format())).join(", ");Q(!1,`ambiguous error description (i.e. ${a})`,"name",e)}return i[0]}if(e=xr.from(e).format(),e==="Error(string)")return xr.from("error Error(string)");if(e==="Panic(uint256)")return xr.from("error Panic(uint256)");const r=T(this,ps).get(e);return r||null}forEachError(e){const t=Array.from(T(this,ps).keys());t.sort((r,i)=>r.localeCompare(i));for(let r=0;r<t.length;r++){const i=t[r];e(T(this,ps).get(i),r)}}_decodeParams(e,t){return T(this,zn).decode(e,t)}_encodeParams(e,t){return T(this,zn).encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if(typeof e=="string"){const r=this.getError(e);Q(r,"unknown error","fragment",e),e=r}return Q(Ut(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,Ut(t,4))}encodeErrorResult(e,t){if(typeof e=="string"){const r=this.getError(e);Q(r,"unknown error","fragment",e),e=r}return Ft([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if(typeof e=="string"){const r=this.getFunction(e);Q(r,"unknown function","fragment",e),e=r}return Q(Ut(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,Ut(t,4))}encodeFunctionData(e,t){if(typeof e=="string"){const r=this.getFunction(e);Q(r,"unknown function","fragment",e),e=r}return Ft([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if(typeof e=="string"){const a=this.getFunction(e);Q(a,"unknown function","fragment",e),e=a}let r="invalid length for result data";const i=Zn(t);if(i.length%32===0)try{return T(this,zn).decode(e.outputs,i)}catch{r="could not decode result data"}ye(!1,r,"BAD_DATA",{value:Te(i),info:{method:e.name,signature:e.format()}})}makeError(e,t){const r=We(e,"data"),i=ep.getBuiltinCallException("call",t,r);if(i.message.startsWith("execution reverted (unknown custom error)")){const u=Te(r.slice(0,4)),h=this.getError(u);if(h)try{const d=T(this,zn).decode(h.inputs,r.slice(4));i.revert={name:h.name,signature:h.format(),args:d},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}const c=this.parseTransaction(t);return c&&(i.invocation={method:c.name,signature:c.signature,args:c.args}),i}encodeFunctionResult(e,t){if(typeof e=="string"){const r=this.getFunction(e);Q(r,"unknown function","fragment",e),e=r}return Te(T(this,zn).encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if(typeof e=="string"){const a=this.getEvent(e);Q(a,"unknown event","eventFragment",e),e=a}ye(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const i=(a,c)=>a.type==="string"?hl(c):a.type==="bytes"?Zt(Te(c)):(a.type==="bool"&&typeof c=="boolean"?c=c?"0x01":"0x00":a.type.match(/^u?int/)?c=Go(c):a.type.match(/^bytes/)?c=_5(c,32):a.type==="address"&&T(this,zn).encode(["address"],[c]),ll(Te(c),32));for(t.forEach((a,c)=>{const u=e.inputs[c];if(!u.indexed){Q(a==null,"cannot filter non-indexed parameters; must be null","contract."+u.name,a);return}a==null?r.push(null):u.baseType==="array"||u.baseType==="tuple"?Q(!1,"filtering with tuples or arrays not supported","contract."+u.name,a):Array.isArray(a)?r.push(a.map(h=>i(u,h))):r.push(i(u,a))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,t){if(typeof e=="string"){const c=this.getEvent(e);Q(c,"unknown event","eventFragment",e),e=c}const r=[],i=[],a=[];return e.anonymous||r.push(e.topicHash),Q(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((c,u)=>{const h=t[u];if(c.indexed)if(c.type==="string")r.push(hl(h));else if(c.type==="bytes")r.push(Zt(h));else{if(c.baseType==="tuple"||c.baseType==="array")throw new Error("not implemented");r.push(T(this,zn).encode([c.type],[h]))}else i.push(c),a.push(h)}),{data:T(this,zn).encode(i,a),topics:r}}decodeEventLog(e,t,r){if(typeof e=="string"){const v=this.getEvent(e);Q(v,"unknown event","eventFragment",e),e=v}if(r!=null&&!e.anonymous){const v=e.topicHash;Q(xt(r[0],32)&&r[0].toLowerCase()===v,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const i=[],a=[],c=[];e.inputs.forEach((v,b)=>{v.indexed?v.type==="string"||v.type==="bytes"||v.baseType==="tuple"||v.baseType==="array"?(i.push(Cn.from({type:"bytes32",name:v.name})),c.push(!0)):(i.push(v),c.push(!1)):(a.push(v),c.push(!1))});const u=r!=null?T(this,zn).decode(i,Ft(r)):null,h=T(this,zn).decode(a,t,!0),d=[],p=[];let y=0,w=0;return e.inputs.forEach((v,b)=>{let E=null;if(v.indexed)if(u==null)E=new KO(null);else if(c[b])E=new KO(u[w++]);else try{E=u[w++]}catch(A){E=A}else try{E=h[y++]}catch(A){E=A}d.push(E),p.push(v.name||null)}),$h.fromItems(d,p)}parseTransaction(e){const t=We(e.data,"tx.data"),r=_e(e.value!=null?e.value:0,"tx.value"),i=this.getFunction(Te(t.slice(0,4)));if(!i)return null;const a=T(this,zn).decode(i.inputs,t.slice(4));return new lk(i,i.selector,a,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new ck(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=Te(e),r=this.getError(Ut(t,0,4));if(!r)return null;const i=T(this,zn).decode(r.inputs,Ut(t,4));return new uk(r,r.selector,i)}static from(e){return e instanceof Rc?e:typeof e=="string"?new Rc(JSON.parse(e)):typeof e.formatJson=="function"?new Rc(e.formatJson()):typeof e.format=="function"?new Rc(e.format("json")):new Rc(e)}};ps=new WeakMap,gs=new WeakMap,ys=new WeakMap,zn=new WeakMap,Cs=new WeakSet,ky=function(e,t,r){if(xt(e)){const a=e.toLowerCase();for(const c of T(this,ys).values())if(a===c.selector)return c;return null}if(e.indexOf("(")===-1){const a=[];for(const[c,u]of T(this,ys))c.split("(")[0]===e&&a.push(u);if(t){const c=t.length>0?t[t.length-1]:null;let u=t.length,h=!0;qn.isTyped(c)&&c.type==="overrides"&&(h=!1,u--);for(let d=a.length-1;d>=0;d--){const p=a[d].inputs.length;p!==u&&(!h||p!==u-1)&&a.splice(d,1)}for(let d=a.length-1;d>=0;d--){const p=a[d].inputs;for(let y=0;y<t.length;y++)if(qn.isTyped(t[y])){if(y>=p.length){if(t[y].type==="overrides")continue;a.splice(d,1);break}if(t[y].type!==p[y].baseType){a.splice(d,1);break}}}}if(a.length===1&&t&&t.length!==a[0].inputs.length){const c=t[t.length-1];(c==null||Array.isArray(c)||typeof c!="object")&&a.splice(0,1)}if(a.length===0)return null;if(a.length>1&&r){const c=a.map(u=>JSON.stringify(u.format())).join(", ");Q(!1,`ambiguous function description (i.e. matches ${c})`,"key",e)}return a[0]}const i=T(this,ys).get(xs.from(e).format());return i||null},Ly=function(e,t,r){if(xt(e)){const a=e.toLowerCase();for(const c of T(this,gs).values())if(a===c.topicHash)return c;return null}if(e.indexOf("(")===-1){const a=[];for(const[c,u]of T(this,gs))c.split("(")[0]===e&&a.push(u);if(t){for(let c=a.length-1;c>=0;c--)a[c].inputs.length<t.length&&a.splice(c,1);for(let c=a.length-1;c>=0;c--){const u=a[c].inputs;for(let h=0;h<t.length;h++)if(qn.isTyped(t[h])&&t[h].type!==u[h].baseType){a.splice(c,1);break}}}if(a.length===0)return null;if(a.length>1&&r){const c=a.map(u=>JSON.stringify(u.format())).join(", ");Q(!1,`ambiguous event description (i.e. matches ${c})`,"key",e)}return a[0]}const i=T(this,gs).get(As.from(e).format());return i||null};let lm=Rc;const wN=BigInt(0);function Ju(n){return n??null}function Lt(n){return n==null?null:n.toString()}class JO{constructor(e,t,r){te(this,"gasPrice");te(this,"maxFeePerGas");te(this,"maxPriorityFeePerGas");Be(this,{gasPrice:Ju(e),maxFeePerGas:Ju(t),maxPriorityFeePerGas:Ju(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:Lt(e),maxFeePerGas:Lt(t),maxPriorityFeePerGas:Lt(r)}}}function um(n){const e={};n.to&&(e.to=n.to),n.from&&(e.from=n.from),n.data&&(e.data=Te(n.data));const t="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of t)!(i in n)||n[i]==null||(e[i]=_e(n[i],`request.${i}`));const r="type,nonce".split(/,/);for(const i of r)!(i in n)||n[i]==null||(e[i]=ke(n[i],`request.${i}`));return n.accessList&&(e.accessList=El(n.accessList)),"blockTag"in n&&(e.blockTag=n.blockTag),"enableCcipRead"in n&&(e.enableCcipRead=!!n.enableCcipRead),"customData"in n&&(e.customData=n.customData),"blobVersionedHashes"in n&&n.blobVersionedHashes&&(e.blobVersionedHashes=n.blobVersionedHashes.slice()),"kzg"in n&&(e.kzg=n.kzg),"blobs"in n&&n.blobs&&(e.blobs=n.blobs.map(i=>qE(i)?Te(i):Object.assign({},i))),e}var da;class hk{constructor(e,t){te(this,"provider");te(this,"number");te(this,"hash");te(this,"timestamp");te(this,"parentHash");te(this,"parentBeaconBlockRoot");te(this,"nonce");te(this,"difficulty");te(this,"gasLimit");te(this,"gasUsed");te(this,"stateRoot");te(this,"receiptsRoot");te(this,"blobGasUsed");te(this,"excessBlobGas");te(this,"miner");te(this,"prevRandao");te(this,"extraData");te(this,"baseFeePerGas");ce(this,da);j(this,da,e.transactions.map(r=>typeof r!="string"?new tp(r,t):r)),Be(this,{provider:t,hash:Ju(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:Ju(e.prevRandao),extraData:e.extraData,baseFeePerGas:Ju(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return T(this,da).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=T(this,da).slice();return e.length===0?[]:(ye(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:r,gasLimit:i,gasUsed:a,hash:c,miner:u,prevRandao:h,nonce:d,number:p,parentHash:y,parentBeaconBlockRoot:w,stateRoot:v,receiptsRoot:b,timestamp:E,transactions:A}=this;return{_type:"Block",baseFeePerGas:Lt(e),difficulty:Lt(t),extraData:r,gasLimit:Lt(i),gasUsed:Lt(a),blobGasUsed:Lt(this.blobGasUsed),excessBlobGas:Lt(this.excessBlobGas),hash:c,miner:u,prevRandao:h,nonce:d,number:p,parentHash:y,timestamp:E,parentBeaconBlockRoot:w,stateRoot:v,receiptsRoot:b,transactions:A}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return T(this,da).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let t;if(typeof e=="number")t=T(this,da)[e];else{const r=e.toLowerCase();for(const i of T(this,da))if(typeof i=="string"){if(i!==r)continue;t=i;break}else{if(i.hash!==r)continue;t=i;break}}if(t==null)throw new Error("no such tx");return typeof t=="string"?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if(typeof e=="number")return t[e];e=e.toLowerCase();for(const r of t)if(r.hash===e)return r;Q(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return fk(this)}}da=new WeakMap;class Np{constructor(e,t){te(this,"provider");te(this,"transactionHash");te(this,"blockHash");te(this,"blockNumber");te(this,"removed");te(this,"address");te(this,"data");te(this,"topics");te(this,"index");te(this,"transactionIndex");this.provider=t;const r=Object.freeze(e.topics.slice());Be(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:r,data:i,index:a,removed:c,topics:u,transactionHash:h,transactionIndex:d}=this;return{_type:"log",address:e,blockHash:t,blockNumber:r,data:i,index:a,removed:c,topics:u,transactionHash:h,transactionIndex:d}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return ye(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return ye(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return ye(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return dk(this)}}var yp;class bN{constructor(e,t){te(this,"provider");te(this,"to");te(this,"from");te(this,"contractAddress");te(this,"hash");te(this,"index");te(this,"blockHash");te(this,"blockNumber");te(this,"logsBloom");te(this,"gasUsed");te(this,"blobGasUsed");te(this,"cumulativeGasUsed");te(this,"gasPrice");te(this,"blobGasPrice");te(this,"type");te(this,"status");te(this,"root");ce(this,yp);j(this,yp,Object.freeze(e.logs.map(i=>new Np(i,t))));let r=wN;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),Be(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return T(this,yp)}toJSON(){const{to:e,from:t,contractAddress:r,hash:i,index:a,blockHash:c,blockNumber:u,logsBloom:h,logs:d,status:p,root:y}=this;return{_type:"TransactionReceipt",blockHash:c,blockNumber:u,contractAddress:r,cumulativeGasUsed:Lt(this.cumulativeGasUsed),from:t,gasPrice:Lt(this.gasPrice),blobGasUsed:Lt(this.blobGasUsed),blobGasPrice:Lt(this.blobGasPrice),gasUsed:Lt(this.gasUsed),hash:i,index:a,logs:d,logsBloom:h,root:y,status:p,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return EN(this)}reorderedEvent(e){return ye(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),vN(this,e)}}yp=new WeakMap;var Io;const V2=class V2{constructor(e,t){te(this,"provider");te(this,"blockNumber");te(this,"blockHash");te(this,"index");te(this,"hash");te(this,"type");te(this,"to");te(this,"from");te(this,"nonce");te(this,"gasLimit");te(this,"gasPrice");te(this,"maxPriorityFeePerGas");te(this,"maxFeePerGas");te(this,"maxFeePerBlobGas");te(this,"data");te(this,"value");te(this,"chainId");te(this,"signature");te(this,"accessList");te(this,"blobVersionedHashes");ce(this,Io);this.provider=t,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,j(this,Io,-1)}toJSON(){const{blockNumber:e,blockHash:t,index:r,hash:i,type:a,to:c,from:u,nonce:h,data:d,signature:p,accessList:y,blobVersionedHashes:w}=this;return{_type:"TransactionResponse",accessList:y,blockNumber:e,blockHash:t,blobVersionedHashes:w,chainId:Lt(this.chainId),data:d,from:u,gasLimit:Lt(this.gasLimit),gasPrice:Lt(this.gasPrice),hash:i,maxFeePerGas:Lt(this.maxFeePerGas),maxPriorityFeePerGas:Lt(this.maxPriorityFeePerGas),maxFeePerBlobGas:Lt(this.maxFeePerBlobGas),nonce:h,signature:p,to:c,index:r,type:a,value:Lt(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const t=this.provider.getBlock(e);if(t==null)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:t,blockNumber:r}=await Jn({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return t==null||t.blockNumber==null?0:r-t.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){const r=e??1,i=t??0;let a=T(this,Io),c=-1,u=a===-1;const h=async()=>{if(u)return null;const{blockNumber:w,nonce:v}=await Jn({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(v<this.nonce){a=w;return}if(u)return null;const b=await this.getTransaction();if(!(b&&b.blockNumber!=null))for(c===-1&&(c=a-3,c<T(this,Io)&&(c=T(this,Io)));c<=w;){if(u)return null;const E=await this.provider.getBlock(c,!0);if(E==null)return;for(const A of E)if(A===this.hash)return;for(let A=0;A<E.length;A++){const S=await E.getTransaction(A);if(S.from===this.from&&S.nonce===this.nonce){if(u)return null;const B=await this.provider.getTransactionReceipt(S.hash);if(B==null||w-B.blockNumber+1<r)return;let D="replaced";S.data===this.data&&S.to===this.to&&S.value===this.value?D="repriced":S.data==="0x"&&S.from===S.to&&S.value===wN&&(D="cancelled"),ye(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:D==="replaced"||D==="cancelled",reason:D,replacement:S.replaceableTransaction(a),hash:S.hash,receipt:B})}}c++}},d=w=>{if(w==null||w.status!==0)return w;ye(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:w.to,from:w.from,data:""},receipt:w})},p=await this.provider.getTransactionReceipt(this.hash);if(r===0)return d(p);if(p){if(await p.confirmations()>=r)return d(p)}else if(await h(),r===0)return null;return await new Promise((w,v)=>{const b=[],E=()=>{b.forEach(S=>S())};if(b.push(()=>{u=!0}),i>0){const S=setTimeout(()=>{E(),v(Pt("wait for transaction timeout","TIMEOUT"))},i);b.push(()=>{clearTimeout(S)})}const A=async S=>{if(await S.confirmations()>=r){E();try{w(d(S))}catch(B){v(B)}}};if(b.push(()=>{this.provider.off(this.hash,A)}),this.provider.on(this.hash,A),a>=0){const S=async()=>{try{await h()}catch(B){if(Dn(B,"TRANSACTION_REPLACED")){E(),v(B);return}}u||this.provider.once("block",S)};b.push(()=>{this.provider.off("block",S)}),this.provider.once("block",S)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return ye(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),EN(this)}reorderedEvent(e){return ye(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ye(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),vN(this,e)}replaceableTransaction(e){Q(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const t=new V2(this,this.provider);return j(t,Io,e),t}};Io=new WeakMap;let tp=V2;function fk(n){return{orphan:"drop-block",hash:n.hash,number:n.number}}function vN(n,e){return{orphan:"reorder-transaction",tx:n,other:e}}function EN(n){return{orphan:"drop-transaction",tx:n}}function dk(n){return{orphan:"drop-log",log:{transactionHash:n.transactionHash,blockHash:n.blockHash,blockNumber:n.blockNumber,address:n.address,data:n.data,topics:Object.freeze(n.topics.slice()),index:n.index}}}class s2 extends Np{constructor(t,r,i){super(t,t.provider);te(this,"interface");te(this,"fragment");te(this,"args");const a=r.decodeEventLog(i,t.data,t.topics);Be(this,{args:a,fragment:i,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class AN extends Np{constructor(t,r){super(t,t.provider);te(this,"error");Be(this,{error:r})}}var xh;class pk extends bN{constructor(t,r,i){super(i,r);ce(this,xh);j(this,xh,t)}get logs(){return super.logs.map(t=>{const r=t.topics.length?T(this,xh).getEvent(t.topics[0]):null;if(r)try{return new s2(t,T(this,xh),r)}catch(i){return new AN(t,i)}return t})}}xh=new WeakMap;var mp;class a2 extends tp{constructor(t,r,i){super(i,r);ce(this,mp);j(this,mp,t)}async wait(t,r){const i=await super.wait(t,r);return i==null?null:new pk(T(this,mp),this.provider,i)}}mp=new WeakMap;class xN extends YC{constructor(t,r,i,a){super(t,r,i);te(this,"log");Be(this,{log:a})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class gk extends xN{constructor(e,t,r,i,a){super(e,t,r,new s2(a,e.interface,i));const c=e.interface.decodeEventLog(i,this.log.data,this.log.topics);Be(this,{args:c,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const ZO=BigInt(0);function SN(n){return n&&typeof n.call=="function"}function ON(n){return n&&typeof n.estimateGas=="function"}function Zm(n){return n&&typeof n.resolveName=="function"}function TN(n){return n&&typeof n.sendTransaction=="function"}function DN(n){if(n!=null){if(Zm(n))return n;if(n.provider)return n.provider}}var wp;class yk{constructor(e,t,r){ce(this,wp);te(this,"fragment");if(Be(this,{fragment:t}),t.inputs.length<r.length)throw new Error("too many arguments");const i=pl(e.runner,"resolveName"),a=Zm(i)?i:null;j(this,wp,async function(){const c=await Promise.all(t.inputs.map((u,h)=>r[h]==null?null:u.walkAsync(r[h],(p,y)=>p==="address"?Array.isArray(y)?Promise.all(y.map(w=>er(w,a))):er(y,a):y)));return e.interface.encodeFilterTopics(t,c)}())}getTopicFilter(){return T(this,wp)}}wp=new WeakMap;function pl(n,e){return n==null?null:typeof n[e]=="function"?n:n.provider&&typeof n.provider[e]=="function"?n.provider:null}function Mc(n){return n==null?null:n.provider||null}async function CN(n,e){const t=qn.dereference(n,"overrides");Q(typeof t=="object","invalid overrides parameter","overrides",n);const r=um(t);return Q(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),Q(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function mk(n,e,t){const r=pl(n,"resolveName"),i=Zm(r)?r:null;return await Promise.all(e.map((a,c)=>a.walkAsync(t[c],(u,h)=>(h=qn.dereference(h,u),u==="address"?er(h,i):h))))}function wk(n){const e=async function(c){const u=await CN(c,["data"]);u.to=await n.getAddress(),u.from&&(u.from=await er(u.from,DN(n.runner)));const h=n.interface,d=_e(u.value||ZO,"overrides.value")===ZO,p=(u.data||"0x")==="0x";h.fallback&&!h.fallback.payable&&h.receive&&!p&&!d&&Q(!1,"cannot send data to receive or send value to non-payable fallback","overrides",c),Q(h.fallback||p,"cannot send data to receive-only contract","overrides.data",u.data);const y=h.receive||h.fallback&&h.fallback.payable;return Q(y||d,"cannot send value to non-payable fallback","overrides.value",u.value),Q(h.fallback||p,"cannot send data to receive-only contract","overrides.data",u.data),u},t=async function(c){const u=pl(n.runner,"call");ye(SN(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const h=await e(c);try{return await u.call(h)}catch(d){throw FE(d)&&d.data?n.interface.makeError(d.data,h):d}},r=async function(c){const u=n.runner;ye(TN(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const h=await u.sendTransaction(await e(c)),d=Mc(n.runner);return new a2(n.interface,d,h)},i=async function(c){const u=pl(n.runner,"estimateGas");return ye(ON(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await e(c))},a=async c=>await r(c);return Be(a,{_contract:n,estimateGas:i,populateTransaction:e,send:r,staticCall:t}),a}function bk(n,e){const t=function(...d){const p=n.interface.getFunction(e,d);return ye(p,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:d}}),p},r=async function(...d){const p=t(...d);let y={};if(p.inputs.length+1===d.length&&(y=await CN(d.pop()),y.from&&(y.from=await er(y.from,DN(n.runner)))),p.inputs.length!==d.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const w=await mk(n.runner,p.inputs,d);return Object.assign({},y,await Jn({to:n.getAddress(),data:n.interface.encodeFunctionData(p,w)}))},i=async function(...d){const p=await u(...d);return p.length===1?p[0]:p},a=async function(...d){const p=n.runner;ye(TN(p),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const y=await p.sendTransaction(await r(...d)),w=Mc(n.runner);return new a2(n.interface,w,y)},c=async function(...d){const p=pl(n.runner,"estimateGas");return ye(ON(p),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await p.estimateGas(await r(...d))},u=async function(...d){const p=pl(n.runner,"call");ye(SN(p),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const y=await r(...d);let w="0x";try{w=await p.call(y)}catch(b){throw FE(b)&&b.data?n.interface.makeError(b.data,y):b}const v=t(...d);return n.interface.decodeFunctionResult(v,w)},h=async(...d)=>t(...d).constant?await i(...d):await a(...d);return Be(h,{name:n.interface.getFunctionName(e),_contract:n,_key:e,getFragment:t,estimateGas:c,populateTransaction:r,send:a,staticCall:i,staticCallResult:u}),Object.defineProperty(h,"fragment",{configurable:!1,enumerable:!0,get:()=>{const d=n.interface.getFunction(e);return ye(d,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),d}}),h}function vk(n,e){const t=function(...i){const a=n.interface.getEvent(e,i);return ye(a,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:i}}),a},r=function(...i){return new yk(n,t(...i),i)};return Be(r,{name:n.interface.getEventName(e),_contract:n,_key:e,getFragment:t}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const i=n.interface.getEvent(e);return ye(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),i}}),r}const hm=Symbol.for("_ethersInternal_contract"),_N=new WeakMap;function Ek(n,e){_N.set(n[hm],e)}function jr(n){return _N.get(n[hm])}function Ak(n){return n&&typeof n=="object"&&"getTopicFilter"in n&&typeof n.getTopicFilter=="function"&&n.fragment}async function o2(n,e){let t,r=null;if(Array.isArray(e)){const a=function(c){if(xt(c,32))return c;const u=n.interface.getEvent(c);return Q(u,"unknown fragment","name",c),u.topicHash};t=e.map(c=>c==null?null:Array.isArray(c)?c.map(a):a(c))}else e==="*"?t=[null]:typeof e=="string"?xt(e,32)?t=[e]:(r=n.interface.getEvent(e),Q(r,"unknown fragment","event",e),t=[r.topicHash]):Ak(e)?t=await e.getTopicFilter():"fragment"in e?(r=e.fragment,t=[r.topicHash]):Q(!1,"unknown event name","event",e);t=t.map(a=>{if(a==null)return null;if(Array.isArray(a)){const c=Array.from(new Set(a.map(u=>u.toLowerCase())).values());return c.length===1?c[0]:(c.sort(),c)}return a.toLowerCase()});const i=t.map(a=>a==null?"null":Array.isArray(a)?a.join("|"):a).join("&");return{fragment:r,tag:i,topics:t}}async function Dd(n,e){const{subs:t}=jr(n);return t.get((await o2(n,e)).tag)||null}async function XO(n,e,t){const r=Mc(n.runner);ye(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:i,tag:a,topics:c}=await o2(n,t),{addr:u,subs:h}=jr(n);let d=h.get(a);if(!d){const y={address:u||n,topics:c},w=A=>{let S=i;if(S==null)try{S=n.interface.getEvent(A.topics[0])}catch{}if(S){const B=S,D=i?n.interface.decodeEventLog(i,A.data,A.topics):[];Dv(n,t,D,U=>new gk(n,U,t,B,A))}else Dv(n,t,[],B=>new xN(n,B,t,A))};let v=[];d={tag:a,listeners:[],start:()=>{v.length||v.push(r.on(y,w))},stop:async()=>{if(v.length==0)return;let A=v;v=[],await Promise.all(A),r.off(y,w)}},h.set(a,d)}return d}let Tv=Promise.resolve();async function xk(n,e,t,r){await Tv;const i=await Dd(n,e);if(!i)return!1;const a=i.listeners.length;return i.listeners=i.listeners.filter(({listener:c,once:u})=>{const h=Array.from(t);r&&h.push(r(u?null:c));try{c.call(n,...h)}catch{}return!u}),i.listeners.length===0&&(i.stop(),jr(n).subs.delete(i.tag)),a>0}async function Dv(n,e,t,r){try{await Tv}catch{}const i=xk(n,e,t,r);return Tv=i,await i}const cy=["then"];var TC;TC=hm;const qd=class qd{constructor(e,t,r,i){te(this,"target");te(this,"interface");te(this,"runner");te(this,"filters");te(this,TC);te(this,"fallback");Q(typeof e=="string"||U_(e),"invalid value for Contract target","target",e),r==null&&(r=null);const a=lm.from(t);Be(this,{target:e,runner:r,interface:a}),Object.defineProperty(this,hm,{value:{}});let c,u=null,h=null;if(i){const y=Mc(r);h=new a2(this.interface,y,i)}let d=new Map;if(typeof e=="string")if(xt(e))u=e,c=Promise.resolve(e);else{const y=pl(r,"resolveName");if(!Zm(y))throw Pt("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});c=y.resolveName(e).then(w=>{if(w==null)throw Pt("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return jr(this).addr=w,w})}else c=e.getAddress().then(y=>{if(y==null)throw new Error("TODO");return jr(this).addr=y,y});Ek(this,{addrPromise:c,addr:u,deployTx:h,subs:d});const p=new Proxy({},{get:(y,w,v)=>{if(typeof w=="symbol"||cy.indexOf(w)>=0)return Reflect.get(y,w,v);try{return this.getEvent(w)}catch(b){if(!Dn(b,"INVALID_ARGUMENT")||b.argument!=="key")throw b}},has:(y,w)=>cy.indexOf(w)>=0?Reflect.has(y,w):Reflect.has(y,w)||this.interface.hasEvent(String(w))});return Be(this,{filters:p}),Be(this,{fallback:a.receive||a.fallback?wk(this):null}),new Proxy(this,{get:(y,w,v)=>{if(typeof w=="symbol"||w in y||cy.indexOf(w)>=0)return Reflect.get(y,w,v);try{return y.getFunction(w)}catch(b){if(!Dn(b,"INVALID_ARGUMENT")||b.argument!=="key")throw b}},has:(y,w)=>typeof w=="symbol"||w in y||cy.indexOf(w)>=0?Reflect.has(y,w):y.interface.hasFunction(w)})}connect(e){return new qd(this.target,this.interface,e)}attach(e){return new qd(e,this.interface,this.runner)}async getAddress(){return await jr(this).addrPromise}async getDeployedCode(){const e=Mc(this.runner);ye(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());return t==="0x"?null:t}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=Mc(this.runner);return ye(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((i,a)=>{const c=async()=>{try{if(await this.getDeployedCode()!=null)return i(this);r.once("block",c)}catch(u){a(u)}};c()})}deploymentTransaction(){return jr(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),bk(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),vk(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,r){t==null&&(t=0),r==null&&(r="latest");const{addr:i,addrPromise:a}=jr(this),c=i||await a,{fragment:u,topics:h}=await o2(this,e),d={address:c,topics:h,fromBlock:t,toBlock:r},p=Mc(this.runner);return ye(p,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await p.getLogs(d)).map(y=>{let w=u;if(w==null)try{w=this.interface.getEvent(y.topics[0])}catch{}if(w)try{return new s2(y,this.interface,w)}catch(v){return new AN(y,v)}return new Np(y,p)})}async on(e,t){const r=await XO(this,"on",e);return r.listeners.push({listener:t,once:!1}),r.start(),this}async once(e,t){const r=await XO(this,"once",e);return r.listeners.push({listener:t,once:!0}),r.start(),this}async emit(e,...t){return await Dv(this,e,t,null)}async listenerCount(e){if(e){const i=await Dd(this,e);return i?i.listeners.length:0}const{subs:t}=jr(this);let r=0;for(const{listeners:i}of t.values())r+=i.length;return r}async listeners(e){if(e){const i=await Dd(this,e);return i?i.listeners.map(({listener:a})=>a):[]}const{subs:t}=jr(this);let r=[];for(const{listeners:i}of t.values())r=r.concat(i.map(({listener:a})=>a));return r}async off(e,t){const r=await Dd(this,e);if(!r)return this;if(t){const i=r.listeners.map(({listener:a})=>a).indexOf(t);i>=0&&r.listeners.splice(i,1)}return(t==null||r.listeners.length===0)&&(r.stop(),jr(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const t=await Dd(this,e);if(!t)return this;t.stop(),jr(this).subs.delete(t.tag)}else{const{subs:t}=jr(this);for(const{tag:r,stop:i}of t.values())i(),t.delete(r)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){class t extends qd{constructor(i,a=null){super(i,e,a)}}return t}static from(e,t,r){return r==null&&(r=null),new this(e,t,r)}};let Cv=qd;function Sk(){return Cv}class Gr extends Sk(){}function Xb(n){return n.match(/^ipfs:\/\/ipfs\//i)?n=n.substring(12):n.match(/^ipfs:\/\//i)?n=n.substring(7):Q(!1,"unsupported IPFS format","link",n),`https://gateway.ipfs.io/ipfs/${n}`}class Ok{constructor(e){te(this,"name");Be(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const NN=new RegExp("^(ipfs)://(.*)$","i"),WO=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),NN,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var Ro,Wc,Bo,Mu,Um,IN;const Vu=class Vu{constructor(e,t,r){ce(this,Bo);te(this,"provider");te(this,"address");te(this,"name");ce(this,Ro);ce(this,Wc);Be(this,{provider:e,address:t,name:r}),j(this,Ro,null),j(this,Wc,new Gr(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return T(this,Ro)==null&&j(this,Ro,(async()=>{try{return await T(this,Wc).supportsInterface("0x9061b923")}catch(e){if(Dn(e,"CALL_EXCEPTION"))return!1;throw j(this,Ro,null),e}})()),await T(this,Ro)}async getAddress(e){if(e==null&&(e=60),e===60)try{const a=await be(this,Bo,Mu).call(this,"addr(bytes32)");return a==null||a===Kd?null:a}catch(a){if(Dn(a,"CALL_EXCEPTION"))return null;throw a}if(e>=0&&e<2147483648){let a=e+2147483648;const c=await be(this,Bo,Mu).call(this,"addr(bytes32,uint)",[a]);if(xt(c,20))return dt(c)}let t=null;for(const a of this.provider.plugins)if(a instanceof Ok&&a.supportsCoinType(e)){t=a;break}if(t==null)return null;const r=await be(this,Bo,Mu).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const i=await t.decodeAddress(e,r);if(i!=null)return i;ye(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const t=await be(this,Bo,Mu).call(this,"text(bytes32,string)",[e]);return t==null||t==="0x"?null:t}async getContentHash(){const e=await be(this,Bo,Mu).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const i=t[1]==="e3010170"?"ipfs":"ipns",a=parseInt(t[4],16);if(t[5].length===a*2)return`${i}://${I5("0x"+t[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;ye(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const t=await this.getText("avatar");if(t==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let r=0;r<WO.length;r++){const i=t.match(WO[r]);if(i==null)continue;const a=i[1].toLowerCase();switch(a){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{const c=Xb(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:c}),{linkage:e,url:c}}case"erc721":case"erc1155":{const c=a==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:a,value:t});const u=await this.getAddress();if(u==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const h=(i[2]||"").split("/");if(h.length!==2)return e.push({type:`!${a}caip`,value:i[2]||""}),{url:null,linkage:e};const d=h[1],p=new Gr(h[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(a==="erc721"){const E=await p.ownerOf(d);if(u!==E)return e.push({type:"!owner",value:E}),{url:null,linkage:e};e.push({type:"owner",value:E})}else if(a==="erc1155"){const E=await p.balanceOf(u,d);if(!E)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:E.toString()})}let y=await p[c](d);if(y==null||y==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:y}),a==="erc1155"&&(y=y.replace("{id}",Go(d,32).substring(2)),e.push({type:"metadata-url-expanded",value:y})),y.match(/^ipfs:/i)&&(y=Xb(y)),e.push({type:"metadata-url",value:y});let w={};const v=await new Ko(y).send();v.assertOk();try{w=v.bodyJson}catch{try{e.push({type:"!metadata",value:v.bodyText})}catch{const S=v.body;return S&&e.push({type:"!metadata",value:Te(S)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!w)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(w)});let b=w.image;if(typeof b!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!b.match(/^(https:\/\/|data:)/i)){if(b.match(NN)==null)return e.push({type:"!imageUrl-ipfs",value:b}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:b}),b=Xb(b)}return e.push({type:"url",value:b}),{linkage:e,url:b}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork(),r=t.getPlugin("org.ethers.plugins.network.Ens");return ye(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),r.address}static async fromName(e,t){var i;let r=t;for(;;){if(r===""||r==="."||t!=="eth"&&r==="eth")return null;const a=await be(i=Vu,Um,IN).call(i,e,r);if(a!=null){const c=new Vu(e,a,t);return r!==t&&!await c.supportsWildcard()?null:c}r=r.split(".").slice(1).join(".")}}};Ro=new WeakMap,Wc=new WeakMap,Bo=new WeakSet,Mu=async function(e,t){t=(t||[]).slice();const r=T(this,Wc).interface;t.unshift(Sv(this.name));let i=null;await this.supportsWildcard()&&(i=r.getFunction(e),ye(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[S$(this.name,255),r.encodeFunctionData(i,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{const a=await T(this,Wc)[e](...t);return i?r.decodeFunctionResult(i,a)[0]:a}catch(a){if(!Dn(a,"CALL_EXCEPTION"))throw a}return null},Um=new WeakSet,IN=async function(e,t){const r=await Vu.getEnsAddress(e);try{const a=await new Gr(r,["function resolver(bytes32) view returns (address)"],e).resolver(Sv(t),{enableCcipRead:!0});return a===Kd?null:a}catch(i){throw i}return null},ce(Vu,Um);let fm=Vu;const eT=BigInt(0);function Xe(n,e){return function(t){return t==null?e:n(t)}}function Xm(n,e){return t=>{if(e&&t==null)return null;if(!Array.isArray(t))throw new Error("not an array");return t.map(r=>n(r))}}function Ip(n,e){return t=>{const r={};for(const i in n){let a=i;if(e&&i in e&&!(a in t)){for(const c of e[i])if(c in t){a=c;break}}try{const c=n[i](t[a]);c!==void 0&&(r[i]=c)}catch(c){const u=c instanceof Error?c.message:"not-an-error";ye(!1,`invalid value for value.${i} (${u})`,"BAD_DATA",{value:t})}}return r}}function Tk(n){switch(n){case!0:case"true":return!0;case!1:case"false":return!1}Q(!1,`invalid boolean; ${JSON.stringify(n)}`,"value",n)}function qh(n){return Q(xt(n,!0),"invalid data","value",n),n}function Tn(n){return Q(xt(n,32),"invalid hash","value",n),n}const Dk=Ip({address:dt,blockHash:Tn,blockNumber:ke,data:qh,index:ke,removed:Xe(Tk,!1),topics:Xm(Tn),transactionHash:Tn,transactionIndex:ke},{index:["logIndex"]});function Ck(n){return Dk(n)}const _k=Ip({hash:Xe(Tn),parentHash:Tn,parentBeaconBlockRoot:Xe(Tn,null),number:ke,timestamp:ke,nonce:Xe(qh),difficulty:_e,gasLimit:_e,gasUsed:_e,stateRoot:Xe(Tn,null),receiptsRoot:Xe(Tn,null),blobGasUsed:Xe(_e,null),excessBlobGas:Xe(_e,null),miner:Xe(dt),prevRandao:Xe(Tn,null),extraData:qh,baseFeePerGas:Xe(_e)},{prevRandao:["mixHash"]});function Nk(n){const e=_k(n);return e.transactions=n.transactions.map(t=>typeof t=="string"?t:RN(t)),e}const Ik=Ip({transactionIndex:ke,blockNumber:ke,transactionHash:Tn,address:dt,topics:Xm(Tn),data:qh,index:ke,blockHash:Tn},{index:["logIndex"]});function Rk(n){return Ik(n)}const Bk=Ip({to:Xe(dt,null),from:Xe(dt,null),contractAddress:Xe(dt,null),index:ke,root:Xe(Te),gasUsed:_e,blobGasUsed:Xe(_e,null),logsBloom:Xe(qh),blockHash:Tn,hash:Tn,logs:Xm(Rk),blockNumber:ke,cumulativeGasUsed:_e,effectiveGasPrice:Xe(_e),blobGasPrice:Xe(_e,null),status:Xe(ke),type:Xe(ke,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function Pk(n){return Bk(n)}function RN(n){n.to&&_e(n.to)===eT&&(n.to="0x0000000000000000000000000000000000000000");const e=Ip({hash:Tn,index:Xe(ke,void 0),type:t=>t==="0x"||t==null?0:ke(t),accessList:Xe(El,null),blobVersionedHashes:Xe(Xm(Tn,!0),null),blockHash:Xe(Tn,null),blockNumber:Xe(ke,null),transactionIndex:Xe(ke,null),from:dt,gasPrice:Xe(_e),maxPriorityFeePerGas:Xe(_e),maxFeePerGas:Xe(_e),maxFeePerBlobGas:Xe(_e,null),gasLimit:_e,to:Xe(dt,null),value:_e,nonce:ke,data:qh,creates:Xe(dt,null),chainId:Xe(_e,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(n);if(e.to==null&&e.creates==null&&(e.creates=DM(e)),(n.type===1||n.type===2)&&n.accessList==null&&(e.accessList=[]),n.signature?e.signature=Qi.from(n.signature):e.signature=Qi.from(n),e.chainId==null){const t=e.signature.legacyChainId;t!=null&&(e.chainId=t)}return e.blockHash&&_e(e.blockHash)===eT&&(e.blockHash=null),e}const Uk="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class Rp{constructor(e){te(this,"name");Be(this,{name:e})}clone(){return new Rp(this.name)}}class Wm extends Rp{constructor(t,r){t==null&&(t=0);super(`org.ethers.network.plugins.GasCost#${t||0}`);te(this,"effectiveBlock");te(this,"txBase");te(this,"txCreate");te(this,"txDataZero");te(this,"txDataNonzero");te(this,"txAccessListStorageKey");te(this,"txAccessListAddress");const i={effectiveBlock:t};function a(c,u){let h=(r||{})[c];h==null&&(h=u),Q(typeof h=="number",`invalud value for ${c}`,"costs",r),i[c]=h}a("txBase",21e3),a("txCreate",32e3),a("txDataZero",4),a("txDataNonzero",16),a("txAccessListStorageKey",1900),a("txAccessListAddress",2400),Be(this,i)}clone(){return new Wm(this.effectiveBlock,this)}}class e0 extends Rp{constructor(t,r){super("org.ethers.plugins.network.Ens");te(this,"address");te(this,"targetNetwork");Be(this,{address:t||Uk,targetNetwork:r??1})}clone(){return new e0(this.address,this.targetNetwork)}}var bp,vp;class Mk extends Rp{constructor(t,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");ce(this,bp);ce(this,vp);j(this,bp,t),j(this,vp,r)}get url(){return T(this,bp)}get processFunc(){return T(this,vp)}clone(){return this}}bp=new WeakMap,vp=new WeakMap;const Wb=new Map;var Sh,Oh,Po;const Gu=class Gu{constructor(e,t){ce(this,Sh);ce(this,Oh);ce(this,Po);j(this,Sh,e),j(this,Oh,_e(t)),j(this,Po,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return T(this,Sh)}set name(e){j(this,Sh,e)}get chainId(){return T(this,Oh)}set chainId(e){j(this,Oh,_e(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===_e(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===_e(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===_e(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(T(this,Po).values())}attachPlugin(e){if(T(this,Po).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return T(this,Po).set(e.name,e.clone()),this}getPlugin(e){return T(this,Po).get(e)||null}getPlugins(e){return this.plugins.filter(t=>t.name.split("#")[0]===e)}clone(){const e=new Gu(this.name,this.chainId);return this.plugins.forEach(t=>{e.attachPlugin(t.clone())}),e}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new Wm;let r=t.txBase;if(e.to==null&&(r+=t.txCreate),e.data)for(let i=2;i<e.data.length;i+=2)e.data.substring(i,i+2)==="00"?r+=t.txDataZero:r+=t.txDataNonzero;if(e.accessList){const i=El(e.accessList);for(const a in i)r+=t.txAccessListAddress+t.txAccessListStorageKey*i[a].storageKeys.length}return r}static from(e){if($k(),e==null)return Gu.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const t=Wb.get(e);if(t)return t();if(typeof e=="bigint")return new Gu("unknown",e);Q(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){Q(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const t=new Gu(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&t.attachPlugin(new e0(e.ensAddress,e.ensNetwork)),t}Q(!1,"invalid network","network",e)}static register(e,t){typeof e=="number"&&(e=BigInt(e));const r=Wb.get(e);r&&Q(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),Wb.set(e,t)}};Sh=new WeakMap,Oh=new WeakMap,Po=new WeakMap;let Ss=Gu;function tT(n,e){const t=String(n);if(!t.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${n}`);const r=t.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${n}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let i=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||i++,r[1]=i.toString()}return BigInt(r[0]+r[1])}function nT(n){return new Mk(n,async(e,t,r)=>{r.setHeader("User-Agent","ethers");let i;try{const[a,c]=await Promise.all([r.send(),e()]);i=a;const u=i.bodyJson.standard;return{gasPrice:c.gasPrice,maxFeePerGas:tT(u.maxFee,9),maxPriorityFeePerGas:tT(u.maxPriorityFee,9)}}catch(a){ye(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:i,error:a})}})}let rT=!1;function $k(){if(rT)return;rT=!0;function n(e,t,r){const i=function(){const a=new Ss(e,t);return r.ensNetwork!=null&&a.attachPlugin(new e0(null,r.ensNetwork)),a.attachPlugin(new Wm),(r.plugins||[]).forEach(c=>{a.attachPlugin(c)}),a};Ss.register(e,i),Ss.register(t,i),r.altNames&&r.altNames.forEach(a=>{Ss.register(a,i)})}n("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),n("ropsten",3,{ensNetwork:3}),n("rinkeby",4,{ensNetwork:4}),n("goerli",5,{ensNetwork:5}),n("kovan",42,{ensNetwork:42}),n("sepolia",11155111,{ensNetwork:11155111}),n("holesky",17e3,{ensNetwork:17e3}),n("classic",61,{}),n("classicKotti",6,{}),n("arbitrum",42161,{ensNetwork:1}),n("arbitrum-goerli",421613,{}),n("arbitrum-sepolia",421614,{}),n("base",8453,{ensNetwork:1}),n("base-goerli",84531,{}),n("base-sepolia",84532,{}),n("bnb",56,{ensNetwork:1}),n("bnbt",97,{}),n("linea",59144,{ensNetwork:1}),n("linea-goerli",59140,{}),n("linea-sepolia",59141,{}),n("matic",137,{ensNetwork:1,plugins:[nT("https://gasstation.polygon.technology/v2")]}),n("matic-amoy",80002,{}),n("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[nT("https://gasstation-testnet.polygon.technology/v2")]}),n("optimism",10,{ensNetwork:1,plugins:[]}),n("optimism-goerli",420,{}),n("optimism-sepolia",11155420,{}),n("xdai",100,{ensNetwork:1})}function _v(n){return JSON.parse(JSON.stringify(n))}var pa,di,Uo,ms,Th,jy;class kk{constructor(e){ce(this,Th);ce(this,pa);ce(this,di);ce(this,Uo);ce(this,ms);j(this,pa,e),j(this,di,null),j(this,Uo,4e3),j(this,ms,-2)}get pollingInterval(){return T(this,Uo)}set pollingInterval(e){j(this,Uo,e)}start(){T(this,di)||(j(this,di,T(this,pa)._setTimeout(be(this,Th,jy).bind(this),T(this,Uo))),be(this,Th,jy).call(this))}stop(){T(this,di)&&(T(this,pa)._clearTimeout(T(this,di)),j(this,di,null))}pause(e){this.stop(),e&&j(this,ms,-2)}resume(){this.start()}}pa=new WeakMap,di=new WeakMap,Uo=new WeakMap,ms=new WeakMap,Th=new WeakSet,jy=async function(){try{const e=await T(this,pa).getBlockNumber();if(T(this,ms)===-2){j(this,ms,e);return}if(e!==T(this,ms)){for(let t=T(this,ms)+1;t<=e;t++){if(T(this,di)==null)return;await T(this,pa).emit("block",t)}j(this,ms,e)}}catch{}T(this,di)!=null&&j(this,di,T(this,pa)._setTimeout(be(this,Th,jy).bind(this),T(this,Uo)))};var el,tl,Mo;class c2{constructor(e){ce(this,el);ce(this,tl);ce(this,Mo);j(this,el,e),j(this,Mo,!1),j(this,tl,t=>{this._poll(t,T(this,el))})}async _poll(e,t){throw new Error("sub-classes must override this")}start(){T(this,Mo)||(j(this,Mo,!0),T(this,tl).call(this,-2),T(this,el).on("block",T(this,tl)))}stop(){T(this,Mo)&&(j(this,Mo,!1),T(this,el).off("block",T(this,tl)))}pause(e){this.stop()}resume(){this.start()}}el=new WeakMap,tl=new WeakMap,Mo=new WeakMap;var Dh,ga;class Lk extends c2{constructor(t,r){super(t);ce(this,Dh);ce(this,ga);j(this,Dh,r),j(this,ga,-2)}pause(t){t&&j(this,ga,-2),super.pause(t)}async _poll(t,r){const i=await r.getBlock(T(this,Dh));i!=null&&(T(this,ga)===-2?j(this,ga,i.number):i.number>T(this,ga)&&(r.emit(T(this,Dh),i.number),j(this,ga,i.number)))}}Dh=new WeakMap,ga=new WeakMap;var Mm;class jk extends c2{constructor(t,r){super(t);ce(this,Mm);j(this,Mm,_v(r))}async _poll(t,r){throw new Error("@TODO")}}Mm=new WeakMap;var Ch;class zk extends c2{constructor(t,r){super(t);ce(this,Ch);j(this,Ch,r)}async _poll(t,r){const i=await r.getTransactionReceipt(T(this,Ch));i&&r.emit(T(this,Ch),i)}}Ch=new WeakMap;var ya,_h,Nh,$o,pi,$m,BN;class l2{constructor(e,t){ce(this,$m);ce(this,ya);ce(this,_h);ce(this,Nh);ce(this,$o);ce(this,pi);j(this,ya,e),j(this,_h,_v(t)),j(this,Nh,be(this,$m,BN).bind(this)),j(this,$o,!1),j(this,pi,-2)}start(){T(this,$o)||(j(this,$o,!0),T(this,pi)===-2&&T(this,ya).getBlockNumber().then(e=>{j(this,pi,e)}),T(this,ya).on("block",T(this,Nh)))}stop(){T(this,$o)&&(j(this,$o,!1),T(this,ya).off("block",T(this,Nh)))}pause(e){this.stop(),e&&j(this,pi,-2)}resume(){this.start()}}ya=new WeakMap,_h=new WeakMap,Nh=new WeakMap,$o=new WeakMap,pi=new WeakMap,$m=new WeakSet,BN=async function(e){if(T(this,pi)===-2)return;const t=_v(T(this,_h));t.fromBlock=T(this,pi)+1,t.toBlock=e;const r=await T(this,ya).getLogs(t);if(r.length===0){T(this,pi)<e-60&&j(this,pi,e-60);return}for(const i of r)T(this,ya).emit(T(this,_h),i),j(this,pi,i.blockNumber)};const Hk=BigInt(2),Fk=10;function ly(n){return n&&typeof n.then=="function"}function zy(n,e){return n+":"+JSON.stringify(e,(t,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const i=Object.keys(r);return i.sort(),i.reduce((a,c)=>(a[c]=r[c],a),{})}return r})}class PN{constructor(e){te(this,"name");Be(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function qk(n){return JSON.parse(JSON.stringify(n))}function Nv(n){return n=Array.from(new Set(n).values()),n.sort(),n}async function e1(n,e){if(n==null)throw new Error("invalid event");if(Array.isArray(n)&&(n={topics:n}),typeof n=="string")switch(n){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:n,tag:n}}if(xt(n,32)){const t=n.toLowerCase();return{type:"transaction",tag:zy("tx",{hash:t}),hash:t}}if(n.orphan){const t=n;return{type:"orphan",tag:zy("orphan",t),filter:qk(t)}}if(n.address||n.topics){const t=n,r={topics:(t.topics||[]).map(i=>i==null?null:Array.isArray(i)?Nv(i.map(a=>a.toLowerCase())):i.toLowerCase())};if(t.address){const i=[],a=[],c=u=>{xt(u)?i.push(u):a.push((async()=>{i.push(await er(u,e))})())};Array.isArray(t.address)?t.address.forEach(c):c(t.address),a.length&&await Promise.all(a),r.address=Nv(i.map(u=>u.toLowerCase()))}return{filter:r,tag:zy("event",r),type:"event"}}Q(!1,"unknown ProviderEvent","event",n)}function t1(){return new Date().getTime()}const Vk={cacheTimeout:250,pollingInterval:4e3};var Hn,ko,Fn,Ih,qr,nl,Lo,ma,Ep,gi,Rh,Bh,Ve,kr,Iv,Rv,Cd,Bv,_d,Hy;class Gk{constructor(e,t){ce(this,Ve);ce(this,Hn);ce(this,ko);ce(this,Fn);ce(this,Ih);ce(this,qr);ce(this,nl);ce(this,Lo);ce(this,ma);ce(this,Ep);ce(this,gi);ce(this,Rh);ce(this,Bh);if(j(this,Bh,Object.assign({},Vk,t||{})),e==="any")j(this,nl,!0),j(this,qr,null);else if(e){const r=Ss.from(e);j(this,nl,!1),j(this,qr,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else j(this,nl,!1),j(this,qr,null);j(this,ma,-1),j(this,Lo,new Map),j(this,Hn,new Map),j(this,ko,new Map),j(this,Fn,null),j(this,Ih,!1),j(this,Ep,1),j(this,gi,new Map),j(this,Rh,!1)}get pollingInterval(){return T(this,Bh).pollingInterval}get provider(){return this}get plugins(){return Array.from(T(this,ko).values())}attachPlugin(e){if(T(this,ko).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return T(this,ko).set(e.name,e.connect(this)),this}getPlugin(e){return T(this,ko).get(e)||null}get disableCcipRead(){return T(this,Rh)}set disableCcipRead(e){j(this,Rh,!!e)}async ccipReadFetch(e,t,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const i=e.to.toLowerCase(),a=t.toLowerCase(),c=[];for(let u=0;u<r.length;u++){const h=r[u],d=h.replace("{sender}",i).replace("{data}",a),p=new Ko(d);h.indexOf("{data}")===-1&&(p.body={data:a,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:p,index:u,urls:r});let y="unknown error",w;try{w=await p.send()}catch(v){c.push(v.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:p,result:{error:v}});continue}try{const v=w.bodyJson;if(v.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:p,result:v}),v.data;v.message&&(y=v.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:p,result:v})}catch{}ye(w.statusCode<400||w.statusCode>=500,`response not found during CCIP fetch: ${y}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:h,errorMessage:y}}),c.push(y)}ye(!1,`error encountered during CCIP fetch: ${c.map(u=>JSON.stringify(u)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:c}})}_wrapBlock(e,t){return new hk(Nk(e),this)}_wrapLog(e,t){return new Np(Ck(e),this)}_wrapTransactionReceipt(e,t){return new bN(Pk(e),this)}_wrapTransactionResponse(e,t){return new tp(RN(e),this)}_detectNetwork(){ye(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){ye(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=ke(await be(this,Ve,kr).call(this,{method:"getBlockNumber"}),"%response");return T(this,ma)>=0&&j(this,ma,e),e}_getAddress(e){return er(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(xt(e))return xt(e,32)?e:Lu(e);if(typeof e=="bigint"&&(e=ke(e,"blockTag")),typeof e=="number")return e>=0?Lu(e):T(this,ma)>=0?Lu(T(this,ma)+e):this.getBlockNumber().then(t=>Lu(t+e));Q(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const t=(e.topics||[]).map(h=>h==null?null:Array.isArray(h)?Nv(h.map(d=>d.toLowerCase())):h.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,i=(h,d,p)=>{let y;switch(h.length){case 0:break;case 1:y=h[0];break;default:h.sort(),y=h}if(r&&(d!=null||p!=null))throw new Error("invalid filter");const w={};return y&&(w.address=y),t.length&&(w.topics=t),d&&(w.fromBlock=d),p&&(w.toBlock=p),r&&(w.blockHash=r),w};let a=[];if(e.address)if(Array.isArray(e.address))for(const h of e.address)a.push(this._getAddress(h));else a.push(this._getAddress(e.address));let c;"fromBlock"in e&&(c=this._getBlockTag(e.fromBlock));let u;return"toBlock"in e&&(u=this._getBlockTag(e.toBlock)),a.filter(h=>typeof h!="string").length||c!=null&&typeof c!="string"||u!=null&&typeof u!="string"?Promise.all([Promise.all(a),c,u]).then(h=>i(h[0],h[1],h[2])):i(a,c,u)}_getTransactionRequest(e){const t=um(e),r=[];if(["to","from"].forEach(i=>{if(t[i]==null)return;const a=er(t[i],this);ly(a)?r.push(async function(){t[i]=await a}()):t[i]=a}),t.blockTag!=null){const i=this._getBlockTag(t.blockTag);ly(i)?r.push(async function(){t.blockTag=await i}()):t.blockTag=i}return r.length?async function(){return await Promise.all(r),t}():t}async getNetwork(){if(T(this,qr)==null){const i=(async()=>{try{const a=await this._detectNetwork();return this.emit("network",a,null),a}catch(a){throw T(this,qr)===i&&j(this,qr,null),a}})();return j(this,qr,i),(await i).clone()}const e=T(this,qr),[t,r]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==r.chainId&&(T(this,nl)?(this.emit("network",r,t),T(this,qr)===e&&j(this,qr,Promise.resolve(r))):ye(!1,`network changed: ${t.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){const e=await this.getNetwork(),t=async()=>{const{_block:i,gasPrice:a,priorityFee:c}=await Jn({_block:be(this,Ve,Bv).call(this,"latest",!1),gasPrice:(async()=>{try{const p=await be(this,Ve,kr).call(this,{method:"getGasPrice"});return _e(p,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const p=await be(this,Ve,kr).call(this,{method:"getPriorityFee"});return _e(p,"%response")}catch{}return null})()});let u=null,h=null;const d=this._wrapBlock(i,e);return d&&d.baseFeePerGas&&(h=c??BigInt("1000000000"),u=d.baseFeePerGas*Hk+h),new JO(a,u,h)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const i=new Ko(r.url),a=await r.processFunc(t,this,i);return new JO(a.gasPrice,a.maxFeePerGas,a.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return ly(t)&&(t=await t),_e(await be(this,Ve,kr).call(this,{method:"estimateGas",transaction:t}),"%response")}async call(e){const{tx:t,blockTag:r}=await Jn({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await be(this,Ve,Rv).call(this,be(this,Ve,Iv).call(this,t,r,e.enableCcipRead?0:-1))}async getBalance(e,t){return _e(await be(this,Ve,Cd).call(this,{method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return ke(await be(this,Ve,Cd).call(this,{method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return Te(await be(this,Ve,Cd).call(this,{method:"getCode"},e,t))}async getStorage(e,t,r){const i=_e(t,"position");return Te(await be(this,Ve,Cd).call(this,{method:"getStorage",position:i},e,r))}async broadcastTransaction(e){const{blockNumber:t,hash:r,network:i}=await Jn({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),a=om.from(e);if(a.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(a,i).replaceableTransaction(t)}async getBlock(e,t){const{network:r,params:i}=await Jn({network:this.getNetwork(),params:be(this,Ve,Bv).call(this,e,!!t)});return i==null?null:this._wrapBlock(i,r)}async getTransaction(e){const{network:t,params:r}=await Jn({network:this.getNetwork(),params:be(this,Ve,kr).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,t)}async getTransactionReceipt(e){const{network:t,params:r}=await Jn({network:this.getNetwork(),params:be(this,Ve,kr).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const i=await be(this,Ve,kr).call(this,{method:"getTransaction",hash:e});if(i==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=i.gasPrice}return this._wrapTransactionReceipt(r,t)}async getTransactionResult(e){const{result:t}=await Jn({network:this.getNetwork(),result:be(this,Ve,kr).call(this,{method:"getTransactionResult",hash:e})});return t==null?null:Te(t)}async getLogs(e){let t=this._getFilter(e);ly(t)&&(t=await t);const{network:r,params:i}=await Jn({network:this.getNetwork(),params:be(this,Ve,kr).call(this,{method:"getLogs",filter:t})});return i.map(a=>this._wrapLog(a,r))}_getProvider(e){ye(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await fm.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){const t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){e=dt(e);const t=Sv(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await fm.getEnsAddress(this),a=await new Gr(r,["function resolver(bytes32) view returns (address)"],this).resolver(t);if(a==null||a===Kd)return null;const u=await new Gr(a,["function name(bytes32) view returns (string)"],this).name(t);return await this.resolveName(u)!==e?null:u}catch(r){if(Dn(r,"BAD_DATA")&&r.value==="0x"||Dn(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,t,r){const i=t??1;return i===0?this.getTransactionReceipt(e):new Promise(async(a,c)=>{let u=null;const h=async d=>{try{const p=await this.getTransactionReceipt(e);if(p!=null&&d-p.blockNumber+1>=i){a(p),u&&(clearTimeout(u),u=null);return}}catch(p){console.log("EEE",p)}this.once("block",h)};r!=null&&(u=setTimeout(()=>{u!=null&&(u=null,this.off("block",h),c(Pt("timeout","TIMEOUT",{reason:"timeout"})))},r)),h(await this.getBlockNumber())})}async waitForBlock(e){ye(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=T(this,gi).get(e);t&&(t.timer&&clearTimeout(t.timer),T(this,gi).delete(e))}_setTimeout(e,t){t==null&&(t=0);const r=Wf(this,Ep)._++,i=()=>{T(this,gi).delete(r),e()};if(this.paused)T(this,gi).set(r,{timer:null,func:i,time:t});else{const a=setTimeout(i,t);T(this,gi).set(r,{timer:a,func:i,time:t1()})}return r}_forEachSubscriber(e){for(const t of T(this,Hn).values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new PN(e.type);case"block":{const t=new kk(this);return t.pollingInterval=this.pollingInterval,t}case"safe":case"finalized":return new Lk(this,e.type);case"event":return new l2(this,e.filter);case"transaction":return new zk(this,e.hash);case"orphan":return new jk(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(const r of T(this,Hn).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=t,r.started&&t.start(),T(this,Fn)!=null&&t.pause(T(this,Fn));break}}async on(e,t){const r=await be(this,Ve,Hy).call(this,e);return r.listeners.push({listener:t,once:!1}),r.started||(r.subscriber.start(),r.started=!0,T(this,Fn)!=null&&r.subscriber.pause(T(this,Fn))),this}async once(e,t){const r=await be(this,Ve,Hy).call(this,e);return r.listeners.push({listener:t,once:!0}),r.started||(r.subscriber.start(),r.started=!0,T(this,Fn)!=null&&r.subscriber.pause(T(this,Fn))),this}async emit(e,...t){const r=await be(this,Ve,_d).call(this,e,t);if(!r||r.listeners.length===0)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:a,once:c})=>{const u=new YC(this,c?null:a,e);try{a.call(this,...t,u)}catch{}return!c}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),T(this,Hn).delete(r.tag)),i>0}async listenerCount(e){if(e){const r=await be(this,Ve,_d).call(this,e);return r?r.listeners.length:0}let t=0;for(const{listeners:r}of T(this,Hn).values())t+=r.length;return t}async listeners(e){if(e){const r=await be(this,Ve,_d).call(this,e);return r?r.listeners.map(({listener:i})=>i):[]}let t=[];for(const{listeners:r}of T(this,Hn).values())t=t.concat(r.map(({listener:i})=>i));return t}async off(e,t){const r=await be(this,Ve,_d).call(this,e);if(!r)return this;if(t){const i=r.listeners.map(({listener:a})=>a).indexOf(t);i>=0&&r.listeners.splice(i,1)}return(!t||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),T(this,Hn).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:t,started:r,subscriber:i}=await be(this,Ve,Hy).call(this,e);r&&i.stop(),T(this,Hn).delete(t)}else for(const[t,{started:r,subscriber:i}]of T(this,Hn))r&&i.stop(),T(this,Hn).delete(t);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return T(this,Ih)}destroy(){this.removeAllListeners();for(const e of T(this,gi).keys())this._clearTimeout(e);j(this,Ih,!0)}get paused(){return T(this,Fn)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(j(this,ma,-1),T(this,Fn)!=null){if(T(this,Fn)==!!e)return;ye(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(t=>t.pause(e)),j(this,Fn,!!e);for(const t of T(this,gi).values())t.timer&&clearTimeout(t.timer),t.time=t1()-t.time}resume(){if(T(this,Fn)!=null){this._forEachSubscriber(e=>e.resume()),j(this,Fn,null);for(const e of T(this,gi).values()){let t=e.time;t<0&&(t=0),e.time=t1(),setTimeout(e.func,t)}}}}Hn=new WeakMap,ko=new WeakMap,Fn=new WeakMap,Ih=new WeakMap,qr=new WeakMap,nl=new WeakMap,Lo=new WeakMap,ma=new WeakMap,Ep=new WeakMap,gi=new WeakMap,Rh=new WeakMap,Bh=new WeakMap,Ve=new WeakSet,kr=async function(e){const t=T(this,Bh).cacheTimeout;if(t<0)return await this._perform(e);const r=zy(e.method,e);let i=T(this,Lo).get(r);return i||(i=this._perform(e),T(this,Lo).set(r,i),setTimeout(()=>{T(this,Lo).get(r)===i&&T(this,Lo).delete(r)},t)),await i},Iv=async function(e,t,r){ye(r<Fk,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});const i=um(e);try{return Te(await this._perform({method:"call",transaction:i,blockTag:t}))}catch(a){if(!this.disableCcipRead&&FE(a)&&a.data&&r>=0&&t==="latest"&&i.to!=null&&Ut(a.data,0,4)==="0x556f1830"){const c=a.data,u=await er(i.to,this);let h;try{h=Zk(Ut(a.data,4))}catch(y){ye(!1,y.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:c}})}ye(h.sender.toLowerCase()===u.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:c,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:h.errorArgs}});const d=await this.ccipReadFetch(i,h.calldata,h.urls);ye(d!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:a.data,errorArgs:h.errorArgs}});const p={to:u,data:Ft([h.selector,Jk([d,h.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:p});try{const y=await be(this,Ve,Iv).call(this,p,t,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},p),result:y}),y}catch(y){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},p),error:y}),y}}throw a}},Rv=async function(e){const{value:t}=await Jn({network:this.getNetwork(),value:e});return t},Cd=async function(e,t,r){let i=this._getAddress(t),a=this._getBlockTag(r);return(typeof i!="string"||typeof a!="string")&&([i,a]=await Promise.all([i,a])),await be(this,Ve,Rv).call(this,be(this,Ve,kr).call(this,Object.assign(e,{address:i,blockTag:a})))},Bv=async function(e,t){if(xt(e,32))return await be(this,Ve,kr).call(this,{method:"getBlock",blockHash:e,includeTransactions:t});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await be(this,Ve,kr).call(this,{method:"getBlock",blockTag:r,includeTransactions:t})},_d=async function(e,t){let r=await e1(e,this);return r.type==="event"&&t&&t.length>0&&t[0].removed===!0&&(r=await e1({orphan:"drop-log",log:t[0]},this)),T(this,Hn).get(r.tag)||null},Hy=async function(e){const t=await e1(e,this),r=t.tag;let i=T(this,Hn).get(r);return i||(i={subscriber:this._getSubscriber(t),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},T(this,Hn).set(r,i)),i};function Kk(n,e){try{const t=Pv(n,e);if(t)return Wy(t)}catch{}return null}function Pv(n,e){if(n==="0x")return null;try{const t=ke(Ut(n,e,e+32)),r=ke(Ut(n,t,t+32));return Ut(n,t+32,t+32+r)}catch{}return null}function iT(n){const e=Xn(n);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function Qk(n){if(n.length%32===0)return n;const e=new Uint8Array(Math.ceil(n.length/32)*32);return e.set(n),e}const Yk=new Uint8Array([]);function Jk(n){const e=[];let t=0;for(let r=0;r<n.length;r++)e.push(Yk),t+=32;for(let r=0;r<n.length;r++){const i=We(n[r]);e[r]=iT(t),e.push(iT(i.length)),e.push(Qk(i)),t+=32+Math.ceil(i.length/32)*32}return Ft(e)}const sT="0x0000000000000000000000000000000000000000000000000000000000000000";function Zk(n){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};ye(Ku(n)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const t=Ut(n,0,32);ye(Ut(t,0,12)===Ut(sT,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=Ut(t,12);try{const r=[],i=ke(Ut(n,32,64)),a=ke(Ut(n,i,i+32)),c=Ut(n,i+32);for(let u=0;u<a;u++){const h=Kk(c,u*32);if(h==null)throw new Error("abort");r.push(h)}e.urls=r}catch{ye(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=Pv(n,64);if(r==null)throw new Error("abort");e.calldata=r}catch{ye(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}ye(Ut(n,100,128)===Ut(sT,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=Ut(n,96,100);try{const r=Pv(n,128);if(r==null)throw new Error("abort");e.extraData=r}catch{ye(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function pu(n,e){if(n.provider)return n.provider;ye(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function aT(n,e){let t=um(e);if(t.to!=null&&(t.to=er(t.to,n)),t.from!=null){const r=t.from;t.from=Promise.all([n.getAddress(),er(r,n)]).then(([i,a])=>(Q(i.toLowerCase()===a.toLowerCase(),"transaction from mismatch","tx.from",a),i))}else t.from=n.getAddress();return await Jn(t)}class Xk{constructor(e){te(this,"provider");Be(this,{provider:e||null})}async getNonce(e){return pu(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await aT(this,e)}async populateTransaction(e){const t=pu(this,"populateTransaction"),r=await aT(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const i=await this.provider.getNetwork();if(r.chainId!=null){const c=_e(r.chainId);Q(c===i.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=i.chainId;const a=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||a)?Q(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&a&&Q(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const c=await t.getFeeData();ye(c.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=c.gasPrice)}else{const c=await t.getFeeData();if(r.type==null)if(c.maxFeePerGas!=null&&c.maxPriorityFeePerGas!=null)if(r.type=2,r.gasPrice!=null){const u=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=u,r.maxPriorityFeePerGas=u}else r.maxFeePerGas==null&&(r.maxFeePerGas=c.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=c.maxPriorityFeePerGas);else c.gasPrice!=null?(ye(!a,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=c.gasPrice),r.type=0):ye(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=c.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=c.maxPriorityFeePerGas))}return await Jn(r)}async estimateGas(e){return pu(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return pu(this,"call").call(await this.populateCall(e))}async resolveName(e){return await pu(this,"resolveName").resolveName(e)}async sendTransaction(e){const t=pu(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const i=om.from(r);return await t.broadcastTransaction(await this.signTransaction(i))}}function Wk(n){return JSON.parse(JSON.stringify(n))}var Yn,ws,rl,jo,il,Ph,Yo,Uv,Mv;class UN{constructor(e){ce(this,Yo);ce(this,Yn);ce(this,ws);ce(this,rl);ce(this,jo);ce(this,il);ce(this,Ph);j(this,Yn,e),j(this,ws,null),j(this,rl,be(this,Yo,Uv).bind(this)),j(this,jo,!1),j(this,il,null),j(this,Ph,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){T(this,jo)||(j(this,jo,!0),be(this,Yo,Uv).call(this,-2))}stop(){T(this,jo)&&(j(this,jo,!1),j(this,Ph,!0),be(this,Yo,Mv).call(this),T(this,Yn).off("block",T(this,rl)))}pause(e){e&&be(this,Yo,Mv).call(this),T(this,Yn).off("block",T(this,rl))}resume(){this.start()}}Yn=new WeakMap,ws=new WeakMap,rl=new WeakMap,jo=new WeakMap,il=new WeakMap,Ph=new WeakMap,Yo=new WeakSet,Uv=async function(e){try{T(this,ws)==null&&j(this,ws,this._subscribe(T(this,Yn)));let t=null;try{t=await T(this,ws)}catch(a){if(!Dn(a,"UNSUPPORTED_OPERATION")||a.operation!=="eth_newFilter")throw a}if(t==null){j(this,ws,null),T(this,Yn)._recoverSubscriber(this,this._recover(T(this,Yn)));return}const r=await T(this,Yn).getNetwork();if(T(this,il)||j(this,il,r),T(this,il).chainId!==r.chainId)throw new Error("chaid changed");if(T(this,Ph))return;const i=await T(this,Yn).send("eth_getFilterChanges",[t]);await this._emitResults(T(this,Yn),i)}catch(t){console.log("@TODO",t)}T(this,Yn).once("block",T(this,rl))},Mv=function(){const e=T(this,ws);e&&(j(this,ws,null),e.then(t=>{T(this,Yn).destroyed||T(this,Yn).send("eth_uninstallFilter",[t])}))};var sl;class eL extends UN{constructor(t,r){super(t);ce(this,sl);j(this,sl,Wk(r))}_recover(t){return new l2(t,T(this,sl))}async _subscribe(t){return await t.send("eth_newFilter",[T(this,sl)])}async _emitResults(t,r){for(const i of r)t.emit(T(this,sl),t._wrapLog(i,t._network))}}sl=new WeakMap;class tL extends UN{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const r of t)e.emit("pending",r)}}const nL="bigint,boolean,function,number,string,symbol".split(/,/g);function Fy(n){if(n==null||nL.indexOf(typeof n)>=0||typeof n.getAddress=="function")return n;if(Array.isArray(n))return n.map(Fy);if(typeof n=="object")return Object.keys(n).reduce((e,t)=>(e[t]=n[t],e),{});throw new Error(`should not happen: ${n} (${typeof n})`)}function rL(n){return new Promise(e=>{setTimeout(e,n)})}function gu(n){return n&&n.toLowerCase()}function oT(n){return n&&typeof n.pollingInterval=="number"}const MN={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class n1 extends Xk{constructor(t,r){super(t);te(this,"address");r=dt(r),Be(this,{address:r})}connect(t){ye(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(t){return await this.populateCall(t)}async sendUncheckedTransaction(t){const r=Fy(t),i=[];if(r.from){const c=r.from;i.push((async()=>{const u=await er(c,this.provider);Q(u!=null&&u.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),r.from=u})())}else r.from=this.address;if(r.gasLimit==null&&i.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const c=r.to;i.push((async()=>{r.to=await er(c,this.provider)})())}i.length&&await Promise.all(i);const a=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[a])}async sendTransaction(t){const r=await this.provider.getBlockNumber(),i=await this.sendUncheckedTransaction(t);return await new Promise((a,c)=>{const u=[1e3,100];let h=0;const d=async()=>{try{const p=await this.provider.getTransaction(i);if(p!=null){a(p.replaceableTransaction(r));return}}catch(p){if(Dn(p,"CANCELLED")||Dn(p,"BAD_DATA")||Dn(p,"NETWORK_ERROR")||Dn(p,"UNSUPPORTED_OPERATION")){p.info==null&&(p.info={}),p.info.sendTransactionHash=i,c(p);return}if(Dn(p,"INVALID_ARGUMENT")&&(h++,p.info==null&&(p.info={}),p.info.sendTransactionHash=i,h>10)){c(p);return}this.provider.emit("error",Pt("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:p}))}this.provider._setTimeout(()=>{d()},u.pop()||4e3)};d()})}async signTransaction(t){const r=Fy(t);if(r.from){const a=await er(r.from,this.provider);Q(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),r.from=a}else r.from=this.address;const i=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[i])}async signMessage(t){const r=typeof t=="string"?Aa(t):t;return await this.provider.send("personal_sign",[Te(r),this.address.toLowerCase()])}async signTypedData(t,r,i){const a=Fy(i),c=await cm.resolveNames(t,r,a,async u=>{const h=await er(u);return Q(h!=null,"TypedData does not support null address","value",u),h});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(cm.getPayload(c.domain,r,c.value))])}async unlock(t){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),t,null])}async _legacySignMessage(t){const r=typeof t=="string"?Aa(t):t;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Te(r)])}}var al,Uh,wa,bs,Fi,yi,wr,Ap,$v;class iL extends Gk{constructor(t,r){super(t,r);ce(this,Ap);ce(this,al);ce(this,Uh);ce(this,wa);ce(this,bs);ce(this,Fi);ce(this,yi);ce(this,wr);j(this,Uh,1),j(this,al,Object.assign({},MN,r||{})),j(this,wa,[]),j(this,bs,null),j(this,yi,null),j(this,wr,null);{let a=null;const c=new Promise(u=>{a=u});j(this,Fi,{promise:c,resolve:a})}const i=this._getOption("staticNetwork");typeof i=="boolean"?(Q(!i||t!=="any","staticNetwork cannot be used on special network 'any'","options",r),i&&t!=null&&j(this,yi,Ss.from(t))):i&&(Q(t==null||i.matches(t),"staticNetwork MUST match network object","options",r),j(this,yi,i))}_getOption(t){return T(this,al)[t]}get _network(){return ye(T(this,yi),"network is not available yet","NETWORK_ERROR"),T(this,yi)}async _perform(t){if(t.method==="call"||t.method==="estimateGas"){let i=t.transaction;if(i&&i.type!=null&&_e(i.type)&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const a=await this.getFeeData();a.maxFeePerGas==null&&a.maxPriorityFeePerGas==null&&(t=Object.assign({},t,{transaction:Object.assign({},i,{type:void 0})}))}}const r=this.getRpcRequest(t);return r!=null?await this.send(r.method,r.args):super._perform(t)}async _detectNetwork(){const t=this._getOption("staticNetwork");if(t)if(t===!0){if(T(this,yi))return T(this,yi)}else return t;return T(this,wr)?await T(this,wr):this.ready?(j(this,wr,(async()=>{try{const r=Ss.from(_e(await this.send("eth_chainId",[])));return j(this,wr,null),r}catch(r){throw j(this,wr,null),r}})()),await T(this,wr)):(j(this,wr,(async()=>{const r={id:Wf(this,Uh)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let i;try{i=(await this._send(r))[0],j(this,wr,null)}catch(a){throw j(this,wr,null),this.emit("debug",{action:"receiveRpcError",error:a}),a}if(this.emit("debug",{action:"receiveRpcResult",result:i}),"result"in i)return Ss.from(_e(i.result));throw this.getRpcError(r,i)})()),await T(this,wr))}_start(){T(this,Fi)==null||T(this,Fi).resolve==null||(T(this,Fi).resolve(),j(this,Fi,null),(async()=>{for(;T(this,yi)==null&&!this.destroyed;)try{j(this,yi,await this._detectNetwork())}catch(t){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Pt("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:t}})),await rL(1e3)}be(this,Ap,$v).call(this)})())}async _waitUntilReady(){if(T(this,Fi)!=null)return await T(this,Fi).promise}_getSubscriber(t){return t.type==="pending"?new tL(this):t.type==="event"?this._getOption("polling")?new l2(this,t.filter):new eL(this,t.filter):t.type==="orphan"&&t.filter.orphan==="drop-log"?new PN("orphan"):super._getSubscriber(t)}get ready(){return T(this,Fi)==null}getRpcTransaction(t){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(i=>{if(t[i]==null)return;let a=i;i==="gasLimit"&&(a="gas"),r[a]=Lu(_e(t[i],`tx.${i}`))}),["from","to","data"].forEach(i=>{t[i]!=null&&(r[i]=Te(t[i]))}),t.accessList&&(r.accessList=El(t.accessList)),t.blobVersionedHashes&&(r.blobVersionedHashes=t.blobVersionedHashes.map(i=>i.toLowerCase())),r}getRpcRequest(t){switch(t.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[gu(t.address),t.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[gu(t.address),t.blockTag]};case"getCode":return{method:"eth_getCode",args:[gu(t.address),t.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[gu(t.address),"0x"+t.position.toString(16),t.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[t.signedTransaction]};case"getBlock":if("blockTag"in t)return{method:"eth_getBlockByNumber",args:[t.blockTag,!!t.includeTransactions]};if("blockHash"in t)return{method:"eth_getBlockByHash",args:[t.blockHash,!!t.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[t.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[t.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(t.transaction),t.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(t.transaction)]};case"getLogs":return t.filter&&t.filter.address!=null&&(Array.isArray(t.filter.address)?t.filter.address=t.filter.address.map(gu):t.filter.address=gu(t.filter.address)),{method:"eth_getLogs",args:[t.filter]}}return null}getRpcError(t,r){const{method:i}=t,{error:a}=r;if(i==="eth_estimateGas"&&a.message){const h=a.message;if(!h.match(/revert/i)&&h.match(/insufficient funds/i))return Pt("insufficient funds","INSUFFICIENT_FUNDS",{transaction:t.params[0],info:{payload:t,error:a}})}if(i==="eth_call"||i==="eth_estimateGas"){const h=kv(a),d=ep.getBuiltinCallException(i==="eth_call"?"call":"estimateGas",t.params[0],h?h.data:null);return d.info={error:a,payload:t},d}const c=JSON.stringify(aL(a));if(typeof a.message=="string"&&a.message.match(/user denied|ethers-user-denied/i))return Pt("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[i]||"unknown",reason:"rejected",info:{payload:t,error:a}});if(i==="eth_sendRawTransaction"||i==="eth_sendTransaction"){const h=t.params[0];if(c.match(/insufficient funds|base fee exceeds gas limit/i))return Pt("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:h,info:{error:a}});if(c.match(/nonce/i)&&c.match(/too low/i))return Pt("nonce has already been used","NONCE_EXPIRED",{transaction:h,info:{error:a}});if(c.match(/replacement transaction/i)&&c.match(/underpriced/i))return Pt("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:h,info:{error:a}});if(c.match(/only replay-protected/i))return Pt("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:i,info:{transaction:h,info:{error:a}}})}let u=!!c.match(/the method .* does not exist/i);return u||a&&a.details&&a.details.startsWith("Unauthorized method:")&&(u=!0),u?Pt("unsupported operation","UNSUPPORTED_OPERATION",{operation:t.method,info:{error:a,payload:t}}):Pt("could not coalesce error","UNKNOWN_ERROR",{error:a,payload:t})}send(t,r){if(this.destroyed)return Promise.reject(Pt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t}));const i=Wf(this,Uh)._++,a=new Promise((c,u)=>{T(this,wa).push({resolve:c,reject:u,payload:{method:t,params:r,id:i,jsonrpc:"2.0"}})});return be(this,Ap,$v).call(this),a}async getSigner(t){t==null&&(t=0);const r=this.send("eth_accounts",[]);if(typeof t=="number"){const a=await r;if(t>=a.length)throw new Error("no such account");return new n1(this,a[t])}const{accounts:i}=await Jn({network:this.getNetwork(),accounts:r});t=dt(t);for(const a of i)if(dt(a)===t)return new n1(this,t);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new n1(this,r))}destroy(){T(this,bs)&&(clearTimeout(T(this,bs)),j(this,bs,null));for(const{payload:t,reject:r}of T(this,wa))r(Pt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t.method}));j(this,wa,[]),super.destroy()}}al=new WeakMap,Uh=new WeakMap,wa=new WeakMap,bs=new WeakMap,Fi=new WeakMap,yi=new WeakMap,wr=new WeakMap,Ap=new WeakSet,$v=function(){if(T(this,bs))return;const t=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");j(this,bs,setTimeout(()=>{j(this,bs,null);const r=T(this,wa);for(j(this,wa,[]);r.length;){const i=[r.shift()];for(;r.length&&i.length!==T(this,al).batchMaxCount;)if(i.push(r.shift()),JSON.stringify(i.map(c=>c.payload)).length>T(this,al).batchMaxSize){r.unshift(i.pop());break}(async()=>{const a=i.length===1?i[0].payload:i.map(c=>c.payload);this.emit("debug",{action:"sendRpcPayload",payload:a});try{const c=await this._send(a);this.emit("debug",{action:"receiveRpcResult",result:c});for(const{resolve:u,reject:h,payload:d}of i){if(this.destroyed){h(Pt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:d.method}));continue}const p=c.filter(y=>y.id===d.id)[0];if(p==null){const y=Pt("missing response for request","BAD_DATA",{value:c,info:{payload:d}});this.emit("error",y),h(y);continue}if("error"in p){h(this.getRpcError(d,p));continue}u(p.result)}}catch(c){this.emit("debug",{action:"receiveRpcError",error:c});for(const{reject:u}of i)u(c)}})()}},t))};var zo;class sL extends iL{constructor(t,r){super(t,r);ce(this,zo);let i=this._getOption("pollingInterval");i==null&&(i=MN.pollingInterval),j(this,zo,i)}_getSubscriber(t){const r=super._getSubscriber(t);return oT(r)&&(r.pollingInterval=T(this,zo)),r}get pollingInterval(){return T(this,zo)}set pollingInterval(t){if(!Number.isInteger(t)||t<0)throw new Error("invalid interval");j(this,zo,t),this._forEachSubscriber(r=>{oT(r)&&(r.pollingInterval=T(this,zo))})}}zo=new WeakMap;function kv(n){if(n==null)return null;if(typeof n.message=="string"&&n.message.match(/revert/i)&&xt(n.data))return{message:n.message,data:n.data};if(typeof n=="object"){for(const e in n){const t=kv(n[e]);if(t)return t}return null}if(typeof n=="string")try{return kv(JSON.parse(n))}catch{}return null}function Lv(n,e){if(n!=null){if(typeof n.message=="string"&&e.push(n.message),typeof n=="object")for(const t in n)Lv(n[t],e);if(typeof n=="string")try{return Lv(JSON.parse(n),e)}catch{}}}function aL(n){const e=[];return Lv(n,e),e}var Mh;class qi extends sL{constructor(t,r,i){const a=Object.assign({},i??{},{batchMaxCount:1});Q(t&&t.request,"invalid EIP-1193 provider","ethereum",t);super(r,a);ce(this,Mh);j(this,Mh,async(c,u)=>{const h={method:c,params:u};this.emit("debug",{action:"sendEip1193Request",payload:h});try{const d=await t.request(h);return this.emit("debug",{action:"receiveEip1193Result",result:d}),d}catch(d){const p=new Error(d.message);throw p.code=d.code,p.data=d.data,p.payload=h,this.emit("debug",{action:"receiveEip1193Error",error:p}),p}})}async send(t,r){return await this._start(),await super.send(t,r)}async _send(t){Q(!Array.isArray(t),"EIP-1193 does not support batch request","payload",t);try{const r=await T(this,Mh).call(this,t.method,t.params||[]);return[{id:t.id,result:r}]}catch(r){return[{id:t.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(t,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(t,r)}async hasSigner(t){t==null&&(t=0);const r=await this.send("eth_accounts",[]);return typeof t=="number"?r.length>t:(t=t.toLowerCase(),r.filter(i=>i.toLowerCase()===t).length!==0)}async getSigner(t){if(t==null&&(t=0),!await this.hasSigner(t))try{await T(this,Mh).call(this,"eth_requestAccounts",[])}catch(r){const i=r.payload;throw this.getRpcError(i,{id:i.id,error:r})}return await super.getSigner(t)}}Mh=new WeakMap;const oL="modulepreload",cL=function(n){return"/"+n},cT={},$N=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let c=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=c(t.map(d=>{if(d=cL(d),d in cT)return;cT[d]=!0;const p=d.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${y}`))return;const w=document.createElement("link");if(w.rel=p?"stylesheet":oL,p||(w.as="script"),w.crossOrigin="",w.href=d,h&&w.setAttribute("nonce",h),document.head.appendChild(w),p)return new Promise((v,b)=>{w.addEventListener("load",v),w.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return i.then(c=>{for(const u of c||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})};var uy={exports:{}},lT;function lL(){if(lT)return uy.exports;lT=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(I,N,k){return Function.prototype.apply.call(I,N,k)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(I){return Object.getOwnPropertyNames(I).concat(Object.getOwnPropertySymbols(I))}:t=function(I){return Object.getOwnPropertyNames(I)};function r(U){console&&console.warn&&console.warn(U)}var i=Number.isNaN||function(I){return I!==I};function a(){a.init.call(this)}uy.exports=a,uy.exports.once=S,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function u(U){if(typeof U!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof U)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(U){if(typeof U!="number"||U<0||i(U))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+U+".");c=U}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(I){if(typeof I!="number"||I<0||i(I))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+I+".");return this._maxListeners=I,this};function h(U){return U._maxListeners===void 0?a.defaultMaxListeners:U._maxListeners}a.prototype.getMaxListeners=function(){return h(this)},a.prototype.emit=function(I){for(var N=[],k=1;k<arguments.length;k++)N.push(arguments[k]);var $=I==="error",P=this._events;if(P!==void 0)$=$&&P.error===void 0;else if(!$)return!1;if($){var L;if(N.length>0&&(L=N[0]),L instanceof Error)throw L;var z=new Error("Unhandled error."+(L?" ("+L.message+")":""));throw z.context=L,z}var V=P[I];if(V===void 0)return!1;if(typeof V=="function")e(V,this,N);else for(var ne=V.length,Z=b(V,ne),k=0;k<ne;++k)e(Z[k],this,N);return!0};function d(U,I,N,k){var $,P,L;if(u(N),P=U._events,P===void 0?(P=U._events=Object.create(null),U._eventsCount=0):(P.newListener!==void 0&&(U.emit("newListener",I,N.listener?N.listener:N),P=U._events),L=P[I]),L===void 0)L=P[I]=N,++U._eventsCount;else if(typeof L=="function"?L=P[I]=k?[N,L]:[L,N]:k?L.unshift(N):L.push(N),$=h(U),$>0&&L.length>$&&!L.warned){L.warned=!0;var z=new Error("Possible EventEmitter memory leak detected. "+L.length+" "+String(I)+" listeners added. Use emitter.setMaxListeners() to increase limit");z.name="MaxListenersExceededWarning",z.emitter=U,z.type=I,z.count=L.length,r(z)}return U}a.prototype.addListener=function(I,N){return d(this,I,N,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(I,N){return d(this,I,N,!0)};function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function y(U,I,N){var k={fired:!1,wrapFn:void 0,target:U,type:I,listener:N},$=p.bind(k);return $.listener=N,k.wrapFn=$,$}a.prototype.once=function(I,N){return u(N),this.on(I,y(this,I,N)),this},a.prototype.prependOnceListener=function(I,N){return u(N),this.prependListener(I,y(this,I,N)),this},a.prototype.removeListener=function(I,N){var k,$,P,L,z;if(u(N),$=this._events,$===void 0)return this;if(k=$[I],k===void 0)return this;if(k===N||k.listener===N)--this._eventsCount===0?this._events=Object.create(null):(delete $[I],$.removeListener&&this.emit("removeListener",I,k.listener||N));else if(typeof k!="function"){for(P=-1,L=k.length-1;L>=0;L--)if(k[L]===N||k[L].listener===N){z=k[L].listener,P=L;break}if(P<0)return this;P===0?k.shift():E(k,P),k.length===1&&($[I]=k[0]),$.removeListener!==void 0&&this.emit("removeListener",I,z||N)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(I){var N,k,$;if(k=this._events,k===void 0)return this;if(k.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):k[I]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete k[I]),this;if(arguments.length===0){var P=Object.keys(k),L;for($=0;$<P.length;++$)L=P[$],L!=="removeListener"&&this.removeAllListeners(L);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(N=k[I],typeof N=="function")this.removeListener(I,N);else if(N!==void 0)for($=N.length-1;$>=0;$--)this.removeListener(I,N[$]);return this};function w(U,I,N){var k=U._events;if(k===void 0)return[];var $=k[I];return $===void 0?[]:typeof $=="function"?N?[$.listener||$]:[$]:N?A($):b($,$.length)}a.prototype.listeners=function(I){return w(this,I,!0)},a.prototype.rawListeners=function(I){return w(this,I,!1)},a.listenerCount=function(U,I){return typeof U.listenerCount=="function"?U.listenerCount(I):v.call(U,I)},a.prototype.listenerCount=v;function v(U){var I=this._events;if(I!==void 0){var N=I[U];if(typeof N=="function")return 1;if(N!==void 0)return N.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function b(U,I){for(var N=new Array(I),k=0;k<I;++k)N[k]=U[k];return N}function E(U,I){for(;I+1<U.length;I++)U[I]=U[I+1];U.pop()}function A(U){for(var I=new Array(U.length),N=0;N<I.length;++N)I[N]=U[N].listener||U[N];return I}function S(U,I){return new Promise(function(N,k){function $(L){U.removeListener(I,P),k(L)}function P(){typeof U.removeListener=="function"&&U.removeListener("error",$),N([].slice.call(arguments))}D(U,I,P,{once:!0}),I!=="error"&&B(U,$,{once:!0})})}function B(U,I,N){typeof U.on=="function"&&D(U,"error",I,N)}function D(U,I,N,k){if(typeof U.on=="function")k.once?U.once(I,N):U.on(I,N);else if(typeof U.addEventListener=="function")U.addEventListener(I,function $(P){k.once&&U.removeEventListener(I,$),N(P)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof U)}return uy.exports}var Yr=lL();const u2=xp(Yr);var uT=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return n.concat(a||Array.prototype.slice.call(e))},uL=function(){function n(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return n}(),hL=function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n}(),fL=function(){function n(e,t,r,i){this.name=e,this.version=t,this.os=r,this.bot=i,this.type="bot-device"}return n}(),dL=function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n}(),pL=function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n}(),gL=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,yL=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,hT=3,mL=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",gL]],fT=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function wL(n){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new pL:typeof navigator<"u"?vL(navigator.userAgent):AL()}function bL(n){return n!==""&&mL.reduce(function(e,t){var r=t[0],i=t[1];if(e)return e;var a=i.exec(n);return!!a&&[r,a]},!1)}function vL(n){var e=bL(n);if(!e)return null;var t=e[0],r=e[1];if(t==="searchbot")return new dL;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<hT&&(i=uT(uT([],i,!0),xL(hT-i.length),!0)):i=[];var a=i.join("."),c=EL(n),u=yL.exec(n);return u&&u[1]?new fL(t,a,c,u[1]):new uL(t,a,c)}function EL(n){for(var e=0,t=fT.length;e<t;e++){var r=fT[e],i=r[0],a=r[1],c=a.exec(n);if(c)return i}return null}function AL(){var n=typeof process<"u"&&process.version;return n?new hL(process.version.slice(1)):null}function xL(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}var r1={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var jv=function(n,e){return jv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},jv(n,e)};function SL(n,e){jv(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var zv=function(){return zv=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},zv.apply(this,arguments)};function OL(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function TL(n,e,t,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,e,t,r);else for(var u=n.length-1;u>=0;u--)(c=n[u])&&(a=(i<3?c(a):i>3?c(e,t,a):c(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a}function DL(n,e){return function(t,r){e(t,r,n)}}function CL(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function _L(n,e,t,r){function i(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function u(p){try{d(r.next(p))}catch(y){c(y)}}function h(p){try{d(r.throw(p))}catch(y){c(y)}}function d(p){p.done?a(p.value):i(p.value).then(u,h)}d((r=r.apply(n,e||[])).next())})}function NL(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(d){return function(p){return h([d,p])}}function h(d){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,i=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){t.label=d[1];break}if(d[0]===6&&t.label<a[1]){t.label=a[1],a=d;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(d);break}a[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(n,t)}catch(p){d=[6,p],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function IL(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}function RL(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function Hv(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function kN(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],c;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(u){c={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(c)throw c.error}}return a}function BL(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(kN(arguments[e]));return n}function PL(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var a=arguments[e],c=0,u=a.length;c<u;c++,i++)r[i]=a[c];return r}function np(n){return this instanceof np?(this.v=n,this):new np(n)}function UL(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,a=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(w){r[w]&&(i[w]=function(v){return new Promise(function(b,E){a.push([w,v,b,E])>1||u(w,v)})})}function u(w,v){try{h(r[w](v))}catch(b){y(a[0][3],b)}}function h(w){w.value instanceof np?Promise.resolve(w.value.v).then(d,p):y(a[0][2],w)}function d(w){u("next",w)}function p(w){u("throw",w)}function y(w,v){w(v),a.shift(),a.length&&u(a[0][0],a[0][1])}}function ML(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,a){e[i]=n[i]?function(c){return(t=!t)?{value:np(n[i](c)),done:i==="return"}:a?a(c):c}:a}}function $L(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Hv=="function"?Hv(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(a){t[a]=n[a]&&function(c){return new Promise(function(u,h){c=n[a](c),i(u,h,c.done,c.value)})}}function i(a,c,u,h){Promise.resolve(h).then(function(d){a({value:d,done:u})},c)}}function kL(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function LL(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function jL(n){return n&&n.__esModule?n:{default:n}}function zL(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function HL(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}const FL=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return zv},__asyncDelegator:ML,__asyncGenerator:UL,__asyncValues:$L,__await:np,__awaiter:_L,__classPrivateFieldGet:zL,__classPrivateFieldSet:HL,__createBinding:IL,__decorate:TL,__exportStar:RL,__extends:SL,__generator:NL,__importDefault:jL,__importStar:LL,__makeTemplateObject:kL,__metadata:CL,__param:DL,__read:kN,__rest:OL,__spread:BL,__spreadArrays:PL,__values:Hv},Symbol.toStringTag,{value:"Module"})),t0=DC(FL);var i1={},od={},dT;function qL(){if(dT)return od;dT=1,Object.defineProperty(od,"__esModule",{value:!0}),od.delay=void 0;function n(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return od.delay=n,od}var wc={},s1={},bc={},pT;function VL(){return pT||(pT=1,Object.defineProperty(bc,"__esModule",{value:!0}),bc.ONE_THOUSAND=bc.ONE_HUNDRED=void 0,bc.ONE_HUNDRED=100,bc.ONE_THOUSAND=1e3),bc}var a1={},gT;function GL(){return gT||(gT=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ONE_YEAR=n.FOUR_WEEKS=n.THREE_WEEKS=n.TWO_WEEKS=n.ONE_WEEK=n.THIRTY_DAYS=n.SEVEN_DAYS=n.FIVE_DAYS=n.THREE_DAYS=n.ONE_DAY=n.TWENTY_FOUR_HOURS=n.TWELVE_HOURS=n.SIX_HOURS=n.THREE_HOURS=n.ONE_HOUR=n.SIXTY_MINUTES=n.THIRTY_MINUTES=n.TEN_MINUTES=n.FIVE_MINUTES=n.ONE_MINUTE=n.SIXTY_SECONDS=n.THIRTY_SECONDS=n.TEN_SECONDS=n.FIVE_SECONDS=n.ONE_SECOND=void 0,n.ONE_SECOND=1,n.FIVE_SECONDS=5,n.TEN_SECONDS=10,n.THIRTY_SECONDS=30,n.SIXTY_SECONDS=60,n.ONE_MINUTE=n.SIXTY_SECONDS,n.FIVE_MINUTES=n.ONE_MINUTE*5,n.TEN_MINUTES=n.ONE_MINUTE*10,n.THIRTY_MINUTES=n.ONE_MINUTE*30,n.SIXTY_MINUTES=n.ONE_MINUTE*60,n.ONE_HOUR=n.SIXTY_MINUTES,n.THREE_HOURS=n.ONE_HOUR*3,n.SIX_HOURS=n.ONE_HOUR*6,n.TWELVE_HOURS=n.ONE_HOUR*12,n.TWENTY_FOUR_HOURS=n.ONE_HOUR*24,n.ONE_DAY=n.TWENTY_FOUR_HOURS,n.THREE_DAYS=n.ONE_DAY*3,n.FIVE_DAYS=n.ONE_DAY*5,n.SEVEN_DAYS=n.ONE_DAY*7,n.THIRTY_DAYS=n.ONE_DAY*30,n.ONE_WEEK=n.SEVEN_DAYS,n.TWO_WEEKS=n.ONE_WEEK*2,n.THREE_WEEKS=n.ONE_WEEK*3,n.FOUR_WEEKS=n.ONE_WEEK*4,n.ONE_YEAR=n.ONE_DAY*365}(a1)),a1}var yT;function LN(){return yT||(yT=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=t0;e.__exportStar(VL(),n),e.__exportStar(GL(),n)}(s1)),s1}var mT;function KL(){if(mT)return wc;mT=1,Object.defineProperty(wc,"__esModule",{value:!0}),wc.fromMiliseconds=wc.toMiliseconds=void 0;const n=LN();function e(r){return r*n.ONE_THOUSAND}wc.toMiliseconds=e;function t(r){return Math.floor(r/n.ONE_THOUSAND)}return wc.fromMiliseconds=t,wc}var wT;function QL(){return wT||(wT=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=t0;e.__exportStar(qL(),n),e.__exportStar(KL(),n)}(i1)),i1}var yu={},bT;function YL(){if(bT)return yu;bT=1,Object.defineProperty(yu,"__esModule",{value:!0}),yu.Watch=void 0;class n{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const r=this.get(t);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const i=Date.now()-r.started;this.timestamps.set(t,{started:r.started,elapsed:i})}get(t){const r=this.timestamps.get(t);if(typeof r>"u")throw new Error(`No timestamp found for label: ${t}`);return r}elapsed(t){const r=this.get(t);return r.elapsed||Date.now()-r.started}}return yu.Watch=n,yu.default=n,yu}var o1={},cd={},vT;function JL(){if(vT)return cd;vT=1,Object.defineProperty(cd,"__esModule",{value:!0}),cd.IWatch=void 0;class n{}return cd.IWatch=n,cd}var ET;function ZL(){return ET||(ET=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),t0.__exportStar(JL(),n)}(o1)),o1}var AT;function XL(){return AT||(AT=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=t0;e.__exportStar(QL(),n),e.__exportStar(YL(),n),e.__exportStar(ZL(),n),e.__exportStar(LN(),n)}(r1)),r1}var Ae=XL(),bt={},xT;function jN(){if(xT)return bt;xT=1,Object.defineProperty(bt,"__esModule",{value:!0}),bt.getLocalStorage=bt.getLocalStorageOrThrow=bt.getCrypto=bt.getCryptoOrThrow=bt.getLocation=bt.getLocationOrThrow=bt.getNavigator=bt.getNavigatorOrThrow=bt.getDocument=bt.getDocumentOrThrow=bt.getFromWindowOrThrow=bt.getFromWindow=void 0;function n(w){let v;return typeof window<"u"&&typeof window[w]<"u"&&(v=window[w]),v}bt.getFromWindow=n;function e(w){const v=n(w);if(!v)throw new Error(`${w} is not defined in Window`);return v}bt.getFromWindowOrThrow=e;function t(){return e("document")}bt.getDocumentOrThrow=t;function r(){return n("document")}bt.getDocument=r;function i(){return e("navigator")}bt.getNavigatorOrThrow=i;function a(){return n("navigator")}bt.getNavigator=a;function c(){return e("location")}bt.getLocationOrThrow=c;function u(){return n("location")}bt.getLocation=u;function h(){return e("crypto")}bt.getCryptoOrThrow=h;function d(){return n("crypto")}bt.getCrypto=d;function p(){return e("localStorage")}bt.getLocalStorageOrThrow=p;function y(){return n("localStorage")}return bt.getLocalStorage=y,bt}var Da=jN(),ld={},ST;function WL(){if(ST)return ld;ST=1,Object.defineProperty(ld,"__esModule",{value:!0}),ld.getWindowMetadata=void 0;const n=jN();function e(){let t,r;try{t=n.getDocumentOrThrow(),r=n.getLocationOrThrow()}catch{return null}function i(){const v=t.getElementsByTagName("link"),b=[];for(let E=0;E<v.length;E++){const A=v[E],S=A.getAttribute("rel");if(S&&S.toLowerCase().indexOf("icon")>-1){const B=A.getAttribute("href");if(B)if(B.toLowerCase().indexOf("https:")===-1&&B.toLowerCase().indexOf("http:")===-1&&B.indexOf("//")!==0){let D=r.protocol+"//"+r.host;if(B.indexOf("/")===0)D+=B;else{const U=r.pathname.split("/");U.pop();const I=U.join("/");D+=I+"/"+B}b.push(D)}else if(B.indexOf("//")===0){const D=r.protocol+B;b.push(D)}else b.push(B)}}return b}function a(...v){const b=t.getElementsByTagName("meta");for(let E=0;E<b.length;E++){const A=b[E],S=["itemprop","property","name"].map(B=>A.getAttribute(B)).filter(B=>B?v.includes(B):!1);if(S.length&&S){const B=A.getAttribute("content");if(B)return B}}return""}function c(){let v=a("name","og:site_name","og:title","twitter:title");return v||(v=t.title),v}function u(){return a("description","og:description","twitter:description","keywords")}const h=c(),d=u(),p=r.origin,y=i();return{description:d,url:p,icons:y,name:h}}return ld.getWindowMetadata=e,ld}var e9=WL();function rp(n,{strict:e=!0}={}){return!n||typeof n!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(n):n.startsWith("0x")}function Fv(n){return rp(n,{strict:!1})?Math.ceil((n.length-2)/2):n.length}const zN="2.31.0";let ud={getDocsUrl:({docsBaseUrl:n,docsPath:e="",docsSlug:t})=>e?`${n??"https://viem.sh"}${e}${t?`#${t}`:""}`:void 0,version:`viem@${zN}`};class gl extends Error{constructor(e,t={}){var u;const r=(()=>{var h;return t.cause instanceof gl?t.cause.details:(h=t.cause)!=null&&h.message?t.cause.message:t.details})(),i=t.cause instanceof gl&&t.cause.docsPath||t.docsPath,a=(u=ud.getDocsUrl)==null?void 0:u.call(ud,{...t,docsPath:i}),c=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...a?[`Docs: ${a}`]:[],...r?[`Details: ${r}`]:[],...ud.version?[`Version: ${ud.version}`]:[]].join(`
`);super(c,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=i,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=zN}walk(e){return HN(this,e)}}function HN(n,e){return e!=null&&e(n)?n:n&&typeof n=="object"&&"cause"in n&&n.cause!==void 0?HN(n.cause,e):e?null:n}class FN extends gl{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}function Jh(n,{dir:e,size:t=32}={}){return typeof n=="string"?t9(n,{dir:e,size:t}):n9(n,{dir:e,size:t})}function t9(n,{dir:e,size:t=32}={}){if(t===null)return n;const r=n.replace("0x","");if(r.length>t*2)throw new FN({size:Math.ceil(r.length/2),targetSize:t,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](t*2,"0")}`}function n9(n,{dir:e,size:t=32}={}){if(t===null)return n;if(n.length>t)throw new FN({size:n.length,targetSize:t,type:"bytes"});const r=new Uint8Array(t);for(let i=0;i<t;i++){const a=e==="right";r[a?i:t-i-1]=n[a?i:n.length-i-1]}return r}class r9 extends gl{constructor({max:e,min:t,signed:r,size:i,value:a}){super(`Number "${a}" is not in safe ${i?`${i*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}class i9 extends gl{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Zh(n,{size:e}){if(Fv(n)>e)throw new i9({givenSize:Fv(n),maxSize:e})}function qv(n,e={}){const{signed:t}=e;e.size&&Zh(n,{size:e.size});const r=BigInt(n);if(!t)return r;const i=(n.length-2)/2,a=(1n<<BigInt(i)*8n-1n)-1n;return r<=a?r:r-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function s9(n,e={}){return Number(qv(n,e))}const a9=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Vv(n,e={}){return typeof n=="number"||typeof n=="bigint"?VN(n,e):typeof n=="string"?l9(n,e):typeof n=="boolean"?o9(n,e):qN(n,e)}function o9(n,e={}){const t=`0x${Number(n)}`;return typeof e.size=="number"?(Zh(t,{size:e.size}),Jh(t,{size:e.size})):t}function qN(n,e={}){let t="";for(let i=0;i<n.length;i++)t+=a9[n[i]];const r=`0x${t}`;return typeof e.size=="number"?(Zh(r,{size:e.size}),Jh(r,{dir:"right",size:e.size})):r}function VN(n,e={}){const{signed:t,size:r}=e,i=BigInt(n);let a;r?t?a=(1n<<BigInt(r)*8n-1n)-1n:a=2n**(BigInt(r)*8n)-1n:typeof n=="number"&&(a=BigInt(Number.MAX_SAFE_INTEGER));const c=typeof a=="bigint"&&t?-a-1n:0;if(a&&i>a||i<c){const h=typeof n=="bigint"?"n":"";throw new r9({max:a?`${a}${h}`:void 0,min:`${c}${h}`,signed:t,size:r,value:`${n}${h}`})}const u=`0x${(t&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?Jh(u,{size:r}):u}const c9=new TextEncoder;function l9(n,e={}){const t=c9.encode(n);return qN(t,e)}const u9=new TextEncoder;function h9(n,e={}){return typeof n=="number"||typeof n=="bigint"?d9(n,e):typeof n=="boolean"?f9(n,e):rp(n)?GN(n,e):KN(n,e)}function f9(n,e={}){const t=new Uint8Array(1);return t[0]=Number(n),typeof e.size=="number"?(Zh(t,{size:e.size}),Jh(t,{size:e.size})):t}const Ks={zero:48,nine:57,A:65,F:70,a:97,f:102};function OT(n){if(n>=Ks.zero&&n<=Ks.nine)return n-Ks.zero;if(n>=Ks.A&&n<=Ks.F)return n-(Ks.A-10);if(n>=Ks.a&&n<=Ks.f)return n-(Ks.a-10)}function GN(n,e={}){let t=n;e.size&&(Zh(t,{size:e.size}),t=Jh(t,{dir:"right",size:e.size}));let r=t.slice(2);r.length%2&&(r=`0${r}`);const i=r.length/2,a=new Uint8Array(i);for(let c=0,u=0;c<i;c++){const h=OT(r.charCodeAt(u++)),d=OT(r.charCodeAt(u++));if(h===void 0||d===void 0)throw new gl(`Invalid byte sequence ("${r[u-2]}${r[u-1]}" in "${r}").`);a[c]=h*16+d}return a}function d9(n,e){const t=VN(n,e);return GN(t)}function KN(n,e={}){const t=u9.encode(n);return typeof e.size=="number"?(Zh(t,{size:e.size}),Jh(t,{dir:"right",size:e.size})):t}const hy=BigInt(2**32-1),TT=BigInt(32);function p9(n,e=!1){return e?{h:Number(n&hy),l:Number(n>>TT&hy)}:{h:Number(n>>TT&hy)|0,l:Number(n&hy)|0}}function g9(n,e=!1){const t=n.length;let r=new Uint32Array(t),i=new Uint32Array(t);for(let a=0;a<t;a++){const{h:c,l:u}=p9(n[a],e);[r[a],i[a]]=[c,u]}return[r,i]}const y9=(n,e,t)=>n<<t|e>>>32-t,m9=(n,e,t)=>e<<t|n>>>32-t,w9=(n,e,t)=>e<<t-32|n>>>64-t,b9=(n,e,t)=>n<<t-32|e>>>64-t,mu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function v9(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function dm(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function ip(n,...e){if(!v9(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function rre(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");dm(n.outputLen),dm(n.blockLen)}function DT(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function E9(n,e){ip(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function A9(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function QN(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function ire(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function sre(n,e){return n<<32-e|n>>>e}const x9=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function S9(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}function O9(n){for(let e=0;e<n.length;e++)n[e]=S9(n[e]);return n}const CT=x9?n=>n:O9;function T9(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function YN(n){return typeof n=="string"&&(n=T9(n)),ip(n),n}function are(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];ip(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const a=n[r];t.set(a,i),i+=a.length}return t}class D9{}function C9(n){const e=r=>n().update(YN(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function ore(n=32){if(mu&&typeof mu.getRandomValues=="function")return mu.getRandomValues(new Uint8Array(n));if(mu&&typeof mu.randomBytes=="function")return Uint8Array.from(mu.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}const _9=BigInt(0),hd=BigInt(1),N9=BigInt(2),I9=BigInt(7),R9=BigInt(256),B9=BigInt(113),JN=[],ZN=[],XN=[];for(let n=0,e=hd,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],JN.push(2*(5*r+t)),ZN.push((n+1)*(n+2)/2%64);let i=_9;for(let a=0;a<7;a++)e=(e<<hd^(e>>I9)*B9)%R9,e&N9&&(i^=hd<<(hd<<BigInt(a))-hd);XN.push(i)}const WN=g9(XN,!0),P9=WN[0],U9=WN[1],_T=(n,e,t)=>t>32?w9(n,e,t):y9(n,e,t),NT=(n,e,t)=>t>32?b9(n,e,t):m9(n,e,t);function M9(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let c=0;c<10;c++)t[c]=n[c]^n[c+10]^n[c+20]^n[c+30]^n[c+40];for(let c=0;c<10;c+=2){const u=(c+8)%10,h=(c+2)%10,d=t[h],p=t[h+1],y=_T(d,p,1)^t[u],w=NT(d,p,1)^t[u+1];for(let v=0;v<50;v+=10)n[c+v]^=y,n[c+v+1]^=w}let i=n[2],a=n[3];for(let c=0;c<24;c++){const u=ZN[c],h=_T(i,a,u),d=NT(i,a,u),p=JN[c];i=n[p],a=n[p+1],n[p]=h,n[p+1]=d}for(let c=0;c<50;c+=10){for(let u=0;u<10;u++)t[u]=n[c+u];for(let u=0;u<10;u++)n[c+u]^=~t[(u+2)%10]&t[(u+4)%10]}n[0]^=P9[r],n[1]^=U9[r]}QN(t)}class h2 extends D9{constructor(e,t,r,i=!1,a=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=a,dm(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=A9(this.state)}clone(){return this._cloneInto()}keccak(){CT(this.state32),M9(this.state32,this.rounds),CT(this.state32),this.posOut=0,this.pos=0}update(e){DT(this),e=YN(e),ip(e);const{blockLen:t,state:r}=this,i=e.length;for(let a=0;a<i;){const c=Math.min(t-this.pos,i-a);for(let u=0;u<c;u++)r[this.pos++]^=e[a++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(t&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){DT(this,!1),ip(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,a=e.length;i<a;){this.posOut>=r&&this.keccak();const c=Math.min(r-this.posOut,a-i);e.set(t.subarray(this.posOut,this.posOut+c),i),this.posOut+=c,i+=c}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return dm(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(E9(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,QN(this.state)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:a,enableXOF:c}=this;return e||(e=new h2(t,r,i,c,a)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=a,e.suffix=r,e.outputLen=i,e.enableXOF=c,e.destroyed=this.destroyed,e}}const $9=(n,e,t)=>C9(()=>new h2(e,n,t)),k9=$9(1,136,256/8);function eI(n,e){const t=e||"hex",r=k9(rp(n,{strict:!1})?h9(n):n);return t==="bytes"?r:Vv(r)}class L9 extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&t!==void 0&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const c1=new L9(8192);function j9(n,e){if(c1.has(`${n}.${e}`))return c1.get(`${n}.${e}`);const t=n.substring(2).toLowerCase(),r=eI(KN(t),"bytes"),i=t.split("");for(let c=0;c<40;c+=2)r[c>>1]>>4>=8&&i[c]&&(i[c]=i[c].toUpperCase()),(r[c>>1]&15)>=8&&i[c+1]&&(i[c+1]=i[c+1].toUpperCase());const a=`0x${i.join("")}`;return c1.set(`${n}.${e}`,a),a}function z9(n){const e=eI(`0x${n.substring(4)}`).substring(26);return j9(`0x${e}`)}async function H9({hash:n,signature:e}){const t=rp(n)?n:Vv(n),{secp256k1:r}=await $N(async()=>{const{secp256k1:c}=await import("./secp256k1-VQdTJLOU.js");return{secp256k1:c}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:d,s:p,v:y,yParity:w}=e,v=Number(w??y),b=IT(v);return new r.Signature(qv(d),qv(p)).addRecoveryBit(b)}const c=rp(e)?e:Vv(e);if(Fv(c)!==65)throw new Error("invalid signature length");const u=s9(`0x${c.slice(130)}`),h=IT(u);return r.Signature.fromCompact(c.substring(2,130)).addRecoveryBit(h)})().recoverPublicKey(t.substring(2)).toHex(!1)}`}function IT(n){if(n===0||n===1)return n;if(n===27)return 0;if(n===28)return 1;throw new Error("Invalid yParityOrV value")}async function F9({hash:n,signature:e}){return z9(await H9({hash:n,signature:e}))}function q9(n){if(n.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let d=0;d<e.length;d++)e[d]=255;for(let d=0;d<n.length;d++){const p=n.charAt(d),y=p.charCodeAt(0);if(e[y]!==255)throw new TypeError(p+" is ambiguous");e[y]=d}const t=n.length,r=n.charAt(0),i=Math.log(t)/Math.log(256),a=Math.log(256)/Math.log(t);function c(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";let p=0,y=0,w=0;const v=d.length;for(;w!==v&&d[w]===0;)w++,p++;const b=(v-w)*a+1>>>0,E=new Uint8Array(b);for(;w!==v;){let B=d[w],D=0;for(let U=b-1;(B!==0||D<y)&&U!==-1;U--,D++)B+=256*E[U]>>>0,E[U]=B%t>>>0,B=B/t>>>0;if(B!==0)throw new Error("Non-zero carry");y=D,w++}let A=b-y;for(;A!==b&&E[A]===0;)A++;let S=r.repeat(p);for(;A<b;++A)S+=n.charAt(E[A]);return S}function u(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;let p=0,y=0,w=0;for(;d[p]===r;)y++,p++;const v=(d.length-p)*i+1>>>0,b=new Uint8Array(v);for(;p<d.length;){const B=d.charCodeAt(p);if(B>255)return;let D=e[B];if(D===255)return;let U=0;for(let I=v-1;(D!==0||U<w)&&I!==-1;I--,U++)D+=t*b[I]>>>0,b[I]=D%256>>>0,D=D/256>>>0;if(D!==0)throw new Error("Non-zero carry");w=U,p++}let E=v-w;for(;E!==v&&b[E]===0;)E++;const A=new Uint8Array(y+(v-E));let S=y;for(;E!==v;)A[S++]=b[E++];return A}function h(d){const p=u(d);if(p)return p;throw new Error("Non-base"+t+" character")}return{encode:c,decodeUnsafe:u,decode:h}}var V9="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Bp=q9(V9);function G9(n){const e=n.length;let t=0,r=0;for(;r<e;){let i=n.charCodeAt(r++);if((i&4294967168)===0){t++;continue}else if((i&4294965248)===0)t+=2;else{if(i>=55296&&i<=56319&&r<e){const a=n.charCodeAt(r);(a&64512)===56320&&(++r,i=((i&1023)<<10)+(a&1023)+65536)}(i&4294901760)===0?t+=3:t+=4}}return t}function K9(n,e,t){const r=n.length;let i=t,a=0;for(;a<r;){let c=n.charCodeAt(a++);if((c&4294967168)===0){e[i++]=c;continue}else if((c&4294965248)===0)e[i++]=c>>6&31|192;else{if(c>=55296&&c<=56319&&a<r){const u=n.charCodeAt(a);(u&64512)===56320&&(++a,c=((c&1023)<<10)+(u&1023)+65536)}(c&4294901760)===0?(e[i++]=c>>12&15|224,e[i++]=c>>6&63|128):(e[i++]=c>>18&7|240,e[i++]=c>>12&63|128,e[i++]=c>>6&63|128)}e[i++]=c&63|128}}const Q9=new TextEncoder,Y9=50;function J9(n,e,t){Q9.encodeInto(n,e.subarray(t))}function Z9(n,e,t){n.length>Y9?J9(n,e,t):K9(n,e,t)}const X9=4096;function tI(n,e,t){let r=e;const i=r+t,a=[];let c="";for(;r<i;){const u=n[r++];if((u&128)===0)a.push(u);else if((u&224)===192){const h=n[r++]&63;a.push((u&31)<<6|h)}else if((u&240)===224){const h=n[r++]&63,d=n[r++]&63;a.push((u&31)<<12|h<<6|d)}else if((u&248)===240){const h=n[r++]&63,d=n[r++]&63,p=n[r++]&63;let y=(u&7)<<18|h<<12|d<<6|p;y>65535&&(y-=65536,a.push(y>>>10&1023|55296),y=56320|y&1023),a.push(y)}else a.push(u);a.length>=X9&&(c+=String.fromCharCode(...a),a.length=0)}return a.length>0&&(c+=String.fromCharCode(...a)),c}const W9=new TextDecoder,e7=200;function t7(n,e,t){const r=n.subarray(e,e+t);return W9.decode(r)}function n7(n,e,t){return t>e7?t7(n,e,t):tI(n,e,t)}class fy{constructor(e,t){this.type=e,this.data=t}}class Vr extends Error{constructor(e){super(e);const t=Object.create(Vr.prototype);Object.setPrototypeOf(this,t),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:Vr.name})}}const fd=4294967295;function r7(n,e,t){const r=t/4294967296,i=t;n.setUint32(e,r),n.setUint32(e+4,i)}function nI(n,e,t){const r=Math.floor(t/4294967296),i=t;n.setUint32(e,r),n.setUint32(e+4,i)}function rI(n,e){const t=n.getInt32(e),r=n.getUint32(e+4);return t*4294967296+r}function i7(n,e){const t=n.getUint32(e),r=n.getUint32(e+4);return t*4294967296+r}const s7=-1,a7=4294967296-1,o7=17179869184-1;function c7({sec:n,nsec:e}){if(n>=0&&e>=0&&n<=o7)if(e===0&&n<=a7){const t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,n),t}else{const t=n/4294967296,r=n&4294967295,i=new Uint8Array(8),a=new DataView(i.buffer);return a.setUint32(0,e<<2|t&3),a.setUint32(4,r),i}else{const t=new Uint8Array(12),r=new DataView(t.buffer);return r.setUint32(0,e),nI(r,4,n),t}}function l7(n){const e=n.getTime(),t=Math.floor(e/1e3),r=(e-t*1e3)*1e6,i=Math.floor(r/1e9);return{sec:t+i,nsec:r-i*1e9}}function u7(n){if(n instanceof Date){const e=l7(n);return c7(e)}else return null}function h7(n){const e=new DataView(n.buffer,n.byteOffset,n.byteLength);switch(n.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const t=e.getUint32(0),r=e.getUint32(4),i=(t&3)*4294967296+r,a=t>>>2;return{sec:i,nsec:a}}case 12:{const t=rI(e,4),r=e.getUint32(0);return{sec:t,nsec:r}}default:throw new Vr(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${n.length}`)}}function f7(n){const e=h7(n);return new Date(e.sec*1e3+e.nsec/1e6)}const d7={type:s7,encode:u7,decode:f7};class pm{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(d7)}register({type:e,encode:t,decode:r}){if(e>=0)this.encoders[e]=t,this.decoders[e]=r;else{const i=-1-e;this.builtInEncoders[i]=t,this.builtInDecoders[i]=r}}tryToEncode(e,t){for(let r=0;r<this.builtInEncoders.length;r++){const i=this.builtInEncoders[r];if(i!=null){const a=i(e,t);if(a!=null){const c=-1-r;return new fy(c,a)}}}for(let r=0;r<this.encoders.length;r++){const i=this.encoders[r];if(i!=null){const a=i(e,t);if(a!=null){const c=r;return new fy(c,a)}}}return e instanceof fy?e:null}decode(e,t,r){const i=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return i?i(e,t,r):new fy(t,e)}}pm.defaultCodec=new pm;function p7(n){return n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer}function Gv(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):p7(n)?new Uint8Array(n):Uint8Array.from(n)}const g7=100,y7=2048;let m7=class iI{constructor(e){this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??pm.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.maxDepth=(e==null?void 0:e.maxDepth)??g7,this.initialBufferSize=(e==null?void 0:e.initialBufferSize)??y7,this.sortKeys=(e==null?void 0:e.sortKeys)??!1,this.forceFloat32=(e==null?void 0:e.forceFloat32)??!1,this.ignoreUndefined=(e==null?void 0:e.ignoreUndefined)??!1,this.forceIntegerToFloat=(e==null?void 0:e.forceIntegerToFloat)??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new iI({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,t){if(t>this.maxDepth)throw new Error(`Too deep objects in depth ${t}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,t)}ensureBufferSizeToWrite(e){const t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(t*2)}resizeBuffer(e){const t=new ArrayBuffer(e),r=new Uint8Array(t),i=new DataView(t);r.set(this.bytes),this.view=i,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=G9(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),Z9(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,t){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,t);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else if(t<4294967296)this.writeU8(198),this.writeU32(t);else throw new Error(`Too large binary: ${t}`);const r=Gv(e);this.writeU8a(r)}encodeArray(e,t){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const i of e)this.doEncode(i,t+1)}countWithoutUndefined(e,t){let r=0;for(const i of t)e[i]!==void 0&&r++;return r}encodeMap(e,t){const r=Object.keys(e);this.sortKeys&&r.sort();const i=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else if(i<4294967296)this.writeU8(223),this.writeU32(i);else throw new Error(`Too large map object: ${i}`);for(const a of r){const c=e[a];this.ignoreUndefined&&c===void 0||(this.encodeString(a),this.doEncode(c,t+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),i=r.length;if(i>=4294967296)throw new Error(`Too large extension object: ${i}`);this.writeU8(201),this.writeU32(i),this.writeI8(e.type),this.writeU8a(r);return}const t=e.data.length;if(t===1)this.writeU8(212);else if(t===2)this.writeU8(213);else if(t===4)this.writeU8(214);else if(t===8)this.writeU8(215);else if(t===16)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else if(t<4294967296)this.writeU8(201),this.writeU32(t);else throw new Error(`Too large extension object: ${t}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),r7(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),nI(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function w7(n,e){return new m7(e).encodeSharedRef(n)}function l1(n){return`${n<0?"-":""}0x${Math.abs(n).toString(16).padStart(2,"0")}`}const b7=16,v7=16;class E7{constructor(e=b7,t=v7){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=t,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,t,r){const i=this.caches[r-1];e:for(const a of i){const c=a.bytes;for(let u=0;u<r;u++)if(c[u]!==e[t+u])continue e;return a.str}return null}store(e,t){const r=this.caches[e.length-1],i={bytes:e,str:t};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=i:r.push(i)}decode(e,t,r){const i=this.find(e,t,r);if(i!=null)return this.hit++,i;this.miss++;const a=tI(e,t,r),c=Uint8Array.prototype.slice.call(e,t,t+r);return this.store(c,a),a}}const Kv="array",Ud="map_key",sI="map_value",A7=n=>{if(typeof n=="string"||typeof n=="number")return n;throw new Vr("The type of key must be string or number but "+typeof n)};class x7{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const t=this.getUninitializedStateFromPool();t.type=Kv,t.position=0,t.size=e,t.array=new Array(e)}pushMapState(e){const t=this.getUninitializedStateFromPool();t.type=Ud,t.readCount=0,t.size=e,t.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===Kv){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===Ud||e.type===sI){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const dd=-1,f2=new DataView(new ArrayBuffer(0)),S7=new Uint8Array(f2.buffer);try{f2.getInt8(0)}catch(n){if(!(n instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const RT=new RangeError("Insufficient data"),O7=new E7;let T7=class aI{constructor(e){this.totalPos=0,this.pos=0,this.view=f2,this.bytes=S7,this.headByte=dd,this.stack=new x7,this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??pm.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.rawStrings=(e==null?void 0:e.rawStrings)??!1,this.maxStrLength=(e==null?void 0:e.maxStrLength)??fd,this.maxBinLength=(e==null?void 0:e.maxBinLength)??fd,this.maxArrayLength=(e==null?void 0:e.maxArrayLength)??fd,this.maxMapLength=(e==null?void 0:e.maxMapLength)??fd,this.maxExtLength=(e==null?void 0:e.maxExtLength)??fd,this.keyDecoder=(e==null?void 0:e.keyDecoder)!==void 0?e.keyDecoder:O7,this.mapKeyConverter=(e==null?void 0:e.mapKeyConverter)??A7}clone(){return new aI({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=dd,this.stack.reset()}setBuffer(e){const t=Gv(e);this.bytes=t,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===dd&&!this.hasRemaining(1))this.setBuffer(e);else{const t=this.bytes.subarray(this.pos),r=Gv(e),i=new Uint8Array(t.length+r.length);i.set(t),i.set(r,t.length),this.setBuffer(i)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:t,pos:r}=this;return new RangeError(`Extra ${t.byteLength-r} of ${t.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let t=!1,r;for await(const u of e){if(t)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(u);try{r=this.doDecodeSync(),t=!0}catch(h){if(!(h instanceof RangeError))throw h}this.totalPos+=this.pos}if(t){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:i,pos:a,totalPos:c}=this;throw new RangeError(`Insufficient data in parsing ${l1(i)} at ${c} (${a} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,t){if(this.entered){yield*this.clone().decodeMultiAsync(e,t);return}try{this.entered=!0;let r=t,i=-1;for await(const a of e){if(t&&i===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(a),r&&(i=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--i!==0;);}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let t;if(e>=224)t=e-256;else if(e<192)if(e<128)t=e;else if(e<144){const i=e-128;if(i!==0){this.pushMapState(i),this.complete();continue e}else t={}}else if(e<160){const i=e-144;if(i!==0){this.pushArrayState(i),this.complete();continue e}else t=[]}else{const i=e-160;t=this.decodeString(i,0)}else if(e===192)t=null;else if(e===194)t=!1;else if(e===195)t=!0;else if(e===202)t=this.readF32();else if(e===203)t=this.readF64();else if(e===204)t=this.readU8();else if(e===205)t=this.readU16();else if(e===206)t=this.readU32();else if(e===207)this.useBigInt64?t=this.readU64AsBigInt():t=this.readU64();else if(e===208)t=this.readI8();else if(e===209)t=this.readI16();else if(e===210)t=this.readI32();else if(e===211)this.useBigInt64?t=this.readI64AsBigInt():t=this.readI64();else if(e===217){const i=this.lookU8();t=this.decodeString(i,1)}else if(e===218){const i=this.lookU16();t=this.decodeString(i,2)}else if(e===219){const i=this.lookU32();t=this.decodeString(i,4)}else if(e===220){const i=this.readU16();if(i!==0){this.pushArrayState(i),this.complete();continue e}else t=[]}else if(e===221){const i=this.readU32();if(i!==0){this.pushArrayState(i),this.complete();continue e}else t=[]}else if(e===222){const i=this.readU16();if(i!==0){this.pushMapState(i),this.complete();continue e}else t={}}else if(e===223){const i=this.readU32();if(i!==0){this.pushMapState(i),this.complete();continue e}else t={}}else if(e===196){const i=this.lookU8();t=this.decodeBinary(i,1)}else if(e===197){const i=this.lookU16();t=this.decodeBinary(i,2)}else if(e===198){const i=this.lookU32();t=this.decodeBinary(i,4)}else if(e===212)t=this.decodeExtension(1,0);else if(e===213)t=this.decodeExtension(2,0);else if(e===214)t=this.decodeExtension(4,0);else if(e===215)t=this.decodeExtension(8,0);else if(e===216)t=this.decodeExtension(16,0);else if(e===199){const i=this.lookU8();t=this.decodeExtension(i,1)}else if(e===200){const i=this.lookU16();t=this.decodeExtension(i,2)}else if(e===201){const i=this.lookU32();t=this.decodeExtension(i,4)}else throw new Vr(`Unrecognized type byte: ${l1(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const i=r.top();if(i.type===Kv)if(i.array[i.position]=t,i.position++,i.position===i.size)t=i.array,r.release(i);else continue e;else if(i.type===Ud){if(t==="__proto__")throw new Vr("The key __proto__ is not allowed");i.key=this.mapKeyConverter(t),i.type=sI;continue e}else if(i.map[i.key]=t,i.readCount++,i.readCount===i.size)t=i.map,r.release(i);else{i.key=null,i.type=Ud;continue e}}return t}}readHeadByte(){return this.headByte===dd&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=dd}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new Vr(`Unrecognized array type byte: ${l1(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new Vr(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new Vr(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,t){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,t):this.decodeBinary(e,t)}decodeUtf8String(e,t){var a;if(e>this.maxStrLength)throw new Vr(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+t+e)throw RT;const r=this.pos+t;let i;return this.stateIsMapKey()&&((a=this.keyDecoder)!=null&&a.canBeCached(e))?i=this.keyDecoder.decode(this.bytes,r,e):i=n7(this.bytes,r,e),this.pos+=t+e,i}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===Ud:!1}decodeBinary(e,t){if(e>this.maxBinLength)throw new Vr(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+t))throw RT;const r=this.pos+t,i=this.bytes.subarray(r,r+e);return this.pos+=t+e,i}decodeExtension(e,t){if(e>this.maxExtLength)throw new Vr(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+t),i=this.decodeBinary(e,t+1);return this.extensionCodec.decode(i,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=i7(this.view,this.pos);return this.pos+=8,e}readI64(){const e=rI(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function D7(n,e){return new T7(e).decode(n)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function C7(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function oI(n,e){return Array.isArray(e)?e.length===0?!0:n?e.every(t=>typeof t=="string"):e.every(t=>Number.isSafeInteger(t)):!1}function gm(n,e){if(typeof e!="string")throw new Error(`${n}: string expected`);return!0}function d2(n){if(!Number.isSafeInteger(n))throw new Error(`invalid integer: ${n}`)}function Qv(n){if(!Array.isArray(n))throw new Error("array expected")}function ym(n,e){if(!oI(!0,e))throw new Error(`${n}: array of strings expected`)}function _7(n,e){if(!oI(!1,e))throw new Error(`${n}: array of numbers expected`)}function N7(...n){const e=a=>a,t=(a,c)=>u=>a(c(u)),r=n.map(a=>a.encode).reduceRight(t,e),i=n.map(a=>a.decode).reduce(t,e);return{encode:r,decode:i}}function I7(n){const e=typeof n=="string"?n.split(""):n,t=e.length;ym("alphabet",e);const r=new Map(e.map((i,a)=>[i,a]));return{encode:i=>(Qv(i),i.map(a=>{if(!Number.isSafeInteger(a)||a<0||a>=t)throw new Error(`alphabet.encode: digit index outside alphabet "${a}". Allowed: ${n}`);return e[a]})),decode:i=>(Qv(i),i.map(a=>{gm("alphabet.decode",a);const c=r.get(a);if(c===void 0)throw new Error(`Unknown letter: "${a}". Allowed: ${n}`);return c}))}}function R7(n=""){return gm("join",n),{encode:e=>(ym("join.decode",e),e.join(n)),decode:e=>(gm("join.decode",e),e.split(n))}}function B7(n,e="="){return d2(n),gm("padding",e),{encode(t){for(ym("padding.encode",t);t.length*n%8;)t.push(e);return t},decode(t){ym("padding.decode",t);let r=t.length;if(r*n%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&t[r-1]===e;r--)if((r-1)*n%8===0)throw new Error("padding: invalid, string has too much padding");return t.slice(0,r)}}}const cI=(n,e)=>e===0?n:cI(e,n%e),mm=(n,e)=>n+(e-cI(n,e)),u1=(()=>{let n=[];for(let e=0;e<40;e++)n.push(2**e);return n})();function BT(n,e,t,r){if(Qv(n),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(t<=0||t>32)throw new Error(`convertRadix2: wrong to=${t}`);if(mm(e,t)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${t} carryBits=${mm(e,t)}`);let i=0,a=0;const c=u1[e],u=u1[t]-1,h=[];for(const d of n){if(d2(d),d>=c)throw new Error(`convertRadix2: invalid data word=${d} from=${e}`);if(i=i<<e|d,a+e>32)throw new Error(`convertRadix2: carry overflow pos=${a} from=${e}`);for(a+=e;a>=t;a-=t)h.push((i>>a-t&u)>>>0);const p=u1[a];if(p===void 0)throw new Error("invalid carry");i&=p-1}if(i=i<<t-a&u,!r&&a>=e)throw new Error("Excess padding");if(!r&&i>0)throw new Error(`Non-zero padding: ${i}`);return r&&a>0&&h.push(i>>>0),h}function P7(n,e=!1){if(d2(n),n<=0||n>32)throw new Error("radix2: bits should be in (0..32]");if(mm(8,n)>32||mm(n,8)>32)throw new Error("radix2: carry overflow");return{encode:t=>{if(!C7(t))throw new Error("radix2.encode input should be Uint8Array");return BT(Array.from(t),8,n,!e)},decode:t=>(_7("radix2.decode",t),Uint8Array.from(BT(t,n,8,e)))}}const U7=N7(P7(5),I7("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),B7(5),R7("")),M7=n=>JSON.stringify(n,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),$7=n=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=n.replace(e,'$1"$2n"$3');return JSON.parse(t,(r,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function yl(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return $7(n)}catch{return n}}function Ca(n){return typeof n=="string"?n:M7(n)||""}function k7(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function lI(n,...e){if(!k7(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function PT(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function L7(n,e){lI(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}const wu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const h1=n=>new DataView(n.buffer,n.byteOffset,n.byteLength);function j7(n){if(typeof n!="string")throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array(new TextEncoder().encode(n))}function uI(n){return typeof n=="string"&&(n=j7(n)),lI(n),n}let z7=class{clone(){return this._cloneInto()}};function H7(n){const e=r=>n().update(uI(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function hI(n=32){if(wu&&typeof wu.getRandomValues=="function")return wu.getRandomValues(new Uint8Array(n));if(wu&&typeof wu.randomBytes=="function")return wu.randomBytes(n);throw new Error("crypto.getRandomValues must be defined")}function F7(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),a=BigInt(4294967295),c=Number(t>>i&a),u=Number(t&a),h=r?4:0,d=r?0:4;n.setUint32(e+h,c,r),n.setUint32(e+d,u,r)}let q7=class extends z7{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=h1(this.buffer)}update(e){PT(this);const{view:t,buffer:r,blockLen:i}=this;e=uI(e);const a=e.length;for(let c=0;c<a;){const u=Math.min(i-this.pos,a-c);if(u===i){const h=h1(e);for(;i<=a-c;c+=i)this.process(h,c);continue}r.set(e.subarray(c,c+u),this.pos),this.pos+=u,c+=u,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){PT(this),L7(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:a}=this;let{pos:c}=this;t[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>i-c&&(this.process(r,0),c=0);for(let y=c;y<i;y++)t[y]=0;F7(r,i-8,BigInt(this.length*8),a),this.process(r,0);const u=h1(e),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=h/4,p=this.get();if(d>p.length)throw new Error("_sha2: outputLen bigger than state");for(let y=0;y<d;y++)u.setUint32(4*y,p[y],a)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:a,destroyed:c,pos:u}=this;return e.length=i,e.pos=u,e.finished=a,e.destroyed=c,i%t&&e.buffer.set(r),e}};const dy=BigInt(2**32-1),Yv=BigInt(32);function fI(n,e=!1){return e?{h:Number(n&dy),l:Number(n>>Yv&dy)}:{h:Number(n>>Yv&dy)|0,l:Number(n&dy)|0}}function V7(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let i=0;i<n.length;i++){const{h:a,l:c}=fI(n[i],e);[t[i],r[i]]=[a,c]}return[t,r]}const G7=(n,e)=>BigInt(n>>>0)<<Yv|BigInt(e>>>0),K7=(n,e,t)=>n>>>t,Q7=(n,e,t)=>n<<32-t|e>>>t,Y7=(n,e,t)=>n>>>t|e<<32-t,J7=(n,e,t)=>n<<32-t|e>>>t,Z7=(n,e,t)=>n<<64-t|e>>>t-32,X7=(n,e,t)=>n>>>t-32|e<<64-t,W7=(n,e)=>e,ej=(n,e)=>n,tj=(n,e,t)=>n<<t|e>>>32-t,nj=(n,e,t)=>e<<t|n>>>32-t,rj=(n,e,t)=>e<<t-32|n>>>64-t,ij=(n,e,t)=>n<<t-32|e>>>64-t;function sj(n,e,t,r){const i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}const aj=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),oj=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,cj=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),lj=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,uj=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),hj=(n,e,t,r,i,a)=>e+t+r+i+a+(n/2**32|0)|0,je={fromBig:fI,split:V7,toBig:G7,shrSH:K7,shrSL:Q7,rotrSH:Y7,rotrSL:J7,rotrBH:Z7,rotrBL:X7,rotr32H:W7,rotr32L:ej,rotlSH:tj,rotlSL:nj,rotlBH:rj,rotlBL:ij,add:sj,add3L:aj,add3H:oj,add4L:cj,add4H:lj,add5H:hj,add5L:uj},[fj,dj]=je.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),oo=new Uint32Array(80),co=new Uint32Array(80);let pj=class extends q7{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:a,Cl:c,Dh:u,Dl:h,Eh:d,El:p,Fh:y,Fl:w,Gh:v,Gl:b,Hh:E,Hl:A}=this;return[e,t,r,i,a,c,u,h,d,p,y,w,v,b,E,A]}set(e,t,r,i,a,c,u,h,d,p,y,w,v,b,E,A){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=a|0,this.Cl=c|0,this.Dh=u|0,this.Dl=h|0,this.Eh=d|0,this.El=p|0,this.Fh=y|0,this.Fl=w|0,this.Gh=v|0,this.Gl=b|0,this.Hh=E|0,this.Hl=A|0}process(e,t){for(let D=0;D<16;D++,t+=4)oo[D]=e.getUint32(t),co[D]=e.getUint32(t+=4);for(let D=16;D<80;D++){const U=oo[D-15]|0,I=co[D-15]|0,N=je.rotrSH(U,I,1)^je.rotrSH(U,I,8)^je.shrSH(U,I,7),k=je.rotrSL(U,I,1)^je.rotrSL(U,I,8)^je.shrSL(U,I,7),$=oo[D-2]|0,P=co[D-2]|0,L=je.rotrSH($,P,19)^je.rotrBH($,P,61)^je.shrSH($,P,6),z=je.rotrSL($,P,19)^je.rotrBL($,P,61)^je.shrSL($,P,6),V=je.add4L(k,z,co[D-7],co[D-16]),ne=je.add4H(V,N,L,oo[D-7],oo[D-16]);oo[D]=ne|0,co[D]=V|0}let{Ah:r,Al:i,Bh:a,Bl:c,Ch:u,Cl:h,Dh:d,Dl:p,Eh:y,El:w,Fh:v,Fl:b,Gh:E,Gl:A,Hh:S,Hl:B}=this;for(let D=0;D<80;D++){const U=je.rotrSH(y,w,14)^je.rotrSH(y,w,18)^je.rotrBH(y,w,41),I=je.rotrSL(y,w,14)^je.rotrSL(y,w,18)^je.rotrBL(y,w,41),N=y&v^~y&E,k=w&b^~w&A,$=je.add5L(B,I,k,dj[D],co[D]),P=je.add5H($,S,U,N,fj[D],oo[D]),L=$|0,z=je.rotrSH(r,i,28)^je.rotrBH(r,i,34)^je.rotrBH(r,i,39),V=je.rotrSL(r,i,28)^je.rotrBL(r,i,34)^je.rotrBL(r,i,39),ne=r&a^r&u^a&u,Z=i&c^i&h^c&h;S=E|0,B=A|0,E=v|0,A=b|0,v=y|0,b=w|0,{h:y,l:w}=je.add(d|0,p|0,P|0,L|0),d=u|0,p=h|0,u=a|0,h=c|0,a=r|0,c=i|0;const C=je.add3L(L,V,Z);r=je.add3H(C,P,z,ne),i=C|0}({h:r,l:i}=je.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:a,l:c}=je.add(this.Bh|0,this.Bl|0,a|0,c|0),{h:u,l:h}=je.add(this.Ch|0,this.Cl|0,u|0,h|0),{h:d,l:p}=je.add(this.Dh|0,this.Dl|0,d|0,p|0),{h:y,l:w}=je.add(this.Eh|0,this.El|0,y|0,w|0),{h:v,l:b}=je.add(this.Fh|0,this.Fl|0,v|0,b|0),{h:E,l:A}=je.add(this.Gh|0,this.Gl|0,E|0,A|0),{h:S,l:B}=je.add(this.Hh|0,this.Hl|0,S|0,B|0),this.set(r,i,a,c,u,h,d,p,y,w,v,b,E,A,S,B)}roundClean(){oo.fill(0),co.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const gj=H7(()=>new pj);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const p2=BigInt(0),dI=BigInt(1),yj=BigInt(2);function g2(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function y2(n){if(!g2(n))throw new Error("Uint8Array expected")}function f1(n,e){if(typeof e!="boolean")throw new Error(n+" boolean expected, got "+e)}const mj=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function m2(n){y2(n);let e="";for(let t=0;t<n.length;t++)e+=mj[n[t]];return e}function pI(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?p2:BigInt("0x"+n)}const Qs={_0:48,_9:57,A:65,F:70,a:97,f:102};function UT(n){if(n>=Qs._0&&n<=Qs._9)return n-Qs._0;if(n>=Qs.A&&n<=Qs.F)return n-(Qs.A-10);if(n>=Qs.a&&n<=Qs.f)return n-(Qs.a-10)}function gI(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let i=0,a=0;i<t;i++,a+=2){const c=UT(n.charCodeAt(a)),u=UT(n.charCodeAt(a+1));if(c===void 0||u===void 0){const h=n[a]+n[a+1];throw new Error('hex string expected, got non-hex character "'+h+'" at index '+a)}r[i]=c*16+u}return r}function wj(n){return pI(m2(n))}function qy(n){return y2(n),pI(m2(Uint8Array.from(n).reverse()))}function yI(n,e){return gI(n.toString(16).padStart(e*2,"0"))}function Jv(n,e){return yI(n,e).reverse()}function Ys(n,e,t){let r;if(typeof e=="string")try{r=gI(e)}catch(a){throw new Error(n+" must be hex string or Uint8Array, cause: "+a)}else if(g2(e))r=Uint8Array.from(e);else throw new Error(n+" must be hex string or Uint8Array");const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(n+" of length "+t+" expected, got "+i);return r}function MT(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];y2(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const a=n[r];t.set(a,i),i+=a.length}return t}const d1=n=>typeof n=="bigint"&&p2<=n;function bj(n,e,t){return d1(n)&&d1(e)&&d1(t)&&e<=n&&n<t}function pd(n,e,t,r){if(!bj(e,t,r))throw new Error("expected valid "+n+": "+t+" <= n < "+r+", got "+e)}function vj(n){let e;for(e=0;n>p2;n>>=dI,e+=1);return e}const Ej=n=>(yj<<BigInt(n-1))-dI,Aj={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||g2(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function w2(n,e,t={}){const r=(i,a,c)=>{const u=Aj[a];if(typeof u!="function")throw new Error("invalid validator function");const h=n[i];if(!(c&&h===void 0)&&!u(h,n))throw new Error("param "+String(i)+" is invalid. Expected "+a+", got "+h)};for(const[i,a]of Object.entries(e))r(i,a,!1);for(const[i,a]of Object.entries(t))r(i,a,!0);return n}function $T(n){const e=new WeakMap;return(t,...r)=>{const i=e.get(t);if(i!==void 0)return i;const a=n(t,...r);return e.set(t,a),a}}const yn=BigInt(0),Ht=BigInt(1),Cc=BigInt(2),xj=BigInt(3),Zv=BigInt(4),kT=BigInt(5),LT=BigInt(8);function nn(n,e){const t=n%e;return t>=yn?t:e+t}function Sj(n,e,t){if(e<yn)throw new Error("invalid exponent, negatives unsupported");if(t<=yn)throw new Error("invalid modulus");if(t===Ht)return yn;let r=Ht;for(;e>yn;)e&Ht&&(r=r*n%t),n=n*n%t,e>>=Ht;return r}function ss(n,e,t){let r=n;for(;e-- >yn;)r*=r,r%=t;return r}function jT(n,e){if(n===yn)throw new Error("invert: expected non-zero number");if(e<=yn)throw new Error("invert: expected positive modulus, got "+e);let t=nn(n,e),r=e,i=yn,a=Ht;for(;t!==yn;){const c=r/t,u=r%t,h=i-a*c;r=t,t=u,i=a,a=h}if(r!==Ht)throw new Error("invert: does not exist");return nn(i,e)}function Oj(n){const e=(n-Ht)/Cc;let t,r,i;for(t=n-Ht,r=0;t%Cc===yn;t/=Cc,r++);for(i=Cc;i<n&&Sj(i,e,n)!==n-Ht;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const c=(n+Ht)/Zv;return function(u,h){const d=u.pow(h,c);if(!u.eql(u.sqr(d),h))throw new Error("Cannot find square root");return d}}const a=(t+Ht)/Cc;return function(c,u){if(c.pow(u,e)===c.neg(c.ONE))throw new Error("Cannot find square root");let h=r,d=c.pow(c.mul(c.ONE,i),t),p=c.pow(u,a),y=c.pow(u,t);for(;!c.eql(y,c.ONE);){if(c.eql(y,c.ZERO))return c.ZERO;let w=1;for(let b=c.sqr(y);w<h&&!c.eql(b,c.ONE);w++)b=c.sqr(b);const v=c.pow(d,Ht<<BigInt(h-w-1));d=c.sqr(v),p=c.mul(p,v),y=c.mul(y,d),h=w}return p}}function Tj(n){if(n%Zv===xj){const e=(n+Ht)/Zv;return function(t,r){const i=t.pow(r,e);if(!t.eql(t.sqr(i),r))throw new Error("Cannot find square root");return i}}if(n%LT===kT){const e=(n-kT)/LT;return function(t,r){const i=t.mul(r,Cc),a=t.pow(i,e),c=t.mul(r,a),u=t.mul(t.mul(c,Cc),a),h=t.mul(c,t.sub(u,t.ONE));if(!t.eql(t.sqr(h),r))throw new Error("Cannot find square root");return h}}return Oj(n)}const Dj=(n,e)=>(nn(n,e)&Ht)===Ht,Cj=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function _j(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=Cj.reduce((r,i)=>(r[i]="function",r),e);return w2(n,t)}function Nj(n,e,t){if(t<yn)throw new Error("invalid exponent, negatives unsupported");if(t===yn)return n.ONE;if(t===Ht)return e;let r=n.ONE,i=e;for(;t>yn;)t&Ht&&(r=n.mul(r,i)),i=n.sqr(i),t>>=Ht;return r}function Ij(n,e){const t=new Array(e.length),r=e.reduce((a,c,u)=>n.is0(c)?a:(t[u]=a,n.mul(a,c)),n.ONE),i=n.inv(r);return e.reduceRight((a,c,u)=>n.is0(c)?a:(t[u]=n.mul(a,t[u]),n.mul(a,c)),i),t}function mI(n,e){const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function wI(n,e,t=!1,r={}){if(n<=yn)throw new Error("invalid field: expected ORDER > 0, got "+n);const{nBitLength:i,nByteLength:a}=mI(n,e);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const u=Object.freeze({ORDER:n,isLE:t,BITS:i,BYTES:a,MASK:Ej(i),ZERO:yn,ONE:Ht,create:h=>nn(h,n),isValid:h=>{if(typeof h!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof h);return yn<=h&&h<n},is0:h=>h===yn,isOdd:h=>(h&Ht)===Ht,neg:h=>nn(-h,n),eql:(h,d)=>h===d,sqr:h=>nn(h*h,n),add:(h,d)=>nn(h+d,n),sub:(h,d)=>nn(h-d,n),mul:(h,d)=>nn(h*d,n),pow:(h,d)=>Nj(u,h,d),div:(h,d)=>nn(h*jT(d,n),n),sqrN:h=>h*h,addN:(h,d)=>h+d,subN:(h,d)=>h-d,mulN:(h,d)=>h*d,inv:h=>jT(h,n),sqrt:r.sqrt||(h=>(c||(c=Tj(n)),c(u,h))),invertBatch:h=>Ij(u,h),cmov:(h,d,p)=>p?d:h,toBytes:h=>t?Jv(h,a):yI(h,a),fromBytes:h=>{if(h.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+h.length);return t?qy(h):wj(h)}});return Object.freeze(u)}const zT=BigInt(0),py=BigInt(1);function p1(n,e){const t=e.negate();return n?t:e}function bI(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function g1(n,e){bI(n,e);const t=Math.ceil(e/n)+1,r=2**(n-1);return{windows:t,windowSize:r}}function Rj(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function Bj(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}const y1=new WeakMap,vI=new WeakMap;function m1(n){return vI.get(n)||1}function Pj(n,e){return{constTimeNegate:p1,hasPrecomputes(t){return m1(t)!==1},unsafeLadder(t,r,i=n.ZERO){let a=t;for(;r>zT;)r&py&&(i=i.add(a)),a=a.double(),r>>=py;return i},precomputeWindow(t,r){const{windows:i,windowSize:a}=g1(r,e),c=[];let u=t,h=u;for(let d=0;d<i;d++){h=u,c.push(h);for(let p=1;p<a;p++)h=h.add(u),c.push(h);u=h.double()}return c},wNAF(t,r,i){const{windows:a,windowSize:c}=g1(t,e);let u=n.ZERO,h=n.BASE;const d=BigInt(2**t-1),p=2**t,y=BigInt(t);for(let w=0;w<a;w++){const v=w*c;let b=Number(i&d);i>>=y,b>c&&(b-=p,i+=py);const E=v,A=v+Math.abs(b)-1,S=w%2!==0,B=b<0;b===0?h=h.add(p1(S,r[E])):u=u.add(p1(B,r[A]))}return{p:u,f:h}},wNAFUnsafe(t,r,i,a=n.ZERO){const{windows:c,windowSize:u}=g1(t,e),h=BigInt(2**t-1),d=2**t,p=BigInt(t);for(let y=0;y<c;y++){const w=y*u;if(i===zT)break;let v=Number(i&h);if(i>>=p,v>u&&(v-=d,i+=py),v===0)continue;let b=r[w+Math.abs(v)-1];v<0&&(b=b.negate()),a=a.add(b)}return a},getPrecomputes(t,r,i){let a=y1.get(r);return a||(a=this.precomputeWindow(r,t),t!==1&&y1.set(r,i(a))),a},wNAFCached(t,r,i){const a=m1(t);return this.wNAF(a,this.getPrecomputes(a,t,i),r)},wNAFCachedUnsafe(t,r,i,a){const c=m1(t);return c===1?this.unsafeLadder(t,r,a):this.wNAFUnsafe(c,this.getPrecomputes(c,t,i),r,a)},setWindowSize(t,r){bI(r,e),vI.set(t,r),y1.delete(t)}}}function Uj(n,e,t,r){if(Rj(t,n),Bj(r,e),t.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=n.ZERO,a=vj(BigInt(t.length)),c=a>12?a-3:a>4?a-2:a?2:1,u=(1<<c)-1,h=new Array(u+1).fill(i),d=Math.floor((e.BITS-1)/c)*c;let p=i;for(let y=d;y>=0;y-=c){h.fill(i);for(let v=0;v<r.length;v++){const b=r[v],E=Number(b>>BigInt(y)&BigInt(u));h[E]=h[E].add(t[v])}let w=i;for(let v=h.length-1,b=i;v>0;v--)b=b.add(h[v]),w=w.add(b);if(p=p.add(w),y!==0)for(let v=0;v<c;v++)p=p.double()}return p}function Mj(n){return _j(n.Fp),w2(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...mI(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}const Ri=BigInt(0),dr=BigInt(1),gy=BigInt(2),$j=BigInt(8),kj={zip215:!0};function Lj(n){const e=Mj(n);return w2(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function jj(n){const e=Lj(n),{Fp:t,n:r,prehash:i,hash:a,randomBytes:c,nByteLength:u,h}=e,d=gy<<BigInt(u*8)-dr,p=t.create,y=wI(e.n,e.nBitLength),w=e.uvRatio||((C,O)=>{try{return{isValid:!0,value:t.sqrt(C*t.inv(O))}}catch{return{isValid:!1,value:Ri}}}),v=e.adjustScalarBytes||(C=>C),b=e.domain||((C,O,M)=>{if(f1("phflag",M),O.length||M)throw new Error("Contexts/pre-hash are not supported");return C});function E(C,O){pd("coordinate "+C,O,Ri,d)}function A(C){if(!(C instanceof D))throw new Error("ExtendedPoint expected")}const S=$T((C,O)=>{const{ex:M,ey:q,ez:G}=C,_=C.is0();O==null&&(O=_?$j:t.inv(G));const F=p(M*O),X=p(q*O),re=p(G*O);if(_)return{x:Ri,y:dr};if(re!==dr)throw new Error("invZ was invalid");return{x:F,y:X}}),B=$T(C=>{const{a:O,d:M}=e;if(C.is0())throw new Error("bad point: ZERO");const{ex:q,ey:G,ez:_,et:F}=C,X=p(q*q),re=p(G*G),ie=p(_*_),ge=p(ie*ie),le=p(X*O),ue=p(ie*p(le+re)),de=p(ge+p(M*p(X*re)));if(ue!==de)throw new Error("bad point: equation left != right (1)");const ve=p(q*G),Ne=p(_*F);if(ve!==Ne)throw new Error("bad point: equation left != right (2)");return!0});class D{constructor(O,M,q,G){this.ex=O,this.ey=M,this.ez=q,this.et=G,E("x",O),E("y",M),E("z",q),E("t",G),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(O){if(O instanceof D)throw new Error("extended point not allowed");const{x:M,y:q}=O||{};return E("x",M),E("y",q),new D(M,q,dr,p(M*q))}static normalizeZ(O){const M=t.invertBatch(O.map(q=>q.ez));return O.map((q,G)=>q.toAffine(M[G])).map(D.fromAffine)}static msm(O,M){return Uj(D,y,O,M)}_setWindowSize(O){N.setWindowSize(this,O)}assertValidity(){B(this)}equals(O){A(O);const{ex:M,ey:q,ez:G}=this,{ex:_,ey:F,ez:X}=O,re=p(M*X),ie=p(_*G),ge=p(q*X),le=p(F*G);return re===ie&&ge===le}is0(){return this.equals(D.ZERO)}negate(){return new D(p(-this.ex),this.ey,this.ez,p(-this.et))}double(){const{a:O}=e,{ex:M,ey:q,ez:G}=this,_=p(M*M),F=p(q*q),X=p(gy*p(G*G)),re=p(O*_),ie=M+q,ge=p(p(ie*ie)-_-F),le=re+F,ue=le-X,de=re-F,ve=p(ge*ue),Ne=p(le*de),Ce=p(ge*de),ze=p(ue*le);return new D(ve,Ne,ze,Ce)}add(O){A(O);const{a:M,d:q}=e,{ex:G,ey:_,ez:F,et:X}=this,{ex:re,ey:ie,ez:ge,et:le}=O;if(M===BigInt(-1)){const mn=p((_-G)*(ie+re)),sr=p((_+G)*(ie-re)),Xt=p(sr-mn);if(Xt===Ri)return this.double();const Vn=p(F*gy*le),Jr=p(X*gy*ge),Xi=Jr+Vn,Ra=sr+mn,we=Jr-Vn,Se=p(Xi*Xt),Ue=p(Ra*we),He=p(Xi*we),lt=p(Xt*Ra);return new D(Se,Ue,lt,He)}const ue=p(G*re),de=p(_*ie),ve=p(X*q*le),Ne=p(F*ge),Ce=p((G+_)*(re+ie)-ue-de),ze=Ne-ve,Qe=Ne+ve,st=p(de-M*ue),Ct=p(Ce*ze),qt=p(Qe*st),Vt=p(Ce*st),Di=p(ze*Qe);return new D(Ct,qt,Di,Vt)}subtract(O){return this.add(O.negate())}wNAF(O){return N.wNAFCached(this,O,D.normalizeZ)}multiply(O){const M=O;pd("scalar",M,dr,r);const{p:q,f:G}=this.wNAF(M);return D.normalizeZ([q,G])[0]}multiplyUnsafe(O,M=D.ZERO){const q=O;return pd("scalar",q,Ri,r),q===Ri?I:this.is0()||q===dr?this:N.wNAFCachedUnsafe(this,q,D.normalizeZ,M)}isSmallOrder(){return this.multiplyUnsafe(h).is0()}isTorsionFree(){return N.unsafeLadder(this,r).is0()}toAffine(O){return S(this,O)}clearCofactor(){const{h:O}=e;return O===dr?this:this.multiplyUnsafe(O)}static fromHex(O,M=!1){const{d:q,a:G}=e,_=t.BYTES;O=Ys("pointHex",O,_),f1("zip215",M);const F=O.slice(),X=O[_-1];F[_-1]=X&-129;const re=qy(F),ie=M?d:t.ORDER;pd("pointHex.y",re,Ri,ie);const ge=p(re*re),le=p(ge-dr),ue=p(q*ge-G);let{isValid:de,value:ve}=w(le,ue);if(!de)throw new Error("Point.fromHex: invalid y coordinate");const Ne=(ve&dr)===dr,Ce=(X&128)!==0;if(!M&&ve===Ri&&Ce)throw new Error("Point.fromHex: x=0 and x_0=1");return Ce!==Ne&&(ve=p(-ve)),D.fromAffine({x:ve,y:re})}static fromPrivateKey(O){return P(O).point}toRawBytes(){const{x:O,y:M}=this.toAffine(),q=Jv(M,t.BYTES);return q[q.length-1]|=O&dr?128:0,q}toHex(){return m2(this.toRawBytes())}}D.BASE=new D(e.Gx,e.Gy,dr,p(e.Gx*e.Gy)),D.ZERO=new D(Ri,dr,dr,Ri);const{BASE:U,ZERO:I}=D,N=Pj(D,u*8);function k(C){return nn(C,r)}function $(C){return k(qy(C))}function P(C){const O=t.BYTES;C=Ys("private key",C,O);const M=Ys("hashed private key",a(C),2*O),q=v(M.slice(0,O)),G=M.slice(O,2*O),_=$(q),F=U.multiply(_),X=F.toRawBytes();return{head:q,prefix:G,scalar:_,point:F,pointBytes:X}}function L(C){return P(C).pointBytes}function z(C=new Uint8Array,...O){const M=MT(...O);return $(a(b(M,Ys("context",C),!!i)))}function V(C,O,M={}){C=Ys("message",C),i&&(C=i(C));const{prefix:q,scalar:G,pointBytes:_}=P(O),F=z(M.context,q,C),X=U.multiply(F).toRawBytes(),re=z(M.context,X,_,C),ie=k(F+re*G);pd("signature.s",ie,Ri,r);const ge=MT(X,Jv(ie,t.BYTES));return Ys("result",ge,t.BYTES*2)}const ne=kj;function Z(C,O,M,q=ne){const{context:G,zip215:_}=q,F=t.BYTES;C=Ys("signature",C,2*F),O=Ys("message",O),M=Ys("publicKey",M,F),_!==void 0&&f1("zip215",_),i&&(O=i(O));const X=qy(C.slice(F,2*F));let re,ie,ge;try{re=D.fromHex(M,_),ie=D.fromHex(C.slice(0,F),_),ge=U.multiplyUnsafe(X)}catch{return!1}if(!_&&re.isSmallOrder())return!1;const le=z(G,ie.toRawBytes(),re.toRawBytes(),O);return ie.add(re.multiplyUnsafe(le)).subtract(ge).clearCofactor().equals(D.ZERO)}return U._setWindowSize(8),{CURVE:e,getPublicKey:L,sign:V,verify:Z,ExtendedPoint:D,utils:{getExtendedPublicKey:P,randomPrivateKey:()=>c(t.BYTES),precompute(C=8,O=D.BASE){return O._setWindowSize(C),O.multiply(BigInt(3)),O}}}}BigInt(0),BigInt(1);const b2=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),HT=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const zj=BigInt(1),FT=BigInt(2);BigInt(3);const Hj=BigInt(5),Fj=BigInt(8);function qj(n){const e=BigInt(10),t=BigInt(20),r=BigInt(40),i=BigInt(80),a=b2,c=n*n%a*n%a,u=ss(c,FT,a)*c%a,h=ss(u,zj,a)*n%a,d=ss(h,Hj,a)*h%a,p=ss(d,e,a)*d%a,y=ss(p,t,a)*p%a,w=ss(y,r,a)*y%a,v=ss(w,i,a)*w%a,b=ss(v,i,a)*w%a,E=ss(b,e,a)*d%a;return{pow_p_5_8:ss(E,FT,a)*n%a,b2:c}}function Vj(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function Gj(n,e){const t=b2,r=nn(e*e*e,t),i=nn(r*r*e,t),a=qj(n*i).pow_p_5_8;let c=nn(n*r*a,t);const u=nn(e*c*c,t),h=c,d=nn(c*HT,t),p=u===n,y=u===nn(-n,t),w=u===nn(-n*HT,t);return p&&(c=h),(y||w)&&(c=d),Dj(c,t)&&(c=nn(-c,t)),{isValid:p||y,value:c}}const Kj=wI(b2,void 0,!0),Qj={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Kj,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Fj,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:gj,randomBytes:hI,adjustScalarBytes:Vj,uvRatio:Gj},EI=jj(Qj),Yj="EdDSA",Jj="JWT",wm=".",n0="base64url",AI="utf8",xI="utf8",Zj=":",Xj="did",Wj="key",qT="base58btc",ez="z",tz="K36",nz=32;function v2(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function SI(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?v2(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function OI(n,e){e||(e=n.reduce((i,a)=>i+a.length,0));const t=SI(e);let r=0;for(const i of n)t.set(i,r),r+=i.length;return v2(t)}function rz(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<n.length;i++){var a=n.charAt(i),c=a.charCodeAt(0);if(t[c]!==255)throw new TypeError(a+" is ambiguous");t[c]=i}var u=n.length,h=n.charAt(0),d=Math.log(u)/Math.log(256),p=Math.log(256)/Math.log(u);function y(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(b.length===0)return"";for(var E=0,A=0,S=0,B=b.length;S!==B&&b[S]===0;)S++,E++;for(var D=(B-S)*p+1>>>0,U=new Uint8Array(D);S!==B;){for(var I=b[S],N=0,k=D-1;(I!==0||N<A)&&k!==-1;k--,N++)I+=256*U[k]>>>0,U[k]=I%u>>>0,I=I/u>>>0;if(I!==0)throw new Error("Non-zero carry");A=N,S++}for(var $=D-A;$!==D&&U[$]===0;)$++;for(var P=h.repeat(E);$<D;++$)P+=n.charAt(U[$]);return P}function w(b){if(typeof b!="string")throw new TypeError("Expected String");if(b.length===0)return new Uint8Array;var E=0;if(b[E]!==" "){for(var A=0,S=0;b[E]===h;)A++,E++;for(var B=(b.length-E)*d+1>>>0,D=new Uint8Array(B);b[E];){var U=t[b.charCodeAt(E)];if(U===255)return;for(var I=0,N=B-1;(U!==0||I<S)&&N!==-1;N--,I++)U+=u*D[N]>>>0,D[N]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");S=I,E++}if(b[E]!==" "){for(var k=B-S;k!==B&&D[k]===0;)k++;for(var $=new Uint8Array(A+(B-k)),P=A;k!==B;)$[P++]=D[k++];return $}}}function v(b){var E=w(b);if(E)return E;throw new Error(`Non-${e} character`)}return{encode:y,decodeUnsafe:w,decode:v}}var iz=rz,sz=iz;const TI=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},az=n=>new TextEncoder().encode(n),oz=n=>new TextDecoder().decode(n);let cz=class{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},lz=class{constructor(e,t,r){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return DI(this,e)}},uz=class{constructor(e){this.decoders=e}or(e){return DI(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const DI=(n,e)=>new uz({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});let hz=class{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new cz(e,t,r),this.decoder=new lz(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const r0=({name:n,prefix:e,encode:t,decode:r})=>new hz(n,e,t,r),Pp=({prefix:n,name:e,alphabet:t})=>{const{encode:r,decode:i}=sz(t,e);return r0({prefix:n,name:e,encode:r,decode:a=>TI(i(a))})},fz=(n,e,t,r)=>{const i={};for(let p=0;p<e.length;++p)i[e[p]]=p;let a=n.length;for(;n[a-1]==="=";)--a;const c=new Uint8Array(a*t/8|0);let u=0,h=0,d=0;for(let p=0;p<a;++p){const y=i[n[p]];if(y===void 0)throw new SyntaxError(`Non-${r} character`);h=h<<t|y,u+=t,u>=8&&(u-=8,c[d++]=255&h>>u)}if(u>=t||255&h<<8-u)throw new SyntaxError("Unexpected end of data");return c},dz=(n,e,t)=>{const r=e[e.length-1]==="=",i=(1<<t)-1;let a="",c=0,u=0;for(let h=0;h<n.length;++h)for(u=u<<8|n[h],c+=8;c>t;)c-=t,a+=e[i&u>>c];if(c&&(a+=e[i&u<<t-c]),r)for(;a.length*t&7;)a+="=";return a},_n=({name:n,prefix:e,bitsPerChar:t,alphabet:r})=>r0({prefix:e,name:n,encode(i){return dz(i,r,t)},decode(i){return fz(i,r,t,n)}}),pz=r0({prefix:"\0",name:"identity",encode:n=>oz(n),decode:n=>az(n)});var gz=Object.freeze({__proto__:null,identity:pz});const yz=_n({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var mz=Object.freeze({__proto__:null,base2:yz});const wz=_n({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var bz=Object.freeze({__proto__:null,base8:wz});const vz=Pp({prefix:"9",name:"base10",alphabet:"0123456789"});var Ez=Object.freeze({__proto__:null,base10:vz});const Az=_n({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),xz=_n({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Sz=Object.freeze({__proto__:null,base16:Az,base16upper:xz});const Oz=_n({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Tz=_n({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Dz=_n({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Cz=_n({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),_z=_n({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Nz=_n({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Iz=_n({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Rz=_n({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Bz=_n({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Pz=Object.freeze({__proto__:null,base32:Oz,base32upper:Tz,base32pad:Dz,base32padupper:Cz,base32hex:_z,base32hexupper:Nz,base32hexpad:Iz,base32hexpadupper:Rz,base32z:Bz});const Uz=Pp({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Mz=Pp({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var $z=Object.freeze({__proto__:null,base36:Uz,base36upper:Mz});const kz=Pp({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Lz=Pp({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var jz=Object.freeze({__proto__:null,base58btc:kz,base58flickr:Lz});const zz=_n({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Hz=_n({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Fz=_n({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),qz=_n({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Vz=Object.freeze({__proto__:null,base64:zz,base64pad:Hz,base64url:Fz,base64urlpad:qz});const CI=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Gz=CI.reduce((n,e,t)=>(n[t]=e,n),[]),Kz=CI.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function Qz(n){return n.reduce((e,t)=>(e+=Gz[t],e),"")}function Yz(n){const e=[];for(const t of n){const r=Kz[t.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(r)}return new Uint8Array(e)}const Jz=r0({prefix:"🚀",name:"base256emoji",encode:Qz,decode:Yz});var Zz=Object.freeze({__proto__:null,base256emoji:Jz}),Xz=_I,VT=128,Wz=-128,eH=Math.pow(2,31);function _I(n,e,t){e=e||[],t=t||0;for(var r=t;n>=eH;)e[t++]=n&255|VT,n/=128;for(;n&Wz;)e[t++]=n&255|VT,n>>>=7;return e[t]=n|0,_I.bytes=t-r+1,e}var tH=Xv,nH=128,GT=127;function Xv(n,r){var t=0,r=r||0,i=0,a=r,c,u=n.length;do{if(a>=u)throw Xv.bytes=0,new RangeError("Could not decode varint");c=n[a++],t+=i<28?(c&GT)<<i:(c&GT)*Math.pow(2,i),i+=7}while(c>=nH);return Xv.bytes=a-r,t}var rH=Math.pow(2,7),iH=Math.pow(2,14),sH=Math.pow(2,21),aH=Math.pow(2,28),oH=Math.pow(2,35),cH=Math.pow(2,42),lH=Math.pow(2,49),uH=Math.pow(2,56),hH=Math.pow(2,63),fH=function(n){return n<rH?1:n<iH?2:n<sH?3:n<aH?4:n<oH?5:n<cH?6:n<lH?7:n<uH?8:n<hH?9:10},dH={encode:Xz,decode:tH,encodingLength:fH},NI=dH;const KT=(n,e,t=0)=>(NI.encode(n,e,t),e),QT=n=>NI.encodingLength(n),Wv=(n,e)=>{const t=e.byteLength,r=QT(n),i=r+QT(t),a=new Uint8Array(i+t);return KT(n,a,0),KT(t,a,r),a.set(e,i),new pH(n,t,e,a)};let pH=class{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}};const II=({name:n,code:e,encode:t})=>new gH(n,e,t);let gH=class{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Wv(this.code,t):t.then(r=>Wv(this.code,r))}else throw Error("Unknown type, must be binary type")}};const RI=n=>async e=>new Uint8Array(await crypto.subtle.digest(n,e)),yH=II({name:"sha2-256",code:18,encode:RI("SHA-256")}),mH=II({name:"sha2-512",code:19,encode:RI("SHA-512")});var wH=Object.freeze({__proto__:null,sha256:yH,sha512:mH});const BI=0,bH="identity",PI=TI,vH=n=>Wv(BI,PI(n)),EH={code:BI,name:bH,encode:PI,digest:vH};var AH=Object.freeze({__proto__:null,identity:EH});new TextEncoder,new TextDecoder;const YT={...gz,...mz,...bz,...Ez,...Sz,...Pz,...$z,...jz,...Vz,...Zz};({...wH,...AH});function UI(n,e,t,r){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:r}}}const JT=UI("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),w1=UI("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=SI(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),MI={utf8:JT,"utf-8":JT,hex:YT.base16,latin1:w1,ascii:w1,binary:w1,...YT};function i0(n,e="utf8"){const t=MI[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):t.encoder.encode(n).substring(1)}function Xh(n,e="utf8"){const t=MI[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?v2(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}function ZT(n){return yl(i0(Xh(n,n0),AI))}function bm(n){return i0(Xh(Ca(n),AI),n0)}function $I(n){const e=Xh(tz,qT),t=ez+i0(OI([e,n]),qT);return[Xj,Wj,t].join(Zj)}function xH(n){return i0(n,n0)}function SH(n){return Xh(n,n0)}function OH(n){return Xh([bm(n.header),bm(n.payload)].join(wm),xI)}function TH(n){return[bm(n.header),bm(n.payload),xH(n.signature)].join(wm)}function eE(n){const e=n.split(wm),t=ZT(e[0]),r=ZT(e[1]),i=SH(e[2]),a=Xh(e.slice(0,2).join(wm),xI);return{header:t,payload:r,signature:i,data:a}}function XT(n=hI(nz)){const e=EI.getPublicKey(n);return{secretKey:OI([n,e]),publicKey:e}}async function DH(n,e,t,r,i=Ae.fromMiliseconds(Date.now())){const a={alg:Yj,typ:Jj},c=$I(r.publicKey),u=i+t,h={iss:c,sub:n,aud:e,iat:i,exp:u},d=OH({header:a,payload:h}),p=EI.sign(d,r.secretKey.slice(0,32));return TH({header:a,payload:h,signature:p})}function E2(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function kI(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?E2(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function Md(n,e){e||(e=n.reduce((i,a)=>i+a.length,0));const t=kI(e);let r=0;for(const i of n)t.set(i,r),r+=i.length;return E2(t)}function CH(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<n.length;i++){var a=n.charAt(i),c=a.charCodeAt(0);if(t[c]!==255)throw new TypeError(a+" is ambiguous");t[c]=i}var u=n.length,h=n.charAt(0),d=Math.log(u)/Math.log(256),p=Math.log(256)/Math.log(u);function y(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(b.length===0)return"";for(var E=0,A=0,S=0,B=b.length;S!==B&&b[S]===0;)S++,E++;for(var D=(B-S)*p+1>>>0,U=new Uint8Array(D);S!==B;){for(var I=b[S],N=0,k=D-1;(I!==0||N<A)&&k!==-1;k--,N++)I+=256*U[k]>>>0,U[k]=I%u>>>0,I=I/u>>>0;if(I!==0)throw new Error("Non-zero carry");A=N,S++}for(var $=D-A;$!==D&&U[$]===0;)$++;for(var P=h.repeat(E);$<D;++$)P+=n.charAt(U[$]);return P}function w(b){if(typeof b!="string")throw new TypeError("Expected String");if(b.length===0)return new Uint8Array;var E=0;if(b[E]!==" "){for(var A=0,S=0;b[E]===h;)A++,E++;for(var B=(b.length-E)*d+1>>>0,D=new Uint8Array(B);b[E];){var U=t[b.charCodeAt(E)];if(U===255)return;for(var I=0,N=B-1;(U!==0||I<S)&&N!==-1;N--,I++)U+=u*D[N]>>>0,D[N]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");S=I,E++}if(b[E]!==" "){for(var k=B-S;k!==B&&D[k]===0;)k++;for(var $=new Uint8Array(A+(B-k)),P=A;k!==B;)$[P++]=D[k++];return $}}}function v(b){var E=w(b);if(E)return E;throw new Error(`Non-${e} character`)}return{encode:y,decodeUnsafe:w,decode:v}}var _H=CH,NH=_H;const IH=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},RH=n=>new TextEncoder().encode(n),BH=n=>new TextDecoder().decode(n);class PH{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class UH{constructor(e,t,r){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return LI(this,e)}}class MH{constructor(e){this.decoders=e}or(e){return LI(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const LI=(n,e)=>new MH({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class $H{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new PH(e,t,r),this.decoder=new UH(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const s0=({name:n,prefix:e,encode:t,decode:r})=>new $H(n,e,t,r),Up=({prefix:n,name:e,alphabet:t})=>{const{encode:r,decode:i}=NH(t,e);return s0({prefix:n,name:e,encode:r,decode:a=>IH(i(a))})},kH=(n,e,t,r)=>{const i={};for(let p=0;p<e.length;++p)i[e[p]]=p;let a=n.length;for(;n[a-1]==="=";)--a;const c=new Uint8Array(a*t/8|0);let u=0,h=0,d=0;for(let p=0;p<a;++p){const y=i[n[p]];if(y===void 0)throw new SyntaxError(`Non-${r} character`);h=h<<t|y,u+=t,u>=8&&(u-=8,c[d++]=255&h>>u)}if(u>=t||255&h<<8-u)throw new SyntaxError("Unexpected end of data");return c},LH=(n,e,t)=>{const r=e[e.length-1]==="=",i=(1<<t)-1;let a="",c=0,u=0;for(let h=0;h<n.length;++h)for(u=u<<8|n[h],c+=8;c>t;)c-=t,a+=e[i&u>>c];if(c&&(a+=e[i&u<<t-c]),r)for(;a.length*t&7;)a+="=";return a},Nn=({name:n,prefix:e,bitsPerChar:t,alphabet:r})=>s0({prefix:e,name:n,encode(i){return LH(i,r,t)},decode(i){return kH(i,r,t,n)}}),jH=s0({prefix:"\0",name:"identity",encode:n=>BH(n),decode:n=>RH(n)}),zH=Object.freeze(Object.defineProperty({__proto__:null,identity:jH},Symbol.toStringTag,{value:"Module"})),HH=Nn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),FH=Object.freeze(Object.defineProperty({__proto__:null,base2:HH},Symbol.toStringTag,{value:"Module"})),qH=Nn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),VH=Object.freeze(Object.defineProperty({__proto__:null,base8:qH},Symbol.toStringTag,{value:"Module"})),GH=Up({prefix:"9",name:"base10",alphabet:"0123456789"}),KH=Object.freeze(Object.defineProperty({__proto__:null,base10:GH},Symbol.toStringTag,{value:"Module"})),QH=Nn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),YH=Nn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),JH=Object.freeze(Object.defineProperty({__proto__:null,base16:QH,base16upper:YH},Symbol.toStringTag,{value:"Module"})),ZH=Nn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),XH=Nn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),WH=Nn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),eF=Nn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),tF=Nn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),nF=Nn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),rF=Nn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),iF=Nn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),sF=Nn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),aF=Object.freeze(Object.defineProperty({__proto__:null,base32:ZH,base32hex:tF,base32hexpad:rF,base32hexpadupper:iF,base32hexupper:nF,base32pad:WH,base32padupper:eF,base32upper:XH,base32z:sF},Symbol.toStringTag,{value:"Module"})),oF=Up({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),cF=Up({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),lF=Object.freeze(Object.defineProperty({__proto__:null,base36:oF,base36upper:cF},Symbol.toStringTag,{value:"Module"})),uF=Up({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),hF=Up({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),fF=Object.freeze(Object.defineProperty({__proto__:null,base58btc:uF,base58flickr:hF},Symbol.toStringTag,{value:"Module"})),dF=Nn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),pF=Nn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),gF=Nn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),yF=Nn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),mF=Object.freeze(Object.defineProperty({__proto__:null,base64:dF,base64pad:pF,base64url:gF,base64urlpad:yF},Symbol.toStringTag,{value:"Module"})),jI=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),wF=jI.reduce((n,e,t)=>(n[t]=e,n),[]),bF=jI.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function vF(n){return n.reduce((e,t)=>(e+=wF[t],e),"")}function EF(n){const e=[];for(const t of n){const r=bF[t.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(r)}return new Uint8Array(e)}const AF=s0({prefix:"🚀",name:"base256emoji",encode:vF,decode:EF}),xF=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:AF},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const WT={...zH,...FH,...VH,...KH,...JH,...aF,...lF,...fF,...mF,...xF};function zI(n,e,t,r){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:r}}}const e8=zI("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),b1=zI("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=kI(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),HI={utf8:e8,"utf-8":e8,hex:WT.base16,latin1:b1,ascii:b1,binary:b1,...WT};function Ei(n,e="utf8"){const t=HI[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?E2(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}function Or(n,e="utf8"){const t=HI[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):t.encoder.encode(n).substring(1)}const SF={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var v1,t8;function FI(){if(t8)return v1;t8=1;const n="Input must be an string, Buffer or Uint8Array";function e(c){let u;if(c instanceof Uint8Array)u=c;else if(typeof c=="string")u=new TextEncoder().encode(c);else throw new Error(n);return u}function t(c){return Array.prototype.map.call(c,function(u){return(u<16?"0":"")+u.toString(16)}).join("")}function r(c){return(4294967296+c).toString(16).substring(1)}function i(c,u,h){let d=`
`+c+" = ";for(let p=0;p<u.length;p+=2){if(h===32)d+=r(u[p]).toUpperCase(),d+=" ",d+=r(u[p+1]).toUpperCase();else if(h===64)d+=r(u[p+1]).toUpperCase(),d+=r(u[p]).toUpperCase();else throw new Error("Invalid size "+h);p%6===4?d+=`
`+new Array(c.length+4).join(" "):p<u.length-2&&(d+=" ")}console.log(d)}function a(c,u,h){let d=new Date().getTime();const p=new Uint8Array(u);for(let w=0;w<u;w++)p[w]=w%256;const y=new Date().getTime();console.log("Generated random input in "+(y-d)+"ms"),d=y;for(let w=0;w<h;w++){const v=c(p),b=new Date().getTime(),E=b-d;d=b,console.log("Hashed in "+E+"ms: "+v.substring(0,20)+"..."),console.log(Math.round(u/(1<<20)/(E/1e3)*100)/100+" MB PER SECOND")}}return v1={normalizeInput:e,toHex:t,debugPrint:i,testSpeed:a},v1}var E1,n8;function OF(){if(n8)return E1;n8=1;const n=FI();function e(S,B,D){const U=S[B]+S[D];let I=S[B+1]+S[D+1];U>=4294967296&&I++,S[B]=U,S[B+1]=I}function t(S,B,D,U){let I=S[B]+D;D<0&&(I+=4294967296);let N=S[B+1]+U;I>=4294967296&&N++,S[B]=I,S[B+1]=N}function r(S,B){return S[B]^S[B+1]<<8^S[B+2]<<16^S[B+3]<<24}function i(S,B,D,U,I,N){const k=d[I],$=d[I+1],P=d[N],L=d[N+1];e(h,S,B),t(h,S,k,$);let z=h[U]^h[S],V=h[U+1]^h[S+1];h[U]=V,h[U+1]=z,e(h,D,U),z=h[B]^h[D],V=h[B+1]^h[D+1],h[B]=z>>>24^V<<8,h[B+1]=V>>>24^z<<8,e(h,S,B),t(h,S,P,L),z=h[U]^h[S],V=h[U+1]^h[S+1],h[U]=z>>>16^V<<16,h[U+1]=V>>>16^z<<16,e(h,D,U),z=h[B]^h[D],V=h[B+1]^h[D+1],h[B]=V>>>31^z<<1,h[B+1]=z>>>31^V<<1}const a=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),c=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],u=new Uint8Array(c.map(function(S){return S*2})),h=new Uint32Array(32),d=new Uint32Array(32);function p(S,B){let D=0;for(D=0;D<16;D++)h[D]=S.h[D],h[D+16]=a[D];for(h[24]=h[24]^S.t,h[25]=h[25]^S.t/4294967296,B&&(h[28]=~h[28],h[29]=~h[29]),D=0;D<32;D++)d[D]=r(S.b,4*D);for(D=0;D<12;D++)i(0,8,16,24,u[D*16+0],u[D*16+1]),i(2,10,18,26,u[D*16+2],u[D*16+3]),i(4,12,20,28,u[D*16+4],u[D*16+5]),i(6,14,22,30,u[D*16+6],u[D*16+7]),i(0,10,20,30,u[D*16+8],u[D*16+9]),i(2,12,22,24,u[D*16+10],u[D*16+11]),i(4,14,16,26,u[D*16+12],u[D*16+13]),i(6,8,18,28,u[D*16+14],u[D*16+15]);for(D=0;D<16;D++)S.h[D]=S.h[D]^h[D]^h[D+16]}const y=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function w(S,B,D,U){if(S===0||S>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(B&&B.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(D&&D.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(U&&U.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const I={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:S};y.fill(0),y[0]=S,B&&(y[1]=B.length),y[2]=1,y[3]=1,D&&y.set(D,32),U&&y.set(U,48);for(let N=0;N<16;N++)I.h[N]=a[N]^r(y,N*4);return B&&(v(I,B),I.c=128),I}function v(S,B){for(let D=0;D<B.length;D++)S.c===128&&(S.t+=S.c,p(S,!1),S.c=0),S.b[S.c++]=B[D]}function b(S){for(S.t+=S.c;S.c<128;)S.b[S.c++]=0;p(S,!0);const B=new Uint8Array(S.outlen);for(let D=0;D<S.outlen;D++)B[D]=S.h[D>>2]>>8*(D&3);return B}function E(S,B,D,U,I){D=D||64,S=n.normalizeInput(S),U&&(U=n.normalizeInput(U)),I&&(I=n.normalizeInput(I));const N=w(D,B,U,I);return v(N,S),b(N)}function A(S,B,D,U,I){const N=E(S,B,D,U,I);return n.toHex(N)}return E1={blake2b:E,blake2bHex:A,blake2bInit:w,blake2bUpdate:v,blake2bFinal:b},E1}var A1,r8;function TF(){if(r8)return A1;r8=1;const n=FI();function e(b,E){return b[E]^b[E+1]<<8^b[E+2]<<16^b[E+3]<<24}function t(b,E,A,S,B,D){c[b]=c[b]+c[E]+B,c[S]=r(c[S]^c[b],16),c[A]=c[A]+c[S],c[E]=r(c[E]^c[A],12),c[b]=c[b]+c[E]+D,c[S]=r(c[S]^c[b],8),c[A]=c[A]+c[S],c[E]=r(c[E]^c[A],7)}function r(b,E){return b>>>E^b<<32-E}const i=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),a=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),c=new Uint32Array(16),u=new Uint32Array(16);function h(b,E){let A=0;for(A=0;A<8;A++)c[A]=b.h[A],c[A+8]=i[A];for(c[12]^=b.t,c[13]^=b.t/4294967296,E&&(c[14]=~c[14]),A=0;A<16;A++)u[A]=e(b.b,4*A);for(A=0;A<10;A++)t(0,4,8,12,u[a[A*16+0]],u[a[A*16+1]]),t(1,5,9,13,u[a[A*16+2]],u[a[A*16+3]]),t(2,6,10,14,u[a[A*16+4]],u[a[A*16+5]]),t(3,7,11,15,u[a[A*16+6]],u[a[A*16+7]]),t(0,5,10,15,u[a[A*16+8]],u[a[A*16+9]]),t(1,6,11,12,u[a[A*16+10]],u[a[A*16+11]]),t(2,7,8,13,u[a[A*16+12]],u[a[A*16+13]]),t(3,4,9,14,u[a[A*16+14]],u[a[A*16+15]]);for(A=0;A<8;A++)b.h[A]^=c[A]^c[A+8]}function d(b,E){if(!(b>0&&b<=32))throw new Error("Incorrect output length, should be in [1, 32]");const A=E?E.length:0;if(E&&!(A>0&&A<=32))throw new Error("Incorrect key length, should be in [1, 32]");const S={h:new Uint32Array(i),b:new Uint8Array(64),c:0,t:0,outlen:b};return S.h[0]^=16842752^A<<8^b,A>0&&(p(S,E),S.c=64),S}function p(b,E){for(let A=0;A<E.length;A++)b.c===64&&(b.t+=b.c,h(b,!1),b.c=0),b.b[b.c++]=E[A]}function y(b){for(b.t+=b.c;b.c<64;)b.b[b.c++]=0;h(b,!0);const E=new Uint8Array(b.outlen);for(let A=0;A<b.outlen;A++)E[A]=b.h[A>>2]>>8*(A&3)&255;return E}function w(b,E,A){A=A||32,b=n.normalizeInput(b);const S=d(A,E);return p(S,b),y(S)}function v(b,E,A){const S=w(b,E,A);return n.toHex(S)}return A1={blake2s:w,blake2sHex:v,blake2sInit:d,blake2sUpdate:p,blake2sFinal:y},A1}var x1,i8;function DF(){if(i8)return x1;i8=1;const n=OF(),e=TF();return x1={blake2b:n.blake2b,blake2bHex:n.blake2bHex,blake2bInit:n.blake2bInit,blake2bUpdate:n.blake2bUpdate,blake2bFinal:n.blake2bFinal,blake2s:e.blake2s,blake2sHex:e.blake2sHex,blake2sInit:e.blake2sInit,blake2sUpdate:e.blake2sUpdate,blake2sFinal:e.blake2sFinal},x1}var CF=DF(),_F={};const NF=":";function qo(n){const[e,t]=n.split(NF);return{namespace:e,reference:t}}function s8(n,e=[]){const t=[];return Object.keys(n).forEach(r=>{if(e.length&&!e.includes(r))return;const i=n[r];t.push(...i.accounts)}),t}function qI(n,e){return n.includes(":")?[n]:e.chains||[]}var IF=Object.defineProperty,RF=Object.defineProperties,BF=Object.getOwnPropertyDescriptors,a8=Object.getOwnPropertySymbols,PF=Object.prototype.hasOwnProperty,UF=Object.prototype.propertyIsEnumerable,tE=(n,e,t)=>e in n?IF(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,o8=(n,e)=>{for(var t in e||(e={}))PF.call(e,t)&&tE(n,t,e[t]);if(a8)for(var t of a8(e))UF.call(e,t)&&tE(n,t,e[t]);return n},MF=(n,e)=>RF(n,BF(e)),c8=(n,e,t)=>tE(n,typeof e!="symbol"?e+"":e,t);const $F="ReactNative",Kr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},kF="js";function vm(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Zo(){return!Da.getDocument()&&!!Da.getNavigator()&&navigator.product===$F}function LF(){return Zo()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function jF(){return Zo()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Wh(){return!vm()&&!!Da.getNavigator()&&!!Da.getDocument()}function Mp(){return Zo()?Kr.reactNative:vm()?Kr.node:Wh()?Kr.browser:Kr.unknown}function l8(){var n;try{return Zo()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(n=global.Application)==null?void 0:n.applicationId:void 0}catch{return}}function zF(n,e){const t=new URLSearchParams(n);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const i=e[r];i!==void 0&&t.set(r,i)}return t.toString()}function HF(n){var e,t;const r=VI();try{return n!=null&&n.url&&r.url&&new URL(n.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${n.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),n.url=r.url),(e=n==null?void 0:n.icons)!=null&&e.length&&n.icons.length>0&&(n.icons=n.icons.filter(i=>i!=="")),MF(o8(o8({},r),n),{url:(n==null?void 0:n.url)||r.url,name:(n==null?void 0:n.name)||r.name,description:(n==null?void 0:n.description)||r.description,icons:(t=n==null?void 0:n.icons)!=null&&t.length&&n.icons.length>0?n.icons:r.icons})}catch(i){return console.warn("Error populating app metadata",i),n||r}}function VI(){return e9.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function FF(){if(Mp()===Kr.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:t,Version:r}=global.Platform;return[t,r].join("-")}const n=wL();if(n===null)return"unknown";const e=n.os?n.os.replace(" ","").toLowerCase():"unknown";return n.type==="browser"?[e,n.name,n.version].join("-"):[e,n.version].join("-")}function qF(){var n;const e=Mp();return e===Kr.browser?[e,((n=Da.getLocation())==null?void 0:n.host)||"unknown"].join(":"):e}function GI(n,e,t){const r=FF(),i=qF();return[[n,e].join("-"),[kF,t].join("-"),r,i].join("/")}function VF({protocol:n,version:e,relayUrl:t,sdkVersion:r,auth:i,projectId:a,useOnCloseEvent:c,bundleId:u,packageName:h}){const d=t.split("?"),p=GI(n,e,r),y={auth:i,ua:p,projectId:a,useOnCloseEvent:c,packageName:h||void 0,bundleId:u||void 0},w=zF(d[1]||"",y);return d[0]+"?"+w}function $c(n,e){return n.filter(t=>e.includes(t)).length===n.length}function nE(n){return Object.fromEntries(n.entries())}function rE(n){return new Map(Object.entries(n))}function Sc(n=Ae.FIVE_MINUTES,e){const t=Ae.toMiliseconds(n||Ae.FIVE_MINUTES);let r,i,a,c;return{resolve:u=>{a&&r&&(clearTimeout(a),r(u),c=Promise.resolve(u))},reject:u=>{a&&i&&(clearTimeout(a),i(u))},done:()=>new Promise((u,h)=>{if(c)return u(c);a=setTimeout(()=>{const d=new Error(e);c=Promise.reject(d),h(d)},t),r=u,i=h})}}function Os(n,e,t){return new Promise(async(r,i)=>{const a=setTimeout(()=>i(new Error(t)),e);try{const c=await n;r(c)}catch(c){i(c)}clearTimeout(a)})}function KI(n,e){if(typeof e=="string"&&e.startsWith(`${n}:`))return e;if(n.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(n.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${n}`)}function GF(n){return KI("topic",n)}function KF(n){return KI("id",n)}function QI(n){const[e,t]=n.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")r.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))r.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return r}function Yt(n,e){return Ae.fromMiliseconds(Date.now()+Ae.toMiliseconds(n))}function Es(n){return Date.now()>=Ae.toMiliseconds(n)}function ot(n,e){return`${n}${e?`:${e}`:""}`}function Ts(n=[],e=[]){return[...new Set([...n,...e])]}async function QF({id:n,topic:e,wcDeepLink:t}){var r;try{if(!t)return;const i=typeof t=="string"?JSON.parse(t):t,a=i==null?void 0:i.href;if(typeof a!="string")return;const c=YF(a,n,e),u=Mp();if(u===Kr.browser){if(!((r=Da.getDocument())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}JF(c)}else u===Kr.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(c)}catch(i){console.error(i)}}function YF(n,e,t){const r=`requestId=${e}&sessionTopic=${t}`;n.endsWith("/")&&(n=n.slice(0,-1));let i=`${n}`;if(n.startsWith("https://t.me")){const a=n.includes("?")?"&startapp=":"?startapp=";i=`${i}${a}${eq(r,!0)}`}else i=`${i}/wc?${r}`;return i}function JF(n){let e="_self";WF()?e="_top":(XF()||n.startsWith("https://")||n.startsWith("http://"))&&(e="_blank"),window.open(n,e,"noreferrer noopener")}async function ZF(n,e){let t="";try{if(Wh()&&(t=localStorage.getItem(e),t))return t;t=await n.getItem(e)}catch(r){console.error(r)}return t}function u8(n,e){if(!n.includes(e))return null;const t=n.split(/([&,?,=])/),r=t.indexOf(e);return t[r+2]}function h8(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}function A2(){return typeof process<"u"&&_F.IS_VITEST==="true"}function XF(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function WF(){try{return window.self!==window.top}catch{return!1}}function eq(n,e=!1){const t=Buffer.from(n).toString("base64");return e?t.replace(/[=]/g,""):t}function YI(n){return Buffer.from(n,"base64").toString("utf-8")}function tq(n){return new Promise(e=>setTimeout(e,n))}let nq=class{constructor({limit:e}){c8(this,"limit"),c8(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){const t=this.set.values().next().value;t&&this.set.delete(t)}this.set.add(e)}}has(e){return this.set.has(e)}};const yy=BigInt(2**32-1),f8=BigInt(32);function JI(n,e=!1){return e?{h:Number(n&yy),l:Number(n>>f8&yy)}:{h:Number(n>>f8&yy)|0,l:Number(n&yy)|0}}function ZI(n,e=!1){const t=n.length;let r=new Uint32Array(t),i=new Uint32Array(t);for(let a=0;a<t;a++){const{h:c,l:u}=JI(n[a],e);[r[a],i[a]]=[c,u]}return[r,i]}const d8=(n,e,t)=>n>>>t,p8=(n,e,t)=>n<<32-t|e>>>t,vo=(n,e,t)=>n>>>t|e<<32-t,Eo=(n,e,t)=>n<<32-t|e>>>t,Nd=(n,e,t)=>n<<64-t|e>>>t-32,Id=(n,e,t)=>n>>>t-32|e<<64-t,rq=(n,e)=>e,iq=(n,e)=>n,sq=(n,e,t)=>n<<t|e>>>32-t,aq=(n,e,t)=>e<<t|n>>>32-t,oq=(n,e,t)=>e<<t-32|n>>>64-t,cq=(n,e,t)=>n<<t-32|e>>>64-t;function Mi(n,e,t,r){const i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}const x2=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),S2=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,lq=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),uq=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,hq=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),fq=(n,e,t,r,i,a)=>e+t+r+i+a+(n/2**32|0)|0,bu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function O2(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function _a(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function xi(n,...e){if(!O2(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function T2(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");_a(n.outputLen),_a(n.blockLen)}function Qo(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function D2(n,e){xi(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function sp(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function Si(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function S1(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function as(n,e){return n<<32-e|n>>>e}const XI=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function WI(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}const ea=XI?n=>n:n=>WI(n);function dq(n){for(let e=0;e<n.length;e++)n[e]=WI(n[e]);return n}const Ao=XI?n=>n:dq,eR=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",pq=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function ap(n){if(xi(n),eR)return n.toHex();let e="";for(let t=0;t<n.length;t++)e+=pq[n[t]];return e}const Js={_0:48,_9:57,A:65,F:70,a:97,f:102};function g8(n){if(n>=Js._0&&n<=Js._9)return n-Js._0;if(n>=Js.A&&n<=Js.F)return n-(Js.A-10);if(n>=Js.a&&n<=Js.f)return n-(Js.a-10)}function C2(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(eR)return Uint8Array.fromHex(n);const e=n.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let i=0,a=0;i<t;i++,a+=2){const c=g8(n.charCodeAt(a)),u=g8(n.charCodeAt(a+1));if(c===void 0||u===void 0){const h=n[a]+n[a+1];throw new Error('hex string expected, got non-hex character "'+h+'" at index '+a)}r[i]=c*16+u}return r}function gq(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function Ki(n){return typeof n=="string"&&(n=gq(n)),xi(n),n}function kc(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];xi(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const a=n[r];t.set(a,i),i+=a.length}return t}let a0=class{};function $p(n){const e=r=>n().update(Ki(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function yq(n){const e=(r,i)=>n(i).update(Ki(r)).digest(),t=n({});return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>n(r),e}function ef(n=32){if(bu&&typeof bu.getRandomValues=="function")return bu.getRandomValues(new Uint8Array(n));if(bu&&typeof bu.randomBytes=="function")return Uint8Array.from(bu.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}const mq=BigInt(0),gd=BigInt(1),wq=BigInt(2),bq=BigInt(7),vq=BigInt(256),Eq=BigInt(113),tR=[],nR=[],rR=[];for(let n=0,e=gd,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],tR.push(2*(5*r+t)),nR.push((n+1)*(n+2)/2%64);let i=mq;for(let a=0;a<7;a++)e=(e<<gd^(e>>bq)*Eq)%vq,e&wq&&(i^=gd<<(gd<<BigInt(a))-gd);rR.push(i)}const iR=ZI(rR,!0),Aq=iR[0],xq=iR[1],y8=(n,e,t)=>t>32?oq(n,e,t):sq(n,e,t),m8=(n,e,t)=>t>32?cq(n,e,t):aq(n,e,t);function Sq(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let c=0;c<10;c++)t[c]=n[c]^n[c+10]^n[c+20]^n[c+30]^n[c+40];for(let c=0;c<10;c+=2){const u=(c+8)%10,h=(c+2)%10,d=t[h],p=t[h+1],y=y8(d,p,1)^t[u],w=m8(d,p,1)^t[u+1];for(let v=0;v<50;v+=10)n[c+v]^=y,n[c+v+1]^=w}let i=n[2],a=n[3];for(let c=0;c<24;c++){const u=nR[c],h=y8(i,a,u),d=m8(i,a,u),p=tR[c];i=n[p],a=n[p+1],n[p]=h,n[p+1]=d}for(let c=0;c<50;c+=10){for(let u=0;u<10;u++)t[u]=n[c+u];for(let u=0;u<10;u++)n[c+u]^=~t[(u+2)%10]&t[(u+4)%10]}n[0]^=Aq[r],n[1]^=xq[r]}Si(t)}let Oq=class sR extends a0{constructor(e,t,r,i=!1,a=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=a,_a(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=sp(this.state)}clone(){return this._cloneInto()}keccak(){Ao(this.state32),Sq(this.state32,this.rounds),Ao(this.state32),this.posOut=0,this.pos=0}update(e){Qo(this),e=Ki(e),xi(e);const{blockLen:t,state:r}=this,i=e.length;for(let a=0;a<i;){const c=Math.min(t-this.pos,i-a);for(let u=0;u<c;u++)r[this.pos++]^=e[a++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(t&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Qo(this,!1),xi(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,a=e.length;i<a;){this.posOut>=r&&this.keccak();const c=Math.min(r-this.posOut,a-i);e.set(t.subarray(this.posOut,this.posOut+c),i),this.posOut+=c,i+=c}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return _a(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(D2(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Si(this.state)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:a,enableXOF:c}=this;return e||(e=new sR(t,r,i,c,a)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=a,e.suffix=r,e.outputLen=i,e.enableXOF=c,e.destroyed=this.destroyed,e}};const Tq=(n,e,t)=>$p(()=>new Oq(e,n,t)),Dq=Tq(1,136,256/8);function Cq(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),a=BigInt(4294967295),c=Number(t>>i&a),u=Number(t&a),h=r?4:0,d=r?0:4;n.setUint32(e+h,c,r),n.setUint32(e+d,u,r)}function _q(n,e,t){return n&e^~n&t}function Nq(n,e,t){return n&e^n&t^e&t}let aR=class extends a0{constructor(e,t,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=S1(this.buffer)}update(e){Qo(this),e=Ki(e),xi(e);const{view:t,buffer:r,blockLen:i}=this,a=e.length;for(let c=0;c<a;){const u=Math.min(i-this.pos,a-c);if(u===i){const h=S1(e);for(;i<=a-c;c+=i)this.process(h,c);continue}r.set(e.subarray(c,c+u),this.pos),this.pos+=u,c+=u,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Qo(this),D2(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:a}=this;let{pos:c}=this;t[c++]=128,Si(this.buffer.subarray(c)),this.padOffset>i-c&&(this.process(r,0),c=0);for(let y=c;y<i;y++)t[y]=0;Cq(r,i-8,BigInt(this.length*8),a),this.process(r,0);const u=S1(e),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=h/4,p=this.get();if(d>p.length)throw new Error("_sha2: outputLen bigger than state");for(let y=0;y<d;y++)u.setUint32(4*y,p[y],a)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:a,destroyed:c,pos:u}=this;return e.destroyed=c,e.finished=a,e.length=i,e.pos=u,i%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const lo=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Mn=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),$n=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Iq=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),uo=new Uint32Array(64);let Rq=class extends aR{constructor(e=32){super(64,e,8,!1),this.A=lo[0]|0,this.B=lo[1]|0,this.C=lo[2]|0,this.D=lo[3]|0,this.E=lo[4]|0,this.F=lo[5]|0,this.G=lo[6]|0,this.H=lo[7]|0}get(){const{A:e,B:t,C:r,D:i,E:a,F:c,G:u,H:h}=this;return[e,t,r,i,a,c,u,h]}set(e,t,r,i,a,c,u,h){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=a|0,this.F=c|0,this.G=u|0,this.H=h|0}process(e,t){for(let y=0;y<16;y++,t+=4)uo[y]=e.getUint32(t,!1);for(let y=16;y<64;y++){const w=uo[y-15],v=uo[y-2],b=as(w,7)^as(w,18)^w>>>3,E=as(v,17)^as(v,19)^v>>>10;uo[y]=E+uo[y-7]+b+uo[y-16]|0}let{A:r,B:i,C:a,D:c,E:u,F:h,G:d,H:p}=this;for(let y=0;y<64;y++){const w=as(u,6)^as(u,11)^as(u,25),v=p+w+_q(u,h,d)+Iq[y]+uo[y]|0,b=(as(r,2)^as(r,13)^as(r,22))+Nq(r,i,a)|0;p=d,d=h,h=u,u=c+v|0,c=a,a=i,i=r,r=v+b|0}r=r+this.A|0,i=i+this.B|0,a=a+this.C|0,c=c+this.D|0,u=u+this.E|0,h=h+this.F|0,d=d+this.G|0,p=p+this.H|0,this.set(r,i,a,c,u,h,d,p)}roundClean(){Si(uo)}destroy(){this.set(0,0,0,0,0,0,0,0),Si(this.buffer)}};const oR=ZI(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Bq=oR[0],Pq=oR[1],ho=new Uint32Array(80),fo=new Uint32Array(80);let _2=class extends aR{constructor(e=64){super(128,e,16,!1),this.Ah=$n[0]|0,this.Al=$n[1]|0,this.Bh=$n[2]|0,this.Bl=$n[3]|0,this.Ch=$n[4]|0,this.Cl=$n[5]|0,this.Dh=$n[6]|0,this.Dl=$n[7]|0,this.Eh=$n[8]|0,this.El=$n[9]|0,this.Fh=$n[10]|0,this.Fl=$n[11]|0,this.Gh=$n[12]|0,this.Gl=$n[13]|0,this.Hh=$n[14]|0,this.Hl=$n[15]|0}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:a,Cl:c,Dh:u,Dl:h,Eh:d,El:p,Fh:y,Fl:w,Gh:v,Gl:b,Hh:E,Hl:A}=this;return[e,t,r,i,a,c,u,h,d,p,y,w,v,b,E,A]}set(e,t,r,i,a,c,u,h,d,p,y,w,v,b,E,A){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=a|0,this.Cl=c|0,this.Dh=u|0,this.Dl=h|0,this.Eh=d|0,this.El=p|0,this.Fh=y|0,this.Fl=w|0,this.Gh=v|0,this.Gl=b|0,this.Hh=E|0,this.Hl=A|0}process(e,t){for(let D=0;D<16;D++,t+=4)ho[D]=e.getUint32(t),fo[D]=e.getUint32(t+=4);for(let D=16;D<80;D++){const U=ho[D-15]|0,I=fo[D-15]|0,N=vo(U,I,1)^vo(U,I,8)^d8(U,I,7),k=Eo(U,I,1)^Eo(U,I,8)^p8(U,I,7),$=ho[D-2]|0,P=fo[D-2]|0,L=vo($,P,19)^Nd($,P,61)^d8($,P,6),z=Eo($,P,19)^Id($,P,61)^p8($,P,6),V=lq(k,z,fo[D-7],fo[D-16]),ne=uq(V,N,L,ho[D-7],ho[D-16]);ho[D]=ne|0,fo[D]=V|0}let{Ah:r,Al:i,Bh:a,Bl:c,Ch:u,Cl:h,Dh:d,Dl:p,Eh:y,El:w,Fh:v,Fl:b,Gh:E,Gl:A,Hh:S,Hl:B}=this;for(let D=0;D<80;D++){const U=vo(y,w,14)^vo(y,w,18)^Nd(y,w,41),I=Eo(y,w,14)^Eo(y,w,18)^Id(y,w,41),N=y&v^~y&E,k=w&b^~w&A,$=hq(B,I,k,Pq[D],fo[D]),P=fq($,S,U,N,Bq[D],ho[D]),L=$|0,z=vo(r,i,28)^Nd(r,i,34)^Nd(r,i,39),V=Eo(r,i,28)^Id(r,i,34)^Id(r,i,39),ne=r&a^r&u^a&u,Z=i&c^i&h^c&h;S=E|0,B=A|0,E=v|0,A=b|0,v=y|0,b=w|0,{h:y,l:w}=Mi(d|0,p|0,P|0,L|0),d=u|0,p=h|0,u=a|0,h=c|0,a=r|0,c=i|0;const C=x2(L,V,Z);r=S2(C,P,z,ne),i=C|0}({h:r,l:i}=Mi(this.Ah|0,this.Al|0,r|0,i|0)),{h:a,l:c}=Mi(this.Bh|0,this.Bl|0,a|0,c|0),{h:u,l:h}=Mi(this.Ch|0,this.Cl|0,u|0,h|0),{h:d,l:p}=Mi(this.Dh|0,this.Dl|0,d|0,p|0),{h:y,l:w}=Mi(this.Eh|0,this.El|0,y|0,w|0),{h:v,l:b}=Mi(this.Fh|0,this.Fl|0,v|0,b|0),{h:E,l:A}=Mi(this.Gh|0,this.Gl|0,E|0,A|0),{h:S,l:B}=Mi(this.Hh|0,this.Hl|0,S|0,B|0),this.set(r,i,a,c,u,h,d,p,y,w,v,b,E,A,S,B)}roundClean(){Si(ho,fo)}destroy(){Si(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Uq=class extends _2{constructor(){super(48),this.Ah=Mn[0]|0,this.Al=Mn[1]|0,this.Bh=Mn[2]|0,this.Bl=Mn[3]|0,this.Ch=Mn[4]|0,this.Cl=Mn[5]|0,this.Dh=Mn[6]|0,this.Dl=Mn[7]|0,this.Eh=Mn[8]|0,this.El=Mn[9]|0,this.Fh=Mn[10]|0,this.Fl=Mn[11]|0,this.Gh=Mn[12]|0,this.Gl=Mn[13]|0,this.Hh=Mn[14]|0,this.Hl=Mn[15]|0}};const kn=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class Mq extends _2{constructor(){super(32),this.Ah=kn[0]|0,this.Al=kn[1]|0,this.Bh=kn[2]|0,this.Bl=kn[3]|0,this.Ch=kn[4]|0,this.Cl=kn[5]|0,this.Dh=kn[6]|0,this.Dl=kn[7]|0,this.Eh=kn[8]|0,this.El=kn[9]|0,this.Fh=kn[10]|0,this.Fl=kn[11]|0,this.Gh=kn[12]|0,this.Gl=kn[13]|0,this.Hh=kn[14]|0,this.Hl=kn[15]|0}}const o0=$p(()=>new Rq),$q=$p(()=>new _2),kq=$p(()=>new Uq),Lq=$p(()=>new Mq),jq=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),tn=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),xe=new Uint32Array(32);function po(n,e,t,r,i,a){const c=i[a],u=i[a+1];let h=xe[2*n],d=xe[2*n+1],p=xe[2*e],y=xe[2*e+1],w=xe[2*t],v=xe[2*t+1],b=xe[2*r],E=xe[2*r+1],A=x2(h,p,c);d=S2(A,d,y,u),h=A|0,{Dh:E,Dl:b}={Dh:E^d,Dl:b^h},{Dh:E,Dl:b}={Dh:rq(E,b),Dl:iq(E)},{h:v,l:w}=Mi(v,w,E,b),{Bh:y,Bl:p}={Bh:y^v,Bl:p^w},{Bh:y,Bl:p}={Bh:vo(y,p,24),Bl:Eo(y,p,24)},xe[2*n]=h,xe[2*n+1]=d,xe[2*e]=p,xe[2*e+1]=y,xe[2*t]=w,xe[2*t+1]=v,xe[2*r]=b,xe[2*r+1]=E}function go(n,e,t,r,i,a){const c=i[a],u=i[a+1];let h=xe[2*n],d=xe[2*n+1],p=xe[2*e],y=xe[2*e+1],w=xe[2*t],v=xe[2*t+1],b=xe[2*r],E=xe[2*r+1],A=x2(h,p,c);d=S2(A,d,y,u),h=A|0,{Dh:E,Dl:b}={Dh:E^d,Dl:b^h},{Dh:E,Dl:b}={Dh:vo(E,b,16),Dl:Eo(E,b,16)},{h:v,l:w}=Mi(v,w,E,b),{Bh:y,Bl:p}={Bh:y^v,Bl:p^w},{Bh:y,Bl:p}={Bh:Nd(y,p,63),Bl:Id(y,p,63)},xe[2*n]=h,xe[2*n+1]=d,xe[2*e]=p,xe[2*e+1]=y,xe[2*t]=w,xe[2*t+1]=v,xe[2*r]=b,xe[2*r+1]=E}function zq(n,e={},t,r,i){if(_a(t),n<0||n>t)throw new Error("outputLen bigger than keyLen");const{key:a,salt:c,personalization:u}=e;if(a!==void 0&&(a.length<1||a.length>t))throw new Error("key length must be undefined or 1.."+t);if(c!==void 0&&c.length!==r)throw new Error("salt must be undefined or "+r);if(u!==void 0&&u.length!==i)throw new Error("personalization must be undefined or "+i)}class Hq extends a0{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,_a(e),_a(t),this.blockLen=e,this.outputLen=t,this.buffer=new Uint8Array(e),this.buffer32=sp(this.buffer)}update(e){Qo(this),e=Ki(e),xi(e);const{blockLen:t,buffer:r,buffer32:i}=this,a=e.length,c=e.byteOffset,u=e.buffer;for(let h=0;h<a;){this.pos===t&&(Ao(i),this.compress(i,0,!1),Ao(i),this.pos=0);const d=Math.min(t-this.pos,a-h),p=c+h;if(d===t&&!(p%4)&&h+d<a){const y=new Uint32Array(u,p,Math.floor((a-h)/4));Ao(y);for(let w=0;h+t<a;w+=i.length,h+=t)this.length+=t,this.compress(y,w,!1);Ao(y);continue}r.set(e.subarray(h,h+d),this.pos),this.pos+=d,this.length+=d,h+=d}return this}digestInto(e){Qo(this),D2(e,this);const{pos:t,buffer32:r}=this;this.finished=!0,Si(this.buffer.subarray(t)),Ao(r),this.compress(r,0,!0),Ao(r);const i=sp(e);this.get().forEach((a,c)=>i[c]=ea(a))}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){const{buffer:t,length:r,finished:i,destroyed:a,outputLen:c,pos:u}=this;return e||(e=new this.constructor({dkLen:c})),e.set(...this.get()),e.buffer.set(t),e.destroyed=a,e.finished=i,e.length=r,e.pos=u,e.outputLen=c,e}clone(){return this._cloneInto()}}class Fq extends Hq{constructor(e={}){const t=e.dkLen===void 0?64:e.dkLen;super(128,t),this.v0l=tn[0]|0,this.v0h=tn[1]|0,this.v1l=tn[2]|0,this.v1h=tn[3]|0,this.v2l=tn[4]|0,this.v2h=tn[5]|0,this.v3l=tn[6]|0,this.v3h=tn[7]|0,this.v4l=tn[8]|0,this.v4h=tn[9]|0,this.v5l=tn[10]|0,this.v5h=tn[11]|0,this.v6l=tn[12]|0,this.v6h=tn[13]|0,this.v7l=tn[14]|0,this.v7h=tn[15]|0,zq(t,e,64,16,16);let{key:r,personalization:i,salt:a}=e,c=0;if(r!==void 0&&(r=Ki(r),c=r.length),this.v0l^=this.outputLen|c<<8|65536|1<<24,a!==void 0){a=Ki(a);const u=sp(a);this.v4l^=ea(u[0]),this.v4h^=ea(u[1]),this.v5l^=ea(u[2]),this.v5h^=ea(u[3])}if(i!==void 0){i=Ki(i);const u=sp(i);this.v6l^=ea(u[0]),this.v6h^=ea(u[1]),this.v7l^=ea(u[2]),this.v7h^=ea(u[3])}if(r!==void 0){const u=new Uint8Array(this.blockLen);u.set(r),this.update(u)}}get(){let{v0l:e,v0h:t,v1l:r,v1h:i,v2l:a,v2h:c,v3l:u,v3h:h,v4l:d,v4h:p,v5l:y,v5h:w,v6l:v,v6h:b,v7l:E,v7h:A}=this;return[e,t,r,i,a,c,u,h,d,p,y,w,v,b,E,A]}set(e,t,r,i,a,c,u,h,d,p,y,w,v,b,E,A){this.v0l=e|0,this.v0h=t|0,this.v1l=r|0,this.v1h=i|0,this.v2l=a|0,this.v2h=c|0,this.v3l=u|0,this.v3h=h|0,this.v4l=d|0,this.v4h=p|0,this.v5l=y|0,this.v5h=w|0,this.v6l=v|0,this.v6h=b|0,this.v7l=E|0,this.v7h=A|0}compress(e,t,r){this.get().forEach((h,d)=>xe[d]=h),xe.set(tn,16);let{h:i,l:a}=JI(BigInt(this.length));xe[24]=tn[8]^a,xe[25]=tn[9]^i,r&&(xe[28]=~xe[28],xe[29]=~xe[29]);let c=0;const u=jq;for(let h=0;h<12;h++)po(0,4,8,12,e,t+2*u[c++]),go(0,4,8,12,e,t+2*u[c++]),po(1,5,9,13,e,t+2*u[c++]),go(1,5,9,13,e,t+2*u[c++]),po(2,6,10,14,e,t+2*u[c++]),go(2,6,10,14,e,t+2*u[c++]),po(3,7,11,15,e,t+2*u[c++]),go(3,7,11,15,e,t+2*u[c++]),po(0,5,10,15,e,t+2*u[c++]),go(0,5,10,15,e,t+2*u[c++]),po(1,6,11,12,e,t+2*u[c++]),go(1,6,11,12,e,t+2*u[c++]),po(2,7,8,13,e,t+2*u[c++]),go(2,7,8,13,e,t+2*u[c++]),po(3,4,9,14,e,t+2*u[c++]),go(3,4,9,14,e,t+2*u[c++]);this.v0l^=xe[0]^xe[16],this.v0h^=xe[1]^xe[17],this.v1l^=xe[2]^xe[18],this.v1h^=xe[3]^xe[19],this.v2l^=xe[4]^xe[20],this.v2h^=xe[5]^xe[21],this.v3l^=xe[6]^xe[22],this.v3h^=xe[7]^xe[23],this.v4l^=xe[8]^xe[24],this.v4h^=xe[9]^xe[25],this.v5l^=xe[10]^xe[26],this.v5h^=xe[11]^xe[27],this.v6l^=xe[12]^xe[28],this.v6h^=xe[13]^xe[29],this.v7l^=xe[14]^xe[30],this.v7h^=xe[15]^xe[31],Si(xe)}destroy(){this.destroyed=!0,Si(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const qq=yq(n=>new Fq(n)),Vq="https://rpc.walletconnect.org/v1";function cR(n){const e=`Ethereum Signed Message:
${n.length}`,t=new TextEncoder().encode(e+n);return"0x"+Buffer.from(Dq(t)).toString("hex")}async function Gq(n,e,t,r,i,a){switch(t.t){case"eip191":return await Kq(n,e,t.s);case"eip1271":return await Qq(n,e,t.s,r,i,a);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${t.t}`)}}async function Kq(n,e,t){return(await F9({hash:cR(e),signature:t})).toLowerCase()===n.toLowerCase()}async function Qq(n,e,t,r,i,a){const c=qo(r);if(!c.namespace||!c.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const u="0x1626ba7e",h="0000000000000000000000000000000000000000000000000000000000000040",d=t.substring(2),p=(d.length/2).toString(16).padStart(64,"0"),y=(e.startsWith("0x")?e:cR(e)).substring(2),w=u+y+h+p+d,v=await fetch(`${a||Vq}/?chainId=${r}&projectId=${i}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:Yq(),jsonrpc:"2.0",method:"eth_call",params:[{to:n,data:w},"latest"]})}),{result:b}=await v.json();return b?b.slice(0,u.length).toLowerCase()===u.toLowerCase():!1}catch(u){return console.error("isValidEip1271Signature: ",u),!1}}function Yq(){return Date.now()+Math.floor(Math.random()*1e3)}function Jq(n){const e=atob(n),t=new Uint8Array(e.length);for(let c=0;c<e.length;c++)t[c]=e.charCodeAt(c);const r=t[0];if(r===0)throw new Error("No signatures found");const i=1+r*64;if(t.length<i)throw new Error("Transaction data too short for claimed signature count");if(t.length<100)throw new Error("Transaction too short");const a=Buffer.from(n,"base64").slice(1,65);return Bp.encode(a)}function Zq(n){const e=new Uint8Array(Buffer.from(n,"base64")),t=Array.from("TransactionData::").map(a=>a.charCodeAt(0)),r=new Uint8Array(t.length+e.length);r.set(t),r.set(e,t.length);const i=qq(r,{dkLen:32});return Bp.encode(i)}function w8(n){const e=new Uint8Array(o0(Xq(n)));return Bp.encode(e)}function Xq(n){if(n instanceof Uint8Array)return n;if(Array.isArray(n))return new Uint8Array(n);if(typeof n=="object"&&n!=null&&n.data)return new Uint8Array(Object.values(n.data));if(typeof n=="object"&&n)return new Uint8Array(Object.values(n));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function b8(n){const e=Buffer.from(n,"base64"),t=D7(e).txn;if(!t)throw new Error("Invalid signed transaction: missing 'txn' field");const r=w7(t),i=Buffer.from("TX"),a=Buffer.concat([i,Buffer.from(r)]),c=Lq(a);return U7.encode(c).replace(/=+$/,"")}function O1(n){const e=[];let t=BigInt(n);for(;t>=BigInt(128);)e.push(Number(t&BigInt(127)|BigInt(128))),t>>=BigInt(7);return e.push(Number(t)),Buffer.from(e)}function Wq(n){const e=Buffer.from(n.signed.bodyBytes,"base64"),t=Buffer.from(n.signed.authInfoBytes,"base64"),r=Buffer.from(n.signature.signature,"base64"),i=[];i.push(Buffer.from([10])),i.push(O1(e.length)),i.push(e),i.push(Buffer.from([18])),i.push(O1(t.length)),i.push(t),i.push(Buffer.from([26])),i.push(O1(r.length)),i.push(r);const a=Buffer.concat(i),c=o0(a);return Buffer.from(c).toString("hex").toUpperCase()}var eV=Object.defineProperty,tV=Object.defineProperties,nV=Object.getOwnPropertyDescriptors,v8=Object.getOwnPropertySymbols,rV=Object.prototype.hasOwnProperty,iV=Object.prototype.propertyIsEnumerable,E8=(n,e,t)=>e in n?eV(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,sV=(n,e)=>{for(var t in e||(e={}))rV.call(e,t)&&E8(n,t,e[t]);if(v8)for(var t of v8(e))iV.call(e,t)&&E8(n,t,e[t]);return n},aV=(n,e)=>tV(n,nV(e));const oV="did:pkh:",N2=n=>n==null?void 0:n.split(":"),cV=n=>{const e=n&&N2(n);if(e)return n.includes(oV)?e[3]:e[1]},iE=n=>{const e=n&&N2(n);if(e)return e[2]+":"+e[3]},Em=n=>{const e=n&&N2(n);if(e)return e.pop()};async function A8(n){const{cacao:e,projectId:t}=n,{s:r,p:i}=e,a=lR(i,i.iss),c=Em(i.iss);return await Gq(c,a,r,iE(i.iss),t)}const lR=(n,e)=>{const t=`${n.domain} wants you to sign in with your Ethereum account:`,r=Em(e);if(!n.aud&&!n.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=n.statement||void 0;const a=`URI: ${n.aud||n.uri}`,c=`Version: ${n.version}`,u=`Chain ID: ${cV(e)}`,h=`Nonce: ${n.nonce}`,d=`Issued At: ${n.iat}`,p=n.exp?`Expiration Time: ${n.exp}`:void 0,y=n.nbf?`Not Before: ${n.nbf}`:void 0,w=n.requestId?`Request ID: ${n.requestId}`:void 0,v=n.resources?`Resources:${n.resources.map(E=>`
- ${E}`).join("")}`:void 0,b=Vy(n.resources);if(b){const E=op(b);i=mV(i,E)}return[t,r,"",i,"",a,c,u,h,d,p,y,w,v].filter(E=>E!=null).join(`
`)};function lV(n){return Buffer.from(JSON.stringify(n)).toString("base64")}function uV(n){return JSON.parse(Buffer.from(n,"base64").toString("utf-8"))}function ml(n){if(!n)throw new Error("No recap provided, value is undefined");if(!n.att)throw new Error("No `att` property found");const e=Object.keys(n.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(t=>{const r=n.att[t];if(Array.isArray(r))throw new Error(`Resource must be an object: ${t}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${t}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${t}`);Object.keys(r).forEach(i=>{const a=r[i];if(!Array.isArray(a))throw new Error(`Ability limits ${i} must be an array of objects, found: ${a}`);if(!a.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);a.forEach(c=>{if(typeof c!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${c}`)})})})}function hV(n,e,t,r={}){return t==null||t.sort((i,a)=>i.localeCompare(a)),{att:{[n]:fV(e,t,r)}}}function fV(n,e,t={}){e=e==null?void 0:e.sort((i,a)=>i.localeCompare(a));const r=e.map(i=>({[`${n}/${i}`]:[t]}));return Object.assign({},...r)}function uR(n){return ml(n),`urn:recap:${lV(n).replace(/=/g,"")}`}function op(n){const e=uV(n.replace("urn:recap:",""));return ml(e),e}function dV(n,e,t){const r=hV(n,e,t);return uR(r)}function pV(n){return n&&n.includes("urn:recap:")}function gV(n,e){const t=op(n),r=op(e),i=yV(t,r);return uR(i)}function yV(n,e){ml(n),ml(e);const t=Object.keys(n.att).concat(Object.keys(e.att)).sort((i,a)=>i.localeCompare(a)),r={att:{}};return t.forEach(i=>{var a,c;Object.keys(((a=n.att)==null?void 0:a[i])||{}).concat(Object.keys(((c=e.att)==null?void 0:c[i])||{})).sort((u,h)=>u.localeCompare(h)).forEach(u=>{var h,d;r.att[i]=aV(sV({},r.att[i]),{[u]:((h=n.att[i])==null?void 0:h[u])||((d=e.att[i])==null?void 0:d[u])})})}),r}function mV(n="",e){ml(e);const t="I further authorize the stated URI to perform the following actions on my behalf: ";if(n.includes(t))return n;const r=[];let i=0;Object.keys(e.att).forEach(u=>{const h=Object.keys(e.att[u]).map(y=>({ability:y.split("/")[0],action:y.split("/")[1]}));h.sort((y,w)=>y.action.localeCompare(w.action));const d={};h.forEach(y=>{d[y.ability]||(d[y.ability]=[]),d[y.ability].push(y.action)});const p=Object.keys(d).map(y=>(i++,`(${i}) '${y}': '${d[y].join("', '")}' for '${u}'.`));r.push(p.join(", ").replace(".,","."))});const a=r.join(" "),c=`${t}${a}`;return`${n?n+" ":""}${c}`}function x8(n){var e;const t=op(n);ml(t);const r=(e=t.att)==null?void 0:e.eip155;return r?Object.keys(r).map(i=>i.split("/")[1]):[]}function S8(n){const e=op(n);ml(e);const t=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(i=>{var a;(a=i==null?void 0:i[0])!=null&&a.chains&&t.push(i[0].chains)})}),[...new Set(t.flat())]}function Vy(n){if(!n)return;const e=n==null?void 0:n[n.length-1];return pV(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function hR(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function sE(n){if(typeof n!="boolean")throw new Error(`boolean expected, not ${n}`)}function T1(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function Er(n,...e){if(!hR(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function O8(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function wV(n,e){Er(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function Vo(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function Vh(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function bV(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}const vV=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function EV(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function aE(n){if(typeof n=="string")n=EV(n);else if(hR(n))n=oE(n);else throw new Error("Uint8Array expected, got "+typeof n);return n}function AV(n,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(n,e)}function xV(n,e){if(n.length!==e.length)return!1;let t=0;for(let r=0;r<n.length;r++)t|=n[r]^e[r];return t===0}const SV=(n,e)=>{function t(r,...i){if(Er(r),!vV)throw new Error("Non little-endian hardware is not yet supported");if(n.nonceLength!==void 0){const d=i[0];if(!d)throw new Error("nonce / iv required");n.varSizeNonce?Er(d):Er(d,n.nonceLength)}const a=n.tagLength;a&&i[1]!==void 0&&Er(i[1]);const c=e(r,...i),u=(d,p)=>{if(p!==void 0){if(d!==2)throw new Error("cipher output not supported");Er(p)}};let h=!1;return{encrypt(d,p){if(h)throw new Error("cannot encrypt() twice with same key + nonce");return h=!0,Er(d),u(c.encrypt.length,p),c.encrypt(d,p)},decrypt(d,p){if(Er(d),a&&d.length<a)throw new Error("invalid ciphertext length: smaller than tagLength="+a);return u(c.decrypt.length,p),c.decrypt(d,p)}}}return Object.assign(t,n),t};function T8(n,e,t=!0){if(e===void 0)return new Uint8Array(n);if(e.length!==n)throw new Error("invalid output length, expected "+n+", got: "+e.length);if(t&&!TV(e))throw new Error("invalid output, must be aligned");return e}function D8(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),a=BigInt(4294967295),c=Number(t>>i&a),u=Number(t&a);n.setUint32(e+4,c,r),n.setUint32(e+0,u,r)}function OV(n,e,t){sE(t);const r=new Uint8Array(16),i=bV(r);return D8(i,0,BigInt(e),t),D8(i,8,BigInt(n),t),r}function TV(n){return n.byteOffset%4===0}function oE(n){return Uint8Array.from(n)}const fR=n=>Uint8Array.from(n.split("").map(e=>e.charCodeAt(0))),DV=fR("expand 16-byte k"),CV=fR("expand 32-byte k"),_V=Vo(DV),NV=Vo(CV);function nt(n,e){return n<<e|n>>>32-e}function cE(n){return n.byteOffset%4===0}const my=64,IV=16,dR=2**32-1,C8=new Uint32Array;function RV(n,e,t,r,i,a,c,u){const h=i.length,d=new Uint8Array(my),p=Vo(d),y=cE(i)&&cE(a),w=y?Vo(i):C8,v=y?Vo(a):C8;for(let b=0;b<h;c++){if(n(e,t,r,p,c,u),c>=dR)throw new Error("arx: counter overflow");const E=Math.min(my,h-b);if(y&&E===my){const A=b/4;if(b%4!==0)throw new Error("arx: invalid block position");for(let S=0,B;S<IV;S++)B=A+S,v[B]=w[B]^p[S];b+=my;continue}for(let A=0,S;A<E;A++)S=b+A,a[S]=i[S]^d[A];b+=E}}function BV(n,e){const{allowShortKeys:t,extendNonceFn:r,counterLength:i,counterRight:a,rounds:c}=AV({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof n!="function")throw new Error("core must be a function");return T1(i),T1(c),sE(a),sE(t),(u,h,d,p,y=0)=>{Er(u),Er(h),Er(d);const w=d.length;if(p===void 0&&(p=new Uint8Array(w)),Er(p),T1(y),y<0||y>=dR)throw new Error("arx: counter overflow");if(p.length<w)throw new Error(`arx: output (${p.length}) is shorter than data (${w})`);const v=[];let b=u.length,E,A;if(b===32)v.push(E=oE(u)),A=NV;else if(b===16&&t)E=new Uint8Array(32),E.set(u),E.set(u,16),A=_V,v.push(E);else throw new Error(`arx: invalid 32-byte key, got length=${b}`);cE(h)||v.push(h=oE(h));const S=Vo(E);if(r){if(h.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(A,S,Vo(h.subarray(0,16)),S),h=h.subarray(16)}const B=16-i;if(B!==h.length)throw new Error(`arx: nonce must be ${B} or 16 bytes`);if(B!==12){const U=new Uint8Array(12);U.set(h,a?0:12-h.length),h=U,v.push(h)}const D=Vo(h);return RV(n,A,S,D,d,p,y,c),Vh(...v),p}}const En=(n,e)=>n[e++]&255|(n[e++]&255)<<8;class PV{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=aE(e),Er(e,32);const t=En(e,0),r=En(e,2),i=En(e,4),a=En(e,6),c=En(e,8),u=En(e,10),h=En(e,12),d=En(e,14);this.r[0]=t&8191,this.r[1]=(t>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|a<<9)&8191,this.r[4]=(a>>>4|c<<12)&255,this.r[5]=c>>>1&8190,this.r[6]=(c>>>14|u<<2)&8191,this.r[7]=(u>>>11|h<<5)&8065,this.r[8]=(h>>>8|d<<8)&8191,this.r[9]=d>>>5&127;for(let p=0;p<8;p++)this.pad[p]=En(e,16+2*p)}process(e,t,r=!1){const i=r?0:2048,{h:a,r:c}=this,u=c[0],h=c[1],d=c[2],p=c[3],y=c[4],w=c[5],v=c[6],b=c[7],E=c[8],A=c[9],S=En(e,t+0),B=En(e,t+2),D=En(e,t+4),U=En(e,t+6),I=En(e,t+8),N=En(e,t+10),k=En(e,t+12),$=En(e,t+14);let P=a[0]+(S&8191),L=a[1]+((S>>>13|B<<3)&8191),z=a[2]+((B>>>10|D<<6)&8191),V=a[3]+((D>>>7|U<<9)&8191),ne=a[4]+((U>>>4|I<<12)&8191),Z=a[5]+(I>>>1&8191),C=a[6]+((I>>>14|N<<2)&8191),O=a[7]+((N>>>11|k<<5)&8191),M=a[8]+((k>>>8|$<<8)&8191),q=a[9]+($>>>5|i),G=0,_=G+P*u+L*(5*A)+z*(5*E)+V*(5*b)+ne*(5*v);G=_>>>13,_&=8191,_+=Z*(5*w)+C*(5*y)+O*(5*p)+M*(5*d)+q*(5*h),G+=_>>>13,_&=8191;let F=G+P*h+L*u+z*(5*A)+V*(5*E)+ne*(5*b);G=F>>>13,F&=8191,F+=Z*(5*v)+C*(5*w)+O*(5*y)+M*(5*p)+q*(5*d),G+=F>>>13,F&=8191;let X=G+P*d+L*h+z*u+V*(5*A)+ne*(5*E);G=X>>>13,X&=8191,X+=Z*(5*b)+C*(5*v)+O*(5*w)+M*(5*y)+q*(5*p),G+=X>>>13,X&=8191;let re=G+P*p+L*d+z*h+V*u+ne*(5*A);G=re>>>13,re&=8191,re+=Z*(5*E)+C*(5*b)+O*(5*v)+M*(5*w)+q*(5*y),G+=re>>>13,re&=8191;let ie=G+P*y+L*p+z*d+V*h+ne*u;G=ie>>>13,ie&=8191,ie+=Z*(5*A)+C*(5*E)+O*(5*b)+M*(5*v)+q*(5*w),G+=ie>>>13,ie&=8191;let ge=G+P*w+L*y+z*p+V*d+ne*h;G=ge>>>13,ge&=8191,ge+=Z*u+C*(5*A)+O*(5*E)+M*(5*b)+q*(5*v),G+=ge>>>13,ge&=8191;let le=G+P*v+L*w+z*y+V*p+ne*d;G=le>>>13,le&=8191,le+=Z*h+C*u+O*(5*A)+M*(5*E)+q*(5*b),G+=le>>>13,le&=8191;let ue=G+P*b+L*v+z*w+V*y+ne*p;G=ue>>>13,ue&=8191,ue+=Z*d+C*h+O*u+M*(5*A)+q*(5*E),G+=ue>>>13,ue&=8191;let de=G+P*E+L*b+z*v+V*w+ne*y;G=de>>>13,de&=8191,de+=Z*p+C*d+O*h+M*u+q*(5*A),G+=de>>>13,de&=8191;let ve=G+P*A+L*E+z*b+V*v+ne*w;G=ve>>>13,ve&=8191,ve+=Z*y+C*p+O*d+M*h+q*u,G+=ve>>>13,ve&=8191,G=(G<<2)+G|0,G=G+_|0,_=G&8191,G=G>>>13,F+=G,a[0]=_,a[1]=F,a[2]=X,a[3]=re,a[4]=ie,a[5]=ge,a[6]=le,a[7]=ue,a[8]=de,a[9]=ve}finalize(){const{h:e,pad:t}=this,r=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let u=2;u<10;u++)e[u]+=i,i=e[u]>>>13,e[u]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let u=1;u<10;u++)r[u]=e[u]+i,i=r[u]>>>13,r[u]&=8191;r[9]-=8192;let a=(i^1)-1;for(let u=0;u<10;u++)r[u]&=a;a=~a;for(let u=0;u<10;u++)e[u]=e[u]&a|r[u];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let c=e[0]+t[0];e[0]=c&65535;for(let u=1;u<8;u++)c=(e[u]+t[u]|0)+(c>>>16)|0,e[u]=c&65535;Vh(r)}update(e){O8(this),e=aE(e),Er(e);const{buffer:t,blockLen:r}=this,i=e.length;for(let a=0;a<i;){const c=Math.min(r-this.pos,i-a);if(c===r){for(;r<=i-a;a+=r)this.process(e,a);continue}t.set(e.subarray(a,a+c),this.pos),this.pos+=c,a+=c,this.pos===r&&(this.process(t,0,!1),this.pos=0)}return this}destroy(){Vh(this.h,this.r,this.buffer,this.pad)}digestInto(e){O8(this),wV(e,this),this.finished=!0;const{buffer:t,h:r}=this;let{pos:i}=this;if(i){for(t[i++]=1;i<16;i++)t[i]=0;this.process(t,0,!0)}this.finalize();let a=0;for(let c=0;c<8;c++)e[a++]=r[c]>>>0,e[a++]=r[c]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}}function UV(n){const e=(r,i)=>n(i).update(aE(r)).digest(),t=n(new Uint8Array(32));return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>n(r),e}const MV=UV(n=>new PV(n));function $V(n,e,t,r,i,a=20){let c=n[0],u=n[1],h=n[2],d=n[3],p=e[0],y=e[1],w=e[2],v=e[3],b=e[4],E=e[5],A=e[6],S=e[7],B=i,D=t[0],U=t[1],I=t[2],N=c,k=u,$=h,P=d,L=p,z=y,V=w,ne=v,Z=b,C=E,O=A,M=S,q=B,G=D,_=U,F=I;for(let re=0;re<a;re+=2)N=N+L|0,q=nt(q^N,16),Z=Z+q|0,L=nt(L^Z,12),N=N+L|0,q=nt(q^N,8),Z=Z+q|0,L=nt(L^Z,7),k=k+z|0,G=nt(G^k,16),C=C+G|0,z=nt(z^C,12),k=k+z|0,G=nt(G^k,8),C=C+G|0,z=nt(z^C,7),$=$+V|0,_=nt(_^$,16),O=O+_|0,V=nt(V^O,12),$=$+V|0,_=nt(_^$,8),O=O+_|0,V=nt(V^O,7),P=P+ne|0,F=nt(F^P,16),M=M+F|0,ne=nt(ne^M,12),P=P+ne|0,F=nt(F^P,8),M=M+F|0,ne=nt(ne^M,7),N=N+z|0,F=nt(F^N,16),O=O+F|0,z=nt(z^O,12),N=N+z|0,F=nt(F^N,8),O=O+F|0,z=nt(z^O,7),k=k+V|0,q=nt(q^k,16),M=M+q|0,V=nt(V^M,12),k=k+V|0,q=nt(q^k,8),M=M+q|0,V=nt(V^M,7),$=$+ne|0,G=nt(G^$,16),Z=Z+G|0,ne=nt(ne^Z,12),$=$+ne|0,G=nt(G^$,8),Z=Z+G|0,ne=nt(ne^Z,7),P=P+L|0,_=nt(_^P,16),C=C+_|0,L=nt(L^C,12),P=P+L|0,_=nt(_^P,8),C=C+_|0,L=nt(L^C,7);let X=0;r[X++]=c+N|0,r[X++]=u+k|0,r[X++]=h+$|0,r[X++]=d+P|0,r[X++]=p+L|0,r[X++]=y+z|0,r[X++]=w+V|0,r[X++]=v+ne|0,r[X++]=b+Z|0,r[X++]=E+C|0,r[X++]=A+O|0,r[X++]=S+M|0,r[X++]=B+q|0,r[X++]=D+G|0,r[X++]=U+_|0,r[X++]=I+F|0}const kV=BV($V,{counterRight:!1,counterLength:4,allowShortKeys:!1}),LV=new Uint8Array(16),_8=(n,e)=>{n.update(e);const t=e.length%16;t&&n.update(LV.subarray(t))},jV=new Uint8Array(32);function N8(n,e,t,r,i){const a=n(e,t,jV),c=MV.create(a);i&&_8(c,i),_8(c,r);const u=OV(r.length,i?i.length:0,!0);c.update(u);const h=c.digest();return Vh(a,u),h}const zV=n=>(e,t,r)=>({encrypt(i,a){const c=i.length;a=T8(c+16,a,!1),a.set(i);const u=a.subarray(0,-16);n(e,t,u,u,1);const h=N8(n,e,t,u,r);return a.set(h,c),Vh(h),a},decrypt(i,a){a=T8(i.length-16,a,!1);const c=i.subarray(0,-16),u=i.subarray(-16),h=N8(n,e,t,c,r);if(!xV(u,h))throw new Error("invalid tag");return a.set(i.subarray(0,-16)),n(e,t,a,a,1),Vh(h),a}}),pR=SV({blockSize:64,nonceLength:12,tagLength:16},zV(kV));let gR=class extends a0{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,T2(e);const r=Ki(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,a=new Uint8Array(i);a.set(r.length>i?e.create().update(r).digest():r);for(let c=0;c<a.length;c++)a[c]^=54;this.iHash.update(a),this.oHash=e.create();for(let c=0;c<a.length;c++)a[c]^=106;this.oHash.update(a),Si(a)}update(e){return Qo(this),this.iHash.update(e),this}digestInto(e){Qo(this),xi(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:a,blockLen:c,outputLen:u}=this;return e=e,e.finished=i,e.destroyed=a,e.blockLen=c,e.outputLen=u,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const c0=(n,e,t)=>new gR(n,e).update(t).digest();c0.create=(n,e)=>new gR(n,e);function HV(n,e,t){return T2(n),t===void 0&&(t=new Uint8Array(n.outputLen)),c0(n,Ki(t),Ki(e))}const D1=Uint8Array.from([0]),I8=Uint8Array.of();function FV(n,e,t,r=32){T2(n),_a(r);const i=n.outputLen;if(r>255*i)throw new Error("Length should be <= 255*HashLen");const a=Math.ceil(r/i);t===void 0&&(t=I8);const c=new Uint8Array(a*i),u=c0.create(n,e),h=u._cloneInto(),d=new Uint8Array(u.outputLen);for(let p=0;p<a;p++)D1[0]=p+1,h.update(p===0?I8:d).update(t).update(D1).digestInto(d),c.set(d,i*p),u._cloneInto(h);return u.destroy(),h.destroy(),Si(d,D1),c.slice(0,r)}const qV=(n,e,t,r,i)=>FV(n,HV(n,e,t),r,i),l0=o0,I2=BigInt(0),lE=BigInt(1);function Am(n,e){if(typeof e!="boolean")throw new Error(n+" boolean expected, got "+e)}function wy(n){const e=n.toString(16);return e.length&1?"0"+e:e}function yR(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?I2:BigInt("0x"+n)}function u0(n){return yR(ap(n))}function xm(n){return xi(n),yR(ap(Uint8Array.from(n).reverse()))}function R2(n,e){return C2(n.toString(16).padStart(e*2,"0"))}function B2(n,e){return R2(n,e).reverse()}function br(n,e,t){let r;if(typeof e=="string")try{r=C2(e)}catch(a){throw new Error(n+" must be hex string or Uint8Array, cause: "+a)}else if(O2(e))r=Uint8Array.from(e);else throw new Error(n+" must be hex string or Uint8Array");const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(n+" of length "+t+" expected, got "+i);return r}const C1=n=>typeof n=="bigint"&&I2<=n;function VV(n,e,t){return C1(n)&&C1(e)&&C1(t)&&e<=n&&n<t}function uE(n,e,t,r){if(!VV(e,t,r))throw new Error("expected valid "+n+": "+t+" <= n < "+r+", got "+e)}function GV(n){let e;for(e=0;n>I2;n>>=lE,e+=1);return e}const h0=n=>(lE<<BigInt(n))-lE;function KV(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");const r=w=>new Uint8Array(w),i=w=>Uint8Array.of(w);let a=r(n),c=r(n),u=0;const h=()=>{a.fill(1),c.fill(0),u=0},d=(...w)=>t(c,a,...w),p=(w=r(0))=>{c=d(i(0),w),a=d(),w.length!==0&&(c=d(i(1),w),a=d())},y=()=>{if(u++>=1e3)throw new Error("drbg: tried 1000 values");let w=0;const v=[];for(;w<e;){a=d();const b=a.slice();v.push(b),w+=a.length}return kc(...v)};return(w,v)=>{h(),p(w);let b;for(;!(b=v(y()));)p();return h(),b}}function f0(n,e,t={}){if(!n||typeof n!="object")throw new Error("expected valid options object");function r(i,a,c){const u=n[i];if(c&&u===void 0)return;const h=typeof u;if(h!==a||u===null)throw new Error(`param "${i}" is invalid: expected ${a}, got ${h}`)}Object.entries(e).forEach(([i,a])=>r(i,a,!1)),Object.entries(t).forEach(([i,a])=>r(i,a,!0))}function R8(n){const e=new WeakMap;return(t,...r)=>{const i=e.get(t);if(i!==void 0)return i;const a=n(t,...r);return e.set(t,a),a}}const Sr=BigInt(0),nr=BigInt(1),Lc=BigInt(2),QV=BigInt(3),mR=BigInt(4),wR=BigInt(5),bR=BigInt(8);function vi(n,e){const t=n%e;return t>=Sr?t:e+t}function Pi(n,e,t){let r=n;for(;e-- >Sr;)r*=r,r%=t;return r}function B8(n,e){if(n===Sr)throw new Error("invert: expected non-zero number");if(e<=Sr)throw new Error("invert: expected positive modulus, got "+e);let t=vi(n,e),r=e,i=Sr,a=nr;for(;t!==Sr;){const c=r/t,u=r%t,h=i-a*c;r=t,t=u,i=a,a=h}if(r!==nr)throw new Error("invert: does not exist");return vi(i,e)}function vR(n,e){const t=(n.ORDER+nr)/mR,r=n.pow(e,t);if(!n.eql(n.sqr(r),e))throw new Error("Cannot find square root");return r}function YV(n,e){const t=(n.ORDER-wR)/bR,r=n.mul(e,Lc),i=n.pow(r,t),a=n.mul(e,i),c=n.mul(n.mul(a,Lc),i),u=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(u),e))throw new Error("Cannot find square root");return u}function JV(n){if(n<BigInt(3))throw new Error("sqrt is not defined for small field");let e=n-nr,t=0;for(;e%Lc===Sr;)e/=Lc,t++;let r=Lc;const i=tf(n);for(;P8(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return vR;let a=i.pow(r,e);const c=(e+nr)/Lc;return function(u,h){if(u.is0(h))return h;if(P8(u,h)!==1)throw new Error("Cannot find square root");let d=t,p=u.mul(u.ONE,a),y=u.pow(h,e),w=u.pow(h,c);for(;!u.eql(y,u.ONE);){if(u.is0(y))return u.ZERO;let v=1,b=u.sqr(y);for(;!u.eql(b,u.ONE);)if(v++,b=u.sqr(b),v===d)throw new Error("Cannot find square root");const E=nr<<BigInt(d-v-1),A=u.pow(p,E);d=v,p=u.sqr(A),y=u.mul(y,p),w=u.mul(w,A)}return w}}function ZV(n){return n%mR===QV?vR:n%bR===wR?YV:JV(n)}const XV=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function WV(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},t=XV.reduce((r,i)=>(r[i]="function",r),e);return f0(n,t),n}function eG(n,e,t){if(t<Sr)throw new Error("invalid exponent, negatives unsupported");if(t===Sr)return n.ONE;if(t===nr)return e;let r=n.ONE,i=e;for(;t>Sr;)t&nr&&(r=n.mul(r,i)),i=n.sqr(i),t>>=nr;return r}function ER(n,e,t=!1){const r=new Array(e.length).fill(t?n.ZERO:void 0),i=e.reduce((c,u,h)=>n.is0(u)?c:(r[h]=c,n.mul(c,u)),n.ONE),a=n.inv(i);return e.reduceRight((c,u,h)=>n.is0(u)?c:(r[h]=n.mul(c,r[h]),n.mul(c,u)),a),r}function P8(n,e){const t=(n.ORDER-nr)/Lc,r=n.pow(e,t),i=n.eql(r,n.ONE),a=n.eql(r,n.ZERO),c=n.eql(r,n.neg(n.ONE));if(!i&&!a&&!c)throw new Error("invalid Legendre symbol result");return i?1:a?0:-1}function tG(n,e){e!==void 0&&_a(e);const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function tf(n,e,t=!1,r={}){if(n<=Sr)throw new Error("invalid field: expected ORDER > 0, got "+n);let i,a;if(typeof e=="object"&&e!=null){if(r.sqrt||t)throw new Error("cannot specify opts in two arguments");const p=e;p.BITS&&(i=p.BITS),p.sqrt&&(a=p.sqrt),typeof p.isLE=="boolean"&&(t=p.isLE)}else typeof e=="number"&&(i=e),r.sqrt&&(a=r.sqrt);const{nBitLength:c,nByteLength:u}=tG(n,i);if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let h;const d=Object.freeze({ORDER:n,isLE:t,BITS:c,BYTES:u,MASK:h0(c),ZERO:Sr,ONE:nr,create:p=>vi(p,n),isValid:p=>{if(typeof p!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof p);return Sr<=p&&p<n},is0:p=>p===Sr,isValidNot0:p=>!d.is0(p)&&d.isValid(p),isOdd:p=>(p&nr)===nr,neg:p=>vi(-p,n),eql:(p,y)=>p===y,sqr:p=>vi(p*p,n),add:(p,y)=>vi(p+y,n),sub:(p,y)=>vi(p-y,n),mul:(p,y)=>vi(p*y,n),pow:(p,y)=>eG(d,p,y),div:(p,y)=>vi(p*B8(y,n),n),sqrN:p=>p*p,addN:(p,y)=>p+y,subN:(p,y)=>p-y,mulN:(p,y)=>p*y,inv:p=>B8(p,n),sqrt:a||(p=>(h||(h=ZV(n)),h(d,p))),toBytes:p=>t?B2(p,u):R2(p,u),fromBytes:p=>{if(p.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+p.length);return t?xm(p):u0(p)},invertBatch:p=>ER(d,p),cmov:(p,y,w)=>w?y:p});return Object.freeze(d)}function AR(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function xR(n){const e=AR(n);return e+Math.ceil(e/2)}function nG(n,e,t=!1){const r=n.length,i=AR(e),a=xR(e);if(r<16||r<a||r>1024)throw new Error("expected "+a+"-1024 bytes of input, got "+r);const c=t?xm(n):u0(n),u=vi(c,e-nr)+nr;return t?B2(u,i):R2(u,i)}const Gh=BigInt(0),jc=BigInt(1);function $d(n,e){const t=e.negate();return n?t:e}function rG(n,e,t){const r=a=>a.pz,i=ER(n.Fp,t.map(r));return t.map((a,c)=>a.toAffine(i[c])).map(n.fromAffine)}function SR(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function _1(n,e){SR(n,e);const t=Math.ceil(e/n)+1,r=2**(n-1),i=2**n,a=h0(n),c=BigInt(n);return{windows:t,windowSize:r,mask:a,maxNumber:i,shiftBy:c}}function U8(n,e,t){const{windowSize:r,mask:i,maxNumber:a,shiftBy:c}=t;let u=Number(n&i),h=n>>c;u>r&&(u-=a,h+=jc);const d=e*r,p=d+Math.abs(u)-1,y=u===0,w=u<0,v=e%2!==0;return{nextN:h,offset:p,isZero:y,isNeg:w,isNegF:v,offsetF:d}}function iG(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function sG(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}const N1=new WeakMap,OR=new WeakMap;function I1(n){return OR.get(n)||1}function M8(n){if(n!==Gh)throw new Error("invalid wNAF")}function aG(n,e){return{constTimeNegate:$d,hasPrecomputes(t){return I1(t)!==1},unsafeLadder(t,r,i=n.ZERO){let a=t;for(;r>Gh;)r&jc&&(i=i.add(a)),a=a.double(),r>>=jc;return i},precomputeWindow(t,r){const{windows:i,windowSize:a}=_1(r,e),c=[];let u=t,h=u;for(let d=0;d<i;d++){h=u,c.push(h);for(let p=1;p<a;p++)h=h.add(u),c.push(h);u=h.double()}return c},wNAF(t,r,i){let a=n.ZERO,c=n.BASE;const u=_1(t,e);for(let h=0;h<u.windows;h++){const{nextN:d,offset:p,isZero:y,isNeg:w,isNegF:v,offsetF:b}=U8(i,h,u);i=d,y?c=c.add($d(v,r[b])):a=a.add($d(w,r[p]))}return M8(i),{p:a,f:c}},wNAFUnsafe(t,r,i,a=n.ZERO){const c=_1(t,e);for(let u=0;u<c.windows&&i!==Gh;u++){const{nextN:h,offset:d,isZero:p,isNeg:y}=U8(i,u,c);if(i=h,!p){const w=r[d];a=a.add(y?w.negate():w)}}return M8(i),a},getPrecomputes(t,r,i){let a=N1.get(r);return a||(a=this.precomputeWindow(r,t),t!==1&&(typeof i=="function"&&(a=i(a)),N1.set(r,a))),a},wNAFCached(t,r,i){const a=I1(t);return this.wNAF(a,this.getPrecomputes(a,t,i),r)},wNAFCachedUnsafe(t,r,i,a){const c=I1(t);return c===1?this.unsafeLadder(t,r,a):this.wNAFUnsafe(c,this.getPrecomputes(c,t,i),r,a)},setWindowSize(t,r){SR(r,e),OR.set(t,r),N1.delete(t)}}}function oG(n,e,t,r){let i=e,a=n.ZERO,c=n.ZERO;for(;t>Gh||r>Gh;)t&jc&&(a=a.add(i)),r&jc&&(c=c.add(i)),i=i.double(),t>>=jc,r>>=jc;return{p1:a,p2:c}}function cG(n,e,t,r){iG(t,n),sG(r,e);const i=t.length,a=r.length;if(i!==a)throw new Error("arrays of points and scalars must have equal length");const c=n.ZERO,u=GV(BigInt(i));let h=1;u>12?h=u-3:u>4?h=u-2:u>0&&(h=2);const d=h0(h),p=new Array(Number(d)+1).fill(c),y=Math.floor((e.BITS-1)/h)*h;let w=c;for(let v=y;v>=0;v-=h){p.fill(c);for(let E=0;E<a;E++){const A=r[E],S=Number(A>>BigInt(v)&d);p[S]=p[S].add(t[E])}let b=c;for(let E=p.length-1,A=c;E>0;E--)A=A.add(p[E]),b=b.add(A);if(w=w.add(b),v!==0)for(let E=0;E<h;E++)w=w.double()}return w}function $8(n,e){if(e){if(e.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return WV(e),e}else return tf(n)}function lG(n,e,t={}){if(!e||typeof e!="object")throw new Error(`expected valid ${n} CURVE object`);for(const c of["p","n","h"]){const u=e[c];if(!(typeof u=="bigint"&&u>Gh))throw new Error(`CURVE.${c} must be positive bigint`)}const r=$8(e.p,t.Fp),i=$8(e.n,t.Fn),a=["Gx","Gy","a","b"];for(const c of a)if(!r.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:i}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const yd=BigInt(0),vu=BigInt(1),by=BigInt(2);function uG(n){return f0(n,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...n})}function hG(n){const e=uG(n),{P:t,type:r,adjustScalarBytes:i,powPminus2:a,randomBytes:c}=e,u=r==="x25519";if(!u&&r!=="x448")throw new Error("invalid type");const h=c||ef,d=u?255:448,p=u?32:56,y=BigInt(u?9:5),w=BigInt(u?121665:39081),v=u?by**BigInt(254):by**BigInt(447),b=u?BigInt(8)*by**BigInt(251)-vu:BigInt(4)*by**BigInt(445)-vu,E=v+b+vu,A=P=>vi(P,t),S=B(y);function B(P){return B2(A(P),p)}function D(P){const L=br("u coordinate",P,p);return u&&(L[31]&=127),A(xm(L))}function U(P){return xm(i(br("scalar",P,p)))}function I(P,L){const z=$(D(L),U(P));if(z===yd)throw new Error("invalid private or public key received");return B(z)}function N(P){return I(P,S)}function k(P,L,z){const V=A(P*(L-z));return L=A(L-V),z=A(z+V),{x_2:L,x_3:z}}function $(P,L){uE("u",P,yd,t),uE("scalar",L,v,E);const z=L,V=P;let ne=vu,Z=yd,C=P,O=vu,M=yd;for(let G=BigInt(d-1);G>=yd;G--){const _=z>>G&vu;M^=_,{x_2:ne,x_3:C}=k(M,ne,C),{x_2:Z,x_3:O}=k(M,Z,O),M=_;const F=ne+Z,X=A(F*F),re=ne-Z,ie=A(re*re),ge=X-ie,le=C+O,ue=C-O,de=A(ue*F),ve=A(le*re),Ne=de+ve,Ce=de-ve;C=A(Ne*Ne),O=A(V*A(Ce*Ce)),ne=A(X*ie),Z=A(ge*(X+A(w*ge)))}({x_2:ne,x_3:C}=k(M,ne,C)),{x_2:Z,x_3:O}=k(M,Z,O);const q=a(Z);return A(ne*q)}return{scalarMult:I,scalarMultBase:N,getSharedSecret:(P,L)=>I(P,L),getPublicKey:P=>N(P),utils:{randomPrivateKey:()=>h(p)},GuBytes:S.slice()}}BigInt(0);const fG=BigInt(1),k8=BigInt(2),dG=BigInt(3),pG=BigInt(5);BigInt(8);const TR={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function gG(n){const e=BigInt(10),t=BigInt(20),r=BigInt(40),i=BigInt(80),a=TR.p,c=n*n%a*n%a,u=Pi(c,k8,a)*c%a,h=Pi(u,fG,a)*n%a,d=Pi(h,pG,a)*h%a,p=Pi(d,e,a)*d%a,y=Pi(p,t,a)*p%a,w=Pi(y,r,a)*y%a,v=Pi(w,i,a)*w%a,b=Pi(v,i,a)*w%a,E=Pi(b,e,a)*d%a;return{pow_p_5_8:Pi(E,k8,a)*n%a,b2:c}}function yG(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}const hE=(()=>{const n=TR.p;return hG({P:n,type:"x25519",powPminus2:e=>{const{pow_p_5_8:t,b2:r}=gG(e);return vi(Pi(t,dG,n)*r,n)},adjustScalarBytes:yG})})();function L8(n){n.lowS!==void 0&&Am("lowS",n.lowS),n.prehash!==void 0&&Am("prehash",n.prehash)}class mG extends Error{constructor(e=""){super(e)}}const aa={Err:mG,_tlv:{encode:(n,e)=>{const{Err:t}=aa;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const r=e.length/2,i=wy(r);if(i.length/2&128)throw new t("tlv.encode: long form length too big");const a=r>127?wy(i.length/2|128):"";return wy(n)+a+i+e},decode(n,e){const{Err:t}=aa;let r=0;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[r++]!==n)throw new t("tlv.decode: wrong tlv");const i=e[r++],a=!!(i&128);let c=0;if(!a)c=i;else{const h=i&127;if(!h)throw new t("tlv.decode(long): indefinite length not supported");if(h>4)throw new t("tlv.decode(long): byte length is too big");const d=e.subarray(r,r+h);if(d.length!==h)throw new t("tlv.decode: length bytes not complete");if(d[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const p of d)c=c<<8|p;if(r+=h,c<128)throw new t("tlv.decode(long): not minimal encoding")}const u=e.subarray(r,r+c);if(u.length!==c)throw new t("tlv.decode: wrong value length");return{v:u,l:e.subarray(r+c)}}},_int:{encode(n){const{Err:e}=aa;if(n<kd)throw new e("integer: negative integers are not allowed");let t=wy(n);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(n){const{Err:e}=aa;if(n[0]&128)throw new e("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return u0(n)}},toSig(n){const{Err:e,_int:t,_tlv:r}=aa,i=br("signature",n),{v:a,l:c}=r.decode(48,i);if(c.length)throw new e("invalid signature: left bytes after parsing");const{v:u,l:h}=r.decode(2,a),{v:d,l:p}=r.decode(2,h);if(p.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(u),s:t.decode(d)}},hexFromSig(n){const{_tlv:e,_int:t}=aa,r=e.encode(2,t.encode(n.r)),i=e.encode(2,t.encode(n.s)),a=r+i;return e.encode(48,a)}},kd=BigInt(0),Ld=BigInt(1),wG=BigInt(2),vy=BigInt(3),bG=BigInt(4);function vG(n,e,t){function r(i){const a=n.sqr(i),c=n.mul(a,i);return n.add(n.add(c,n.mul(i,e)),t)}return r}function DR(n,e,t){const{BYTES:r}=n;function i(a){let c;if(typeof a=="bigint")c=a;else{let u=br("private key",a);if(e){if(!e.includes(u.length*2))throw new Error("invalid private key");const h=new Uint8Array(r);h.set(u,h.length-u.length),u=h}try{c=n.fromBytes(u)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof a}`)}}if(t&&(c=n.create(c)),!n.isValidNot0(c))throw new Error("invalid private key: out of range [1..N-1]");return c}return i}function EG(n,e={}){const{Fp:t,Fn:r}=lG("weierstrass",n,e),{h:i,n:a}=n;f0(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!t.is0(n.a)||typeof c.beta!="bigint"||typeof c.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function u(){if(!t.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function h($,P,L){const{x:z,y:V}=P.toAffine(),ne=t.toBytes(z);if(Am("isCompressed",L),L){u();const Z=!t.isOdd(V);return kc(CR(Z),ne)}else return kc(Uint8Array.of(4),ne,t.toBytes(V))}function d($){xi($);const P=t.BYTES,L=P+1,z=2*P+1,V=$.length,ne=$[0],Z=$.subarray(1);if(V===L&&(ne===2||ne===3)){const C=t.fromBytes(Z);if(!t.isValid(C))throw new Error("bad point: is not on curve, wrong x");const O=w(C);let M;try{M=t.sqrt(O)}catch(G){const _=G instanceof Error?": "+G.message:"";throw new Error("bad point: is not on curve, sqrt error"+_)}u();const q=t.isOdd(M);return(ne&1)===1!==q&&(M=t.neg(M)),{x:C,y:M}}else if(V===z&&ne===4){const C=t.fromBytes(Z.subarray(P*0,P*1)),O=t.fromBytes(Z.subarray(P*1,P*2));if(!v(C,O))throw new Error("bad point: is not on curve");return{x:C,y:O}}else throw new Error(`bad point: got length ${V}, expected compressed=${L} or uncompressed=${z}`)}const p=e.toBytes||h,y=e.fromBytes||d,w=vG(t,n.a,n.b);function v($,P){const L=t.sqr(P),z=w($);return t.eql(L,z)}if(!v(n.Gx,n.Gy))throw new Error("bad curve params: generator point");const b=t.mul(t.pow(n.a,vy),bG),E=t.mul(t.sqr(n.b),BigInt(27));if(t.is0(t.add(b,E)))throw new Error("bad curve params: a or b");function A($,P,L=!1){if(!t.isValid(P)||L&&t.is0(P))throw new Error(`bad point coordinate ${$}`);return P}function S($){if(!($ instanceof I))throw new Error("ProjectivePoint expected")}const B=R8(($,P)=>{const{px:L,py:z,pz:V}=$;if(t.eql(V,t.ONE))return{x:L,y:z};const ne=$.is0();P==null&&(P=ne?t.ONE:t.inv(V));const Z=t.mul(L,P),C=t.mul(z,P),O=t.mul(V,P);if(ne)return{x:t.ZERO,y:t.ZERO};if(!t.eql(O,t.ONE))throw new Error("invZ was invalid");return{x:Z,y:C}}),D=R8($=>{if($.is0()){if(e.allowInfinityPoint&&!t.is0($.py))return;throw new Error("bad point: ZERO")}const{x:P,y:L}=$.toAffine();if(!t.isValid(P)||!t.isValid(L))throw new Error("bad point: x or y not field elements");if(!v(P,L))throw new Error("bad point: equation left != right");if(!$.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function U($,P,L,z,V){return L=new I(t.mul(L.px,$),L.py,L.pz),P=$d(z,P),L=$d(V,L),P.add(L)}class I{constructor(P,L,z){this.px=A("x",P),this.py=A("y",L,!0),this.pz=A("z",z),Object.freeze(this)}static fromAffine(P){const{x:L,y:z}=P||{};if(!P||!t.isValid(L)||!t.isValid(z))throw new Error("invalid affine point");if(P instanceof I)throw new Error("projective point not allowed");return t.is0(L)&&t.is0(z)?I.ZERO:new I(L,z,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(P){return rG(I,"pz",P)}static fromBytes(P){return xi(P),I.fromHex(P)}static fromHex(P){const L=I.fromAffine(y(br("pointHex",P)));return L.assertValidity(),L}static fromPrivateKey(P){const L=DR(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return I.BASE.multiply(L(P))}static msm(P,L){return cG(I,r,P,L)}precompute(P=8,L=!0){return k.setWindowSize(this,P),L||this.multiply(vy),this}_setWindowSize(P){this.precompute(P)}assertValidity(){D(this)}hasEvenY(){const{y:P}=this.toAffine();if(!t.isOdd)throw new Error("Field doesn't support isOdd");return!t.isOdd(P)}equals(P){S(P);const{px:L,py:z,pz:V}=this,{px:ne,py:Z,pz:C}=P,O=t.eql(t.mul(L,C),t.mul(ne,V)),M=t.eql(t.mul(z,C),t.mul(Z,V));return O&&M}negate(){return new I(this.px,t.neg(this.py),this.pz)}double(){const{a:P,b:L}=n,z=t.mul(L,vy),{px:V,py:ne,pz:Z}=this;let C=t.ZERO,O=t.ZERO,M=t.ZERO,q=t.mul(V,V),G=t.mul(ne,ne),_=t.mul(Z,Z),F=t.mul(V,ne);return F=t.add(F,F),M=t.mul(V,Z),M=t.add(M,M),C=t.mul(P,M),O=t.mul(z,_),O=t.add(C,O),C=t.sub(G,O),O=t.add(G,O),O=t.mul(C,O),C=t.mul(F,C),M=t.mul(z,M),_=t.mul(P,_),F=t.sub(q,_),F=t.mul(P,F),F=t.add(F,M),M=t.add(q,q),q=t.add(M,q),q=t.add(q,_),q=t.mul(q,F),O=t.add(O,q),_=t.mul(ne,Z),_=t.add(_,_),q=t.mul(_,F),C=t.sub(C,q),M=t.mul(_,G),M=t.add(M,M),M=t.add(M,M),new I(C,O,M)}add(P){S(P);const{px:L,py:z,pz:V}=this,{px:ne,py:Z,pz:C}=P;let O=t.ZERO,M=t.ZERO,q=t.ZERO;const G=n.a,_=t.mul(n.b,vy);let F=t.mul(L,ne),X=t.mul(z,Z),re=t.mul(V,C),ie=t.add(L,z),ge=t.add(ne,Z);ie=t.mul(ie,ge),ge=t.add(F,X),ie=t.sub(ie,ge),ge=t.add(L,V);let le=t.add(ne,C);return ge=t.mul(ge,le),le=t.add(F,re),ge=t.sub(ge,le),le=t.add(z,V),O=t.add(Z,C),le=t.mul(le,O),O=t.add(X,re),le=t.sub(le,O),q=t.mul(G,ge),O=t.mul(_,re),q=t.add(O,q),O=t.sub(X,q),q=t.add(X,q),M=t.mul(O,q),X=t.add(F,F),X=t.add(X,F),re=t.mul(G,re),ge=t.mul(_,ge),X=t.add(X,re),re=t.sub(F,re),re=t.mul(G,re),ge=t.add(ge,re),F=t.mul(X,ge),M=t.add(M,F),F=t.mul(le,ge),O=t.mul(ie,O),O=t.sub(O,F),F=t.mul(ie,X),q=t.mul(le,q),q=t.add(q,F),new I(O,M,q)}subtract(P){return this.add(P.negate())}is0(){return this.equals(I.ZERO)}multiply(P){const{endo:L}=e;if(!r.isValidNot0(P))throw new Error("invalid scalar: out of range");let z,V;const ne=Z=>k.wNAFCached(this,Z,I.normalizeZ);if(L){const{k1neg:Z,k1:C,k2neg:O,k2:M}=L.splitScalar(P),{p:q,f:G}=ne(C),{p:_,f:F}=ne(M);V=G.add(F),z=U(L.beta,q,_,Z,O)}else{const{p:Z,f:C}=ne(P);z=Z,V=C}return I.normalizeZ([z,V])[0]}multiplyUnsafe(P){const{endo:L}=e,z=this;if(!r.isValid(P))throw new Error("invalid scalar: out of range");if(P===kd||z.is0())return I.ZERO;if(P===Ld)return z;if(k.hasPrecomputes(this))return this.multiply(P);if(L){const{k1neg:V,k1:ne,k2neg:Z,k2:C}=L.splitScalar(P),{p1:O,p2:M}=oG(I,z,ne,C);return U(L.beta,O,M,V,Z)}else return k.wNAFCachedUnsafe(z,P)}multiplyAndAddUnsafe(P,L,z){const V=this.multiplyUnsafe(L).add(P.multiplyUnsafe(z));return V.is0()?void 0:V}toAffine(P){return B(this,P)}isTorsionFree(){const{isTorsionFree:P}=e;return i===Ld?!0:P?P(I,this):k.wNAFCachedUnsafe(this,a).is0()}clearCofactor(){const{clearCofactor:P}=e;return i===Ld?this:P?P(I,this):this.multiplyUnsafe(i)}toBytes(P=!0){return Am("isCompressed",P),this.assertValidity(),p(I,this,P)}toRawBytes(P=!0){return this.toBytes(P)}toHex(P=!0){return ap(this.toBytes(P))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}I.BASE=new I(n.Gx,n.Gy,t.ONE),I.ZERO=new I(t.ZERO,t.ONE,t.ZERO),I.Fp=t,I.Fn=r;const N=r.BITS,k=aG(I,e.endo?Math.ceil(N/2):N);return I}function CR(n){return Uint8Array.of(n?2:3)}function AG(n,e,t={}){f0(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||ef,i=e.hmac||((z,...V)=>c0(e.hash,z,kc(...V))),{Fp:a,Fn:c}=n,{ORDER:u,BITS:h}=c;function d(z){const V=u>>Ld;return z>V}function p(z){return d(z)?c.neg(z):z}function y(z,V){if(!c.isValidNot0(V))throw new Error(`invalid signature ${z}: out of range 1..CURVE.n`)}class w{constructor(V,ne,Z){y("r",V),y("s",ne),this.r=V,this.s=ne,Z!=null&&(this.recovery=Z),Object.freeze(this)}static fromCompact(V){const ne=c.BYTES,Z=br("compactSignature",V,ne*2);return new w(c.fromBytes(Z.subarray(0,ne)),c.fromBytes(Z.subarray(ne,ne*2)))}static fromDER(V){const{r:ne,s:Z}=aa.toSig(br("DER",V));return new w(ne,Z)}assertValidity(){}addRecoveryBit(V){return new w(this.r,this.s,V)}recoverPublicKey(V){const ne=a.ORDER,{r:Z,s:C,recovery:O}=this;if(O==null||![0,1,2,3].includes(O))throw new Error("recovery id invalid");if(u*wG<ne&&O>1)throw new Error("recovery id is ambiguous for h>1 curve");const M=O===2||O===3?Z+u:Z;if(!a.isValid(M))throw new Error("recovery id 2 or 3 invalid");const q=a.toBytes(M),G=n.fromHex(kc(CR((O&1)===0),q)),_=c.inv(M),F=D(br("msgHash",V)),X=c.create(-F*_),re=c.create(C*_),ie=n.BASE.multiplyUnsafe(X).add(G.multiplyUnsafe(re));if(ie.is0())throw new Error("point at infinify");return ie.assertValidity(),ie}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,c.neg(this.s),this.recovery):this}toBytes(V){if(V==="compact")return kc(c.toBytes(this.r),c.toBytes(this.s));if(V==="der")return C2(aa.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return ap(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return ap(this.toBytes("compact"))}}const v=DR(c,t.allowedPrivateKeyLengths,t.wrapPrivateKey),b={isValidPrivateKey(z){try{return v(z),!0}catch{return!1}},normPrivateKeyToScalar:v,randomPrivateKey:()=>{const z=u;return nG(r(xR(z)),z)},precompute(z=8,V=n.BASE){return V.precompute(z,!1)}};function E(z,V=!0){return n.fromPrivateKey(z).toBytes(V)}function A(z){if(typeof z=="bigint")return!1;if(z instanceof n)return!0;const V=br("key",z).length,ne=a.BYTES,Z=ne+1,C=2*ne+1;if(!(t.allowedPrivateKeyLengths||c.BYTES===Z))return V===Z||V===C}function S(z,V,ne=!0){if(A(z)===!0)throw new Error("first arg must be private key");if(A(V)===!1)throw new Error("second arg must be public key");return n.fromHex(V).multiply(v(z)).toBytes(ne)}const B=e.bits2int||function(z){if(z.length>8192)throw new Error("input is too large");const V=u0(z),ne=z.length*8-h;return ne>0?V>>BigInt(ne):V},D=e.bits2int_modN||function(z){return c.create(B(z))},U=h0(h);function I(z){return uE("num < 2^"+h,z,kd,U),c.toBytes(z)}function N(z,V,ne=k){if(["recovered","canonical"].some(ie=>ie in ne))throw new Error("sign() legacy options not supported");const{hash:Z}=e;let{lowS:C,prehash:O,extraEntropy:M}=ne;C==null&&(C=!0),z=br("msgHash",z),L8(ne),O&&(z=br("prehashed msgHash",Z(z)));const q=D(z),G=v(V),_=[I(G),I(q)];if(M!=null&&M!==!1){const ie=M===!0?r(a.BYTES):M;_.push(br("extraEntropy",ie))}const F=kc(..._),X=q;function re(ie){const ge=B(ie);if(!c.isValidNot0(ge))return;const le=c.inv(ge),ue=n.BASE.multiply(ge).toAffine(),de=c.create(ue.x);if(de===kd)return;const ve=c.create(le*c.create(X+de*G));if(ve===kd)return;let Ne=(ue.x===de?0:2)|Number(ue.y&Ld),Ce=ve;return C&&d(ve)&&(Ce=p(ve),Ne^=1),new w(de,Ce,Ne)}return{seed:F,k2sig:re}}const k={lowS:e.lowS,prehash:!1},$={lowS:e.lowS,prehash:!1};function P(z,V,ne=k){const{seed:Z,k2sig:C}=N(z,V,ne);return KV(e.hash.outputLen,c.BYTES,i)(Z,C)}n.BASE.precompute(8);function L(z,V,ne,Z=$){const C=z;V=br("msgHash",V),ne=br("publicKey",ne),L8(Z);const{lowS:O,prehash:M,format:q}=Z;if("strict"in Z)throw new Error("options.strict was renamed to lowS");if(q!==void 0&&!["compact","der","js"].includes(q))throw new Error('format must be "compact", "der" or "js"');const G=typeof C=="string"||O2(C),_=!G&&!q&&typeof C=="object"&&C!==null&&typeof C.r=="bigint"&&typeof C.s=="bigint";if(!G&&!_)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let F,X;try{if(_)if(q===void 0||q==="js")F=new w(C.r,C.s);else throw new Error("invalid format");if(G){try{q!=="compact"&&(F=w.fromDER(C))}catch(Ne){if(!(Ne instanceof aa.Err))throw Ne}!F&&q!=="der"&&(F=w.fromCompact(C))}X=n.fromHex(ne)}catch{return!1}if(!F||O&&F.hasHighS())return!1;M&&(V=e.hash(V));const{r:re,s:ie}=F,ge=D(V),le=c.inv(ie),ue=c.create(ge*le),de=c.create(re*le),ve=n.BASE.multiplyUnsafe(ue).add(X.multiplyUnsafe(de));return ve.is0()?!1:c.create(ve.x)===re}return Object.freeze({getPublicKey:E,getSharedSecret:S,sign:P,verify:L,utils:b,Point:n,Signature:w})}function xG(n){const e={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},t=n.Fp,r=tf(e.n,n.nBitLength),i={Fp:t,Fn:r,allowedPrivateKeyLengths:n.allowedPrivateKeyLengths,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,wrapPrivateKey:n.wrapPrivateKey,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:e,curveOpts:i}}function SG(n){const{CURVE:e,curveOpts:t}=xG(n),r={hash:n.hash,hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:e,curveOpts:t,ecdsaOpts:r}}function OG(n,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:n})}function TG(n){const{CURVE:e,curveOpts:t,ecdsaOpts:r}=SG(n),i=EG(e,t),a=AG(i,r,t);return OG(n,a)}function fE(n,e){const t=r=>TG({...n,hash:r});return{...t(e),create:t}}const _R={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},NR={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},IR={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},DG=tf(_R.p),CG=tf(NR.p),_G=tf(IR.p),NG=fE({..._R,Fp:DG,lowS:!1},o0);fE({...NR,Fp:CG,lowS:!1},kq),fE({...IR,Fp:_G,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},$q);const IG=NG,RR="base10",rr="base16",Ar="base64pad",So="base64url",kp="utf8",BR=0,Sa=1,Lp=2,RG=0,j8=1,jd=12,P2=32;function BG(){const n=hE.utils.randomPrivateKey(),e=hE.getPublicKey(n);return{privateKey:Or(n,rr),publicKey:Or(e,rr)}}function dE(){const n=ef(P2);return Or(n,rr)}function PG(n,e){const t=hE.getSharedSecret(Ei(n,rr),Ei(e,rr)),r=qV(l0,t,void 0,void 0,P2);return Or(r,rr)}function Gy(n){const e=l0(Ei(n,rr));return Or(e,rr)}function wi(n){const e=l0(Ei(n,kp));return Or(e,rr)}function PR(n){return Ei(`${n}`,RR)}function wl(n){return Number(Or(n,RR))}function UR(n){return n.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function MR(n){const e=n.replace(/-/g,"+").replace(/_/g,"/"),t=(4-e.length%4)%4;return e+"=".repeat(t)}function UG(n){const e=PR(typeof n.type<"u"?n.type:BR);if(wl(e)===Sa&&typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof n.senderPublicKey<"u"?Ei(n.senderPublicKey,rr):void 0,r=typeof n.iv<"u"?Ei(n.iv,rr):ef(jd),i=Ei(n.symKey,rr),a=pR(i,r).encrypt(Ei(n.message,kp)),c=$R({type:e,sealed:a,iv:r,senderPublicKey:t});return n.encoding===So?UR(c):c}function MG(n){const e=Ei(n.symKey,rr),{sealed:t,iv:r}=cp({encoded:n.encoded,encoding:n.encoding}),i=pR(e,r).decrypt(t);if(i===null)throw new Error("Failed to decrypt");return Or(i,kp)}function $G(n,e){const t=PR(Lp),r=ef(jd),i=Ei(n,kp),a=$R({type:t,sealed:i,iv:r});return e===So?UR(a):a}function kG(n,e){const{sealed:t}=cp({encoded:n,encoding:e});return Or(t,kp)}function $R(n){if(wl(n.type)===Lp)return Or(Md([n.type,n.sealed]),Ar);if(wl(n.type)===Sa){if(typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Or(Md([n.type,n.senderPublicKey,n.iv,n.sealed]),Ar)}return Or(Md([n.type,n.iv,n.sealed]),Ar)}function cp(n){const e=(n.encoding||Ar)===So?MR(n.encoded):n.encoded,t=Ei(e,Ar),r=t.slice(RG,j8),i=j8;if(wl(r)===Sa){const h=i+P2,d=h+jd,p=t.slice(i,h),y=t.slice(h,d),w=t.slice(d);return{type:r,sealed:w,iv:y,senderPublicKey:p}}if(wl(r)===Lp){const h=t.slice(i),d=ef(jd);return{type:r,sealed:h,iv:d}}const a=i+jd,c=t.slice(i,a),u=t.slice(a);return{type:r,sealed:u,iv:c}}function LG(n,e){const t=cp({encoded:n,encoding:e==null?void 0:e.encoding});return kR({type:wl(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?Or(t.senderPublicKey,rr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function kR(n){const e=(n==null?void 0:n.type)||BR;if(e===Sa){if(typeof(n==null?void 0:n.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(n==null?void 0:n.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:n==null?void 0:n.senderPublicKey,receiverPublicKey:n==null?void 0:n.receiverPublicKey}}function z8(n){return n.type===Sa&&typeof n.senderPublicKey=="string"&&typeof n.receiverPublicKey=="string"}function H8(n){return n.type===Lp}function jG(n){const e=Buffer.from(n.x,"base64"),t=Buffer.from(n.y,"base64");return Md([new Uint8Array([4]),e,t])}function zG(n,e){const[t,r,i]=n.split("."),a=Buffer.from(MR(i),"base64");if(a.length!==64)throw new Error("Invalid signature length");const c=a.slice(0,32),u=a.slice(32,64),h=`${t}.${r}`,d=l0(h),p=jG(e);if(!IG.verify(Md([c,u]),d,p))throw new Error("Invalid signature");return eE(n).payload}const HG="irn";function Sm(n){return(n==null?void 0:n.relay)||{protocol:HG}}function zu(n){const e=SF[n];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${n}`);return e}function FG(n,e="-"){const t={},r="relay"+e;return Object.keys(n).forEach(i=>{if(i.startsWith(r)){const a=i.replace(r,""),c=n[i];t[a]=c}}),t}function F8(n){if(!n.includes("wc:")){const d=YI(n);d!=null&&d.includes("wc:")&&(n=d)}n=n.includes("wc://")?n.replace("wc://",""):n,n=n.includes("wc:")?n.replace("wc:",""):n;const e=n.indexOf(":"),t=n.indexOf("?")!==-1?n.indexOf("?"):void 0,r=n.substring(0,e),i=n.substring(e+1,t).split("@"),a=typeof t<"u"?n.substring(t):"",c=new URLSearchParams(a),u={};c.forEach((d,p)=>{u[p]=d});const h=typeof u.methods=="string"?u.methods.split(","):void 0;return{protocol:r,topic:qG(i[0]),version:parseInt(i[1],10),symKey:u.symKey,relay:FG(u),methods:h,expiryTimestamp:u.expiryTimestamp?parseInt(u.expiryTimestamp,10):void 0}}function qG(n){return n.startsWith("//")?n.substring(2):n}function VG(n,e="-"){const t="relay",r={};return Object.keys(n).forEach(i=>{const a=i,c=t+e+a;n[a]&&(r[c]=n[a])}),r}function q8(n){const e=new URLSearchParams,t=VG(n.relay);Object.keys(t).sort().forEach(i=>{e.set(i,t[i])}),e.set("symKey",n.symKey),n.expiryTimestamp&&e.set("expiryTimestamp",n.expiryTimestamp.toString()),n.methods&&e.set("methods",n.methods.join(","));const r=e.toString();return`${n.protocol}:${n.topic}@${n.version}?${r}`}function Ey(n,e,t){return`${n}?wc_ev=${t}&topic=${e}`}var GG=Object.defineProperty,KG=Object.defineProperties,QG=Object.getOwnPropertyDescriptors,V8=Object.getOwnPropertySymbols,YG=Object.prototype.hasOwnProperty,JG=Object.prototype.propertyIsEnumerable,G8=(n,e,t)=>e in n?GG(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ZG=(n,e)=>{for(var t in e||(e={}))YG.call(e,t)&&G8(n,t,e[t]);if(V8)for(var t of V8(e))JG.call(e,t)&&G8(n,t,e[t]);return n},XG=(n,e)=>KG(n,QG(e));function nf(n){const e=[];return n.forEach(t=>{const[r,i]=t.split(":");e.push(`${r}:${i}`)}),e}function WG(n){const e=[];return Object.values(n).forEach(t=>{e.push(...nf(t.accounts))}),e}function eK(n,e){const t=[];return Object.values(n).forEach(r=>{nf(r.accounts).includes(e)&&t.push(...r.methods)}),t}function tK(n,e){const t=[];return Object.values(n).forEach(r=>{nf(r.accounts).includes(e)&&t.push(...r.events)}),t}function d0(n){return n.includes(":")}function Hu(n){return d0(n)?n.split(":")[0]:n}function K8(n){var e,t,r;const i={};if(!Ds(n))return i;for(const[a,c]of Object.entries(n)){const u=d0(a)?[a]:c.chains,h=c.methods||[],d=c.events||[],p=Hu(a);i[p]=XG(ZG({},i[p]),{chains:Ts(u,(e=i[p])==null?void 0:e.chains),methods:Ts(h,(t=i[p])==null?void 0:t.methods),events:Ts(d,(r=i[p])==null?void 0:r.events)})}return i}function nK(n){const e={};return n==null||n.forEach(t=>{var r;const[i,a]=t.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[],methods:[]}),e[i].accounts.push(t),(r=e[i].chains)==null||r.push(`${i}:${a}`)}),e}function Q8(n,e){e=e.map(r=>r.replace("did:pkh:",""));const t=nK(e);for(const[r,i]of Object.entries(t))i.methods?i.methods=Ts(i.methods,n):i.methods=n,i.events=["chainChanged","accountsChanged"];return t}function rK(n,e){var t,r,i,a,c,u;const h=K8(n),d=K8(e),p={},y=Object.keys(h).concat(Object.keys(d));for(const w of y)p[w]={chains:Ts((t=h[w])==null?void 0:t.chains,(r=d[w])==null?void 0:r.chains),methods:Ts((i=h[w])==null?void 0:i.methods,(a=d[w])==null?void 0:a.methods),events:Ts((c=h[w])==null?void 0:c.events,(u=d[w])==null?void 0:u.events)};return p}const iK={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},sK={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Ee(n,e){const{message:t,code:r}=sK[n];return{message:e?`${t} ${e}`:t,code:r}}function Ot(n,e){const{message:t,code:r}=iK[n];return{message:e?`${t} ${e}`:t,code:r}}function Ai(n,e){return!!Array.isArray(n)}function Ds(n){return Object.getPrototypeOf(n)===Object.prototype&&Object.keys(n).length}function rn(n){return typeof n>"u"}function Jt(n,e){return e&&rn(n)?!0:typeof n=="string"&&!!n.trim().length}function U2(n,e){return e&&rn(n)?!0:typeof n=="number"&&!isNaN(n)}function aK(n,e){const{requiredNamespaces:t}=e,r=Object.keys(n.namespaces),i=Object.keys(t);let a=!0;return $c(i,r)?(r.forEach(c=>{const{accounts:u,methods:h,events:d}=n.namespaces[c],p=nf(u),y=t[c];(!$c(qI(c,y),p)||!$c(y.methods,h)||!$c(y.events,d))&&(a=!1)}),a):!1}function Om(n){return Jt(n,!1)&&n.includes(":")?n.split(":").length===2:!1}function oK(n){if(Jt(n,!1)&&n.includes(":")){const e=n.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&Om(t)}}return!1}function cK(n){function e(t){try{return typeof new URL(t)<"u"}catch{return!1}}try{if(Jt(n,!1)){if(e(n))return!0;const t=YI(n);return e(t)}}catch{}return!1}function lK(n){var e;return(e=n==null?void 0:n.proposer)==null?void 0:e.publicKey}function uK(n){return n==null?void 0:n.topic}function hK(n,e){let t=null;return Jt(n==null?void 0:n.publicKey,!1)||(t=Ee("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function Y8(n){let e=!0;return Ai(n)?n.length&&(e=n.every(t=>Jt(t,!1))):e=!1,e}function fK(n,e,t){let r=null;return Ai(e)&&e.length?e.forEach(i=>{r||Om(i)||(r=Ot("UNSUPPORTED_CHAINS",`${t}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):Om(n)||(r=Ot("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function dK(n,e,t){let r=null;return Object.entries(n).forEach(([i,a])=>{if(r)return;const c=fK(i,qI(i,a),`${e} ${t}`);c&&(r=c)}),r}function pK(n,e){let t=null;return Ai(n)?n.forEach(r=>{t||oK(r)||(t=Ot("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):t=Ot("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function gK(n,e){let t=null;return Object.values(n).forEach(r=>{if(t)return;const i=pK(r==null?void 0:r.accounts,`${e} namespace`);i&&(t=i)}),t}function yK(n,e){let t=null;return Y8(n==null?void 0:n.methods)?Y8(n==null?void 0:n.events)||(t=Ot("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=Ot("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function LR(n,e){let t=null;return Object.values(n).forEach(r=>{if(t)return;const i=yK(r,`${e}, namespace`);i&&(t=i)}),t}function mK(n,e,t){let r=null;if(n&&Ds(n)){const i=LR(n,e);i&&(r=i);const a=dK(n,e,t);a&&(r=a)}else r=Ee("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return r}function R1(n,e){let t=null;if(n&&Ds(n)){const r=LR(n,e);r&&(t=r);const i=gK(n,e);i&&(t=i)}else t=Ee("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function jR(n){return Jt(n.protocol,!0)}function wK(n,e){let t=!1;return n?n&&Ai(n)&&n.length&&n.forEach(r=>{t=jR(r)}):t=!0,t}function bK(n){return typeof n=="number"}function yr(n){return typeof n<"u"&&typeof n!==null}function vK(n){return!(!n||typeof n!="object"||!n.code||!U2(n.code,!1)||!n.message||!Jt(n.message,!1))}function EK(n){return!(rn(n)||!Jt(n.method,!1))}function AK(n){return!(rn(n)||rn(n.result)&&rn(n.error)||!U2(n.id,!1)||!Jt(n.jsonrpc,!1))}function xK(n){return!(rn(n)||!Jt(n.name,!1))}function J8(n,e){return!(!Om(e)||!WG(n).includes(e))}function SK(n,e,t){return Jt(t,!1)?eK(n,e).includes(t):!1}function OK(n,e,t){return Jt(t,!1)?tK(n,e).includes(t):!1}function Z8(n,e,t){let r=null;const i=TK(n),a=DK(e),c=Object.keys(i),u=Object.keys(a),h=X8(Object.keys(n)),d=X8(Object.keys(e)),p=h.filter(y=>!d.includes(y));return p.length&&(r=Ee("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${p.toString()}
      Received: ${Object.keys(e).toString()}`)),$c(c,u)||(r=Ee("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${c.toString()}
      Approved: ${u.toString()}`)),Object.keys(e).forEach(y=>{if(!y.includes(":")||r)return;const w=nf(e[y].accounts);w.includes(y)||(r=Ee("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${y}
        Required: ${y}
        Approved: ${w.toString()}`))}),c.forEach(y=>{r||($c(i[y].methods,a[y].methods)?$c(i[y].events,a[y].events)||(r=Ee("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${y}`)):r=Ee("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${y}`))}),r}function TK(n){const e={};return Object.keys(n).forEach(t=>{var r;t.includes(":")?e[t]=n[t]:(r=n[t].chains)==null||r.forEach(i=>{e[i]={methods:n[t].methods,events:n[t].events}})}),e}function X8(n){return[...new Set(n.map(e=>e.includes(":")?e.split(":")[0]:e))]}function DK(n){const e={};return Object.keys(n).forEach(t=>{if(t.includes(":"))e[t]=n[t];else{const r=nf(n[t].accounts);r==null||r.forEach(i=>{e[i]={accounts:n[t].accounts.filter(a=>a.includes(`${i}:`)),methods:n[t].methods,events:n[t].events}})}}),e}function CK(n,e){return U2(n,!1)&&n<=e.max&&n>=e.min}function W8(){const n=Mp();return new Promise(e=>{switch(n){case Kr.browser:e(_K());break;case Kr.reactNative:e(NK());break;case Kr.node:e(IK());break;default:e(!0)}})}function _K(){return Wh()&&(navigator==null?void 0:navigator.onLine)}async function NK(){if(Zo()&&typeof global<"u"&&global!=null&&global.NetInfo){const n=await(global==null?void 0:global.NetInfo.fetch());return n==null?void 0:n.isConnected}return!0}function IK(){return!0}function RK(n){switch(Mp()){case Kr.browser:BK(n);break;case Kr.reactNative:PK(n);break}}function BK(n){!Zo()&&Wh()&&(window.addEventListener("online",()=>n(!0)),window.addEventListener("offline",()=>n(!1)))}function PK(n){Zo()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>n(e==null?void 0:e.isConnected)))}function UK(){var n;return Wh()&&Da.getDocument()?((n=Da.getDocument())==null?void 0:n.visibilityState)==="visible":!0}const B1={};class md{static get(e){return B1[e]}static set(e,t){B1[e]=t}static delete(e){delete B1[e]}}function MK(n){const e=Bp.decode(n);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function $K({publicKey:n,signature:e,payload:t}){var r;const i=pE(t.method),a=128|parseInt(((r=t.version)==null?void 0:r.toString())||"4"),c=jK(t.address),u=t.era==="00"?new Uint8Array([0]):pE(t.era);if(u.length!==1&&u.length!==2)throw new Error("Invalid era length");const h=parseInt(t.nonce,16),d=new Uint8Array([h&255,h>>8&255]),p=BigInt(`0x${LK(t.tip)}`),y=HK(p),w=new Uint8Array([0,...n,c,...e,...u,...d,...y,...i]),v=zK(w.length+1);return new Uint8Array([...v,a,...w])}function kK(n){const e=pE(n),t=CF.blake2b(e,void 0,32);return"0x"+Buffer.from(t).toString("hex")}function pE(n){return new Uint8Array(n.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function LK(n){return n.startsWith("0x")?n.slice(2):n}function jK(n){const e=Bp.decode(n)[0];return e===42?0:e===60?2:1}function zK(n){if(n<64)return new Uint8Array([n<<2]);if(n<16384){const e=n<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(n<1<<30){const e=n<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function HK(n){if(n<BigInt(1)<<BigInt(6))return new Uint8Array([Number(n<<BigInt(2))]);if(n<BigInt(1)<<BigInt(14)){const e=n<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(n<BigInt(1)<<BigInt(30)){const e=n<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function FK(n){const e=Uint8Array.from(Buffer.from(n.signature,"hex")),t=MK(n.transaction.address),r=$K({publicKey:t,signature:e,payload:n.transaction}),i=Buffer.from(r).toString("hex");return kK(i)}class Al{}let qK=class extends Al{constructor(e){super()}};const eD=Ae.FIVE_SECONDS,xl={pulse:"heartbeat_pulse"};let VK=class zR extends qK{constructor(e){super(e),this.events=new Yr.EventEmitter,this.interval=eD,this.interval=(e==null?void 0:e.interval)||eD}static async init(e){const t=new zR(e);return await t.init(),t}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),Ae.toMiliseconds(this.interval))}pulse(){this.events.emit(xl.pulse)}};const GK=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,KK=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,QK=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function YK(n,e){if(n==="__proto__"||n==="constructor"&&e&&typeof e=="object"&&"prototype"in e){JK(n);return}return e}function JK(n){console.warn(`[destr] Dropping "${n}" key to prevent prototype pollution.`)}function Ay(n,e={}){if(typeof n!="string")return n;if(n[0]==='"'&&n[n.length-1]==='"'&&n.indexOf("\\")===-1)return n.slice(1,-1);const t=n.trim();if(t.length<=9)switch(t.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!QK.test(n)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return n}try{if(GK.test(n)||KK.test(n)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(n,YK)}return JSON.parse(n)}catch(r){if(e.strict)throw r;return n}}function ZK(n){return!n||typeof n.then!="function"?Promise.resolve(n):n}function fn(n,...e){try{return ZK(n(...e))}catch(t){return Promise.reject(t)}}function XK(n){const e=typeof n;return n===null||e!=="object"&&e!=="function"}function WK(n){const e=Object.getPrototypeOf(n);return!e||e.isPrototypeOf(Object)}function Ky(n){if(XK(n))return String(n);if(WK(n)||Array.isArray(n))return JSON.stringify(n);if(typeof n.toJSON=="function")return Ky(n.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const gE="base64:";function eQ(n){return typeof n=="string"?n:gE+rQ(n)}function tQ(n){return typeof n!="string"||!n.startsWith(gE)?n:nQ(n.slice(gE.length))}function nQ(n){return globalThis.Buffer?Buffer.from(n,"base64"):Uint8Array.from(globalThis.atob(n),e=>e.codePointAt(0))}function rQ(n){return globalThis.Buffer?Buffer.from(n).toString("base64"):globalThis.btoa(String.fromCodePoint(...n))}function gr(n){var e;return n&&((e=n.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function iQ(...n){return gr(n.join(":"))}function xy(n){return n=gr(n),n?n+":":""}function sQ(n,e){if(e===void 0)return!0;let t=0,r=n.indexOf(":");for(;r>-1;)t++,r=n.indexOf(":",r+1);return t<=e}function aQ(n,e){return e?n.startsWith(e)&&n[n.length-1]!=="$":n[n.length-1]!=="$"}const oQ="memory",cQ=()=>{const n=new Map;return{name:oQ,getInstance:()=>n,hasItem(e){return n.has(e)},getItem(e){return n.get(e)??null},getItemRaw(e){return n.get(e)??null},setItem(e,t){n.set(e,t)},setItemRaw(e,t){n.set(e,t)},removeItem(e){n.delete(e)},getKeys(){return[...n.keys()]},clear(){n.clear()},dispose(){n.clear()}}};function lQ(n={}){const e={mounts:{"":n.driver||cQ()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},t=d=>{for(const p of e.mountpoints)if(d.startsWith(p))return{base:p,relativeKey:d.slice(p.length),driver:e.mounts[p]};return{base:"",relativeKey:d,driver:e.mounts[""]}},r=(d,p)=>e.mountpoints.filter(y=>y.startsWith(d)||p&&d.startsWith(y)).map(y=>({relativeBase:d.length>y.length?d.slice(y.length):void 0,mountpoint:y,driver:e.mounts[y]})),i=(d,p)=>{if(e.watching){p=gr(p);for(const y of e.watchListeners)y(d,p)}},a=async()=>{if(!e.watching){e.watching=!0;for(const d in e.mounts)e.unwatch[d]=await tD(e.mounts[d],i,d)}},c=async()=>{if(e.watching){for(const d in e.unwatch)await e.unwatch[d]();e.unwatch={},e.watching=!1}},u=(d,p,y)=>{const w=new Map,v=b=>{let E=w.get(b.base);return E||(E={driver:b.driver,base:b.base,items:[]},w.set(b.base,E)),E};for(const b of d){const E=typeof b=="string",A=gr(E?b:b.key),S=E?void 0:b.value,B=E||!b.options?p:{...p,...b.options},D=t(A);v(D).items.push({key:A,value:S,relativeKey:D.relativeKey,options:B})}return Promise.all([...w.values()].map(b=>y(b))).then(b=>b.flat())},h={hasItem(d,p={}){d=gr(d);const{relativeKey:y,driver:w}=t(d);return fn(w.hasItem,y,p)},getItem(d,p={}){d=gr(d);const{relativeKey:y,driver:w}=t(d);return fn(w.getItem,y,p).then(v=>Ay(v))},getItems(d,p={}){return u(d,p,y=>y.driver.getItems?fn(y.driver.getItems,y.items.map(w=>({key:w.relativeKey,options:w.options})),p).then(w=>w.map(v=>({key:iQ(y.base,v.key),value:Ay(v.value)}))):Promise.all(y.items.map(w=>fn(y.driver.getItem,w.relativeKey,w.options).then(v=>({key:w.key,value:Ay(v)})))))},getItemRaw(d,p={}){d=gr(d);const{relativeKey:y,driver:w}=t(d);return w.getItemRaw?fn(w.getItemRaw,y,p):fn(w.getItem,y,p).then(v=>tQ(v))},async setItem(d,p,y={}){if(p===void 0)return h.removeItem(d);d=gr(d);const{relativeKey:w,driver:v}=t(d);v.setItem&&(await fn(v.setItem,w,Ky(p),y),v.watch||i("update",d))},async setItems(d,p){await u(d,p,async y=>{if(y.driver.setItems)return fn(y.driver.setItems,y.items.map(w=>({key:w.relativeKey,value:Ky(w.value),options:w.options})),p);y.driver.setItem&&await Promise.all(y.items.map(w=>fn(y.driver.setItem,w.relativeKey,Ky(w.value),w.options)))})},async setItemRaw(d,p,y={}){if(p===void 0)return h.removeItem(d,y);d=gr(d);const{relativeKey:w,driver:v}=t(d);if(v.setItemRaw)await fn(v.setItemRaw,w,p,y);else if(v.setItem)await fn(v.setItem,w,eQ(p),y);else return;v.watch||i("update",d)},async removeItem(d,p={}){typeof p=="boolean"&&(p={removeMeta:p}),d=gr(d);const{relativeKey:y,driver:w}=t(d);w.removeItem&&(await fn(w.removeItem,y,p),(p.removeMeta||p.removeMata)&&await fn(w.removeItem,y+"$",p),w.watch||i("remove",d))},async getMeta(d,p={}){typeof p=="boolean"&&(p={nativeOnly:p}),d=gr(d);const{relativeKey:y,driver:w}=t(d),v=Object.create(null);if(w.getMeta&&Object.assign(v,await fn(w.getMeta,y,p)),!p.nativeOnly){const b=await fn(w.getItem,y+"$",p).then(E=>Ay(E));b&&typeof b=="object"&&(typeof b.atime=="string"&&(b.atime=new Date(b.atime)),typeof b.mtime=="string"&&(b.mtime=new Date(b.mtime)),Object.assign(v,b))}return v},setMeta(d,p,y={}){return this.setItem(d+"$",p,y)},removeMeta(d,p={}){return this.removeItem(d+"$",p)},async getKeys(d,p={}){var A;d=xy(d);const y=r(d,!0);let w=[];const v=[];let b=!0;for(const S of y){(A=S.driver.flags)!=null&&A.maxDepth||(b=!1);const B=await fn(S.driver.getKeys,S.relativeBase,p);for(const D of B){const U=S.mountpoint+gr(D);w.some(I=>U.startsWith(I))||v.push(U)}w=[S.mountpoint,...w.filter(D=>!D.startsWith(S.mountpoint))]}const E=p.maxDepth!==void 0&&!b;return v.filter(S=>(!E||sQ(S,p.maxDepth))&&aQ(S,d))},async clear(d,p={}){d=xy(d),await Promise.all(r(d,!1).map(async y=>{if(y.driver.clear)return fn(y.driver.clear,y.relativeBase,p);if(y.driver.removeItem){const w=await y.driver.getKeys(y.relativeBase||"",p);return Promise.all(w.map(v=>y.driver.removeItem(v,p)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(d=>nD(d)))},async watch(d){return await a(),e.watchListeners.push(d),async()=>{e.watchListeners=e.watchListeners.filter(p=>p!==d),e.watchListeners.length===0&&await c()}},async unwatch(){e.watchListeners=[],await c()},mount(d,p){if(d=xy(d),d&&e.mounts[d])throw new Error(`already mounted at ${d}`);return d&&(e.mountpoints.push(d),e.mountpoints.sort((y,w)=>w.length-y.length)),e.mounts[d]=p,e.watching&&Promise.resolve(tD(p,i,d)).then(y=>{e.unwatch[d]=y}).catch(console.error),h},async unmount(d,p=!0){var y,w;d=xy(d),!(!d||!e.mounts[d])&&(e.watching&&d in e.unwatch&&((w=(y=e.unwatch)[d])==null||w.call(y),delete e.unwatch[d]),p&&await nD(e.mounts[d]),e.mountpoints=e.mountpoints.filter(v=>v!==d),delete e.mounts[d])},getMount(d=""){d=gr(d)+":";const p=t(d);return{driver:p.driver,base:p.base}},getMounts(d="",p={}){return d=gr(d),r(d,p.parents).map(w=>({driver:w.driver,base:w.mountpoint}))},keys:(d,p={})=>h.getKeys(d,p),get:(d,p={})=>h.getItem(d,p),set:(d,p,y={})=>h.setItem(d,p,y),has:(d,p={})=>h.hasItem(d,p),del:(d,p={})=>h.removeItem(d,p),remove:(d,p={})=>h.removeItem(d,p)};return h}function tD(n,e,t){return n.watch?n.watch((r,i)=>e(r,t+i)):()=>{}}async function nD(n){typeof n.dispose=="function"&&await fn(n.dispose)}function Sl(n){return new Promise((e,t)=>{n.oncomplete=n.onsuccess=()=>e(n.result),n.onabort=n.onerror=()=>t(n.error)})}function HR(n,e){let t;const r=()=>{if(t)return t;const i=indexedDB.open(n);return i.onupgradeneeded=()=>i.result.createObjectStore(e),t=Sl(i),t.then(a=>{a.onclose=()=>t=void 0},()=>{}),t};return(i,a)=>r().then(c=>a(c.transaction(e,i).objectStore(e)))}let P1;function jp(){return P1||(P1=HR("keyval-store","keyval")),P1}function rD(n,e=jp()){return e("readonly",t=>Sl(t.get(n)))}function uQ(n,e,t=jp()){return t("readwrite",r=>(r.put(e,n),Sl(r.transaction)))}function hQ(n,e=jp()){return e("readwrite",t=>(t.delete(n),Sl(t.transaction)))}function fQ(n=jp()){return n("readwrite",e=>(e.clear(),Sl(e.transaction)))}function dQ(n,e){return n.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Sl(n.transaction)}function pQ(n=jp()){return n("readonly",e=>{if(e.getAllKeys)return Sl(e.getAllKeys());const t=[];return dQ(e,r=>t.push(r.key)).then(()=>t)})}const gQ="idb-keyval";var yQ=(n={})=>{const e=n.base&&n.base.length>0?`${n.base}:`:"",t=i=>e+i;let r;return n.dbName&&n.storeName&&(r=HR(n.dbName,n.storeName)),{name:gQ,options:n,async hasItem(i){return!(typeof await rD(t(i),r)>"u")},async getItem(i){return await rD(t(i),r)??null},setItem(i,a){return uQ(t(i),a,r)},removeItem(i){return hQ(t(i),r)},getKeys(){return pQ(r)},clear(){return fQ(r)}}};const mQ="WALLET_CONNECT_V2_INDEXED_DB",wQ="keyvaluestorage";let bQ=class{constructor(){this.indexedDb=lQ({driver:yQ({dbName:mQ,storeName:wQ})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const t=await this.indexedDb.getItem(e);if(t!==null)return t}async setItem(e,t){await this.indexedDb.setItem(e,Ca(t))}async removeItem(e){await this.indexedDb.removeItem(e)}};var U1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qy={exports:{}};(function(){let n;function e(){}n=e,n.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},n.prototype.setItem=function(t,r){this[t]=String(r)},n.prototype.removeItem=function(t){delete this[t]},n.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(r){t[r]=void 0,delete t[r]})},n.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},n.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof U1<"u"&&U1.localStorage?Qy.exports=U1.localStorage:typeof window<"u"&&window.localStorage?Qy.exports=window.localStorage:Qy.exports=new e})();function vQ(n){var e;return[n[0],yl((e=n[1])!=null?e:"")]}let EQ=class{constructor(){this.localStorage=Qy.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(vQ)}async getItem(e){const t=this.localStorage.getItem(e);if(t!==null)return yl(t)}async setItem(e,t){this.localStorage.setItem(e,Ca(t))}async removeItem(e){this.localStorage.removeItem(e)}};const AQ="wc_storage_version",iD=1,xQ=async(n,e,t)=>{const r=AQ,i=await e.getItem(r);if(i&&i>=iD){t(e);return}const a=await n.getKeys();if(!a.length){t(e);return}const c=[];for(;a.length;){const u=a.shift();if(!u)continue;const h=u.toLowerCase();if(h.includes("wc@")||h.includes("walletconnect")||h.includes("wc_")||h.includes("wallet_connect")){const d=await n.getItem(u);await e.setItem(u,d),c.push(u)}}await e.setItem(r,iD),t(e),SQ(n,c)},SQ=async(n,e)=>{e.length&&e.forEach(async t=>{await n.removeItem(t)})};let OQ=class{constructor(){this.initialized=!1,this.setInitialized=t=>{this.storage=t,this.initialized=!0};const e=new EQ;this.storage=e;try{const t=new bQ;xQ(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}};var M1,sD;function TQ(){if(sD)return M1;sD=1;function n(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}M1=e;function e(t,r,i){var a=i&&i.stringify||n,c=1;if(typeof t=="object"&&t!==null){var u=r.length+c;if(u===1)return t;var h=new Array(u);h[0]=a(t);for(var d=1;d<u;d++)h[d]=a(r[d]);return h.join(" ")}if(typeof t!="string")return t;var p=r.length;if(p===0)return t;for(var y="",w=1-c,v=-1,b=t&&t.length||0,E=0;E<b;){if(t.charCodeAt(E)===37&&E+1<b){switch(v=v>-1?v:0,t.charCodeAt(E+1)){case 100:case 102:if(w>=p||r[w]==null)break;v<E&&(y+=t.slice(v,E)),y+=Number(r[w]),v=E+2,E++;break;case 105:if(w>=p||r[w]==null)break;v<E&&(y+=t.slice(v,E)),y+=Math.floor(Number(r[w])),v=E+2,E++;break;case 79:case 111:case 106:if(w>=p||r[w]===void 0)break;v<E&&(y+=t.slice(v,E));var A=typeof r[w];if(A==="string"){y+="'"+r[w]+"'",v=E+2,E++;break}if(A==="function"){y+=r[w].name||"<anonymous>",v=E+2,E++;break}y+=a(r[w]),v=E+2,E++;break;case 115:if(w>=p)break;v<E&&(y+=t.slice(v,E)),y+=String(r[w]),v=E+2,E++;break;case 37:v<E&&(y+=t.slice(v,E)),y+="%",v=E+2,E++,w--;break}++w}++E}return v===-1?t:(v<b&&(y+=t.slice(v)),y)}return M1}var $1,aD;function DQ(){if(aD)return $1;aD=1;const n=TQ();$1=i;const e=I().console||{},t={mapHttpRequest:b,mapHttpResponse:b,wrapRequestSerializer:E,wrapResponseSerializer:E,wrapErrorSerializer:E,req:b,res:b,err:w};function r(N,k){return Array.isArray(N)?N.filter(function(P){return P!=="!stdSerializers.err"}):N===!0?Object.keys(k):!1}function i(N){N=N||{},N.browser=N.browser||{};const k=N.browser.transmit;if(k&&typeof k.send!="function")throw Error("pino: transmit option must have a send function");const $=N.browser.write||e;N.browser.write&&(N.browser.asObject=!0);const P=N.serializers||{},L=r(N.browser.serialize,P);let z=N.browser.serialize;Array.isArray(N.browser.serialize)&&N.browser.serialize.indexOf("!stdSerializers.err")>-1&&(z=!1);const V=["error","fatal","warn","info","debug","trace"];typeof $=="function"&&($.error=$.fatal=$.warn=$.info=$.debug=$.trace=$),N.enabled===!1&&(N.level="silent");const ne=N.level||"info",Z=Object.create($);Z.log||(Z.log=A),Object.defineProperty(Z,"levelVal",{get:O}),Object.defineProperty(Z,"level",{get:M,set:q});const C={transmit:k,serialize:L,asObject:N.browser.asObject,levels:V,timestamp:v(N)};Z.levels=i.levels,Z.level=ne,Z.setMaxListeners=Z.getMaxListeners=Z.emit=Z.addListener=Z.on=Z.prependListener=Z.once=Z.prependOnceListener=Z.removeListener=Z.removeAllListeners=Z.listeners=Z.listenerCount=Z.eventNames=Z.write=Z.flush=A,Z.serializers=P,Z._serialize=L,Z._stdErrSerialize=z,Z.child=G,k&&(Z._logEvent=y());function O(){return this.level==="silent"?1/0:this.levels.values[this.level]}function M(){return this._level}function q(_){if(_!=="silent"&&!this.levels.values[_])throw Error("unknown level "+_);this._level=_,a(C,Z,"error","log"),a(C,Z,"fatal","error"),a(C,Z,"warn","error"),a(C,Z,"info","log"),a(C,Z,"debug","log"),a(C,Z,"trace","log")}function G(_,F){if(!_)throw new Error("missing bindings for child Pino");F=F||{},L&&_.serializers&&(F.serializers=_.serializers);const X=F.serializers;if(L&&X){var re=Object.assign({},P,X),ie=N.browser.serialize===!0?Object.keys(re):L;delete _.serializers,h([_],ie,re,this._stdErrSerialize)}function ge(le){this._childLevel=(le._childLevel|0)+1,this.error=d(le,_,"error"),this.fatal=d(le,_,"fatal"),this.warn=d(le,_,"warn"),this.info=d(le,_,"info"),this.debug=d(le,_,"debug"),this.trace=d(le,_,"trace"),re&&(this.serializers=re,this._serialize=ie),k&&(this._logEvent=y([].concat(le._logEvent.bindings,_)))}return ge.prototype=this,new ge(this)}return Z}i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},i.stdSerializers=t,i.stdTimeFunctions=Object.assign({},{nullTime:S,epochTime:B,unixTime:D,isoTime:U});function a(N,k,$,P){const L=Object.getPrototypeOf(k);k[$]=k.levelVal>k.levels.values[$]?A:L[$]?L[$]:e[$]||e[P]||A,c(N,k,$)}function c(N,k,$){!N.transmit&&k[$]===A||(k[$]=function(P){return function(){const z=N.timestamp(),V=new Array(arguments.length),ne=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var Z=0;Z<V.length;Z++)V[Z]=arguments[Z];if(N.serialize&&!N.asObject&&h(V,this._serialize,this.serializers,this._stdErrSerialize),N.asObject?P.call(ne,u(this,$,V,z)):P.apply(ne,V),N.transmit){const C=N.transmit.level||k.level,O=i.levels.values[C],M=i.levels.values[$];if(M<O)return;p(this,{ts:z,methodLevel:$,methodValue:M,transmitValue:i.levels.values[N.transmit.level||k.level],send:N.transmit.send,val:k.levelVal},V)}}}(k[$]))}function u(N,k,$,P){N._serialize&&h($,N._serialize,N.serializers,N._stdErrSerialize);const L=$.slice();let z=L[0];const V={};P&&(V.time=P),V.level=i.levels.values[k];let ne=(N._childLevel|0)+1;if(ne<1&&(ne=1),z!==null&&typeof z=="object"){for(;ne--&&typeof L[0]=="object";)Object.assign(V,L.shift());z=L.length?n(L.shift(),L):void 0}else typeof z=="string"&&(z=n(L.shift(),L));return z!==void 0&&(V.msg=z),V}function h(N,k,$,P){for(const L in N)if(P&&N[L]instanceof Error)N[L]=i.stdSerializers.err(N[L]);else if(typeof N[L]=="object"&&!Array.isArray(N[L]))for(const z in N[L])k&&k.indexOf(z)>-1&&z in $&&(N[L][z]=$[z](N[L][z]))}function d(N,k,$){return function(){const P=new Array(1+arguments.length);P[0]=k;for(var L=1;L<P.length;L++)P[L]=arguments[L-1];return N[$].apply(this,P)}}function p(N,k,$){const P=k.send,L=k.ts,z=k.methodLevel,V=k.methodValue,ne=k.val,Z=N._logEvent.bindings;h($,N._serialize||Object.keys(N.serializers),N.serializers,N._stdErrSerialize===void 0?!0:N._stdErrSerialize),N._logEvent.ts=L,N._logEvent.messages=$.filter(function(C){return Z.indexOf(C)===-1}),N._logEvent.level.label=z,N._logEvent.level.value=V,P(z,N._logEvent,ne),N._logEvent=y(Z)}function y(N){return{ts:0,messages:[],bindings:N||[],level:{label:"",value:0}}}function w(N){const k={type:N.constructor.name,msg:N.message,stack:N.stack};for(const $ in N)k[$]===void 0&&(k[$]=N[$]);return k}function v(N){return typeof N.timestamp=="function"?N.timestamp:N.timestamp===!1?S:B}function b(){return{}}function E(N){return N}function A(){}function S(){return!1}function B(){return Date.now()}function D(){return Math.round(Date.now()/1e3)}function U(){return new Date(Date.now()).toISOString()}function I(){function N(k){return typeof k<"u"&&k}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return N(self)||N(window)||N(this)||{}}}return $1}var $u=DQ();const zp=xp($u),CQ={level:"info"},Hp="custom_context",M2=1e3*1024;let _Q=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},oD=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const t=new _Q(e);if(t.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=t),this.tail=t):(this.head=t,this.tail=t),this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let t=this.head;for(;t!==null;)e.push(t.value),t=t.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const t=e.value;return e=e.next,{done:!1,value:t}}}}},FR=class{constructor(e,t=M2){this.level=e??"error",this.levelValue=$u.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new oD(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,t){t===$u.levels.values.error?console.error(e):t===$u.levels.values.warn?console.warn(e):t===$u.levels.values.debug?console.debug(e):t===$u.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Ca({timestamp:new Date().toISOString(),log:e}));const t=typeof e=="string"?JSON.parse(e).level:e.level;t>=this.levelValue&&this.forwardToConsole(e,t)}getLogs(){return this.logs}clearLogs(){this.logs=new oD(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const t=this.getLogArray();return t.push(Ca({extraMetadata:e})),new Blob(t,{type:"application/json"})}},NQ=class{constructor(e,t=M2){this.baseChunkLogger=new FR(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const t=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=t,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}},IQ=class{constructor(e,t=M2){this.baseChunkLogger=new FR(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var RQ=Object.defineProperty,BQ=Object.defineProperties,PQ=Object.getOwnPropertyDescriptors,cD=Object.getOwnPropertySymbols,UQ=Object.prototype.hasOwnProperty,MQ=Object.prototype.propertyIsEnumerable,lD=(n,e,t)=>e in n?RQ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Tm=(n,e)=>{for(var t in e||(e={}))UQ.call(e,t)&&lD(n,t,e[t]);if(cD)for(var t of cD(e))MQ.call(e,t)&&lD(n,t,e[t]);return n},Dm=(n,e)=>BQ(n,PQ(e));function p0(n){return Dm(Tm({},n),{level:(n==null?void 0:n.level)||CQ.level})}function $Q(n,e=Hp){return n[e]||""}function kQ(n,e,t=Hp){return n[t]=e,n}function Dr(n,e=Hp){let t="";return typeof n.bindings>"u"?t=$Q(n,e):t=n.bindings().context||"",t}function LQ(n,e,t=Hp){const r=Dr(n,t);return r.trim()?`${r}/${e}`:e}function ir(n,e,t=Hp){const r=LQ(n,e,t),i=n.child({context:r});return kQ(i,r,t)}function jQ(n){var e,t;const r=new NQ((e=n.opts)==null?void 0:e.level,n.maxSizeInBytes);return{logger:zp(Dm(Tm({},n.opts),{level:"trace",browser:Dm(Tm({},(t=n.opts)==null?void 0:t.browser),{write:i=>r.write(i)})})),chunkLoggerController:r}}function zQ(n){var e;const t=new IQ((e=n.opts)==null?void 0:e.level,n.maxSizeInBytes);return{logger:zp(Dm(Tm({},n.opts),{level:"trace"}),t),chunkLoggerController:t}}function HQ(n){return typeof n.loggerOverride<"u"&&typeof n.loggerOverride!="string"?{logger:n.loggerOverride,chunkLoggerController:null}:typeof window<"u"?jQ(n):zQ(n)}var FQ=Object.defineProperty,qQ=(n,e,t)=>e in n?FQ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,uD=(n,e,t)=>qQ(n,typeof e!="symbol"?e+"":e,t);let VQ=class extends Al{constructor(e){super(),this.opts=e,uD(this,"protocol","wc"),uD(this,"version",2)}};var GQ=Object.defineProperty,KQ=(n,e,t)=>e in n?GQ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,QQ=(n,e,t)=>KQ(n,e+"",t);let YQ=class extends Al{constructor(e,t){super(),this.core=e,this.logger=t,QQ(this,"records",new Map)}},JQ=class{constructor(e,t){this.logger=e,this.core=t}},ZQ=class extends Al{constructor(e,t){super(),this.relayer=e,this.logger=t}},XQ=class extends Al{constructor(e){super()}},WQ=class{constructor(e,t,r,i){this.core=e,this.logger=t,this.name=r}},eY=class extends Al{constructor(e,t){super(),this.relayer=e,this.logger=t}},tY=class extends Al{constructor(e,t){super(),this.core=e,this.logger=t}},nY=class{constructor(e,t,r){this.core=e,this.logger=t,this.store=r}},rY=class{constructor(e,t){this.projectId=e,this.logger=t}},iY=class{constructor(e,t,r){this.core=e,this.logger=t,this.telemetryEnabled=r}};var sY=Object.defineProperty,aY=(n,e,t)=>e in n?sY(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,hD=(n,e,t)=>aY(n,typeof e!="symbol"?e+"":e,t);let oY=class{constructor(e){this.opts=e,hD(this,"protocol","wc"),hD(this,"version",2)}},cY=class{constructor(e){this.client=e}};const lY="PARSE_ERROR",uY="INVALID_REQUEST",hY="METHOD_NOT_FOUND",fY="INVALID_PARAMS",qR="INTERNAL_ERROR",$2="SERVER_ERROR",dY=[-32700,-32600,-32601,-32602,-32603],zd={[lY]:{code:-32700,message:"Parse error"},[uY]:{code:-32600,message:"Invalid Request"},[hY]:{code:-32601,message:"Method not found"},[fY]:{code:-32602,message:"Invalid params"},[qR]:{code:-32603,message:"Internal error"},[$2]:{code:-32e3,message:"Server error"}},VR=$2;function pY(n){return dY.includes(n)}function fD(n){return Object.keys(zd).includes(n)?zd[n]:zd[VR]}function gY(n){const e=Object.values(zd).find(t=>t.code===n);return e||zd[VR]}function GR(n,e,t){return n.message.includes("getaddrinfo ENOTFOUND")||n.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):n}var k1={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var yE=function(n,e){return yE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},yE(n,e)};function yY(n,e){yE(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var mE=function(){return mE=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},mE.apply(this,arguments)};function mY(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function wY(n,e,t,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,e,t,r);else for(var u=n.length-1;u>=0;u--)(c=n[u])&&(a=(i<3?c(a):i>3?c(e,t,a):c(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a}function bY(n,e){return function(t,r){e(t,r,n)}}function vY(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function EY(n,e,t,r){function i(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function u(p){try{d(r.next(p))}catch(y){c(y)}}function h(p){try{d(r.throw(p))}catch(y){c(y)}}function d(p){p.done?a(p.value):i(p.value).then(u,h)}d((r=r.apply(n,e||[])).next())})}function AY(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(d){return function(p){return h([d,p])}}function h(d){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,i=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){t.label=d[1];break}if(d[0]===6&&t.label<a[1]){t.label=a[1],a=d;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(d);break}a[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(n,t)}catch(p){d=[6,p],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function xY(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}function SY(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function wE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function KR(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],c;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(u){c={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(c)throw c.error}}return a}function OY(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(KR(arguments[e]));return n}function TY(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var a=arguments[e],c=0,u=a.length;c<u;c++,i++)r[i]=a[c];return r}function lp(n){return this instanceof lp?(this.v=n,this):new lp(n)}function DY(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,a=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(w){r[w]&&(i[w]=function(v){return new Promise(function(b,E){a.push([w,v,b,E])>1||u(w,v)})})}function u(w,v){try{h(r[w](v))}catch(b){y(a[0][3],b)}}function h(w){w.value instanceof lp?Promise.resolve(w.value.v).then(d,p):y(a[0][2],w)}function d(w){u("next",w)}function p(w){u("throw",w)}function y(w,v){w(v),a.shift(),a.length&&u(a[0][0],a[0][1])}}function CY(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,a){e[i]=n[i]?function(c){return(t=!t)?{value:lp(n[i](c)),done:i==="return"}:a?a(c):c}:a}}function _Y(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof wE=="function"?wE(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(a){t[a]=n[a]&&function(c){return new Promise(function(u,h){c=n[a](c),i(u,h,c.done,c.value)})}}function i(a,c,u,h){Promise.resolve(h).then(function(d){a({value:d,done:u})},c)}}function NY(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function IY(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function RY(n){return n&&n.__esModule?n:{default:n}}function BY(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function PY(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}const UY=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return mE},__asyncDelegator:CY,__asyncGenerator:DY,__asyncValues:_Y,__await:lp,__awaiter:EY,__classPrivateFieldGet:BY,__classPrivateFieldSet:PY,__createBinding:xY,__decorate:wY,__exportStar:SY,__extends:yY,__generator:AY,__importDefault:RY,__importStar:IY,__makeTemplateObject:NY,__metadata:vY,__param:bY,__read:KR,__rest:mY,__spread:OY,__spreadArrays:TY,__values:wE},Symbol.toStringTag,{value:"Module"})),MY=DC(UY);var Zs={},dD;function $Y(){if(dD)return Zs;dD=1,Object.defineProperty(Zs,"__esModule",{value:!0}),Zs.isBrowserCryptoAvailable=Zs.getSubtleCrypto=Zs.getBrowerCrypto=void 0;function n(){return(vs==null?void 0:vs.crypto)||(vs==null?void 0:vs.msCrypto)||{}}Zs.getBrowerCrypto=n;function e(){const r=n();return r.subtle||r.webkitSubtle}Zs.getSubtleCrypto=e;function t(){return!!n()&&!!e()}return Zs.isBrowserCryptoAvailable=t,Zs}var Xs={},pD;function kY(){if(pD)return Xs;pD=1,Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.isBrowser=Xs.isNode=Xs.isReactNative=void 0;function n(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Xs.isReactNative=n;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Xs.isNode=e;function t(){return!n()&&!e()}return Xs.isBrowser=t,Xs}var gD;function LY(){return gD||(gD=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=MY;e.__exportStar($Y(),n),e.__exportStar(kY(),n)}(k1)),k1}var jY=LY();function us(n=3){const e=Date.now()*Math.pow(10,n),t=Math.floor(Math.random()*Math.pow(10,n));return e+t}function Ho(n=6){return BigInt(us(n))}function Vi(n,e,t){return{id:t||us(),jsonrpc:"2.0",method:n,params:e}}function up(n,e){return{id:n,jsonrpc:"2.0",result:e}}function g0(n,e,t){return{id:n,jsonrpc:"2.0",error:zY(e)}}function zY(n,e){return typeof n>"u"?fD(qR):(typeof n=="string"&&(n=Object.assign(Object.assign({},fD($2)),{message:n})),pY(n.code)&&(n=gY(n.code)),n)}let HY=class{},FY=class extends HY{constructor(){super()}},qY=class extends FY{constructor(e){super()}};const VY="^https?:",GY="^wss?:";function KY(n){const e=n.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function QR(n,e){const t=KY(n);return typeof t>"u"?!1:new RegExp(e).test(t)}function yD(n){return QR(n,VY)}function mD(n){return QR(n,GY)}function QY(n){return new RegExp("wss?://localhost(:d{2,5})?").test(n)}function YR(n){return typeof n=="object"&&"id"in n&&"jsonrpc"in n&&n.jsonrpc==="2.0"}function k2(n){return YR(n)&&"method"in n}function y0(n){return YR(n)&&(hs(n)||bi(n))}function hs(n){return"result"in n}function bi(n){return"error"in n}let Oi=class extends qY{constructor(e){super(e),this.events=new Yr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(Vi(e.method,e.params||[],e.id||Ho().toString()),t)}async requestStrict(e,t){return new Promise(async(r,i)=>{if(!this.connection.connected)try{await this.open()}catch(a){i(a)}this.events.on(`${e.id}`,a=>{bi(a)?i(a.error):r(a.result)});try{await this.connection.send(e,t)}catch(a){i(a)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),y0(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const YY=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),JY=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",wD=n=>n.split("?")[0],bD=10,ZY=YY();let XY=class{constructor(e){if(this.url=e,this.events=new Yr.EventEmitter,this.registering=!1,!mD(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Ca(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!mD(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((r,i)=>{this.events.once("register_error",a=>{this.resetMaxListeners(),i(a)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,r)=>{const i=jY.isReactNative()?void 0:{rejectUnauthorized:!QY(e)},a=new ZY(e,[],i);JY()?a.onerror=c=>{const u=c;r(this.emitError(u.error))}:a.on("error",c=>{r(this.emitError(c))}),a.onopen=()=>{this.onOpen(a),t(a)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?yl(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),i=r.message||r.toString(),a=g0(e,i);this.events.emit("payload",a)}parseError(e,t=this.url){return GR(e,wD(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>bD&&this.events.setMaxListeners(bD)}emitError(e){const t=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${wD(this.url)}`));return this.events.emit("register_error",t),t}};var WY={};const JR="wc",ZR=2,bE="core",Ns=`${JR}@2:${bE}:`,eJ={logger:"error"},tJ={database:":memory:"},nJ="crypto",vD="client_ed25519_seed",rJ=Ae.ONE_DAY,iJ="keychain",sJ="0.3",aJ="messages",oJ="0.3",cJ=Ae.SIX_HOURS,lJ="publisher",XR="irn",uJ="error",WR="wss://relay.walletconnect.org",hJ="relayer",kt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},fJ="_subscription",oi={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},dJ=.1,vE="2.21.8",St={link_mode:"link_mode",relay:"relay"},Yy={inbound:"inbound",outbound:"outbound"},pJ="0.3",gJ="WALLETCONNECT_CLIENT_ID",ED="WALLETCONNECT_LINK_MODE_APPS",Lr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},yJ="subscription",mJ="0.3",wJ="pairing",bJ="0.3",wd={wc_pairingDelete:{req:{ttl:Ae.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Ae.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Ae.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Ae.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Ae.ONE_DAY,prompt:!1,tag:0},res:{ttl:Ae.ONE_DAY,prompt:!1,tag:0}}},_c={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Bi={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},vJ="history",EJ="0.3",AJ="expirer",ui={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},xJ="0.3",SJ="verify-api",OJ="https://verify.walletconnect.com",e4="https://verify.walletconnect.org",Hd=e4,TJ=`${Hd}/v3`,DJ=[OJ,e4],CJ="echo",_J="https://echo.walletconnect.com",ls={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},ta={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},yo={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},bd={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},vc={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},vd={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},NJ=.1,IJ="event-client",RJ=86400,BJ="https://pulse.walletconnect.org/batch";function PJ(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<n.length;i++){var a=n.charAt(i),c=a.charCodeAt(0);if(t[c]!==255)throw new TypeError(a+" is ambiguous");t[c]=i}var u=n.length,h=n.charAt(0),d=Math.log(u)/Math.log(256),p=Math.log(256)/Math.log(u);function y(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(b.length===0)return"";for(var E=0,A=0,S=0,B=b.length;S!==B&&b[S]===0;)S++,E++;for(var D=(B-S)*p+1>>>0,U=new Uint8Array(D);S!==B;){for(var I=b[S],N=0,k=D-1;(I!==0||N<A)&&k!==-1;k--,N++)I+=256*U[k]>>>0,U[k]=I%u>>>0,I=I/u>>>0;if(I!==0)throw new Error("Non-zero carry");A=N,S++}for(var $=D-A;$!==D&&U[$]===0;)$++;for(var P=h.repeat(E);$<D;++$)P+=n.charAt(U[$]);return P}function w(b){if(typeof b!="string")throw new TypeError("Expected String");if(b.length===0)return new Uint8Array;var E=0;if(b[E]!==" "){for(var A=0,S=0;b[E]===h;)A++,E++;for(var B=(b.length-E)*d+1>>>0,D=new Uint8Array(B);b[E];){var U=t[b.charCodeAt(E)];if(U===255)return;for(var I=0,N=B-1;(U!==0||I<S)&&N!==-1;N--,I++)U+=u*D[N]>>>0,D[N]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");S=I,E++}if(b[E]!==" "){for(var k=B-S;k!==B&&D[k]===0;)k++;for(var $=new Uint8Array(A+(B-k)),P=A;k!==B;)$[P++]=D[k++];return $}}}function v(b){var E=w(b);if(E)return E;throw new Error(`Non-${e} character`)}return{encode:y,decodeUnsafe:w,decode:v}}var UJ=PJ,MJ=UJ;const t4=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},$J=n=>new TextEncoder().encode(n),kJ=n=>new TextDecoder().decode(n);class LJ{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class jJ{constructor(e,t,r){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return n4(this,e)}}class zJ{constructor(e){this.decoders=e}or(e){return n4(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const n4=(n,e)=>new zJ({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class HJ{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new LJ(e,t,r),this.decoder=new jJ(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const m0=({name:n,prefix:e,encode:t,decode:r})=>new HJ(n,e,t,r),Fp=({prefix:n,name:e,alphabet:t})=>{const{encode:r,decode:i}=MJ(t,e);return m0({prefix:n,name:e,encode:r,decode:a=>t4(i(a))})},FJ=(n,e,t,r)=>{const i={};for(let p=0;p<e.length;++p)i[e[p]]=p;let a=n.length;for(;n[a-1]==="=";)--a;const c=new Uint8Array(a*t/8|0);let u=0,h=0,d=0;for(let p=0;p<a;++p){const y=i[n[p]];if(y===void 0)throw new SyntaxError(`Non-${r} character`);h=h<<t|y,u+=t,u>=8&&(u-=8,c[d++]=255&h>>u)}if(u>=t||255&h<<8-u)throw new SyntaxError("Unexpected end of data");return c},qJ=(n,e,t)=>{const r=e[e.length-1]==="=",i=(1<<t)-1;let a="",c=0,u=0;for(let h=0;h<n.length;++h)for(u=u<<8|n[h],c+=8;c>t;)c-=t,a+=e[i&u>>c];if(c&&(a+=e[i&u<<t-c]),r)for(;a.length*t&7;)a+="=";return a},In=({name:n,prefix:e,bitsPerChar:t,alphabet:r})=>m0({prefix:e,name:n,encode(i){return qJ(i,r,t)},decode(i){return FJ(i,r,t,n)}}),VJ=m0({prefix:"\0",name:"identity",encode:n=>kJ(n),decode:n=>$J(n)});var GJ=Object.freeze({__proto__:null,identity:VJ});const KJ=In({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var QJ=Object.freeze({__proto__:null,base2:KJ});const YJ=In({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var JJ=Object.freeze({__proto__:null,base8:YJ});const ZJ=Fp({prefix:"9",name:"base10",alphabet:"0123456789"});var XJ=Object.freeze({__proto__:null,base10:ZJ});const WJ=In({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),eZ=In({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var tZ=Object.freeze({__proto__:null,base16:WJ,base16upper:eZ});const nZ=In({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),rZ=In({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),iZ=In({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),sZ=In({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),aZ=In({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),oZ=In({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),cZ=In({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),lZ=In({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),uZ=In({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var hZ=Object.freeze({__proto__:null,base32:nZ,base32upper:rZ,base32pad:iZ,base32padupper:sZ,base32hex:aZ,base32hexupper:oZ,base32hexpad:cZ,base32hexpadupper:lZ,base32z:uZ});const fZ=Fp({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),dZ=Fp({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var pZ=Object.freeze({__proto__:null,base36:fZ,base36upper:dZ});const gZ=Fp({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),yZ=Fp({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var mZ=Object.freeze({__proto__:null,base58btc:gZ,base58flickr:yZ});const wZ=In({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),bZ=In({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),vZ=In({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),EZ=In({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var AZ=Object.freeze({__proto__:null,base64:wZ,base64pad:bZ,base64url:vZ,base64urlpad:EZ});const r4=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),xZ=r4.reduce((n,e,t)=>(n[t]=e,n),[]),SZ=r4.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function OZ(n){return n.reduce((e,t)=>(e+=xZ[t],e),"")}function TZ(n){const e=[];for(const t of n){const r=SZ[t.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(r)}return new Uint8Array(e)}const DZ=m0({prefix:"🚀",name:"base256emoji",encode:OZ,decode:TZ});var CZ=Object.freeze({__proto__:null,base256emoji:DZ}),_Z=i4,AD=128,NZ=-128,IZ=Math.pow(2,31);function i4(n,e,t){e=e||[],t=t||0;for(var r=t;n>=IZ;)e[t++]=n&255|AD,n/=128;for(;n&NZ;)e[t++]=n&255|AD,n>>>=7;return e[t]=n|0,i4.bytes=t-r+1,e}var RZ=EE,BZ=128,xD=127;function EE(n,r){var t=0,r=r||0,i=0,a=r,c,u=n.length;do{if(a>=u)throw EE.bytes=0,new RangeError("Could not decode varint");c=n[a++],t+=i<28?(c&xD)<<i:(c&xD)*Math.pow(2,i),i+=7}while(c>=BZ);return EE.bytes=a-r,t}var PZ=Math.pow(2,7),UZ=Math.pow(2,14),MZ=Math.pow(2,21),$Z=Math.pow(2,28),kZ=Math.pow(2,35),LZ=Math.pow(2,42),jZ=Math.pow(2,49),zZ=Math.pow(2,56),HZ=Math.pow(2,63),FZ=function(n){return n<PZ?1:n<UZ?2:n<MZ?3:n<$Z?4:n<kZ?5:n<LZ?6:n<jZ?7:n<zZ?8:n<HZ?9:10},qZ={encode:_Z,decode:RZ,encodingLength:FZ},s4=qZ;const SD=(n,e,t=0)=>(s4.encode(n,e,t),e),OD=n=>s4.encodingLength(n),AE=(n,e)=>{const t=e.byteLength,r=OD(n),i=r+OD(t),a=new Uint8Array(i+t);return SD(n,a,0),SD(t,a,r),a.set(e,i),new VZ(n,t,e,a)};class VZ{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}}const a4=({name:n,code:e,encode:t})=>new GZ(n,e,t);class GZ{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?AE(this.code,t):t.then(r=>AE(this.code,r))}else throw Error("Unknown type, must be binary type")}}const o4=n=>async e=>new Uint8Array(await crypto.subtle.digest(n,e)),KZ=a4({name:"sha2-256",code:18,encode:o4("SHA-256")}),QZ=a4({name:"sha2-512",code:19,encode:o4("SHA-512")});var YZ=Object.freeze({__proto__:null,sha256:KZ,sha512:QZ});const c4=0,JZ="identity",l4=t4,ZZ=n=>AE(c4,l4(n)),XZ={code:c4,name:JZ,encode:l4,digest:ZZ};var WZ=Object.freeze({__proto__:null,identity:XZ});new TextEncoder,new TextDecoder;const TD={...GJ,...QJ,...JJ,...XJ,...tZ,...hZ,...pZ,...mZ,...AZ,...CZ};({...YZ,...WZ});function u4(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function eX(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?u4(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function h4(n,e,t,r){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:r}}}const DD=h4("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),L1=h4("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=eX(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),tX={utf8:DD,"utf-8":DD,hex:TD.base16,latin1:L1,ascii:L1,binary:L1,...TD};function nX(n,e="utf8"){const t=tX[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?u4(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}var rX=Object.defineProperty,iX=(n,e,t)=>e in n?rX(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,os=(n,e,t)=>iX(n,typeof e!="symbol"?e+"":e,t);class sX{constructor(e,t){this.core=e,this.logger=t,os(this,"keychain",new Map),os(this,"name",iJ),os(this,"version",sJ),os(this,"initialized",!1),os(this,"storagePrefix",Ns),os(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),os(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),os(this,"set",async(r,i)=>{this.isInitialized(),this.keychain.set(r,i),await this.persist()}),os(this,"get",r=>{this.isInitialized();const i=this.keychain.get(r);if(typeof i>"u"){const{message:a}=Ee("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(a)}return i}),os(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=ir(t,this.name)}get context(){return Dr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,nE(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?rE(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}}var aX=Object.defineProperty,oX=(n,e,t)=>e in n?aX(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,An=(n,e,t)=>oX(n,typeof e!="symbol"?e+"":e,t);class cX{constructor(e,t,r){this.core=e,this.logger=t,An(this,"name",nJ),An(this,"keychain"),An(this,"randomSessionIdentifier",dE()),An(this,"initialized",!1),An(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),An(this,"hasKeys",i=>(this.isInitialized(),this.keychain.has(i))),An(this,"getClientId",async()=>{this.isInitialized();const i=await this.getClientSeed(),a=XT(i);return $I(a.publicKey)}),An(this,"generateKeyPair",()=>{this.isInitialized();const i=BG();return this.setPrivateKey(i.publicKey,i.privateKey)}),An(this,"signJWT",async i=>{this.isInitialized();const a=await this.getClientSeed(),c=XT(a),u=this.randomSessionIdentifier;return await DH(u,i,rJ,c)}),An(this,"generateSharedKey",(i,a,c)=>{this.isInitialized();const u=this.getPrivateKey(i),h=PG(u,a);return this.setSymKey(h,c)}),An(this,"setSymKey",async(i,a)=>{this.isInitialized();const c=a||Gy(i);return await this.keychain.set(c,i),c}),An(this,"deleteKeyPair",async i=>{this.isInitialized(),await this.keychain.del(i)}),An(this,"deleteSymKey",async i=>{this.isInitialized(),await this.keychain.del(i)}),An(this,"encode",async(i,a,c)=>{this.isInitialized();const u=kR(c),h=Ca(a);if(H8(u))return $G(h,c==null?void 0:c.encoding);if(z8(u)){const w=u.senderPublicKey,v=u.receiverPublicKey;i=await this.generateSharedKey(w,v)}const d=this.getSymKey(i),{type:p,senderPublicKey:y}=u;return UG({type:p,symKey:d,message:h,senderPublicKey:y,encoding:c==null?void 0:c.encoding})}),An(this,"decode",async(i,a,c)=>{this.isInitialized();const u=LG(a,c);if(H8(u)){const h=kG(a,c==null?void 0:c.encoding);return yl(h)}if(z8(u)){const h=u.receiverPublicKey,d=u.senderPublicKey;i=await this.generateSharedKey(h,d)}try{const h=this.getSymKey(i),d=MG({symKey:h,encoded:a,encoding:c==null?void 0:c.encoding});return yl(d)}catch(h){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(h)}}),An(this,"getPayloadType",(i,a=Ar)=>{const c=cp({encoded:i,encoding:a});return wl(c.type)}),An(this,"getPayloadSenderPublicKey",(i,a=Ar)=>{const c=cp({encoded:i,encoding:a});return c.senderPublicKey?Or(c.senderPublicKey,rr):void 0}),this.core=e,this.logger=ir(t,this.name),this.keychain=r||new sX(this.core,this.logger)}get context(){return Dr(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(vD)}catch{e=dE(),await this.keychain.set(vD,e)}return nX(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}}var lX=Object.defineProperty,uX=Object.defineProperties,hX=Object.getOwnPropertyDescriptors,CD=Object.getOwnPropertySymbols,fX=Object.prototype.hasOwnProperty,dX=Object.prototype.propertyIsEnumerable,xE=(n,e,t)=>e in n?lX(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,pX=(n,e)=>{for(var t in e||(e={}))fX.call(e,t)&&xE(n,t,e[t]);if(CD)for(var t of CD(e))dX.call(e,t)&&xE(n,t,e[t]);return n},gX=(n,e)=>uX(n,hX(e)),Mr=(n,e,t)=>xE(n,typeof e!="symbol"?e+"":e,t);class yX extends JQ{constructor(e,t){super(e,t),this.logger=e,this.core=t,Mr(this,"messages",new Map),Mr(this,"messagesWithoutClientAck",new Map),Mr(this,"name",aJ),Mr(this,"version",oJ),Mr(this,"initialized",!1),Mr(this,"storagePrefix",Ns),Mr(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const i=await this.getRelayerMessagesWithoutClientAck();typeof i<"u"&&(this.messagesWithoutClientAck=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),Mr(this,"set",async(r,i,a)=>{this.isInitialized();const c=wi(i);let u=this.messages.get(r);if(typeof u>"u"&&(u={}),typeof u[c]<"u")return c;if(u[c]=i,this.messages.set(r,u),a===Yy.inbound){const h=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,gX(pX({},h),{[c]:i}))}return await this.persist(),c}),Mr(this,"get",r=>{this.isInitialized();let i=this.messages.get(r);return typeof i>"u"&&(i={}),i}),Mr(this,"getWithoutAck",r=>{this.isInitialized();const i={};for(const a of r){const c=this.messagesWithoutClientAck.get(a)||{};i[a]=Object.values(c)}return i}),Mr(this,"has",(r,i)=>{this.isInitialized();const a=this.get(r),c=wi(i);return typeof a[c]<"u"}),Mr(this,"ack",async(r,i)=>{this.isInitialized();const a=this.messagesWithoutClientAck.get(r);if(typeof a>"u")return;const c=wi(i);delete a[c],Object.keys(a).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,a),await this.persist()}),Mr(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=ir(e,this.name),this.core=t}get context(){return Dr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,nE(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,nE(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?rE(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?rE(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}}var mX=Object.defineProperty,wX=Object.defineProperties,bX=Object.getOwnPropertyDescriptors,_D=Object.getOwnPropertySymbols,vX=Object.prototype.hasOwnProperty,EX=Object.prototype.propertyIsEnumerable,SE=(n,e,t)=>e in n?mX(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Eu=(n,e)=>{for(var t in e||(e={}))vX.call(e,t)&&SE(n,t,e[t]);if(_D)for(var t of _D(e))EX.call(e,t)&&SE(n,t,e[t]);return n},ND=(n,e)=>wX(n,bX(e)),ci=(n,e,t)=>SE(n,typeof e!="symbol"?e+"":e,t);class AX extends ZQ{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,ci(this,"events",new Yr.EventEmitter),ci(this,"name",lJ),ci(this,"queue",new Map),ci(this,"publishTimeout",Ae.toMiliseconds(Ae.ONE_MINUTE)),ci(this,"initialPublishTimeout",Ae.toMiliseconds(Ae.ONE_SECOND*15)),ci(this,"needsTransportRestart",!1),ci(this,"publish",async(r,i,a)=>{var c,u,h,d,p;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:i,opts:a}});const y=(a==null?void 0:a.ttl)||cJ,w=(a==null?void 0:a.prompt)||!1,v=(a==null?void 0:a.tag)||0,b=(a==null?void 0:a.id)||Ho().toString(),E=zu(Sm().protocol),A={id:b,method:(a==null?void 0:a.publishMethod)||E.publish,params:Eu({topic:r,message:i,ttl:y,prompt:w,tag:v,attestation:a==null?void 0:a.attestation},(a==null?void 0:a.tvf)&&{tvf:a.tvf})},S=`Failed to publish payload, please try again. id:${b} tag:${v}`;try{rn((c=A.params)==null?void 0:c.prompt)&&((u=A.params)==null||delete u.prompt),rn((h=A.params)==null?void 0:h.tag)&&((d=A.params)==null||delete d.tag);const B=new Promise(async D=>{const U=({id:N})=>{var k;((k=A.id)==null?void 0:k.toString())===N.toString()&&(this.removeRequestFromQueue(N),this.relayer.events.removeListener(kt.publish,U),D())};this.relayer.events.on(kt.publish,U);const I=Os(new Promise((N,k)=>{this.rpcPublish(A,a).then(N).catch($=>{this.logger.warn($,$==null?void 0:$.message),k($)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${b} tag:${v}`);try{await I,this.events.removeListener(kt.publish,U)}catch(N){this.queue.set(b,{request:A,opts:a,attempt:1}),this.logger.warn(N,N==null?void 0:N.message)}});this.logger.trace({type:"method",method:"publish",params:{id:b,topic:r,message:i,opts:a}}),await Os(B,this.publishTimeout,S)}catch(B){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(B),(p=a==null?void 0:a.internal)!=null&&p.throwOnFailedPublish)throw B}finally{this.queue.delete(b)}}),ci(this,"publishCustom",async r=>{var i,a,c,u,h;this.logger.debug("Publishing custom payload"),this.logger.trace({type:"method",method:"publishCustom",params:r});const{payload:d,opts:p={}}=r,{attestation:y,tvf:w,publishMethod:v,prompt:b,tag:E,ttl:A=Ae.FIVE_MINUTES}=p,S=p.id||Ho().toString(),B=zu(Sm().protocol),D=v||B.publish,U={id:S,method:D,params:Eu(ND(Eu({},d),{ttl:A,prompt:b,tag:E,attestation:y}),w)},I=`Failed to publish custom payload, please try again. id:${S} tag:${E}`;try{rn((i=U.params)==null?void 0:i.prompt)&&((a=U.params)==null||delete a.prompt),rn((c=U.params)==null?void 0:c.tag)&&((u=U.params)==null||delete u.tag);const N=new Promise(async k=>{const $=({id:L})=>{var z;((z=U.id)==null?void 0:z.toString())===L.toString()&&(this.removeRequestFromQueue(L),this.relayer.events.removeListener(kt.publish,$),k())};this.relayer.events.on(kt.publish,$);const P=Os(new Promise((L,z)=>{this.rpcPublish(U,p).then(L).catch(V=>{this.logger.warn(V,V==null?void 0:V.message),z(V)})}),this.initialPublishTimeout,`Failed initial custom payload publish, retrying.... method:${D} id:${S} tag:${E}`);try{await P,this.events.removeListener(kt.publish,$)}catch(L){this.queue.set(S,{request:U,opts:p,attempt:1}),this.logger.warn(L,L==null?void 0:L.message)}});this.logger.trace({type:"method",method:"publish",params:{id:S,payload:d,opts:p}}),await Os(N,this.publishTimeout,I)}catch(N){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(N),(h=p==null?void 0:p.internal)!=null&&h.throwOnFailedPublish)throw N}finally{this.queue.delete(S)}}),ci(this,"on",(r,i)=>{this.events.on(r,i)}),ci(this,"once",(r,i)=>{this.events.once(r,i)}),ci(this,"off",(r,i)=>{this.events.off(r,i)}),ci(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.relayer=e,this.logger=ir(t,this.name),this.registerEventListeners()}get context(){return Dr(this.logger)}async rpcPublish(e,t){this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:e});const r=await this.relayer.request(e);return this.relayer.events.emit(kt.publish,Eu(Eu({},e),t)),this.logger.debug("Successfully Published Payload"),r}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,t)=>{var r;const i=e.attempt+1;this.queue.set(t,ND(Eu({},e),{attempt:i})),this.logger.warn({},`Publisher: queue->publishing: ${e.request.id}, tag: ${(r=e.request.params)==null?void 0:r.tag}, attempt: ${i}`),await this.rpcPublish(e.request,e.opts),this.logger.warn({},`Publisher: queue->published: ${e.request.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(xl.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(kt.connection_stalled);return}this.checkQueue()}),this.relayer.on(kt.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var xX=Object.defineProperty,SX=(n,e,t)=>e in n?xX(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Au=(n,e,t)=>SX(n,typeof e!="symbol"?e+"":e,t);class OX{constructor(){Au(this,"map",new Map),Au(this,"set",(e,t)=>{const r=this.get(e);this.exists(e,t)||this.map.set(e,[...r,t])}),Au(this,"get",e=>this.map.get(e)||[]),Au(this,"exists",(e,t)=>this.get(e).includes(t)),Au(this,"delete",(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,t))return;const i=r.filter(a=>a!==t);if(!i.length){this.map.delete(e);return}this.map.set(e,i)}),Au(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var TX=Object.defineProperty,DX=Object.defineProperties,CX=Object.getOwnPropertyDescriptors,ID=Object.getOwnPropertySymbols,_X=Object.prototype.hasOwnProperty,NX=Object.prototype.propertyIsEnumerable,OE=(n,e,t)=>e in n?TX(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ed=(n,e)=>{for(var t in e||(e={}))_X.call(e,t)&&OE(n,t,e[t]);if(ID)for(var t of ID(e))NX.call(e,t)&&OE(n,t,e[t]);return n},j1=(n,e)=>DX(n,CX(e)),vt=(n,e,t)=>OE(n,typeof e!="symbol"?e+"":e,t);class IX extends eY{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,vt(this,"subscriptions",new Map),vt(this,"topicMap",new OX),vt(this,"events",new Yr.EventEmitter),vt(this,"name",yJ),vt(this,"version",mJ),vt(this,"pending",new Map),vt(this,"cached",[]),vt(this,"initialized",!1),vt(this,"storagePrefix",Ns),vt(this,"subscribeTimeout",Ae.toMiliseconds(Ae.ONE_MINUTE)),vt(this,"initialSubscribeTimeout",Ae.toMiliseconds(Ae.ONE_SECOND*15)),vt(this,"clientId"),vt(this,"batchSubscribeTopicsLimit",500),vt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),vt(this,"subscribe",async(r,i)=>{var a;this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}});try{const c=Sm(i),u={topic:r,relay:c,transportType:i==null?void 0:i.transportType};(a=i==null?void 0:i.internal)!=null&&a.skipSubscribe||this.pending.set(r,u);const h=await this.rpcSubscribe(r,c,i);return typeof h=="string"&&(this.onSubscribe(h,u),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}})),h}catch(c){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(c),c}}),vt(this,"unsubscribe",async(r,i)=>{this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(r,i.id,i):await this.unsubscribeByTopic(r,i)}),vt(this,"isSubscribed",r=>new Promise(i=>{i(this.topicMap.topics.includes(r))})),vt(this,"isKnownTopic",r=>new Promise(i=>{i(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(a=>a.topic===r))})),vt(this,"on",(r,i)=>{this.events.on(r,i)}),vt(this,"once",(r,i)=>{this.events.once(r,i)}),vt(this,"off",(r,i)=>{this.events.off(r,i)}),vt(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),vt(this,"start",async()=>{await this.onConnect()}),vt(this,"stop",async()=>{await this.onDisconnect()}),vt(this,"restart",async()=>{await this.restore(),await this.onRestart()}),vt(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(i=>{r.push(i)}),await this.batchSubscribe(r)}),vt(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(xl.pulse,async()=>{await this.checkPending()}),this.events.on(Lr.created,async r=>{const i=Lr.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),await this.persist()}),this.events.on(Lr.deleted,async r=>{const i=Lr.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),await this.persist()})}),this.relayer=e,this.logger=ir(t,this.name),this.clientId=""}get context(){return Dr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,t){let r=!1;try{r=this.getSubscription(e).topic===t}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const r=this.topicMap.get(e);await Promise.all(r.map(async i=>await this.unsubscribeById(e,i,t)))}async unsubscribeById(e,t,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}});try{const i=Sm(r);await this.restartToComplete({topic:e,id:t,relay:i}),await this.rpcUnsubscribe(e,t,i);const a=Ot("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,a),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,t,r){var i,a;const c=await this.getSubscriptionId(e);if((i=r==null?void 0:r.internal)!=null&&i.skipSubscribe)return c;(!r||(r==null?void 0:r.transportType)===St.relay)&&await this.restartToComplete({topic:e,id:e,relay:t});const u={method:zu(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:u});const h=(a=r==null?void 0:r.internal)==null?void 0:a.throwOnFailedPublish;try{if((r==null?void 0:r.transportType)===St.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(u).catch(y=>this.logger.warn(y))},Ae.toMiliseconds(Ae.ONE_SECOND)),c;const d=new Promise(async y=>{const w=v=>{v.topic===e&&(this.events.removeListener(Lr.created,w),y(v.id))};this.events.on(Lr.created,w);try{const v=await Os(new Promise((b,E)=>{this.relayer.request(u).catch(A=>{this.logger.warn(A,A==null?void 0:A.message),E(A)}).then(b)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Lr.created,w),y(v)}catch{}}),p=await Os(d,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!p&&h)throw new Error(`Subscribing to ${e} failed, please try again`);return p?c:null}catch(d){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(kt.connection_stalled),h)throw d}return null}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,r={method:zu(t.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Os(new Promise(i=>{this.relayer.request(r).catch(a=>this.logger.warn(a)).then(i)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(kt.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const t=e[0].relay,r={method:zu(t.protocol).batchFetchMessages,params:{topics:e.map(a=>a.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let i;try{i=await await Os(new Promise((a,c)=>{this.relayer.request(r).catch(u=>{this.logger.warn(u),c(u)}).then(a)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(kt.connection_stalled)}return i}rpcUnsubscribe(e,t,r){const i={method:zu(r.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,t){this.setSubscription(e,j1(Ed({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,Ed({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,r){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,Ed({},t)),this.topicMap.set(t.topic,e),this.events.emit(Lr.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:r}=Ee("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Lr.deleted,j1(Ed({},r),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Lr.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){const i=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(Lr.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size&&!e.every(t=>{var r;return t.topic===((r=this.subscriptions.get(t.id))==null?void 0:r.topic)})){const{message:t}=Ee("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async t=>j1(Ed({},t),{id:await this.getSubscriptionId(t.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const t=await this.rpcBatchFetchMessages(e);t&&t.messages&&(await tq(Ae.toMiliseconds(Ae.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(t.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return wi(e+await this.getClientId())}}var RX=Object.defineProperty,RD=Object.getOwnPropertySymbols,BX=Object.prototype.hasOwnProperty,PX=Object.prototype.propertyIsEnumerable,TE=(n,e,t)=>e in n?RX(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,BD=(n,e)=>{for(var t in e||(e={}))BX.call(e,t)&&TE(n,t,e[t]);if(RD)for(var t of RD(e))PX.call(e,t)&&TE(n,t,e[t]);return n},rt=(n,e,t)=>TE(n,typeof e!="symbol"?e+"":e,t);class UX extends XQ{constructor(e){super(e),rt(this,"protocol","wc"),rt(this,"version",2),rt(this,"core"),rt(this,"logger"),rt(this,"events",new Yr.EventEmitter),rt(this,"provider"),rt(this,"messages"),rt(this,"subscriber"),rt(this,"publisher"),rt(this,"name",hJ),rt(this,"transportExplicitlyClosed",!1),rt(this,"initialized",!1),rt(this,"connectionAttemptInProgress",!1),rt(this,"relayUrl"),rt(this,"projectId"),rt(this,"packageName"),rt(this,"bundleId"),rt(this,"hasExperiencedNetworkDisruption",!1),rt(this,"pingTimeout"),rt(this,"heartBeatTimeout",Ae.toMiliseconds(Ae.THIRTY_SECONDS+Ae.FIVE_SECONDS)),rt(this,"reconnectTimeout"),rt(this,"connectPromise"),rt(this,"reconnectInProgress",!1),rt(this,"requestsInFlight",[]),rt(this,"connectTimeout",Ae.toMiliseconds(Ae.ONE_SECOND*15)),rt(this,"request",async t=>{var r,i;this.logger.debug("Publishing Request Payload");const a=t.id||Ho().toString();await this.toEstablishConnection();try{this.logger.trace({id:a,method:t.method,topic:(r=t.params)==null?void 0:r.topic},"relayer.request - publishing...");const c=`${a}:${((i=t.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(c);const u=await this.provider.request(t);return this.requestsInFlight=this.requestsInFlight.filter(h=>h!==c),u}catch(c){throw this.logger.debug(`Failed to Publish Request: ${a}`),c}}),rt(this,"resetPingTimeout",()=>{vm()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var t,r,i,a;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(a=(i=(r=(t=this.provider)==null?void 0:t.connection)==null?void 0:r.socket)==null?void 0:i.terminate)==null||a.call(i)}catch(c){this.logger.warn(c,c==null?void 0:c.message)}},this.heartBeatTimeout))}),rt(this,"onPayloadHandler",t=>{this.onProviderPayload(t),this.resetPingTimeout()}),rt(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(kt.connect)}),rt(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),rt(this,"onProviderErrorHandler",t=>{this.logger.fatal(`Fatal socket error: ${t.message}`),this.events.emit(kt.error,t),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),rt(this,"registerProviderListeners",()=>{this.provider.on(oi.payload,this.onPayloadHandler),this.provider.on(oi.connect,this.onConnectHandler),this.provider.on(oi.disconnect,this.onDisconnectHandler),this.provider.on(oi.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?ir(e.logger,this.name):zp(p0({level:e.logger||uJ})),this.messages=new yX(this.logger,e.core),this.subscriber=new IX(this,this.logger),this.publisher=new AX(this,this.logger),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||WR,LF()?this.packageName=l8():jF()&&(this.bundleId=l8()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e==null?void 0:e.message))}get context(){return Dr(this.logger)}get connected(){var e,t,r;return((r=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,t,r;return((r=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,t,r){this.isInitialized(),await this.publisher.publish(e,t,r),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:St.relay},Yy.outbound)}async publishCustom(e){this.isInitialized(),await this.publisher.publishCustom(e)}async subscribe(e,t){var r,i,a;this.isInitialized(),(!(t!=null&&t.transportType)||(t==null?void 0:t.transportType)==="relay")&&await this.toEstablishConnection();const c=typeof((r=t==null?void 0:t.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(i=t==null?void 0:t.internal)==null?void 0:i.throwOnFailedPublish;let u=((a=this.subscriber.topicMap.get(e))==null?void 0:a[0])||"",h;const d=p=>{p.topic===e&&(this.subscriber.off(Lr.created,d),h())};return await Promise.all([new Promise(p=>{h=p,this.subscriber.on(Lr.created,d)}),new Promise(async(p,y)=>{u=await this.subscriber.subscribe(e,BD({internal:{throwOnFailedPublish:c}},t)).catch(w=>{c&&y(w)})||u,p()})]),u}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Os(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.info("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(t,r)=>{await this.connect(e).then(t).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await W8())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const t=e.sort((r,i)=>r.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${t.length} message events sorted`);for(const r of t)try{await this.onMessageEvent(r)}catch(i){this.logger.warn(i,"Error while processing batch message event: "+(i==null?void 0:i.message))}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){const{topic:r}=e;if(!t.sessionExists){const i=Yt(Ae.FIVE_MINUTES),a={topic:r,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,a)}this.events.emit(kt.message,e),await this.recordMessageEvent(e,Yy.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let t=1;for(;t<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${t}...`),await this.createProvider(),await new Promise(async(r,i)=>{const a=()=>{i(new Error("Connection interrupted while trying to connect"))};this.provider.once(oi.disconnect,a),await Os(new Promise((c,u)=>{this.provider.connect().then(c).catch(u)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(c=>{i(c)}).finally(()=>{this.provider.off(oi.disconnect,a),clearTimeout(this.reconnectTimeout)}),await new Promise(async(c,u)=>{const h=()=>{i(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(oi.disconnect,h),await this.subscriber.start().then(c).catch(u).finally(()=>{this.provider.off(oi.disconnect,h)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const i=r;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${t}`);break}await new Promise(r=>setTimeout(r,Ae.toMiliseconds(t*1))),t++}}startPingTimeout(){var e,t,r,i,a;if(vm())try{(t=(e=this.provider)==null?void 0:e.connection)!=null&&t.socket&&((a=(i=(r=this.provider)==null?void 0:r.connection)==null?void 0:i.socket)==null||a.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(c){this.logger.warn(c,c==null?void 0:c.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Oi(new XY(VF({sdkVersion:vE,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,t){const{topic:r,message:i}=e;await this.messages.set(r,i,t)}async shouldIgnoreMessageEvent(e){const{topic:t,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(t))return this.logger.warn(`Ignoring message for unknown topic ${t}`),!0;const i=this.messages.has(t,r);return i&&this.logger.warn(`Ignoring duplicate message: ${r}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),k2(e)){if(!e.method.endsWith(fJ))return;const t=e.params,{topic:r,message:i,publishedAt:a,attestation:c}=t.data,u={topic:r,message:i,publishedAt:a,transportType:St.relay,attestation:c};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(BD({type:"event",event:t.id},u)),this.events.emit(t.id,u),await this.acknowledgePayload(e),await this.onMessageEvent(u)}else y0(e)&&this.events.emit(kt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,Yy.inbound),this.events.emit(kt.message,e))}async acknowledgePayload(e){const t=up(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(oi.payload,this.onPayloadHandler),this.provider.off(oi.connect,this.onConnectHandler),this.provider.off(oi.disconnect,this.onDisconnectHandler),this.provider.off(oi.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await W8();RK(async t=>{e!==t&&(e=t,t?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(xl.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&UK())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(t){this.logger.warn(t,t==null?void 0:t.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(kt.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},Ae.toMiliseconds(dJ)))))}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function MX(n,e){return n===e||Number.isNaN(n)&&Number.isNaN(e)}function PD(n){return Object.getOwnPropertySymbols(n).filter(e=>Object.prototype.propertyIsEnumerable.call(n,e))}function UD(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const $X="[object RegExp]",kX="[object String]",LX="[object Number]",jX="[object Boolean]",MD="[object Arguments]",zX="[object Symbol]",HX="[object Date]",FX="[object Map]",qX="[object Set]",VX="[object Array]",GX="[object Function]",KX="[object ArrayBuffer]",z1="[object Object]",QX="[object Error]",YX="[object DataView]",JX="[object Uint8Array]",ZX="[object Uint8ClampedArray]",XX="[object Uint16Array]",WX="[object Uint32Array]",eW="[object BigUint64Array]",tW="[object Int8Array]",nW="[object Int16Array]",rW="[object Int32Array]",iW="[object BigInt64Array]",sW="[object Float32Array]",aW="[object Float64Array]";function oW(){}function $D(n){if(!n||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(n)==="[object Object]":!1}function cW(n,e,t){return Rd(n,e,void 0,void 0,void 0,void 0,t)}function Rd(n,e,t,r,i,a,c){const u=c(n,e,t,r,i,a);if(u!==void 0)return u;if(typeof n==typeof e)switch(typeof n){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return n===e;case"number":return n===e||Object.is(n,e);case"function":return n===e;case"object":return Fd(n,e,a,c)}return Fd(n,e,a,c)}function Fd(n,e,t,r){if(Object.is(n,e))return!0;let i=UD(n),a=UD(e);if(i===MD&&(i=z1),a===MD&&(a=z1),i!==a)return!1;switch(i){case kX:return n.toString()===e.toString();case LX:{const h=n.valueOf(),d=e.valueOf();return MX(h,d)}case jX:case HX:case zX:return Object.is(n.valueOf(),e.valueOf());case $X:return n.source===e.source&&n.flags===e.flags;case GX:return n===e}t=t??new Map;const c=t.get(n),u=t.get(e);if(c!=null&&u!=null)return c===e;t.set(n,e),t.set(e,n);try{switch(i){case FX:{if(n.size!==e.size)return!1;for(const[h,d]of n.entries())if(!e.has(h)||!Rd(d,e.get(h),h,n,e,t,r))return!1;return!0}case qX:{if(n.size!==e.size)return!1;const h=Array.from(n.values()),d=Array.from(e.values());for(let p=0;p<h.length;p++){const y=h[p],w=d.findIndex(v=>Rd(y,v,void 0,n,e,t,r));if(w===-1)return!1;d.splice(w,1)}return!0}case VX:case JX:case ZX:case XX:case WX:case eW:case tW:case nW:case rW:case iW:case sW:case aW:{if(typeof Buffer<"u"&&Buffer.isBuffer(n)!==Buffer.isBuffer(e)||n.length!==e.length)return!1;for(let h=0;h<n.length;h++)if(!Rd(n[h],e[h],h,n,e,t,r))return!1;return!0}case KX:return n.byteLength!==e.byteLength?!1:Fd(new Uint8Array(n),new Uint8Array(e),t,r);case YX:return n.byteLength!==e.byteLength||n.byteOffset!==e.byteOffset?!1:Fd(new Uint8Array(n),new Uint8Array(e),t,r);case QX:return n.name===e.name&&n.message===e.message;case z1:{if(!(Fd(n.constructor,e.constructor,t,r)||$D(n)&&$D(e)))return!1;const h=[...Object.keys(n),...PD(n)],d=[...Object.keys(e),...PD(e)];if(h.length!==d.length)return!1;for(let p=0;p<h.length;p++){const y=h[p],w=n[y];if(!Object.hasOwn(e,y))return!1;const v=e[y];if(!Rd(w,v,y,n,e,t,r))return!1}return!0}default:return!1}}finally{t.delete(n),t.delete(e)}}function lW(n,e){return cW(n,e,oW)}var uW=Object.defineProperty,kD=Object.getOwnPropertySymbols,hW=Object.prototype.hasOwnProperty,fW=Object.prototype.propertyIsEnumerable,DE=(n,e,t)=>e in n?uW(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,LD=(n,e)=>{for(var t in e||(e={}))hW.call(e,t)&&DE(n,t,e[t]);if(kD)for(var t of kD(e))fW.call(e,t)&&DE(n,t,e[t]);return n},pr=(n,e,t)=>DE(n,typeof e!="symbol"?e+"":e,t);class Ol extends WQ{constructor(e,t,r,i=Ns,a=void 0){super(e,t,r,i),this.core=e,this.logger=t,this.name=r,pr(this,"map",new Map),pr(this,"version",pJ),pr(this,"cached",[]),pr(this,"initialized",!1),pr(this,"getKey"),pr(this,"storagePrefix",Ns),pr(this,"recentlyDeleted",[]),pr(this,"recentlyDeletedLimit",200),pr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(c=>{this.getKey&&c!==null&&!rn(c)?this.map.set(this.getKey(c),c):lK(c)?this.map.set(c.id,c):uK(c)&&this.map.set(c.topic,c)}),this.cached=[],this.initialized=!0)}),pr(this,"set",async(c,u)=>{this.isInitialized(),this.map.has(c)?await this.update(c,u):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:c,value:u}),this.map.set(c,u),await this.persist())}),pr(this,"get",c=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:c}),this.getData(c))),pr(this,"getAll",c=>(this.isInitialized(),c?this.values.filter(u=>Object.keys(c).every(h=>lW(u[h],c[h]))):this.values)),pr(this,"update",async(c,u)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:c,update:u});const h=LD(LD({},this.getData(c)),u);this.map.set(c,h),await this.persist()}),pr(this,"delete",async(c,u)=>{this.isInitialized(),this.map.has(c)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:c,reason:u}),this.map.delete(c),this.addToRecentlyDeleted(c),await this.persist())}),this.logger=ir(t,this.name),this.storagePrefix=i,this.getKey=a}get context(){return Dr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){const{message:i}=Ee("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}const{message:r}=Ee("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=Ee("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}}var dW=Object.defineProperty,pW=(n,e,t)=>e in n?dW(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ye=(n,e,t)=>pW(n,typeof e!="symbol"?e+"":e,t);class gW{constructor(e,t){this.core=e,this.logger=t,Ye(this,"name",wJ),Ye(this,"version",bJ),Ye(this,"events",new u2),Ye(this,"pairings"),Ye(this,"initialized",!1),Ye(this,"storagePrefix",Ns),Ye(this,"ignoredPayloadTypes",[Sa]),Ye(this,"registeredMethods",[]),Ye(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Ye(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),Ye(this,"create",async r=>{this.isInitialized();const i=dE(),a=await this.core.crypto.setSymKey(i),c=Yt(Ae.FIVE_MINUTES),u={protocol:XR},h={topic:a,expiry:c,relay:u,active:!1,methods:r==null?void 0:r.methods},d=q8({protocol:this.core.protocol,version:this.core.version,topic:a,symKey:i,relay:u,expiryTimestamp:c,methods:r==null?void 0:r.methods});return this.events.emit(_c.create,h),this.core.expirer.set(a,c),await this.pairings.set(a,h),await this.core.relayer.subscribe(a,{transportType:r==null?void 0:r.transportType,internal:r==null?void 0:r.internal}),{topic:a,uri:d}}),Ye(this,"pair",async r=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[ls.pairing_started]}});this.isValidPair(r,i);const{topic:a,symKey:c,relay:u,expiryTimestamp:h,methods:d}=F8(r.uri);i.props.properties.topic=a,i.addTrace(ls.pairing_uri_validation_success),i.addTrace(ls.pairing_uri_not_expired);let p;if(this.pairings.keys.includes(a)){if(p=this.pairings.get(a),i.addTrace(ls.existing_pairing),p.active)throw i.setError(ta.active_pairing_already_exists),new Error(`Pairing already exists: ${a}. Please try again with a new connection URI.`);i.addTrace(ls.pairing_not_expired)}const y=h||Yt(Ae.FIVE_MINUTES),w={topic:a,relay:u,expiry:y,active:!1,methods:d};this.core.expirer.set(a,y),await this.pairings.set(a,w),i.addTrace(ls.store_new_pairing),r.activatePairing&&await this.activate({topic:a}),this.events.emit(_c.create,w),i.addTrace(ls.emit_inactive_pairing),this.core.crypto.keychain.has(a)||await this.core.crypto.setSymKey(c,a),i.addTrace(ls.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(ta.no_internet_connection)}try{await this.core.relayer.subscribe(a,{relay:u})}catch(v){throw i.setError(ta.subscribe_pairing_topic_failure),v}return i.addTrace(ls.subscribe_pairing_topic_success),w}),Ye(this,"activate",async({topic:r})=>{this.isInitialized();const i=Yt(Ae.FIVE_MINUTES);this.core.expirer.set(r,i),await this.pairings.update(r,{active:!0,expiry:i})}),Ye(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:i}=r;if(this.pairings.keys.includes(i)){const a=await this.sendRequest(i,"wc_pairingPing",{}),{done:c,resolve:u,reject:h}=Sc();this.events.once(ot("pairing_ping",a),({error:d})=>{d?h(d):u()}),await c()}}),Ye(this,"updateExpiry",async({topic:r,expiry:i})=>{this.isInitialized(),await this.pairings.update(r,{expiry:i})}),Ye(this,"updateMetadata",async({topic:r,metadata:i})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:i})}),Ye(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Ye(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:i}=r;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",Ot("USER_DISCONNECTED")),await this.deletePairing(i))}),Ye(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:i,relay:a,expiry:c,methods:u}=r,h=this.core.crypto.keychain.get(i);return q8({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:h,relay:a,expiryTimestamp:c,methods:u})}),Ye(this,"sendRequest",async(r,i,a)=>{const c=Vi(i,a),u=await this.core.crypto.encode(r,c),h=wd[i].req;return this.core.history.set(r,c),this.core.relayer.publish(r,u,h),c.id}),Ye(this,"sendResult",async(r,i,a)=>{const c=up(r,a),u=await this.core.crypto.encode(i,c),h=(await this.core.history.get(i,r)).request.method,d=wd[h].res;await this.core.relayer.publish(i,u,d),await this.core.history.resolve(c)}),Ye(this,"sendError",async(r,i,a)=>{const c=g0(r,a),u=await this.core.crypto.encode(i,c),h=(await this.core.history.get(i,r)).request.method,d=wd[h]?wd[h].res:wd.unregistered_method.res;await this.core.relayer.publish(i,u,d),await this.core.history.resolve(c)}),Ye(this,"deletePairing",async(r,i)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,Ot("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),i?Promise.resolve():this.core.expirer.del(r)])}),Ye(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(i=>Es(i.expiry));await Promise.all(r.map(i=>this.deletePairing(i.topic)))}),Ye(this,"onRelayEventRequest",async r=>{const{topic:i,payload:a}=r;switch(a.method){case"wc_pairingPing":return await this.onPairingPingRequest(i,a);case"wc_pairingDelete":return await this.onPairingDeleteRequest(i,a);default:return await this.onUnknownRpcMethodRequest(i,a)}}),Ye(this,"onRelayEventResponse",async r=>{const{topic:i,payload:a}=r,c=(await this.core.history.get(i,a.id)).request.method;switch(c){case"wc_pairingPing":return this.onPairingPingResponse(i,a);default:return this.onUnknownRpcMethodResponse(c)}}),Ye(this,"onPairingPingRequest",async(r,i)=>{const{id:a}=i;try{this.isValidPing({topic:r}),await this.sendResult(a,r,!0),this.events.emit(_c.ping,{id:a,topic:r})}catch(c){await this.sendError(a,r,c),this.logger.error(c)}}),Ye(this,"onPairingPingResponse",(r,i)=>{const{id:a}=i;setTimeout(()=>{hs(i)?this.events.emit(ot("pairing_ping",a),{}):bi(i)&&this.events.emit(ot("pairing_ping",a),{error:i.error})},500)}),Ye(this,"onPairingDeleteRequest",async(r,i)=>{const{id:a}=i;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(_c.delete,{id:a,topic:r})}catch(c){await this.sendError(a,r,c),this.logger.error(c)}}),Ye(this,"onUnknownRpcMethodRequest",async(r,i)=>{const{id:a,method:c}=i;try{if(this.registeredMethods.includes(c))return;const u=Ot("WC_METHOD_UNSUPPORTED",c);await this.sendError(a,r,u),this.logger.error(u)}catch(u){await this.sendError(a,r,u),this.logger.error(u)}}),Ye(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(Ot("WC_METHOD_UNSUPPORTED",r))}),Ye(this,"isValidPair",(r,i)=>{var a;if(!yr(r)){const{message:u}=Ee("MISSING_OR_INVALID",`pair() params: ${r}`);throw i.setError(ta.malformed_pairing_uri),new Error(u)}if(!cK(r.uri)){const{message:u}=Ee("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw i.setError(ta.malformed_pairing_uri),new Error(u)}const c=F8(r==null?void 0:r.uri);if(!((a=c==null?void 0:c.relay)!=null&&a.protocol)){const{message:u}=Ee("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(ta.malformed_pairing_uri),new Error(u)}if(!(c!=null&&c.symKey)){const{message:u}=Ee("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(ta.malformed_pairing_uri),new Error(u)}if(c!=null&&c.expiryTimestamp&&Ae.toMiliseconds(c==null?void 0:c.expiryTimestamp)<Date.now()){i.setError(ta.pairing_expired);const{message:u}=Ee("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(u)}}),Ye(this,"isValidPing",async r=>{if(!yr(r)){const{message:a}=Ee("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(a)}const{topic:i}=r;await this.isValidPairingTopic(i)}),Ye(this,"isValidDisconnect",async r=>{if(!yr(r)){const{message:a}=Ee("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(a)}const{topic:i}=r;await this.isValidPairingTopic(i)}),Ye(this,"isValidPairingTopic",async r=>{if(!Jt(r,!1)){const{message:i}=Ee("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(i)}if(!this.pairings.keys.includes(r)){const{message:i}=Ee("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(i)}if(Es(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:i}=Ee("EXPIRED",`pairing topic: ${r}`);throw new Error(i)}}),this.core=e,this.logger=ir(t,this.name),this.pairings=new Ol(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Dr(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(kt.message,async e=>{const{topic:t,message:r,transportType:i}=e;if(this.pairings.keys.includes(t)&&i!==St.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const a=await this.core.crypto.decode(t,r);k2(a)?(this.core.history.set(t,a),await this.onRelayEventRequest({topic:t,payload:a})):y0(a)&&(await this.core.history.resolve(a),await this.onRelayEventResponse({topic:t,payload:a}),this.core.history.delete(t,a.id)),await this.core.relayer.messages.ack(t,r)}catch(a){this.logger.error(a)}})}registerExpirerEvents(){this.core.expirer.on(ui.expired,async e=>{const{topic:t}=QI(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(_c.expire,{topic:t}))})}}var yW=Object.defineProperty,mW=(n,e,t)=>e in n?yW(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,xn=(n,e,t)=>mW(n,typeof e!="symbol"?e+"":e,t);class wW extends YQ{constructor(e,t){super(e,t),this.core=e,this.logger=t,xn(this,"records",new Map),xn(this,"events",new Yr.EventEmitter),xn(this,"name",vJ),xn(this,"version",EJ),xn(this,"cached",[]),xn(this,"initialized",!1),xn(this,"storagePrefix",Ns),xn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),xn(this,"set",(r,i,a)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:i,chainId:a}),this.records.has(i.id))return;const c={id:i.id,topic:r,request:{method:i.method,params:i.params||null},chainId:a,expiry:Yt(Ae.THIRTY_DAYS)};this.records.set(c.id,c),this.persist(),this.events.emit(Bi.created,c)}),xn(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const i=await this.getRecord(r.id);typeof i.response>"u"&&(i.response=bi(r)?{error:r.error}:{result:r.result},this.records.set(i.id,i),this.persist(),this.events.emit(Bi.updated,i))}),xn(this,"get",async(r,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:i}),await this.getRecord(i))),xn(this,"delete",(r,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(a=>{if(a.topic===r){if(typeof i<"u"&&a.id!==i)return;this.records.delete(a.id),this.events.emit(Bi.deleted,a)}}),this.persist()}),xn(this,"exists",async(r,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===r:!1)),xn(this,"on",(r,i)=>{this.events.on(r,i)}),xn(this,"once",(r,i)=>{this.events.once(r,i)}),xn(this,"off",(r,i)=>{this.events.off(r,i)}),xn(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.logger=ir(t,this.name)}get context(){return Dr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const r={topic:t.topic,request:Vi(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:r}=Ee("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Bi.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=Ee("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Bi.created,e=>{const t=Bi.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(Bi.updated,e=>{const t=Bi.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(Bi.deleted,e=>{const t=Bi.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.core.heartbeat.on(xl.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(t=>{Ae.toMiliseconds(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(Bi.deleted,t,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}}var bW=Object.defineProperty,vW=(n,e,t)=>e in n?bW(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ln=(n,e,t)=>vW(n,typeof e!="symbol"?e+"":e,t);class EW extends tY{constructor(e,t){super(e,t),this.core=e,this.logger=t,Ln(this,"expirations",new Map),Ln(this,"events",new Yr.EventEmitter),Ln(this,"name",AJ),Ln(this,"version",xJ),Ln(this,"cached",[]),Ln(this,"initialized",!1),Ln(this,"storagePrefix",Ns),Ln(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Ln(this,"has",r=>{try{const i=this.formatTarget(r);return typeof this.getExpiration(i)<"u"}catch{return!1}}),Ln(this,"set",(r,i)=>{this.isInitialized();const a=this.formatTarget(r),c={target:a,expiry:i};this.expirations.set(a,c),this.checkExpiry(a,c),this.events.emit(ui.created,{target:a,expiration:c})}),Ln(this,"get",r=>{this.isInitialized();const i=this.formatTarget(r);return this.getExpiration(i)}),Ln(this,"del",r=>{if(this.isInitialized(),this.has(r)){const i=this.formatTarget(r),a=this.getExpiration(i);this.expirations.delete(i),this.events.emit(ui.deleted,{target:i,expiration:a})}}),Ln(this,"on",(r,i)=>{this.events.on(r,i)}),Ln(this,"once",(r,i)=>{this.events.once(r,i)}),Ln(this,"off",(r,i)=>{this.events.off(r,i)}),Ln(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.logger=ir(t,this.name)}get context(){return Dr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return GF(e);if(typeof e=="number")return KF(e);const{message:t}=Ee("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(ui.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=Ee("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:r}=Ee("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return t}checkExpiry(e,t){const{expiry:r}=t;Ae.toMiliseconds(r)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(ui.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(xl.pulse,()=>this.checkExpirations()),this.events.on(ui.created,e=>{const t=ui.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(ui.expired,e=>{const t=ui.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(ui.deleted,e=>{const t=ui.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}}var AW=Object.defineProperty,xW=(n,e,t)=>e in n?AW(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Qt=(n,e,t)=>xW(n,typeof e!="symbol"?e+"":e,t);class SW extends nY{constructor(e,t,r){super(e,t,r),this.core=e,this.logger=t,this.store=r,Qt(this,"name",SJ),Qt(this,"abortController"),Qt(this,"isDevEnv"),Qt(this,"verifyUrlV3",TJ),Qt(this,"storagePrefix",Ns),Qt(this,"version",ZR),Qt(this,"publicKey"),Qt(this,"fetchPromise"),Qt(this,"init",async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&Ae.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Qt(this,"register",async i=>{if(!Wh()||this.isDevEnv)return;const a=window.location.origin,{id:c,decryptedId:u}=i,h=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${a}&id=${c}&decryptedId=${u}`;try{const d=Da.getDocument(),p=this.startAbortTimer(Ae.ONE_SECOND*5),y=await new Promise((w,v)=>{const b=()=>{window.removeEventListener("message",A),d.body.removeChild(E),v("attestation aborted")};this.abortController.signal.addEventListener("abort",b);const E=d.createElement("iframe");E.src=h,E.style.display="none",E.addEventListener("error",b,{signal:this.abortController.signal});const A=S=>{if(S.data&&typeof S.data=="string")try{const B=JSON.parse(S.data);if(B.type==="verify_attestation"){if(eE(B.attestation).payload.id!==c)return;clearInterval(p),d.body.removeChild(E),this.abortController.signal.removeEventListener("abort",b),window.removeEventListener("message",A),w(B.attestation===null?"":B.attestation)}}catch(B){this.logger.warn(B)}};d.body.appendChild(E),window.addEventListener("message",A,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",y),y}catch(d){this.logger.warn(d)}return""}),Qt(this,"resolve",async i=>{if(this.isDevEnv)return"";const{attestationId:a,hash:c,encryptedId:u}=i;if(a===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(a){if(eE(a).payload.id!==u)return;const d=await this.isValidJwtAttestation(a);if(d){if(!d.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return d}}if(!c)return;const h=this.getVerifyUrl(i==null?void 0:i.verifyUrl);return this.fetchAttestation(c,h)}),Qt(this,"fetchAttestation",async(i,a)=>{this.logger.debug(`resolving attestation: ${i} from url: ${a}`);const c=this.startAbortTimer(Ae.ONE_SECOND*5),u=await fetch(`${a}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(c),u.status===200?await u.json():void 0}),Qt(this,"getVerifyUrl",i=>{let a=i||Hd;return DJ.includes(a)||(this.logger.info(`verify url: ${a}, not included in trusted list, assigning default: ${Hd}`),a=Hd),a}),Qt(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(Ae.FIVE_SECONDS),a=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await a.json()}catch(i){this.logger.warn(i)}}),Qt(this,"persistPublicKey",async i=>{this.logger.debug("persisting public key to local storage",i),await this.store.setItem(this.storeKey,i),this.publicKey=i}),Qt(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Qt(this,"isValidJwtAttestation",async i=>{const a=await this.getPublicKey();try{if(a)return this.validateAttestation(i,a)}catch(u){this.logger.error(u),this.logger.warn("error validating attestation")}const c=await this.fetchAndPersistPublicKey();try{if(c)return this.validateAttestation(i,c)}catch(u){this.logger.error(u),this.logger.warn("error validating attestation")}}),Qt(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Qt(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async a=>{const c=await this.fetchPublicKey();c&&(await this.persistPublicKey(c),a(c))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i}),Qt(this,"validateAttestation",(i,a)=>{const c=zG(i,a.publicKey),u={hasExpired:Ae.toMiliseconds(c.exp)<Date.now(),payload:c};if(u.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:u.payload.origin,isScam:u.payload.isScam,isVerified:u.payload.isVerified}}),this.logger=ir(t,this.name),this.abortController=new AbortController,this.isDevEnv=A2(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Dr(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),Ae.toMiliseconds(e))}}var OW=Object.defineProperty,TW=(n,e,t)=>e in n?OW(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,jD=(n,e,t)=>TW(n,typeof e!="symbol"?e+"":e,t);class DW extends rY{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,jD(this,"context",CJ),jD(this,"registerDeviceToken",async r=>{const{clientId:i,token:a,notificationType:c,enableEncrypted:u=!1}=r,h=`${_J}/${this.projectId}/clients`;await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:c,token:a,always_raw:u})})}),this.logger=ir(t,this.context)}}var CW=Object.defineProperty,zD=Object.getOwnPropertySymbols,_W=Object.prototype.hasOwnProperty,NW=Object.prototype.propertyIsEnumerable,CE=(n,e,t)=>e in n?CW(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ad=(n,e)=>{for(var t in e||(e={}))_W.call(e,t)&&CE(n,t,e[t]);if(zD)for(var t of zD(e))NW.call(e,t)&&CE(n,t,e[t]);return n},hn=(n,e,t)=>CE(n,typeof e!="symbol"?e+"":e,t);class IW extends iY{constructor(e,t,r=!0){super(e,t,r),this.core=e,this.logger=t,hn(this,"context",IJ),hn(this,"storagePrefix",Ns),hn(this,"storageVersion",NJ),hn(this,"events",new Map),hn(this,"shouldPersist",!1),hn(this,"init",async()=>{if(!A2())try{const i={eventId:h8(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:GI(this.core.relayer.protocol,this.core.relayer.version,vE)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}}),hn(this,"createEvent",i=>{const{event:a="ERROR",type:c="",properties:{topic:u,trace:h}}=i,d=h8(),p=this.core.projectId||"",y=Date.now(),w=Ad({eventId:d,timestamp:y,props:{event:a,type:c,properties:{topic:u,trace:h}},bundleId:p,domain:this.getAppDomain()},this.setMethods(d));return this.telemetryEnabled&&(this.events.set(d,w),this.shouldPersist=!0),w}),hn(this,"getEvent",i=>{const{eventId:a,topic:c}=i;if(a)return this.events.get(a);const u=Array.from(this.events.values()).find(h=>h.props.properties.topic===c);if(u)return Ad(Ad({},u),this.setMethods(u.eventId))}),hn(this,"deleteEvent",i=>{const{eventId:a}=i;this.events.delete(a),this.shouldPersist=!0}),hn(this,"setEventListeners",()=>{this.core.heartbeat.on(xl.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{Ae.fromMiliseconds(Date.now())-Ae.fromMiliseconds(i.timestamp)>RJ&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})}),hn(this,"setMethods",i=>({addTrace:a=>this.addTrace(i,a),setError:a=>this.setError(i,a)})),hn(this,"addTrace",(i,a)=>{const c=this.events.get(i);c&&(c.props.properties.trace.push(a),this.events.set(i,c),this.shouldPersist=!0)}),hn(this,"setError",(i,a)=>{const c=this.events.get(i);c&&(c.props.type=a,c.timestamp=Date.now(),this.events.set(i,c),this.shouldPersist=!0)}),hn(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),hn(this,"restore",async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(a=>{this.events.set(a.eventId,Ad(Ad({},a),this.setMethods(a.eventId)))})}catch(i){this.logger.warn(i)}}),hn(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[a,c]of this.events)c.props.type&&i.push(c);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const a of i)this.events.delete(a.eventId),this.shouldPersist=!0}catch(a){this.logger.warn(a)}}),hn(this,"sendEvent",async i=>{const a=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${BJ}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${vE}${a}`,{method:"POST",body:JSON.stringify(i)})}),hn(this,"getAppDomain",()=>VI().url),this.logger=ir(t,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var RW=Object.defineProperty,HD=Object.getOwnPropertySymbols,BW=Object.prototype.hasOwnProperty,PW=Object.prototype.propertyIsEnumerable,_E=(n,e,t)=>e in n?RW(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,FD=(n,e)=>{for(var t in e||(e={}))BW.call(e,t)&&_E(n,t,e[t]);if(HD)for(var t of HD(e))PW.call(e,t)&&_E(n,t,e[t]);return n},At=(n,e,t)=>_E(n,typeof e!="symbol"?e+"":e,t);let UW=class f4 extends VQ{constructor(e){var t;super(e),At(this,"protocol",JR),At(this,"version",ZR),At(this,"name",bE),At(this,"relayUrl"),At(this,"projectId"),At(this,"customStoragePrefix"),At(this,"events",new Yr.EventEmitter),At(this,"logger"),At(this,"heartbeat"),At(this,"relayer"),At(this,"crypto"),At(this,"storage"),At(this,"history"),At(this,"expirer"),At(this,"pairing"),At(this,"verify"),At(this,"echoClient"),At(this,"linkModeSupportedApps"),At(this,"eventClient"),At(this,"initialized",!1),At(this,"logChunkController"),At(this,"on",(u,h)=>this.events.on(u,h)),At(this,"once",(u,h)=>this.events.once(u,h)),At(this,"off",(u,h)=>this.events.off(u,h)),At(this,"removeListener",(u,h)=>this.events.removeListener(u,h)),At(this,"dispatchEnvelope",({topic:u,message:h,sessionExists:d})=>{if(!u||!h)return;const p={topic:u,message:h,publishedAt:Date.now(),transportType:St.link_mode};this.relayer.onLinkMessageEvent(p,{sessionExists:d})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(u){console.warn("Failed to copy global core",u)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||WR,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const i=p0({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:eJ.logger,name:bE}),{logger:a,chunkLoggerController:c}=HQ({opts:i,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=c,(t=this.logChunkController)!=null&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var u,h;(u=this.logChunkController)!=null&&u.downloadLogsBlobInBrowser&&((h=this.logChunkController)==null||h.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=ir(a,this.name),this.heartbeat=new VK,this.crypto=new cX(this,this.logger,e==null?void 0:e.keychain),this.history=new wW(this,this.logger),this.expirer=new EW(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new OQ(FD(FD({},tJ),e==null?void 0:e.storageOptions)),this.relayer=new UX({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new gW(this,this.logger),this.verify=new SW(this,this.logger,this.storage),this.echoClient=new DW(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new IW(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const t=new f4(e);await t.initialize();const r=await t.crypto.getClientId();return await t.storage.setItem(gJ,r),t}get context(){return Dr(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(ED,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(ED)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const t=`_walletConnectCore_${e}`,r=`${t}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[t]}catch(t){console.warn("Failed to get global WalletConnect core",t);return}}setGlobalCore(e){var t;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((t=e.opts)==null?void 0:t.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&WY.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const MW=UW,d4="wc",p4=2,g4="client",L2=`${d4}@${p4}:${g4}:`,H1={name:g4,logger:"error"},qD="WALLETCONNECT_DEEPLINK_CHOICE",$W="proposal",VD="Proposal expired",kW="session",xu=Ae.SEVEN_DAYS,LW="engine",Sn={wc_sessionPropose:{req:{ttl:Ae.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Ae.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:Ae.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:Ae.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:Ae.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Ae.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Ae.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Ae.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Ae.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Ae.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Ae.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Ae.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Ae.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Ae.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Ae.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Ae.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Ae.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Ae.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Ae.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Ae.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:Ae.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:Ae.FIVE_MINUTES,prompt:!1,tag:1119}}},F1={min:Ae.FIVE_MINUTES,max:Ae.SEVEN_DAYS},cs={idle:"IDLE",active:"ACTIVE"},jW={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},zW="request",HW=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],FW="wc",qW="auth",VW="authKeys",GW="pairingTopics",KW="requests",w0=`${FW}@${1.5}:${qW}:`,Jy=`${w0}:PUB_KEY`;var QW=Object.defineProperty,YW=Object.defineProperties,JW=Object.getOwnPropertyDescriptors,GD=Object.getOwnPropertySymbols,ZW=Object.prototype.hasOwnProperty,XW=Object.prototype.propertyIsEnumerable,NE=(n,e,t)=>e in n?QW(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ft=(n,e)=>{for(var t in e||(e={}))ZW.call(e,t)&&NE(n,t,e[t]);if(GD)for(var t of GD(e))XW.call(e,t)&&NE(n,t,e[t]);return n},jn=(n,e)=>YW(n,JW(e)),me=(n,e,t)=>NE(n,typeof e!="symbol"?e+"":e,t);let WW=class extends cY{constructor(e){super(e),me(this,"name",LW),me(this,"events",new u2),me(this,"initialized",!1),me(this,"requestQueue",{state:cs.idle,queue:[]}),me(this,"sessionRequestQueue",{state:cs.idle,queue:[]}),me(this,"emittedSessionRequests",new nq({limit:500})),me(this,"requestQueueDelay",Ae.ONE_SECOND),me(this,"expectedPairingMethodMap",new Map),me(this,"recentlyDeletedMap",new Map),me(this,"recentlyDeletedLimit",200),me(this,"relayMessageCache",[]),me(this,"pendingSessions",new Map),me(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Sn)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},Ae.toMiliseconds(this.requestQueueDelay)))}),me(this,"connect",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=jn(ft({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=rK(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:i,requiredNamespaces:a,optionalNamespaces:c,sessionProperties:u,scopedProperties:h,relays:d}=r;let p=i,y,w=!1;try{if(p){const N=this.client.core.pairing.pairings.get(p);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),w=N.active}}catch(N){throw this.client.logger.error(`connect() -> pairing.get(${p}) failed`),N}if(!p||!w){const{topic:N,uri:k}=await this.client.core.pairing.create({internal:{skipSubscribe:!0}});p=N,y=k}if(!p){const{message:N}=Ee("NO_MATCHING_KEY",`connect() pairing topic: ${p}`);throw new Error(N)}const v=await this.client.core.crypto.generateKeyPair(),b=Sn.wc_sessionPropose.req.ttl||Ae.FIVE_MINUTES,E=Yt(b),A=jn(ft(ft({requiredNamespaces:a,optionalNamespaces:c,relays:d??[{protocol:XR}],proposer:{publicKey:v,metadata:this.client.metadata},expiryTimestamp:E,pairingTopic:p},u&&{sessionProperties:u}),h&&{scopedProperties:h}),{id:us()}),S=ot("session_connect",A.id),{reject:B,resolve:D,done:U}=Sc(b,VD),I=({id:N})=>{N===A.id&&(this.client.events.off("proposal_expire",I),this.pendingSessions.delete(A.id),this.events.emit(S,{error:{message:VD,code:0}}))};return this.client.events.on("proposal_expire",I),this.events.once(S,({error:N,session:k})=>{this.client.events.off("proposal_expire",I),N?B(N):k&&D(k)}),await this.sendProposeSession({proposal:A,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:A.id}}}),await this.setProposal(A.id,A),{uri:y,approval:U}}),me(this,"pair",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(t)}catch(r){throw this.client.logger.error("pair() failed"),r}}),me(this,"approve",async t=>{var r,i,a;const c=this.client.core.eventClient.createEvent({properties:{topic:(r=t==null?void 0:t.id)==null?void 0:r.toString(),trace:[yo.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(P){throw c.setError(bd.no_internet_connection),P}try{await this.isValidProposalId(t==null?void 0:t.id)}catch(P){throw this.client.logger.error(`approve() -> proposal.get(${t==null?void 0:t.id}) failed`),c.setError(bd.proposal_not_found),P}try{await this.isValidApprove(t)}catch(P){throw this.client.logger.error("approve() -> isValidApprove() failed"),c.setError(bd.session_approve_namespace_validation_failure),P}const{id:u,relayProtocol:h,namespaces:d,sessionProperties:p,scopedProperties:y,sessionConfig:w}=t,v=this.client.proposal.get(u);this.client.core.eventClient.deleteEvent({eventId:c.eventId});const{pairingTopic:b,proposer:E,requiredNamespaces:A,optionalNamespaces:S}=v;let B=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:b});B||(B=(a=this.client.core.eventClient)==null?void 0:a.createEvent({type:yo.session_approve_started,properties:{topic:b,trace:[yo.session_approve_started,yo.session_namespaces_validation_success]}}));const D=await this.client.core.crypto.generateKeyPair(),U=E.publicKey,I=await this.client.core.crypto.generateSharedKey(D,U),N=ft(ft(ft({relay:{protocol:h??"irn"},namespaces:d,controller:{publicKey:D,metadata:this.client.metadata},expiry:Yt(xu)},p&&{sessionProperties:p}),y&&{scopedProperties:y}),w&&{sessionConfig:w}),k=St.relay;B.addTrace(yo.subscribing_session_topic);try{await this.client.core.relayer.subscribe(I,{transportType:k,internal:{skipSubscribe:!0}})}catch(P){throw B.setError(bd.subscribe_session_topic_failure),P}B.addTrace(yo.subscribe_session_topic_success);const $=jn(ft({},N),{topic:I,requiredNamespaces:A,optionalNamespaces:S,pairingTopic:b,acknowledged:!1,self:N.controller,peer:{publicKey:E.publicKey,metadata:E.metadata},controller:D,transportType:St.relay});await this.client.session.set(I,$),B.addTrace(yo.store_session);try{await this.sendApproveSession({sessionTopic:I,proposal:v,pairingProposalResponse:{relay:{protocol:h??"irn"},responderPublicKey:D},sessionSettleRequest:N,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:u}}}),B.addTrace(yo.session_approve_publish_success)}catch(P){throw this.client.logger.error(P),this.client.session.delete(I,Ot("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(I),P}return this.client.core.eventClient.deleteEvent({eventId:B.eventId}),await this.client.core.pairing.updateMetadata({topic:b,metadata:E.metadata}),await this.deleteProposal(u),await this.client.core.pairing.activate({topic:b}),await this.setExpiry(I,Yt(xu)),{topic:I,acknowledged:()=>Promise.resolve(this.client.session.get(I))}}),me(this,"reject",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(t)}catch(c){throw this.client.logger.error("reject() -> isValidReject() failed"),c}const{id:r,reason:i}=t;let a;try{a=this.client.proposal.get(r).pairingTopic}catch(c){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),c}a&&await this.sendError({id:r,topic:a,error:i,rpcOpts:Sn.wc_sessionPropose.reject}),await this.deleteProposal(r)}),me(this,"update",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(t)}catch(y){throw this.client.logger.error("update() -> isValidUpdate() failed"),y}const{topic:r,namespaces:i}=t,{done:a,resolve:c,reject:u}=Sc(),h=us(),d=Ho().toString(),p=this.client.session.get(r).namespaces;return this.events.once(ot("session_update",h),({error:y})=>{y?u(y):c()}),await this.client.session.update(r,{namespaces:i}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:h,relayRpcId:d}).catch(y=>{this.client.logger.error(y),this.client.session.update(r,{namespaces:p}),u(y)}),{acknowledged:a}}),me(this,"extend",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(t)}catch(h){throw this.client.logger.error("extend() -> isValidExtend() failed"),h}const{topic:r}=t,i=us(),{done:a,resolve:c,reject:u}=Sc();return this.events.once(ot("session_extend",i),({error:h})=>{h?u(h):c()}),await this.setExpiry(r,Yt(xu)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(h=>{u(h)}),{acknowledged:a}}),me(this,"request",async t=>{this.isInitialized();try{await this.isValidRequest(t)}catch(A){throw this.client.logger.error("request() -> isValidRequest() failed"),A}const{chainId:r,request:i,topic:a,expiry:c=Sn.wc_sessionRequest.req.ttl}=t,u=this.client.session.get(a);(u==null?void 0:u.transportType)===St.relay&&await this.confirmOnlineStateOrThrow();const h=us(),d=Ho().toString(),{done:p,resolve:y,reject:w}=Sc(c,"Request expired. Please try again.");this.events.once(ot("session_request",h),({error:A,result:S})=>{A?w(A):y(S)});const v="wc_sessionRequest",b=this.getAppLinkIfEnabled(u.peer.metadata,u.transportType);if(b)return await this.sendRequest({clientRpcId:h,relayRpcId:d,topic:a,method:v,params:{request:jn(ft({},i),{expiryTimestamp:Yt(c)}),chainId:r},expiry:c,throwOnFailedPublish:!0,appLink:b}).catch(A=>w(A)),this.client.events.emit("session_request_sent",{topic:a,request:i,chainId:r,id:h}),await p();const E={request:jn(ft({},i),{expiryTimestamp:Yt(c)}),chainId:r};return await Promise.all([new Promise(async A=>{await this.sendRequest({clientRpcId:h,relayRpcId:d,topic:a,method:v,params:E,expiry:c,throwOnFailedPublish:!0,tvf:this.getTVFParams(h,E)}).catch(S=>w(S)),this.client.events.emit("session_request_sent",{topic:a,request:i,chainId:r,id:h}),A()}),new Promise(async A=>{var S;if(!((S=u.sessionConfig)!=null&&S.disableDeepLink)){const B=await ZF(this.client.core.storage,qD);await QF({id:h,topic:a,wcDeepLink:B})}A()}),p()]).then(A=>A[2])}),me(this,"respond",async t=>{this.isInitialized(),await this.isValidRespond(t);const{topic:r,response:i}=t,{id:a}=i,c=this.client.session.get(r);c.transportType===St.relay&&await this.confirmOnlineStateOrThrow();const u=this.getAppLinkIfEnabled(c.peer.metadata,c.transportType);hs(i)?await this.sendResult({id:a,topic:r,result:i.result,throwOnFailedPublish:!0,appLink:u}):bi(i)&&await this.sendError({id:a,topic:r,error:i.error,appLink:u}),this.cleanupAfterResponse(t)}),me(this,"ping",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(t)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:r}=t;if(this.client.session.keys.includes(r)){const i=us(),a=Ho().toString(),{done:c,resolve:u,reject:h}=Sc();this.events.once(ot("session_ping",i),({error:d})=>{d?h(d):u()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:a}),c()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),me(this,"emit",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(t);const{topic:r,event:i,chainId:a}=t,c=Ho().toString(),u=us();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:i,chainId:a},throwOnFailedPublish:!0,relayRpcId:c,clientRpcId:u})}),me(this,"disconnect",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(t);const{topic:r}=t;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:Ot("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:i}=Ee("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(i)}}),me(this,"find",t=>(this.isInitialized(),this.client.session.getAll().filter(r=>aK(r,t)))),me(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),me(this,"authenticate",async(t,r)=>{var i;this.isInitialized(),this.isValidAuthenticate(t);const a=r&&this.client.core.linkModeSupportedApps.includes(r)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),c=a?St.link_mode:St.relay;c===St.relay&&await this.confirmOnlineStateOrThrow();const{chains:u,statement:h="",uri:d,domain:p,nonce:y,type:w,exp:v,nbf:b,methods:E=[],expiry:A}=t,S=[...t.resources||[]],{topic:B,uri:D}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:c});this.client.logger.info({message:"Generated new pairing",pairing:{topic:B,uri:D}});const U=await this.client.core.crypto.generateKeyPair(),I=Gy(U);if(await Promise.all([this.client.auth.authKeys.set(Jy,{responseTopic:I,publicKey:U}),this.client.auth.pairingTopics.set(I,{topic:I,pairingTopic:B})]),await this.client.core.relayer.subscribe(I,{transportType:c}),this.client.logger.info(`sending request to new pairing topic: ${B}`),E.length>0){const{namespace:G}=qo(u[0]);let _=dV(G,"request",E);Vy(S)&&(_=gV(_,S.pop())),S.push(_)}const N=A&&A>Sn.wc_sessionAuthenticate.req.ttl?A:Sn.wc_sessionAuthenticate.req.ttl,k={authPayload:{type:w??"caip122",chains:u,statement:h,aud:d,domain:p,version:"1",nonce:y,iat:new Date().toISOString(),exp:v,nbf:b,resources:S},requester:{publicKey:U,metadata:this.client.metadata},expiryTimestamp:Yt(N)},$={eip155:{chains:u,methods:[...new Set(["personal_sign",...E])],events:["chainChanged","accountsChanged"]}},P={requiredNamespaces:{},optionalNamespaces:$,relays:[{protocol:"irn"}],pairingTopic:B,proposer:{publicKey:U,metadata:this.client.metadata},expiryTimestamp:Yt(Sn.wc_sessionPropose.req.ttl),id:us()},{done:L,resolve:z,reject:V}=Sc(N,"Request expired"),ne=us(),Z=ot("session_connect",P.id),C=ot("session_request",ne),O=async({error:G,session:_})=>{this.events.off(C,M),G?V(G):_&&z({session:_})},M=async G=>{var _,F,X;if(await this.deletePendingAuthRequest(ne,{message:"fulfilled",code:0}),G.error){const ve=Ot("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return G.error.code===ve.code?void 0:(this.events.off(Z,O),V(G.error.message))}await this.deleteProposal(P.id),this.events.off(Z,O);const{cacaos:re,responder:ie}=G.result,ge=[],le=[];for(const ve of re){await A8({cacao:ve,projectId:this.client.core.projectId})||(this.client.logger.error(ve,"Signature verification failed"),V(Ot("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Ne}=ve,Ce=Vy(Ne.resources),ze=[iE(Ne.iss)],Qe=Em(Ne.iss);if(Ce){const st=x8(Ce),Ct=S8(Ce);ge.push(...st),ze.push(...Ct)}for(const st of ze)le.push(`${st}:${Qe}`)}const ue=await this.client.core.crypto.generateSharedKey(U,ie.publicKey);let de;ge.length>0&&(de={topic:ue,acknowledged:!0,self:{publicKey:U,metadata:this.client.metadata},peer:ie,controller:ie.publicKey,expiry:Yt(xu),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:B,namespaces:Q8([...new Set(ge)],[...new Set(le)]),transportType:c},await this.client.core.relayer.subscribe(ue,{transportType:c}),await this.client.session.set(ue,de),B&&await this.client.core.pairing.updateMetadata({topic:B,metadata:ie.metadata}),de=this.client.session.get(ue)),(_=this.client.metadata.redirect)!=null&&_.linkMode&&(F=ie.metadata.redirect)!=null&&F.linkMode&&(X=ie.metadata.redirect)!=null&&X.universal&&r&&(this.client.core.addLinkModeSupportedApp(ie.metadata.redirect.universal),this.client.session.update(ue,{transportType:St.link_mode})),z({auths:re,session:de})};this.events.once(Z,O),this.events.once(C,M);let q;try{if(a){const G=Vi("wc_sessionAuthenticate",k,ne);this.client.core.history.set(B,G);const _=await this.client.core.crypto.encode("",G,{type:Lp,encoding:So});q=Ey(r,B,_)}else await Promise.all([this.sendRequest({topic:B,method:"wc_sessionAuthenticate",params:k,expiry:t.expiry,throwOnFailedPublish:!0,clientRpcId:ne}),this.sendRequest({topic:B,method:"wc_sessionPropose",params:P,expiry:Sn.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:P.id})])}catch(G){throw this.events.off(Z,O),this.events.off(C,M),G}return await this.setProposal(P.id,P),await this.setAuthRequest(ne,{request:jn(ft({},k),{verifyContext:{}}),pairingTopic:B,transportType:c}),{uri:q??D,response:L}}),me(this,"approveSessionAuthenticate",async t=>{const{id:r,auths:i}=t,a=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[vc.authenticated_session_approve_started]}});try{this.isInitialized()}catch(A){throw a.setError(vd.no_internet_connection),A}const c=this.getPendingAuthRequest(r);if(!c)throw a.setError(vd.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const u=c.transportType||St.relay;u===St.relay&&await this.confirmOnlineStateOrThrow();const h=c.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),p=Gy(h),y={type:Sa,receiverPublicKey:h,senderPublicKey:d},w=[],v=[];for(const A of i){if(!await A8({cacao:A,projectId:this.client.core.projectId})){a.setError(vd.invalid_cacao);const I=Ot("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:p,error:I,encodeOpts:y}),new Error(I.message)}a.addTrace(vc.cacaos_verified);const{p:S}=A,B=Vy(S.resources),D=[iE(S.iss)],U=Em(S.iss);if(B){const I=x8(B),N=S8(B);w.push(...I),D.push(...N)}for(const I of D)v.push(`${I}:${U}`)}const b=await this.client.core.crypto.generateSharedKey(d,h);a.addTrace(vc.create_authenticated_session_topic);let E;if((w==null?void 0:w.length)>0){E={topic:b,acknowledged:!0,self:{publicKey:d,metadata:this.client.metadata},peer:{publicKey:h,metadata:c.requester.metadata},controller:h,expiry:Yt(xu),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:c.pairingTopic,namespaces:Q8([...new Set(w)],[...new Set(v)]),transportType:u},a.addTrace(vc.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(b,{transportType:u})}catch(A){throw a.setError(vd.subscribe_authenticated_session_topic_failure),A}a.addTrace(vc.subscribe_authenticated_session_topic_success),await this.client.session.set(b,E),a.addTrace(vc.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:c.pairingTopic,metadata:c.requester.metadata})}a.addTrace(vc.publishing_authenticated_session_approve);try{await this.sendResult({topic:p,id:r,result:{cacaos:i,responder:{publicKey:d,metadata:this.client.metadata}},encodeOpts:y,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(c.requester.metadata,u)})}catch(A){throw a.setError(vd.authenticated_session_approve_publish_failure),A}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:c.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:a.eventId}),{session:E}}),me(this,"rejectSessionAuthenticate",async t=>{this.isInitialized();const{id:r,reason:i}=t,a=this.getPendingAuthRequest(r);if(!a)throw new Error(`Could not find pending auth request with id ${r}`);a.transportType===St.relay&&await this.confirmOnlineStateOrThrow();const c=a.requester.publicKey,u=await this.client.core.crypto.generateKeyPair(),h=Gy(c),d={type:Sa,receiverPublicKey:c,senderPublicKey:u};await this.sendError({id:r,topic:h,error:i,encodeOpts:d,rpcOpts:Sn.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(a.requester.metadata,a.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),me(this,"formatAuthMessage",t=>{this.isInitialized();const{request:r,iss:i}=t;return lR(r,i)}),me(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const t=this.relayMessageCache.shift();t&&await this.onRelayMessage(t)}catch(t){this.client.logger.error(t)}},50)}),me(this,"cleanupDuplicatePairings",async t=>{if(t.pairingTopic)try{const r=this.client.core.pairing.pairings.get(t.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(a=>{var c,u;return((c=a.peerMetadata)==null?void 0:c.url)&&((u=a.peerMetadata)==null?void 0:u.url)===t.peer.metadata.url&&a.topic&&a.topic!==r.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(a=>this.client.core.pairing.disconnect({topic:a.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),me(this,"deleteSession",async t=>{var r;const{topic:i,expirerHasDeleted:a=!1,emitEvent:c=!0,id:u=0}=t,{self:h}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,Ot("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(h.publicKey)&&await this.client.core.crypto.deleteKeyPair(h.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),a||this.client.core.expirer.del(i),this.client.core.storage.removeItem(qD).catch(d=>this.client.logger.warn(d)),this.getPendingSessionRequests().forEach(d=>{d.topic===i&&this.deletePendingSessionRequest(d.id,Ot("USER_DISCONNECTED"))}),i===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=cs.idle),c&&this.client.events.emit("session_delete",{id:u,topic:i})}),me(this,"deleteProposal",async(t,r)=>{if(r)try{const i=this.client.proposal.get(t),a=this.client.core.eventClient.getEvent({topic:i.pairingTopic});a==null||a.setError(bd.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(t,Ot("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"proposal")}),me(this,"deletePendingSessionRequest",async(t,r,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,r),i?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(a=>a.id!==t),i&&(this.sessionRequestQueue.state=cs.idle,this.client.events.emit("session_request_expire",{id:t}))}),me(this,"deletePendingAuthRequest",async(t,r,i=!1)=>{await Promise.all([this.client.auth.requests.delete(t,r),i?Promise.resolve():this.client.core.expirer.del(t)])}),me(this,"setExpiry",async(t,r)=>{this.client.session.keys.includes(t)&&(this.client.core.expirer.set(t,r),await this.client.session.update(t,{expiry:r}))}),me(this,"setProposal",async(t,r)=>{this.client.core.expirer.set(t,Yt(Sn.wc_sessionPropose.req.ttl)),await this.client.proposal.set(t,r)}),me(this,"setAuthRequest",async(t,r)=>{const{request:i,pairingTopic:a,transportType:c=St.relay}=r;this.client.core.expirer.set(t,i.expiryTimestamp),await this.client.auth.requests.set(t,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:t,pairingTopic:a,verifyContext:i.verifyContext,transportType:c})}),me(this,"setPendingSessionRequest",async t=>{const{id:r,topic:i,params:a,verifyContext:c}=t,u=a.request.expiryTimestamp||Yt(Sn.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,u),await this.client.pendingRequest.set(r,{id:r,topic:i,params:a,verifyContext:c})}),me(this,"sendRequest",async t=>{const{topic:r,method:i,params:a,expiry:c,relayRpcId:u,clientRpcId:h,throwOnFailedPublish:d,appLink:p,tvf:y,publishOpts:w={}}=t,v=Vi(i,a,h);let b;const E=!!p;try{const B=E?So:Ar;b=await this.client.core.crypto.encode(r,v,{encoding:B})}catch(B){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),B}let A;if(HW.includes(i)){const B=wi(JSON.stringify(v)),D=wi(b);A=await this.client.core.verify.register({id:D,decryptedId:B})}const S=ft(ft({},Sn[i].req),w);if(S.attestation=A,c&&(S.ttl=c),u&&(S.id=u),this.client.core.history.set(r,v),E){const B=Ey(p,r,b);await global.Linking.openURL(B,this.client.name)}else S.tvf=jn(ft({},y),{correlationId:v.id}),d?(S.internal=jn(ft({},S.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,b,S)):this.client.core.relayer.publish(r,b,S).catch(B=>this.client.logger.error(B));return v.id}),me(this,"sendProposeSession",async t=>{const{proposal:r,publishOpts:i}=t,a=Vi("wc_sessionPropose",r,r.id);this.client.core.history.set(r.pairingTopic,a);const c=await this.client.core.crypto.encode(r.pairingTopic,a,{encoding:Ar}),u=wi(JSON.stringify(a)),h=wi(c),d=await this.client.core.verify.register({id:h,decryptedId:u});await this.client.core.relayer.publishCustom({payload:{pairingTopic:r.pairingTopic,sessionProposal:c},opts:jn(ft({},i),{publishMethod:"wc_proposeSession",attestation:d})})}),me(this,"sendApproveSession",async t=>{const{sessionTopic:r,pairingProposalResponse:i,proposal:a,sessionSettleRequest:c,publishOpts:u}=t,h=up(a.id,i),d=await this.client.core.crypto.encode(a.pairingTopic,h,{encoding:Ar}),p=Vi("wc_sessionSettle",c,u==null?void 0:u.id),y=await this.client.core.crypto.encode(r,p,{encoding:Ar});this.client.core.history.set(r,p),await this.client.core.relayer.publishCustom({payload:{sessionTopic:r,pairingTopic:a.pairingTopic,sessionProposalResponse:d,sessionSettlementRequest:y},opts:jn(ft({},u),{publishMethod:"wc_approveSession"})})}),me(this,"sendResult",async t=>{const{id:r,topic:i,result:a,throwOnFailedPublish:c,encodeOpts:u,appLink:h}=t,d=up(r,a);let p;const y=h&&typeof(global==null?void 0:global.Linking)<"u";try{const b=y?So:Ar;p=await this.client.core.crypto.encode(i,d,jn(ft({},u||{}),{encoding:b}))}catch(b){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),b}let w,v;try{w=await this.client.core.history.get(i,r);const b=w.request;try{v=this.getTVFParams(r,b.params,a)}catch(E){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${E==null?void 0:E.message}`)}}catch(b){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${r}) failed`),b}if(y){const b=Ey(h,i,p);await global.Linking.openURL(b,this.client.name)}else{const b=w.request.method,E=Sn[b].res;E.tvf=jn(ft({},v),{correlationId:r}),c?(E.internal=jn(ft({},E.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,p,E)):this.client.core.relayer.publish(i,p,E).catch(A=>this.client.logger.error(A))}await this.client.core.history.resolve(d)}),me(this,"sendError",async t=>{const{id:r,topic:i,error:a,encodeOpts:c,rpcOpts:u,appLink:h}=t,d=g0(r,a);let p;const y=h&&typeof(global==null?void 0:global.Linking)<"u";try{const v=y?So:Ar;p=await this.client.core.crypto.encode(i,d,jn(ft({},c||{}),{encoding:v}))}catch(v){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),v}let w;try{w=await this.client.core.history.get(i,r)}catch(v){throw this.client.logger.error(`sendError() -> history.get(${i}, ${r}) failed`),v}if(y){const v=Ey(h,i,p);await global.Linking.openURL(v,this.client.name)}else{const v=w.request.method,b=u||Sn[v].res;this.client.core.relayer.publish(i,p,b)}await this.client.core.history.resolve(d)}),me(this,"cleanup",async()=>{const t=[],r=[];this.client.session.getAll().forEach(i=>{let a=!1;Es(i.expiry)&&(a=!0),this.client.core.crypto.keychain.has(i.topic)||(a=!0),a&&t.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{Es(i.expiryTimestamp)&&r.push(i.id)}),await Promise.all([...t.map(i=>this.deleteSession({topic:i})),...r.map(i=>this.deleteProposal(i))])}),me(this,"onProviderMessageEvent",async t=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(t):await this.onRelayMessage(t)}),me(this,"onRelayEventRequest",async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()}),me(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===cs.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=cs.active;const t=this.requestQueue.queue.shift();if(t)try{await this.processRequest(t)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=cs.idle}),me(this,"processRequest",async t=>{const{topic:r,payload:i,attestation:a,transportType:c,encryptedId:u}=t,h=i.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:h}))switch(h){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:i,attestation:a,encryptedId:u});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,i);case"wc_sessionPing":return await this.onSessionPingRequest(r,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:i,attestation:a,encryptedId:u,transportType:c});case"wc_sessionEvent":return await this.onSessionEventRequest(r,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:i,attestation:a,encryptedId:u,transportType:c});default:return this.client.logger.info(`Unsupported request method ${h}`)}}),me(this,"onRelayEventResponse",async t=>{const{topic:r,payload:i,transportType:a}=t,c=(await this.client.core.history.get(r,i.id)).request.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeResponse(r,i,a);case"wc_sessionSettle":return this.onSessionSettleResponse(r,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,i);case"wc_sessionExtend":return this.onSessionExtendResponse(r,i);case"wc_sessionPing":return this.onSessionPingResponse(r,i);case"wc_sessionRequest":return this.onSessionRequestResponse(r,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,i);default:return this.client.logger.info(`Unsupported response method ${c}`)}}),me(this,"onRelayEventUnknownPayload",t=>{const{topic:r}=t,{message:i}=Ee("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)}),me(this,"shouldIgnorePairingRequest",t=>{const{topic:r,requestMethod:i}=t,a=this.expectedPairingMethodMap.get(r);return!a||a.includes(i)?!1:!!(a.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),me(this,"onSessionProposeRequest",async t=>{const{topic:r,payload:i,attestation:a,encryptedId:c}=t,{params:u,id:h}=i;try{const d=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),d==null||d.setError(ta.proposal_listener_not_found)),this.isValidConnect(ft({},i.params));const p=u.expiryTimestamp||Yt(Sn.wc_sessionPropose.req.ttl),y=ft({id:h,pairingTopic:r,expiryTimestamp:p,attestation:a,encryptedId:c},u);await this.setProposal(h,y);const w=await this.getVerifyContext({attestationId:a,hash:wi(JSON.stringify(i)),encryptedId:c,metadata:y.proposer.metadata});d==null||d.addTrace(ls.emit_session_proposal),this.client.events.emit("session_proposal",{id:h,params:y,verifyContext:w})}catch(d){await this.sendError({id:h,topic:r,error:d,rpcOpts:Sn.wc_sessionPropose.autoReject}),this.client.logger.error(d)}}),me(this,"onSessionProposeResponse",async(t,r,i)=>{const{id:a}=r;if(hs(r)){const{result:c}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:c});const u=this.client.proposal.get(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:u});const h=u.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:h});const d=c.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:d});const p=await this.client.core.crypto.generateSharedKey(h,d);this.pendingSessions.set(a,{sessionTopic:p,pairingTopic:t,proposalId:a,publicKey:h});const y=await this.client.core.relayer.subscribe(p,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:y}),await this.client.core.pairing.activate({topic:t})}else if(bi(r)){await this.deleteProposal(a);const c=ot("session_connect",a);if(this.events.listenerCount(c)===0)throw new Error(`emitting ${c} without any listeners, 954`);this.events.emit(c,{error:r.error})}}),me(this,"onSessionSettleRequest",async(t,r)=>{const{id:i,params:a}=r;try{this.isValidSessionSettleRequest(a);const{relay:c,controller:u,expiry:h,namespaces:d,sessionProperties:p,scopedProperties:y,sessionConfig:w}=r.params,v=[...this.pendingSessions.values()].find(A=>A.sessionTopic===t);if(!v)return this.client.logger.error(`Pending session not found for topic ${t}`);const b=this.client.proposal.get(v.proposalId),E=jn(ft(ft(ft({topic:t,relay:c,expiry:h,namespaces:d,acknowledged:!0,pairingTopic:v.pairingTopic,requiredNamespaces:b.requiredNamespaces,optionalNamespaces:b.optionalNamespaces,controller:u.publicKey,self:{publicKey:v.publicKey,metadata:this.client.metadata},peer:{publicKey:u.publicKey,metadata:u.metadata}},p&&{sessionProperties:p}),y&&{scopedProperties:y}),w&&{sessionConfig:w}),{transportType:St.relay});await this.client.session.set(E.topic,E),await this.setExpiry(E.topic,E.expiry),await this.client.core.pairing.updateMetadata({topic:v.pairingTopic,metadata:E.peer.metadata}),this.client.events.emit("session_connect",{session:E}),this.events.emit(ot("session_connect",v.proposalId),{session:E}),this.pendingSessions.delete(v.proposalId),this.deleteProposal(v.proposalId,!1),this.cleanupDuplicatePairings(E),await this.sendResult({id:r.id,topic:t,result:!0})}catch(c){await this.sendError({id:i,topic:t,error:c}),this.client.logger.error(c)}}),me(this,"onSessionSettleResponse",async(t,r)=>{const{id:i}=r;hs(r)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(ot("session_approve",i),{})):bi(r)&&(await this.client.session.delete(t,Ot("USER_DISCONNECTED")),this.events.emit(ot("session_approve",i),{error:r.error}))}),me(this,"onSessionUpdateRequest",async(t,r)=>{const{params:i,id:a}=r;try{const c=`${t}_session_update`,u=md.get(c);if(u&&this.isRequestOutOfSync(u,a)){this.client.logger.warn(`Discarding out of sync request - ${a}`),this.sendError({id:a,topic:t,error:Ot("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(ft({topic:t},i));try{md.set(c,a),await this.client.session.update(t,{namespaces:i.namespaces}),await this.sendResult({id:a,topic:t,result:!0})}catch(h){throw md.delete(c),h}this.client.events.emit("session_update",{id:a,topic:t,params:i})}catch(c){await this.sendError({id:a,topic:t,error:c}),this.client.logger.error(c)}}),me(this,"isRequestOutOfSync",(t,r)=>r.toString().slice(0,-3)<t.toString().slice(0,-3)),me(this,"onSessionUpdateResponse",(t,r)=>{const{id:i}=r,a=ot("session_update",i);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);hs(r)?this.events.emit(ot("session_update",i),{}):bi(r)&&this.events.emit(ot("session_update",i),{error:r.error})}),me(this,"onSessionExtendRequest",async(t,r)=>{const{id:i}=r;try{this.isValidExtend({topic:t}),await this.setExpiry(t,Yt(xu)),await this.sendResult({id:i,topic:t,result:!0}),this.client.events.emit("session_extend",{id:i,topic:t})}catch(a){await this.sendError({id:i,topic:t,error:a}),this.client.logger.error(a)}}),me(this,"onSessionExtendResponse",(t,r)=>{const{id:i}=r,a=ot("session_extend",i);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);hs(r)?this.events.emit(ot("session_extend",i),{}):bi(r)&&this.events.emit(ot("session_extend",i),{error:r.error})}),me(this,"onSessionPingRequest",async(t,r)=>{const{id:i}=r;try{this.isValidPing({topic:t}),await this.sendResult({id:i,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:t})}catch(a){await this.sendError({id:i,topic:t,error:a}),this.client.logger.error(a)}}),me(this,"onSessionPingResponse",(t,r)=>{const{id:i}=r,a=ot("session_ping",i);setTimeout(()=>{if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners 2176`);hs(r)?this.events.emit(ot("session_ping",i),{}):bi(r)&&this.events.emit(ot("session_ping",i),{error:r.error})},500)}),me(this,"onSessionDeleteRequest",async(t,r)=>{const{id:i}=r;try{this.isValidDisconnect({topic:t,reason:r.params}),await Promise.all([new Promise(a=>{this.client.core.relayer.once(kt.publish,async()=>{a(await this.deleteSession({topic:t,id:i}))})}),this.sendResult({id:i,topic:t,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:t,error:Ot("USER_DISCONNECTED")})]).catch(a=>this.client.logger.error(a))}catch(a){this.client.logger.error(a)}}),me(this,"onSessionRequest",async t=>{var r,i,a;const{topic:c,payload:u,attestation:h,encryptedId:d,transportType:p}=t,{id:y,params:w}=u;try{await this.isValidRequest(ft({topic:c},w));const v=this.client.session.get(c),b=await this.getVerifyContext({attestationId:h,hash:wi(JSON.stringify(Vi("wc_sessionRequest",w,y))),encryptedId:d,metadata:v.peer.metadata,transportType:p}),E={id:y,topic:c,params:w,verifyContext:b};await this.setPendingSessionRequest(E),p===St.link_mode&&(r=v.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((i=v.peer.metadata.redirect)==null?void 0:i.universal),(a=this.client.signConfig)!=null&&a.disableRequestQueue?this.emitSessionRequest(E):(this.addSessionRequestToSessionRequestQueue(E),this.processSessionRequestQueue())}catch(v){await this.sendError({id:y,topic:c,error:v}),this.client.logger.error(v)}}),me(this,"onSessionRequestResponse",(t,r)=>{const{id:i}=r,a=ot("session_request",i);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);hs(r)?this.events.emit(ot("session_request",i),{result:r.result}):bi(r)&&this.events.emit(ot("session_request",i),{error:r.error})}),me(this,"onSessionEventRequest",async(t,r)=>{const{id:i,params:a}=r;try{const c=`${t}_session_event_${a.event.name}`,u=md.get(c);if(u&&this.isRequestOutOfSync(u,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(ft({topic:t},a)),this.client.events.emit("session_event",{id:i,topic:t,params:a}),md.set(c,i)}catch(c){await this.sendError({id:i,topic:t,error:c}),this.client.logger.error(c)}}),me(this,"onSessionAuthenticateResponse",(t,r)=>{const{id:i}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:t,payload:r}),hs(r)?this.events.emit(ot("session_request",i),{result:r.result}):bi(r)&&this.events.emit(ot("session_request",i),{error:r.error})}),me(this,"onSessionAuthenticateRequest",async t=>{var r;const{topic:i,payload:a,attestation:c,encryptedId:u,transportType:h}=t;try{const{requester:d,authPayload:p,expiryTimestamp:y}=a.params,w=await this.getVerifyContext({attestationId:c,hash:wi(JSON.stringify(a)),encryptedId:u,metadata:d.metadata,transportType:h}),v={requester:d,pairingTopic:i,id:a.id,authPayload:p,verifyContext:w,expiryTimestamp:y};await this.setAuthRequest(a.id,{request:v,pairingTopic:i,transportType:h}),h===St.link_mode&&(r=d.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(d.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:a.params,id:a.id,verifyContext:w})}catch(d){this.client.logger.error(d);const p=a.params.requester.publicKey,y=await this.client.core.crypto.generateKeyPair(),w=this.getAppLinkIfEnabled(a.params.requester.metadata,h),v={type:Sa,receiverPublicKey:p,senderPublicKey:y};await this.sendError({id:a.id,topic:i,error:d,encodeOpts:v,rpcOpts:Sn.wc_sessionAuthenticate.autoReject,appLink:w})}}),me(this,"addSessionRequestToSessionRequestQueue",t=>{this.sessionRequestQueue.queue.push(t)}),me(this,"cleanupAfterResponse",t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=cs.idle,this.processSessionRequestQueue()},Ae.toMiliseconds(this.requestQueueDelay))}),me(this,"cleanupPendingSentRequestsForTopic",({topic:t,error:r})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(a=>a.topic===t&&a.request.method==="wc_sessionRequest").forEach(a=>{const c=a.request.id,u=ot("session_request",c);if(this.events.listenerCount(u)===0)throw new Error(`emitting ${u} without any listeners`);this.events.emit(ot("session_request",a.request.id),{error:r})})}),me(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===cs.active){this.client.logger.info("session request queue is already active.");return}const t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(t)}catch(r){this.client.logger.error(r)}}),me(this,"emitSessionRequest",t=>{if(this.emittedSessionRequests.has(t.id)){this.client.logger.warn({id:t.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${t.id}`);return}this.sessionRequestQueue.state=cs.active,this.emittedSessionRequests.add(t.id),this.client.events.emit("session_request",t)}),me(this,"onPairingCreated",t=>{if(t.methods&&this.expectedPairingMethodMap.set(t.topic,t.methods),t.active)return;const r=this.client.proposal.getAll().find(i=>i.pairingTopic===t.topic);r&&this.onSessionProposeRequest({topic:t.topic,payload:Vi("wc_sessionPropose",jn(ft({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),me(this,"isValidConnect",async t=>{if(!yr(t)){const{message:d}=Ee("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(d)}const{pairingTopic:r,requiredNamespaces:i,optionalNamespaces:a,sessionProperties:c,scopedProperties:u,relays:h}=t;if(rn(r)||await this.isValidPairingTopic(r),!wK(h)){const{message:d}=Ee("MISSING_OR_INVALID",`connect() relays: ${h}`);throw new Error(d)}if(!rn(i)&&Ds(i)!==0){const d="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(d):this.client.logger.warn(d),this.validateNamespaces(i,"requiredNamespaces")}if(!rn(a)&&Ds(a)!==0&&this.validateNamespaces(a,"optionalNamespaces"),rn(c)||this.validateSessionProps(c,"sessionProperties"),!rn(u)){this.validateSessionProps(u,"scopedProperties");const d=Object.keys(i||{}).concat(Object.keys(a||{}));if(!Object.keys(u).every(p=>d.includes(p.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(u)}, required/optional namespaces: ${JSON.stringify(d)}`)}}),me(this,"validateNamespaces",(t,r)=>{const i=mK(t,"connect()",r);if(i)throw new Error(i.message)}),me(this,"isValidApprove",async t=>{if(!yr(t))throw new Error(Ee("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:r,namespaces:i,relayProtocol:a,sessionProperties:c,scopedProperties:u}=t;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const h=this.client.proposal.get(r),d=R1(i,"approve()");if(d)throw new Error(d.message);const p=Z8(h.requiredNamespaces,i,"approve()");if(p)throw new Error(p.message);if(!Jt(a,!0)){const{message:y}=Ee("MISSING_OR_INVALID",`approve() relayProtocol: ${a}`);throw new Error(y)}if(rn(c)||this.validateSessionProps(c,"sessionProperties"),!rn(u)){this.validateSessionProps(u,"scopedProperties");const y=new Set(Object.keys(i));if(!Object.keys(u).every(w=>y.has(w.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(u)}, approved namespaces: ${Array.from(y).join(", ")}`)}}),me(this,"isValidReject",async t=>{if(!yr(t)){const{message:a}=Ee("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(a)}const{id:r,reason:i}=t;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!vK(i)){const{message:a}=Ee("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(a)}}),me(this,"isValidSessionSettleRequest",t=>{if(!yr(t)){const{message:d}=Ee("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(d)}const{relay:r,controller:i,namespaces:a,expiry:c}=t;if(!jR(r)){const{message:d}=Ee("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(d)}const u=hK(i,"onSessionSettleRequest()");if(u)throw new Error(u.message);const h=R1(a,"onSessionSettleRequest()");if(h)throw new Error(h.message);if(Es(c)){const{message:d}=Ee("EXPIRED","onSessionSettleRequest()");throw new Error(d)}}),me(this,"isValidUpdate",async t=>{if(!yr(t)){const{message:h}=Ee("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(h)}const{topic:r,namespaces:i}=t;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const a=this.client.session.get(r),c=R1(i,"update()");if(c)throw new Error(c.message);const u=Z8(a.requiredNamespaces,i,"update()");if(u)throw new Error(u.message)}),me(this,"isValidExtend",async t=>{if(!yr(t)){const{message:i}=Ee("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(i)}const{topic:r}=t;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),me(this,"isValidRequest",async t=>{if(!yr(t)){const{message:h}=Ee("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(h)}const{topic:r,request:i,chainId:a,expiry:c}=t;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:u}=this.client.session.get(r);if(!J8(u,a)){const{message:h}=Ee("MISSING_OR_INVALID",`request() chainId: ${a}`);throw new Error(h)}if(!EK(i)){const{message:h}=Ee("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(h)}if(!SK(u,a,i.method)){const{message:h}=Ee("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(h)}if(c&&!CK(c,F1)){const{message:h}=Ee("MISSING_OR_INVALID",`request() expiry: ${c}. Expiry must be a number (in seconds) between ${F1.min} and ${F1.max}`);throw new Error(h)}}),me(this,"isValidRespond",async t=>{var r;if(!yr(t)){const{message:c}=Ee("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(c)}const{topic:i,response:a}=t;try{await this.isValidSessionTopic(i)}catch(c){throw(r=t==null?void 0:t.response)!=null&&r.id&&this.cleanupAfterResponse(t),c}if(!AK(a)){const{message:c}=Ee("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(a)}`);throw new Error(c)}}),me(this,"isValidPing",async t=>{if(!yr(t)){const{message:i}=Ee("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(i)}const{topic:r}=t;await this.isValidSessionOrPairingTopic(r)}),me(this,"isValidEmit",async t=>{if(!yr(t)){const{message:u}=Ee("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(u)}const{topic:r,event:i,chainId:a}=t;await this.isValidSessionTopic(r);const{namespaces:c}=this.client.session.get(r);if(!J8(c,a)){const{message:u}=Ee("MISSING_OR_INVALID",`emit() chainId: ${a}`);throw new Error(u)}if(!xK(i)){const{message:u}=Ee("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(u)}if(!OK(c,a,i.name)){const{message:u}=Ee("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(u)}}),me(this,"isValidDisconnect",async t=>{if(!yr(t)){const{message:i}=Ee("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(i)}const{topic:r}=t;await this.isValidSessionOrPairingTopic(r)}),me(this,"isValidAuthenticate",t=>{const{chains:r,uri:i,domain:a,nonce:c}=t;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!Jt(i,!1))throw new Error("uri is required parameter");if(!Jt(a,!1))throw new Error("domain is required parameter");if(!Jt(c,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(h=>qo(h).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:u}=qo(r[0]);if(u!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),me(this,"getVerifyContext",async t=>{const{attestationId:r,hash:i,encryptedId:a,metadata:c,transportType:u}=t,h={verified:{verifyUrl:c.verifyUrl||Hd,validation:"UNKNOWN",origin:c.url||""}};try{if(u===St.link_mode){const p=this.getAppLinkIfEnabled(c,u);return h.verified.validation=p&&new URL(p).origin===new URL(c.url).origin?"VALID":"INVALID",h}const d=await this.client.core.verify.resolve({attestationId:r,hash:i,encryptedId:a,verifyUrl:c.verifyUrl});d&&(h.verified.origin=d.origin,h.verified.isScam=d.isScam,h.verified.validation=d.origin===new URL(c.url).origin?"VALID":"INVALID")}catch(d){this.client.logger.warn(d)}return this.client.logger.debug(`Verify context: ${JSON.stringify(h)}`),h}),me(this,"validateSessionProps",(t,r)=>{Object.values(t).forEach((i,a)=>{if(i==null){const{message:c}=Ee("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${i} for key ${Object.keys(t)[a]}`);throw new Error(c)}})}),me(this,"getPendingAuthRequest",t=>{const r=this.client.auth.requests.get(t);return typeof r=="object"?r:void 0}),me(this,"addToRecentlyDeleted",(t,r)=>{if(this.recentlyDeletedMap.set(t,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const a=this.recentlyDeletedLimit/2;for(const c of this.recentlyDeletedMap.keys()){if(i++>=a)break;this.recentlyDeletedMap.delete(c)}}}),me(this,"checkRecentlyDeleted",t=>{const r=this.recentlyDeletedMap.get(t);if(r){const{message:i}=Ee("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${t}`);throw new Error(i)}}),me(this,"isLinkModeEnabled",(t,r)=>{var i,a,c,u,h,d,p,y,w;return!t||r!==St.link_mode?!1:((a=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:a.linkMode)===!0&&((u=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:u.universal)!==void 0&&((d=(h=this.client.metadata)==null?void 0:h.redirect)==null?void 0:d.universal)!==""&&((p=t==null?void 0:t.redirect)==null?void 0:p.universal)!==void 0&&((y=t==null?void 0:t.redirect)==null?void 0:y.universal)!==""&&((w=t==null?void 0:t.redirect)==null?void 0:w.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(t.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),me(this,"getAppLinkIfEnabled",(t,r)=>{var i;return this.isLinkModeEnabled(t,r)?(i=t==null?void 0:t.redirect)==null?void 0:i.universal:void 0}),me(this,"handleLinkModeMessage",({url:t})=>{if(!t||!t.includes("wc_ev")||!t.includes("topic"))return;const r=u8(t,"topic")||"",i=decodeURIComponent(u8(t,"wc_ev")||""),a=this.client.session.keys.includes(r);a&&this.client.session.update(r,{transportType:St.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:i,sessionExists:a})}),me(this,"registerLinkModeListeners",async()=>{var t;if(A2()||Zo()&&(t=this.client.metadata.redirect)!=null&&t.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await r.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}),me(this,"getTVFParams",(t,r,i)=>{var a,c,u;if(!((a=r.request)!=null&&a.method))return{};const h={correlationId:t,rpcMethods:[r.request.method],chainId:r.chainId};try{const d=this.extractTxHashesFromResult(r.request,i);h.txHashes=d,h.contractAddresses=this.isValidContractData(r.request.params)?[(u=(c=r.request.params)==null?void 0:c[0])==null?void 0:u.to]:[]}catch(d){this.client.logger.warn("Error getting TVF params",d)}return h}),me(this,"isValidContractData",t=>{var r;if(!t)return!1;try{const i=(t==null?void 0:t.data)||((r=t==null?void 0:t[0])==null?void 0:r.data);if(!i.startsWith("0x"))return!1;const a=i.slice(2);return/^[0-9a-fA-F]*$/.test(a)?a.length%2===0:!1}catch{}return!1}),me(this,"extractTxHashesFromResult",(t,r)=>{var i;try{if(!r)return[];const a=t.method,c=jW[a];if(a==="sui_signTransaction")return[Zq(r.transactionBytes)];if(a==="near_signTransaction")return[w8(r)];if(a==="near_signTransactions")return r.map(h=>w8(h));if(a==="xrpl_signTransactionFor"||a==="xrpl_signTransaction")return[(i=r.tx_json)==null?void 0:i.hash];if(a==="polkadot_signTransaction")return[FK({transaction:t.params.transactionPayload,signature:r.signature})];if(a==="algo_signTxn")return Ai(r)?r.map(h=>b8(h)):[b8(r)];if(a==="cosmos_signDirect")return[Wq(r)];if(typeof r=="string")return[r];const u=r[c.key];if(Ai(u))return a==="solana_signAllTransactions"?u.map(h=>Jq(h)):u;if(typeof u=="string")return[u]}catch(a){this.client.logger.warn("Error extracting tx hashes from result",a)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,t=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,i]of Object.entries(t))for(const a of i)try{await this.onProviderMessageEvent({topic:r,message:a,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${a}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(kt.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:t,message:r,attestation:i,transportType:a}=e,{publicKey:c}=this.client.auth.authKeys.keys.includes(Jy)?this.client.auth.authKeys.get(Jy):{publicKey:void 0};try{const u=await this.client.core.crypto.decode(t,r,{receiverPublicKey:c,encoding:a===St.link_mode?So:Ar});k2(u)?(this.client.core.history.set(t,u),await this.onRelayEventRequest({topic:t,payload:u,attestation:i,transportType:a,encryptedId:wi(r)})):y0(u)?(await this.client.core.history.resolve(u),await this.onRelayEventResponse({topic:t,payload:u,transportType:a}),this.client.core.history.delete(t,u.id)):await this.onRelayEventUnknownPayload({topic:t,payload:u,transportType:a}),await this.client.core.relayer.messages.ack(t,r)}catch(u){this.client.logger.error(u)}}registerExpirerEvents(){this.client.core.expirer.on(ui.expired,async e=>{const{topic:t,id:r}=QI(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,Ee("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,Ee("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(_c.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(_c.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Jt(e,!1)){const{message:t}=Ee("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=Ee("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Es(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=Ee("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!Jt(e,!1)){const{message:t}=Ee("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:t}=Ee("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Es(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:t}=Ee("EXPIRED",`session topic: ${e}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(e)){const{message:t}=Ee("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Jt(e,!1)){const{message:t}=Ee("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=Ee("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!bK(e)){const{message:t}=Ee("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=Ee("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Es(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:t}=Ee("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}};class eee extends Ol{constructor(e,t){super(e,t,$W,L2),this.core=e,this.logger=t}}let tee=class extends Ol{constructor(e,t){super(e,t,kW,L2),this.core=e,this.logger=t}},nee=class extends Ol{constructor(e,t){super(e,t,zW,L2,r=>r.id),this.core=e,this.logger=t}},ree=class extends Ol{constructor(e,t){super(e,t,VW,w0,()=>Jy),this.core=e,this.logger=t}},iee=class extends Ol{constructor(e,t){super(e,t,GW,w0),this.core=e,this.logger=t}},see=class extends Ol{constructor(e,t){super(e,t,KW,w0,r=>r.id),this.core=e,this.logger=t}};var aee=Object.defineProperty,oee=(n,e,t)=>e in n?aee(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,q1=(n,e,t)=>oee(n,typeof e!="symbol"?e+"":e,t);class cee{constructor(e,t){this.core=e,this.logger=t,q1(this,"authKeys"),q1(this,"pairingTopics"),q1(this,"requests"),this.authKeys=new ree(this.core,this.logger),this.pairingTopics=new iee(this.core,this.logger),this.requests=new see(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var lee=Object.defineProperty,uee=(n,e,t)=>e in n?lee(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Je=(n,e,t)=>uee(n,typeof e!="symbol"?e+"":e,t);let hee=class y4 extends oY{constructor(e){super(e),Je(this,"protocol",d4),Je(this,"version",p4),Je(this,"name",H1.name),Je(this,"metadata"),Je(this,"core"),Je(this,"logger"),Je(this,"events",new Yr.EventEmitter),Je(this,"engine"),Je(this,"session"),Je(this,"proposal"),Je(this,"pendingRequest"),Je(this,"auth"),Je(this,"signConfig"),Je(this,"on",(r,i)=>this.events.on(r,i)),Je(this,"once",(r,i)=>this.events.once(r,i)),Je(this,"off",(r,i)=>this.events.off(r,i)),Je(this,"removeListener",(r,i)=>this.events.removeListener(r,i)),Je(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),Je(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(i){throw this.logger.error(i.message),i}}),Je(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(i){throw this.logger.error(i.message),i}}),Je(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(i){throw this.logger.error(i.message),i}}),Je(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(i){throw this.logger.error(i.message),i}}),Je(this,"update",async r=>{try{return await this.engine.update(r)}catch(i){throw this.logger.error(i.message),i}}),Je(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(i){throw this.logger.error(i.message),i}}),Je(this,"request",async r=>{try{return await this.engine.request(r)}catch(i){throw this.logger.error(i.message),i}}),Je(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(i){throw this.logger.error(i.message),i}}),Je(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(i){throw this.logger.error(i.message),i}}),Je(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(i){throw this.logger.error(i.message),i}}),Je(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(i){throw this.logger.error(i.message),i}}),Je(this,"find",r=>{try{return this.engine.find(r)}catch(i){throw this.logger.error(i.message),i}}),Je(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),Je(this,"authenticate",async(r,i)=>{try{return await this.engine.authenticate(r,i)}catch(a){throw this.logger.error(a.message),a}}),Je(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(i){throw this.logger.error(i.message),i}}),Je(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(i){throw this.logger.error(i.message),i}}),Je(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(i){throw this.logger.error(i.message),i}}),this.name=(e==null?void 0:e.name)||H1.name,this.metadata=HF(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:zp(p0({level:(e==null?void 0:e.logger)||H1.logger}));this.core=(e==null?void 0:e.core)||new MW(e),this.logger=ir(t,this.name),this.session=new tee(this.core,this.logger),this.proposal=new eee(this.core,this.logger),this.pendingRequest=new nee(this.core,this.logger),this.engine=new WW(this),this.auth=new cee(this.core,this.logger)}static async init(e){const t=new y4(e);return await t.initialize(),t}get context(){return Dr(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var Sy={exports:{}},KD;function fee(){return KD||(KD=1,function(n,e){var t=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof vs<"u"&&vs,r=function(){function a(){this.fetch=!1,this.DOMException=t.DOMException}return a.prototype=t,new a}();(function(a){(function(c){var u=typeof a<"u"&&a||typeof self<"u"&&self||typeof vs<"u"&&vs||{},h={searchParams:"URLSearchParams"in u,iterable:"Symbol"in u&&"iterator"in Symbol,blob:"FileReader"in u&&"Blob"in u&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in u,arrayBuffer:"ArrayBuffer"in u};function d(C){return C&&DataView.prototype.isPrototypeOf(C)}if(h.arrayBuffer)var p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],y=ArrayBuffer.isView||function(C){return C&&p.indexOf(Object.prototype.toString.call(C))>-1};function w(C){if(typeof C!="string"&&(C=String(C)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(C)||C==="")throw new TypeError('Invalid character in header field name: "'+C+'"');return C.toLowerCase()}function v(C){return typeof C!="string"&&(C=String(C)),C}function b(C){var O={next:function(){var M=C.shift();return{done:M===void 0,value:M}}};return h.iterable&&(O[Symbol.iterator]=function(){return O}),O}function E(C){this.map={},C instanceof E?C.forEach(function(O,M){this.append(M,O)},this):Array.isArray(C)?C.forEach(function(O){if(O.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+O.length);this.append(O[0],O[1])},this):C&&Object.getOwnPropertyNames(C).forEach(function(O){this.append(O,C[O])},this)}E.prototype.append=function(C,O){C=w(C),O=v(O);var M=this.map[C];this.map[C]=M?M+", "+O:O},E.prototype.delete=function(C){delete this.map[w(C)]},E.prototype.get=function(C){return C=w(C),this.has(C)?this.map[C]:null},E.prototype.has=function(C){return this.map.hasOwnProperty(w(C))},E.prototype.set=function(C,O){this.map[w(C)]=v(O)},E.prototype.forEach=function(C,O){for(var M in this.map)this.map.hasOwnProperty(M)&&C.call(O,this.map[M],M,this)},E.prototype.keys=function(){var C=[];return this.forEach(function(O,M){C.push(M)}),b(C)},E.prototype.values=function(){var C=[];return this.forEach(function(O){C.push(O)}),b(C)},E.prototype.entries=function(){var C=[];return this.forEach(function(O,M){C.push([M,O])}),b(C)},h.iterable&&(E.prototype[Symbol.iterator]=E.prototype.entries);function A(C){if(!C._noBody){if(C.bodyUsed)return Promise.reject(new TypeError("Already read"));C.bodyUsed=!0}}function S(C){return new Promise(function(O,M){C.onload=function(){O(C.result)},C.onerror=function(){M(C.error)}})}function B(C){var O=new FileReader,M=S(O);return O.readAsArrayBuffer(C),M}function D(C){var O=new FileReader,M=S(O),q=/charset=([A-Za-z0-9_-]+)/.exec(C.type),G=q?q[1]:"utf-8";return O.readAsText(C,G),M}function U(C){for(var O=new Uint8Array(C),M=new Array(O.length),q=0;q<O.length;q++)M[q]=String.fromCharCode(O[q]);return M.join("")}function I(C){if(C.slice)return C.slice(0);var O=new Uint8Array(C.byteLength);return O.set(new Uint8Array(C)),O.buffer}function N(){return this.bodyUsed=!1,this._initBody=function(C){this.bodyUsed=this.bodyUsed,this._bodyInit=C,C?typeof C=="string"?this._bodyText=C:h.blob&&Blob.prototype.isPrototypeOf(C)?this._bodyBlob=C:h.formData&&FormData.prototype.isPrototypeOf(C)?this._bodyFormData=C:h.searchParams&&URLSearchParams.prototype.isPrototypeOf(C)?this._bodyText=C.toString():h.arrayBuffer&&h.blob&&d(C)?(this._bodyArrayBuffer=I(C.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):h.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(C)||y(C))?this._bodyArrayBuffer=I(C):this._bodyText=C=Object.prototype.toString.call(C):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof C=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):h.searchParams&&URLSearchParams.prototype.isPrototypeOf(C)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},h.blob&&(this.blob=function(){var C=A(this);if(C)return C;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var C=A(this);return C||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(h.blob)return this.blob().then(B);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var C=A(this);if(C)return C;if(this._bodyBlob)return D(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(U(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},h.formData&&(this.formData=function(){return this.text().then(L)}),this.json=function(){return this.text().then(JSON.parse)},this}var k=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function $(C){var O=C.toUpperCase();return k.indexOf(O)>-1?O:C}function P(C,O){if(!(this instanceof P))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');O=O||{};var M=O.body;if(C instanceof P){if(C.bodyUsed)throw new TypeError("Already read");this.url=C.url,this.credentials=C.credentials,O.headers||(this.headers=new E(C.headers)),this.method=C.method,this.mode=C.mode,this.signal=C.signal,!M&&C._bodyInit!=null&&(M=C._bodyInit,C.bodyUsed=!0)}else this.url=String(C);if(this.credentials=O.credentials||this.credentials||"same-origin",(O.headers||!this.headers)&&(this.headers=new E(O.headers)),this.method=$(O.method||this.method||"GET"),this.mode=O.mode||this.mode||null,this.signal=O.signal||this.signal||function(){if("AbortController"in u){var _=new AbortController;return _.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&M)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(M),(this.method==="GET"||this.method==="HEAD")&&(O.cache==="no-store"||O.cache==="no-cache")){var q=/([?&])_=[^&]*/;if(q.test(this.url))this.url=this.url.replace(q,"$1_="+new Date().getTime());else{var G=/\?/;this.url+=(G.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}P.prototype.clone=function(){return new P(this,{body:this._bodyInit})};function L(C){var O=new FormData;return C.trim().split("&").forEach(function(M){if(M){var q=M.split("="),G=q.shift().replace(/\+/g," "),_=q.join("=").replace(/\+/g," ");O.append(decodeURIComponent(G),decodeURIComponent(_))}}),O}function z(C){var O=new E,M=C.replace(/\r?\n[\t ]+/g," ");return M.split("\r").map(function(q){return q.indexOf(`
`)===0?q.substr(1,q.length):q}).forEach(function(q){var G=q.split(":"),_=G.shift().trim();if(_){var F=G.join(":").trim();try{O.append(_,F)}catch(X){console.warn("Response "+X.message)}}}),O}N.call(P.prototype);function V(C,O){if(!(this instanceof V))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(O||(O={}),this.type="default",this.status=O.status===void 0?200:O.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=O.statusText===void 0?"":""+O.statusText,this.headers=new E(O.headers),this.url=O.url||"",this._initBody(C)}N.call(V.prototype),V.prototype.clone=function(){return new V(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new E(this.headers),url:this.url})},V.error=function(){var C=new V(null,{status:200,statusText:""});return C.ok=!1,C.status=0,C.type="error",C};var ne=[301,302,303,307,308];V.redirect=function(C,O){if(ne.indexOf(O)===-1)throw new RangeError("Invalid status code");return new V(null,{status:O,headers:{location:C}})},c.DOMException=u.DOMException;try{new c.DOMException}catch{c.DOMException=function(O,M){this.message=O,this.name=M;var q=Error(O);this.stack=q.stack},c.DOMException.prototype=Object.create(Error.prototype),c.DOMException.prototype.constructor=c.DOMException}function Z(C,O){return new Promise(function(M,q){var G=new P(C,O);if(G.signal&&G.signal.aborted)return q(new c.DOMException("Aborted","AbortError"));var _=new XMLHttpRequest;function F(){_.abort()}_.onload=function(){var ie={statusText:_.statusText,headers:z(_.getAllResponseHeaders()||"")};G.url.indexOf("file://")===0&&(_.status<200||_.status>599)?ie.status=200:ie.status=_.status,ie.url="responseURL"in _?_.responseURL:ie.headers.get("X-Request-URL");var ge="response"in _?_.response:_.responseText;setTimeout(function(){M(new V(ge,ie))},0)},_.onerror=function(){setTimeout(function(){q(new TypeError("Network request failed"))},0)},_.ontimeout=function(){setTimeout(function(){q(new TypeError("Network request timed out"))},0)},_.onabort=function(){setTimeout(function(){q(new c.DOMException("Aborted","AbortError"))},0)};function X(ie){try{return ie===""&&u.location.href?u.location.href:ie}catch{return ie}}if(_.open(G.method,X(G.url),!0),G.credentials==="include"?_.withCredentials=!0:G.credentials==="omit"&&(_.withCredentials=!1),"responseType"in _&&(h.blob?_.responseType="blob":h.arrayBuffer&&(_.responseType="arraybuffer")),O&&typeof O.headers=="object"&&!(O.headers instanceof E||u.Headers&&O.headers instanceof u.Headers)){var re=[];Object.getOwnPropertyNames(O.headers).forEach(function(ie){re.push(w(ie)),_.setRequestHeader(ie,v(O.headers[ie]))}),G.headers.forEach(function(ie,ge){re.indexOf(ge)===-1&&_.setRequestHeader(ge,ie)})}else G.headers.forEach(function(ie,ge){_.setRequestHeader(ge,ie)});G.signal&&(G.signal.addEventListener("abort",F),_.onreadystatechange=function(){_.readyState===4&&G.signal.removeEventListener("abort",F)}),_.send(typeof G._bodyInit>"u"?null:G._bodyInit)})}return Z.polyfill=!0,u.fetch||(u.fetch=Z,u.Headers=E,u.Request=P,u.Response=V),c.Headers=E,c.Request=P,c.Response=V,c.fetch=Z,Object.defineProperty(c,"__esModule",{value:!0}),c})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=t.fetch?t:r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,n.exports=e}(Sy,Sy.exports)),Sy.exports}var dee=fee();const QD=xp(dee);var pee=Object.defineProperty,gee=Object.defineProperties,yee=Object.getOwnPropertyDescriptors,YD=Object.getOwnPropertySymbols,mee=Object.prototype.hasOwnProperty,wee=Object.prototype.propertyIsEnumerable,JD=(n,e,t)=>e in n?pee(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ZD=(n,e)=>{for(var t in e||(e={}))mee.call(e,t)&&JD(n,t,e[t]);if(YD)for(var t of YD(e))wee.call(e,t)&&JD(n,t,e[t]);return n},XD=(n,e)=>gee(n,yee(e));const bee={Accept:"application/json","Content-Type":"application/json"},vee="POST",WD={headers:bee,method:vee},eC=10;let Zi=class{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new Yr.EventEmitter,this.isAvailable=!1,this.registering=!1,!yD(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const t=Ca(e),r=await(await QD(this.url,XD(ZD({},WD),{body:t}))).json();this.onPayload({data:r})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!yD(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((r,i)=>{this.events.once("register_error",a=>{this.resetMaxListeners(),i(a)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return i(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=Ca({id:1,jsonrpc:"2.0",method:"test",params:[]});await QD(e,XD(ZD({},WD),{body:t}))}this.onOpen()}catch(t){const r=this.parseError(t);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?yl(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),i=r.message||r.toString(),a=g0(e,i);this.events.emit("payload",a)}parseError(e,t=this.url){return GR(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>eC&&this.events.setMaxListeners(eC)}};const tC="error",Eee="wss://relay.walletconnect.org",Aee="wc",xee="universal_provider",Oy=`${Aee}@2:${xee}:`,m4="https://rpc.walletconnect.org/v1/",w4="generic",See=`${m4}bundler`,Zu="call_status",Oee=86400,Ti={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function j2(n){return n==null||typeof n!="object"&&typeof n!="function"}function b4(n){return Object.getOwnPropertySymbols(n).filter(e=>Object.prototype.propertyIsEnumerable.call(n,e))}function v4(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const Tee="[object RegExp]",E4="[object String]",A4="[object Number]",x4="[object Boolean]",S4="[object Arguments]",Dee="[object Symbol]",Cee="[object Date]",_ee="[object Map]",Nee="[object Set]",Iee="[object Array]",Ree="[object ArrayBuffer]",Bee="[object Object]",Pee="[object DataView]",Uee="[object Uint8Array]",Mee="[object Uint8ClampedArray]",$ee="[object Uint16Array]",kee="[object Uint32Array]",Lee="[object Int8Array]",jee="[object Int16Array]",zee="[object Int32Array]",Hee="[object Float32Array]",Fee="[object Float64Array]";function z2(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function qee(n,e){return Fu(n,void 0,n,new Map,e)}function Fu(n,e,t,r=new Map,i=void 0){const a=i==null?void 0:i(n,e,t,r);if(a!=null)return a;if(j2(n))return n;if(r.has(n))return r.get(n);if(Array.isArray(n)){const c=new Array(n.length);r.set(n,c);for(let u=0;u<n.length;u++)c[u]=Fu(n[u],u,t,r,i);return Object.hasOwn(n,"index")&&(c.index=n.index),Object.hasOwn(n,"input")&&(c.input=n.input),c}if(n instanceof Date)return new Date(n.getTime());if(n instanceof RegExp){const c=new RegExp(n.source,n.flags);return c.lastIndex=n.lastIndex,c}if(n instanceof Map){const c=new Map;r.set(n,c);for(const[u,h]of n)c.set(u,Fu(h,u,t,r,i));return c}if(n instanceof Set){const c=new Set;r.set(n,c);for(const u of n)c.add(Fu(u,void 0,t,r,i));return c}if(typeof Buffer<"u"&&Buffer.isBuffer(n))return n.subarray();if(z2(n)){const c=new(Object.getPrototypeOf(n)).constructor(n.length);r.set(n,c);for(let u=0;u<n.length;u++)c[u]=Fu(n[u],u,t,r,i);return c}if(n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer)return n.slice(0);if(n instanceof DataView){const c=new DataView(n.buffer.slice(0),n.byteOffset,n.byteLength);return r.set(n,c),Nc(c,n,t,r,i),c}if(typeof File<"u"&&n instanceof File){const c=new File([n],n.name,{type:n.type});return r.set(n,c),Nc(c,n,t,r,i),c}if(n instanceof Blob){const c=new Blob([n],{type:n.type});return r.set(n,c),Nc(c,n,t,r,i),c}if(n instanceof Error){const c=new n.constructor;return r.set(n,c),c.message=n.message,c.name=n.name,c.stack=n.stack,c.cause=n.cause,Nc(c,n,t,r,i),c}if(typeof n=="object"&&Vee(n)){const c=Object.create(Object.getPrototypeOf(n));return r.set(n,c),Nc(c,n,t,r,i),c}return n}function Nc(n,e,t=n,r,i){const a=[...Object.keys(e),...b4(e)];for(let c=0;c<a.length;c++){const u=a[c],h=Object.getOwnPropertyDescriptor(n,u);(h==null||h.writable)&&(n[u]=Fu(e[u],u,t,r,i))}}function Vee(n){switch(v4(n)){case S4:case Iee:case Ree:case Pee:case x4:case Cee:case Hee:case Fee:case Lee:case jee:case zee:case _ee:case A4:case Bee:case Tee:case Nee:case E4:case Dee:case Uee:case Mee:case $ee:case kee:return!0;default:return!1}}function Gee(n,e){return qee(n,(t,r,i,a)=>{if(typeof n=="object")switch(Object.prototype.toString.call(n)){case A4:case E4:case x4:{const c=new n.constructor(n==null?void 0:n.valueOf());return Nc(c,n),c}case S4:{const c={};return Nc(c,n),c.length=n.length,c[Symbol.iterator]=n[Symbol.iterator],c}default:return}})}function nC(n){return Gee(n)}function rC(n){return n!==null&&typeof n=="object"&&v4(n)==="[object Arguments]"}function iC(n){return typeof n=="object"&&n!==null}function Kee(){}function Qee(n){return z2(n)}function Yee(n){var t;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const r=n[Symbol.toStringTag];return r==null||!((t=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&t.writable)?!1:n.toString()===`[object ${r}]`}let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}function Jee(n){if(j2(n))return n;if(Array.isArray(n)||z2(n)||n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer)return n.slice(0);const e=Object.getPrototypeOf(n),t=e.constructor;if(n instanceof Date||n instanceof Map||n instanceof Set)return new t(n);if(n instanceof RegExp){const r=new t(n);return r.lastIndex=n.lastIndex,r}if(n instanceof DataView)return new t(n.buffer.slice(0));if(n instanceof Error){const r=new t(n.message);return r.stack=n.stack,r.name=n.name,r.cause=n.cause,r}if(typeof File<"u"&&n instanceof File)return new t([n],n.name,{type:n.type,lastModified:n.lastModified});if(typeof n=="object"){const r=Object.create(e);return Object.assign(r,n)}return n}function Zee(n,...e){const t=e.slice(0,-1),r=e[e.length-1];let i=n;for(let a=0;a<t.length;a++){const c=t[a];i=IE(i,c,r,new Map)}return i}function IE(n,e,t,r){if(j2(n)&&(n=Object(n)),e==null||typeof e!="object")return n;if(r.has(e))return Jee(r.get(e));if(r.set(e,n),Array.isArray(e)){e=e.slice();for(let a=0;a<e.length;a++)e[a]=e[a]??void 0}const i=[...Object.keys(e),...b4(e)];for(let a=0;a<i.length;a++){const c=i[a];let u=e[c],h=n[c];if(rC(u)&&(u={...u}),rC(h)&&(h={...h}),typeof Buffer<"u"&&Buffer.isBuffer(u)&&(u=nC(u)),Array.isArray(u))if(typeof h=="object"&&h!=null){const p=[],y=Reflect.ownKeys(h);for(let w=0;w<y.length;w++){const v=y[w];p[v]=h[v]}h=p}else h=[];const d=t(h,u,c,n,e,r);d!=null?n[c]=d:Array.isArray(u)||iC(h)&&iC(u)?n[c]=IE(h,u,t,r):h==null&&Yee(u)?n[c]=IE({},u,t,r):h==null&&Qee(u)?n[c]=nC(u):(h===void 0||u!==void 0)&&(n[c]=u)}return n}function Xee(n,...e){return Zee(n,...e,Kee)}var Wee=Object.defineProperty,ete=Object.defineProperties,tte=Object.getOwnPropertyDescriptors,sC=Object.getOwnPropertySymbols,nte=Object.prototype.hasOwnProperty,rte=Object.prototype.propertyIsEnumerable,aC=(n,e,t)=>e in n?Wee(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ty=(n,e)=>{for(var t in e||(e={}))nte.call(e,t)&&aC(n,t,e[t]);if(sC)for(var t of sC(e))rte.call(e,t)&&aC(n,t,e[t]);return n},ite=(n,e)=>ete(n,tte(e));function Qr(n,e,t){var r;const i=qo(n);return((r=e.rpcMap)==null?void 0:r[i.reference])||`${m4}?chainId=${i.namespace}:${i.reference}&projectId=${t}`}function Tl(n){return n.includes(":")?n.split(":")[1]:n}function O4(n){return n.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function ste(n,e){const t=Object.keys(e.namespaces).filter(i=>i.includes(n));if(!t.length)return[];const r=[];return t.forEach(i=>{const a=e.namespaces[i].accounts;r.push(...a)}),r}function oC(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>{var r,i;return((r=t==null?void 0:t.chains)==null?void 0:r.length)&&((i=t==null?void 0:t.chains)==null?void 0:i.length)>0}))}function Dy(n={},e={}){const t=oC(cC(n)),r=oC(cC(e));return Xee(t,r)}function cC(n){var e,t,r,i,a;const c={};if(!Ds(n))return c;for(const[u,h]of Object.entries(n)){const d=d0(u)?[u]:h.chains,p=h.methods||[],y=h.events||[],w=h.rpcMap||{},v=Hu(u);c[v]=ite(Ty(Ty({},c[v]),h),{chains:Ts(d,(e=c[v])==null?void 0:e.chains),methods:Ts(p,(t=c[v])==null?void 0:t.methods),events:Ts(y,(r=c[v])==null?void 0:r.events)}),(Ds(w)||Ds(((i=c[v])==null?void 0:i.rpcMap)||{}))&&(c[v].rpcMap=Ty(Ty({},w),(a=c[v])==null?void 0:a.rpcMap))}return c}function lC(n){return n.includes(":")?n.split(":")[2]:n}function uC(n){const e={};for(const[t,r]of Object.entries(n)){const i=r.methods||[],a=r.events||[],c=r.accounts||[],u=d0(t)?[t]:r.chains?r.chains:O4(r.accounts);e[t]={chains:u,methods:i,events:a,accounts:c}}return e}function V1(n){return typeof n=="number"?n:n.includes("0x")?parseInt(n,16):(n=n.includes(":")?n.split(":")[1]:n,isNaN(Number(n))?n:Number(n))}function ate(n){try{const e=JSON.parse(n);return typeof e=="object"&&e!==null&&!Array.isArray(e)}catch{return!1}}const T4={},it=n=>T4[n],G1=(n,e)=>{T4[n]=e};var ote=Object.defineProperty,hC=Object.getOwnPropertySymbols,cte=Object.prototype.hasOwnProperty,lte=Object.prototype.propertyIsEnumerable,fC=(n,e,t)=>e in n?ote(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,dC=(n,e)=>{for(var t in e||(e={}))cte.call(e,t)&&fC(n,t,e[t]);if(hC)for(var t of hC(e))lte.call(e,t)&&fC(n,t,e[t]);return n};const pC="eip155",ute=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],hte=n=>n&&n.startsWith("0x")?BigInt(n).toString(10):n,K1=n=>n&&n.startsWith("0x")?n:`0x${BigInt(n).toString(16)}`,gC=n=>Object.keys(n).filter(e=>ute.includes(e)).reduce((e,t)=>(e[t]=fte(n[t]),e),{}),fte=n=>typeof n=="string"&&ate(n)?JSON.parse(n):n,dte=(n,e,t)=>{const{sessionProperties:r={},scopedProperties:i={}}=n,a={};if(!Ds(i)&&!Ds(r))return;const c=gC(r);for(const u of t){const h=hte(u);if(!h)continue;a[K1(h)]=c;const d=i==null?void 0:i[`${pC}:${h}`];if(d){const p=d==null?void 0:d[`${pC}:${h}:${e}`];a[K1(h)]=dC(dC({},a[K1(h)]),gC(p||d))}}for(const[u,h]of Object.entries(a))Object.keys(h).length===0&&delete a[u];return Object.keys(a).length>0?a:void 0};var pte=Object.defineProperty,gte=(n,e,t)=>e in n?pte(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,yte=(n,e,t)=>gte(n,e+"",t);let Q1;class H2{constructor(e){yte(this,"storage"),this.storage=e}async getItem(e){return await this.storage.getItem(e)}async setItem(e,t){return await this.storage.setItem(e,t)}async removeItem(e){return await this.storage.removeItem(e)}static getStorage(e){return Q1||(Q1=new H2(e)),Q1}}var mte=Object.defineProperty,wte=Object.defineProperties,bte=Object.getOwnPropertyDescriptors,yC=Object.getOwnPropertySymbols,vte=Object.prototype.hasOwnProperty,Ete=Object.prototype.propertyIsEnumerable,mC=(n,e,t)=>e in n?mte(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ate=(n,e)=>{for(var t in e||(e={}))vte.call(e,t)&&mC(n,t,e[t]);if(yC)for(var t of yC(e))Ete.call(e,t)&&mC(n,t,e[t]);return n},xte=(n,e)=>wte(n,bte(e));async function Ste(n,e){const t=qo(n.result.capabilities.caip345.caip2),r=n.result.capabilities.caip345.transactionHashes,i=await Promise.allSettled(r.map(y=>Ote(t.reference,y,e))),a=i.filter(y=>y.status==="fulfilled").map(y=>y.value).filter(y=>y);i.filter(y=>y.status==="rejected").forEach(y=>console.warn("Failed to fetch transaction receipt:",y.reason));const c=!a.length||a.some(y=>!y),u=a.every(y=>(y==null?void 0:y.status)==="0x1"),h=a.every(y=>(y==null?void 0:y.status)==="0x0"),d=a.some(y=>(y==null?void 0:y.status)==="0x0");let p;return c?p=100:u?p=200:h?p=500:d&&(p=600),{id:n.result.id,version:n.request.version,atomic:n.request.atomicRequired,chainId:n.request.chainId,capabilities:n.result.capabilities,receipts:a,status:p}}async function Ote(n,e,t){return await t(parseInt(n)).request(Vi("eth_getTransactionReceipt",[e]))}async function Tte({sendCalls:n,storage:e}){const t=await e.getItem(Zu);await e.setItem(Zu,xte(Ate({},t),{[n.result.id]:{request:n.request,result:n.result,expiry:Yt(Oee)}}))}async function Dte({resultId:n,storage:e}){const t=await e.getItem(Zu);if(t){delete t[n],await e.setItem(Zu,t);for(const r in t)Es(t[r].expiry)&&delete t[r];await e.setItem(Zu,t)}}async function Cte({resultId:n,storage:e}){const t=await e.getItem(Zu),r=t==null?void 0:t[n];if(r&&!Es(r.expiry))return r;await Dte({resultId:n,storage:e})}var _te=Object.defineProperty,Nte=(n,e,t)=>e in n?_te(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Su=(n,e,t)=>Nte(n,typeof e!="symbol"?e+"":e,t);class Ite{constructor(e){Su(this,"name","polkadot"),Su(this,"client"),Su(this,"httpProviders"),Su(this,"events"),Su(this,"namespace"),Su(this,"chainId"),this.namespace=e.namespace,this.events=it("events"),this.client=it("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Ti.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const i=Tl(t);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Qr(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Oi(new Zi(r,it("disableProviderPing")))}}var Rte=Object.defineProperty,Bte=Object.defineProperties,Pte=Object.getOwnPropertyDescriptors,wC=Object.getOwnPropertySymbols,Ute=Object.prototype.hasOwnProperty,Mte=Object.prototype.propertyIsEnumerable,RE=(n,e,t)=>e in n?Rte(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Y1=(n,e)=>{for(var t in e||(e={}))Ute.call(e,t)&&RE(n,t,e[t]);if(wC)for(var t of wC(e))Mte.call(e,t)&&RE(n,t,e[t]);return n},J1=(n,e)=>Bte(n,Pte(e)),Ec=(n,e,t)=>RE(n,typeof e!="symbol"?e+"":e,t);class $te{constructor(e){Ec(this,"name","eip155"),Ec(this,"client"),Ec(this,"chainId"),Ec(this,"namespace"),Ec(this,"httpProviders"),Ec(this,"events"),Ec(this,"storage"),this.namespace=e.namespace,this.events=it("events"),this.client=it("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain()),this.storage=H2.getStorage(this.client.core.storage)}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e);case"wallet_sendCalls":return await this.sendCalls(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(Ti.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const r=t||Qr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Oi(new Zi(r,it("disableProviderPing")))}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const i=parseInt(Tl(t));e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(e){const t=e||this.chainId;return this.httpProviders[t]||(this.httpProviders=J1(Y1({},this.httpProviders),{[t]:this.createHttpProvider(t)}),this.httpProviders[t])}async handleSwitchChain(e){var t,r;let i=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const a=parseInt(i,16);if(this.isChainApproved(a))this.setDefaultChain(`${a}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${a}`);else throw new Error(`Failed to switch to chain 'eip155:${a}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var t,r,i,a,c;const u=(r=(t=e.request)==null?void 0:t.params)==null?void 0:r[0],h=((a=(i=e.request)==null?void 0:i.params)==null?void 0:a[1])||[];if(!u)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const d=this.client.session.get(e.topic),p=((c=d==null?void 0:d.sessionProperties)==null?void 0:c.capabilities)||{},y=`${u}${h.join(",")}`,w=p==null?void 0:p[y];if(w)return w;let v;try{v=dte(d,u,h)}catch(E){console.warn("Failed to extract capabilities from session",E)}if(v)return v;const b=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:J1(Y1({},d.sessionProperties||{}),{capabilities:J1(Y1({},p||{}),{[y]:b})})})}catch(E){console.warn("Failed to update session with capabilities",E)}return b}async getCallStatus(e){var t,r,i;const a=this.client.session.get(e.topic),c=(t=a.sessionProperties)==null?void 0:t.bundler_name;if(c){const d=this.getBundlerUrl(e.chainId,c);try{return await this.getUserOperationReceipt(d,e)}catch(p){console.warn("Failed to fetch call status from bundler",p,d)}}const u=(r=a.sessionProperties)==null?void 0:r.bundler_url;if(u)try{return await this.getUserOperationReceipt(u,e)}catch(d){console.warn("Failed to fetch call status from custom bundler",d,u)}const h=await Cte({resultId:(i=e.request.params)==null?void 0:i[0],storage:this.storage});if(h)try{return await Ste(h,this.getHttpProvider.bind(this))}catch(d){console.warn("Failed to fetch call status from stored send calls",d,h)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,t){var r;const i=new URL(e),a=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Vi("eth_getUserOperationReceipt",[(r=t.request.params)==null?void 0:r[0]]))});if(!a.ok)throw new Error(`Failed to fetch user operation receipt - ${a.status}`);return await a.json()}getBundlerUrl(e,t){return`${See}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}async sendCalls(e){var t,r,i;const a=await this.client.request(e),c=(t=e.request.params)==null?void 0:t[0],u=a==null?void 0:a.id,h=(a==null?void 0:a.capabilities)||{},d=(r=h==null?void 0:h.caip345)==null?void 0:r.caip2,p=(i=h==null?void 0:h.caip345)==null?void 0:i.transactionHashes;return!u||!d||!(p!=null&&p.length)||await Tte({sendCalls:{request:c,result:a},storage:this.storage}),a}}var kte=Object.defineProperty,Lte=(n,e,t)=>e in n?kte(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ou=(n,e,t)=>Lte(n,typeof e!="symbol"?e+"":e,t);class jte{constructor(e){Ou(this,"name","solana"),Ou(this,"client"),Ou(this,"httpProviders"),Ou(this,"events"),Ou(this,"namespace"),Ou(this,"chainId"),this.namespace=e.namespace,this.events=it("events"),this.client=it("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Ti.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const i=Tl(t);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Qr(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Oi(new Zi(r,it("disableProviderPing")))}}var zte=Object.defineProperty,Hte=(n,e,t)=>e in n?zte(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Tu=(n,e,t)=>Hte(n,typeof e!="symbol"?e+"":e,t);class Fte{constructor(e){Tu(this,"name","cosmos"),Tu(this,"client"),Tu(this,"httpProviders"),Tu(this,"events"),Tu(this,"namespace"),Tu(this,"chainId"),this.namespace=e.namespace,this.events=it("events"),this.client=it("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Ti.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const i=Tl(t);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Qr(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Oi(new Zi(r,it("disableProviderPing")))}}var qte=Object.defineProperty,Vte=(n,e,t)=>e in n?qte(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Du=(n,e,t)=>Vte(n,typeof e!="symbol"?e+"":e,t);class Gte{constructor(e){Du(this,"name","algorand"),Du(this,"client"),Du(this,"httpProviders"),Du(this,"events"),Du(this,"namespace"),Du(this,"chainId"),this.namespace=e.namespace,this.events=it("events"),this.client=it("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const r=t||Qr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(Ti.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;e[t]=this.createHttpProvider(t,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Qr(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Oi(new Zi(r,it("disableProviderPing")))}}var Kte=Object.defineProperty,Qte=(n,e,t)=>e in n?Kte(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Cu=(n,e,t)=>Qte(n,typeof e!="symbol"?e+"":e,t);class Yte{constructor(e){Cu(this,"name","cip34"),Cu(this,"client"),Cu(this,"httpProviders"),Cu(this,"events"),Cu(this,"namespace"),Cu(this,"chainId"),this.namespace=e.namespace,this.events=it("events"),this.client=it("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Ti.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const r=this.getCardanoRPCUrl(t),i=Tl(t);e[i]=this.createHttpProvider(i,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Oi(new Zi(r,it("disableProviderPing")))}}var Jte=Object.defineProperty,Zte=(n,e,t)=>e in n?Jte(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,_u=(n,e,t)=>Zte(n,typeof e!="symbol"?e+"":e,t);class Xte{constructor(e){_u(this,"name","elrond"),_u(this,"client"),_u(this,"httpProviders"),_u(this,"events"),_u(this,"namespace"),_u(this,"chainId"),this.namespace=e.namespace,this.events=it("events"),this.client=it("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Ti.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const i=Tl(t);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Qr(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Oi(new Zi(r,it("disableProviderPing")))}}var Wte=Object.defineProperty,ene=(n,e,t)=>e in n?Wte(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Nu=(n,e,t)=>ene(n,typeof e!="symbol"?e+"":e,t);class tne{constructor(e){Nu(this,"name","multiversx"),Nu(this,"client"),Nu(this,"httpProviders"),Nu(this,"events"),Nu(this,"namespace"),Nu(this,"chainId"),this.namespace=e.namespace,this.events=it("events"),this.client=it("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Ti.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const i=Tl(t);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Qr(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Oi(new Zi(r,it("disableProviderPing")))}}var nne=Object.defineProperty,rne=(n,e,t)=>e in n?nne(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Iu=(n,e,t)=>rne(n,typeof e!="symbol"?e+"":e,t);class ine{constructor(e){Iu(this,"name","near"),Iu(this,"client"),Iu(this,"httpProviders"),Iu(this,"events"),Iu(this,"namespace"),Iu(this,"chainId"),this.namespace=e.namespace,this.events=it("events"),this.client=it("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const r=t||Qr(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Ti.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;e[t]=this.createHttpProvider(t,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Qr(e,this.namespace);return typeof r>"u"?void 0:new Oi(new Zi(r,it("disableProviderPing")))}}var sne=Object.defineProperty,ane=(n,e,t)=>e in n?sne(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ru=(n,e,t)=>ane(n,typeof e!="symbol"?e+"":e,t);class one{constructor(e){Ru(this,"name","tezos"),Ru(this,"client"),Ru(this,"httpProviders"),Ru(this,"events"),Ru(this,"namespace"),Ru(this,"chainId"),this.namespace=e.namespace,this.events=it("events"),this.client=it("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const r=t||Qr(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Ti.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{e[t]=this.createHttpProvider(t)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Qr(e,this.namespace);return typeof r>"u"?void 0:new Oi(new Zi(r))}}var cne=Object.defineProperty,lne=(n,e,t)=>e in n?cne(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Bu=(n,e,t)=>lne(n,typeof e!="symbol"?e+"":e,t);class une{constructor(e){Bu(this,"name",w4),Bu(this,"client"),Bu(this,"httpProviders"),Bu(this,"events"),Bu(this,"namespace"),Bu(this,"chainId"),this.namespace=e.namespace,this.events=it("events"),this.client=it("client"),this.chainId=this.getDefaultChain(),this.name=this.getNamespaceName(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Ti.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getNamespaceName(){const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return qo(e).namespace}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){var e,t;const r={};return(t=(e=this.namespace)==null?void 0:e.accounts)==null||t.forEach(i=>{const a=qo(i);r[a.reference]=this.createHttpProvider(i)}),r}getHttpProvider(e){const t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Qr(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Oi(new Zi(r,it("disableProviderPing")))}}var hne=Object.defineProperty,fne=Object.defineProperties,dne=Object.getOwnPropertyDescriptors,bC=Object.getOwnPropertySymbols,pne=Object.prototype.hasOwnProperty,gne=Object.prototype.propertyIsEnumerable,BE=(n,e,t)=>e in n?hne(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Cy=(n,e)=>{for(var t in e||(e={}))pne.call(e,t)&&BE(n,t,e[t]);if(bC)for(var t of bC(e))gne.call(e,t)&&BE(n,t,e[t]);return n},Z1=(n,e)=>fne(n,dne(e)),li=(n,e,t)=>BE(n,typeof e!="symbol"?e+"":e,t);let yne=class D4{constructor(e){li(this,"client"),li(this,"namespaces"),li(this,"optionalNamespaces"),li(this,"sessionProperties"),li(this,"scopedProperties"),li(this,"events",new u2),li(this,"rpcProviders",{}),li(this,"session"),li(this,"providerOpts"),li(this,"logger"),li(this,"uri"),li(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:zp(p0({level:(e==null?void 0:e.logger)||tC})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const t=new D4(e);return await t.initialize(),t}async request(e,t,r){const[i,a]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:Cy({},e),chainId:`${i}:${a}`,topic:this.session.topic,expiry:r})}sendAsync(e,t,r,i){const a=new Date().getTime();this.request(e,r,i).then(c=>t(null,up(a,c))).catch(c=>t(c,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Ot("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,t){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:i}=await this.client.authenticate(e,t);r&&(this.uri=r,this.events.emit("display_uri",r));const a=await i();if(this.session=a.session,this.session){const c=uC(this.session.namespaces);this.namespaces=Dy(this.namespaces,c),await this.persist("namespaces",this.namespaces),this.onConnect()}return a}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){const{uri:t,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});t&&(this.uri=t,this.events.emit("display_uri",t));const i=await r();this.session=i;const a=uC(i.namespaces);return this.namespaces=Dy(this.namespaces,a),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[r,i]=this.validateChain(e);this.getProvider(r).setDefaultChain(i,t)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){try{this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(!Ai(t))return;for(const r of t)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}catch(t){this.logger.warn("Failed to cleanup pending pairings",t)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,t;if(this.client=this.providerOpts.client||await hee.init({core:this.providerOpts.core,logger:this.providerOpts.logger||tC,relayUrl:this.providerOpts.relayUrl||Eee,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(t=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:t.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>Hu(t)))];G1("client",this.client),G1("events",this.events),G1("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const r=ste(t,this.session);if((r==null?void 0:r.length)===0)return;const i=O4(r),a=Dy(this.namespaces,this.optionalNamespaces),c=Z1(Cy({},a[t]),{accounts:r,chains:i});switch(t){case"eip155":this.rpcProviders[t]=new $te({namespace:c});break;case"algorand":this.rpcProviders[t]=new Gte({namespace:c});break;case"solana":this.rpcProviders[t]=new jte({namespace:c});break;case"cosmos":this.rpcProviders[t]=new Fte({namespace:c});break;case"polkadot":this.rpcProviders[t]=new Ite({namespace:c});break;case"cip34":this.rpcProviders[t]=new Yte({namespace:c});break;case"elrond":this.rpcProviders[t]=new Xte({namespace:c});break;case"multiversx":this.rpcProviders[t]=new tne({namespace:c});break;case"near":this.rpcProviders[t]=new ine({namespace:c});break;case"tezos":this.rpcProviders[t]=new one({namespace:c});break;default:this.rpcProviders[t]=new une({namespace:c})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var t;const{topic:r}=e;r===((t=this.session)==null?void 0:t.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var t;const{params:r,topic:i}=e;if(i!==((t=this.session)==null?void 0:t.topic))return;const{event:a}=r;if(a.name==="accountsChanged"){const c=a.data;c&&Ai(c)&&this.events.emit("accountsChanged",c.map(lC))}else if(a.name==="chainChanged"){const c=r.chainId,u=r.event.data,h=Hu(c),d=V1(c)!==V1(u)?`${h}:${V1(u)}`:c;this.onChainChanged(d)}else this.events.emit(a.name,a.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var r,i;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:a}=t,c=(i=this.client)==null?void 0:i.session.get(e);this.session=Z1(Cy({},c),{namespaces:a}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{var t;e.topic===((t=this.session)==null?void 0:t.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Z1(Cy({},Ot("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Ti.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[w4]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t={},optionalNamespaces:r={},sessionProperties:i,scopedProperties:a}=e;this.optionalNamespaces=Dy(t,r),this.sessionProperties=i,this.scopedProperties=a}validateChain(e){const[t,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,r];if(t&&!Object.keys(this.namespaces||{}).map(c=>Hu(c)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&r)return[t,r];const i=Hu(Object.keys(this.namespaces)[0]),a=this.rpcProviders[i].getDefaultChain();return[i,a]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,t=!1){if(!this.namespaces)return;const[r,i]=this.validateChain(e);if(!i)return;this.updateNamespaceChain(r,i);const a=this.getProvider(r).getDefaultChain();t?(this.events.emit("chainChanged",i),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:a,newChainId:e})):this.getProvider(r).setDefaultChain(i),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:t,newChainId:r}){var i,a;try{if(t===r)return;const c=(a=(i=this.session)==null?void 0:i.namespaces[e])==null?void 0:a.accounts;if(!c)return;const u=c.filter(h=>h.includes(`${r}:`)).map(lC);if(!Ai(u))return;this.events.emit("accountsChanged",u)}catch(c){this.logger.warn("Failed to emit accountsChanged on chain change",c)}}updateNamespaceChain(e,t){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${t}`,i={chains:[],methods:[],events:[],defaultChain:t};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=t):this.namespaces[r]=i}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,t){var r;const i=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${Oy}/${e}${i}`,t)}async getFromStore(e){var t;const r=((t=this.session)==null?void 0:t.topic)||"";return await this.client.core.storage.getItem(`${Oy}/${e}${r}`)}async deleteFromStore(e){var t;const r=((t=this.session)==null?void 0:t.topic)||"";await this.client.core.storage.removeItem(`${Oy}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const t=await this.client.core.storage.getKeys();for(const r of t)r.startsWith(Oy)&&await this.client.core.storage.removeItem(r)}catch(t){this.logger.warn("Failed to cleanup storage",t)}}};const mne=yne,wne="wc",bne="ethereum_provider",vne=`${wne}@2:${bne}:`,Ene="https://rpc.walletconnect.org/v1/",PE=["eth_sendTransaction","personal_sign"],Ane=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],UE=["chainChanged","accountsChanged"],xne=["chainChanged","accountsChanged","message","disconnect","connect"],Sne=async()=>{const{createAppKit:n}=await $N(()=>import("./core-BzjVo6dW.js").then(e=>e.X),[]);return n};var One=Object.defineProperty,Tne=Object.defineProperties,Dne=Object.getOwnPropertyDescriptors,vC=Object.getOwnPropertySymbols,Cne=Object.prototype.hasOwnProperty,_ne=Object.prototype.propertyIsEnumerable,ME=(n,e,t)=>e in n?One(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Oc=(n,e)=>{for(var t in e||(e={}))Cne.call(e,t)&&ME(n,t,e[t]);if(vC)for(var t of vC(e))_ne.call(e,t)&&ME(n,t,e[t]);return n},xd=(n,e)=>Tne(n,Dne(e)),$r=(n,e,t)=>ME(n,typeof e!="symbol"?e+"":e,t);function Cm(n){return Number(n[0].split(":")[1])}function _y(n){return`0x${n.toString(16)}`}function Nne(n){const{chains:e,optionalChains:t,methods:r,optionalMethods:i,events:a,optionalEvents:c,rpcMap:u}=n;if(!Ai(e))throw new Error("Invalid chains");const h={chains:e,methods:r||PE,events:a||UE,rpcMap:Oc({},e.length?{[Cm(e)]:u[Cm(e)]}:{})},d=a==null?void 0:a.filter(v=>!UE.includes(v)),p=r==null?void 0:r.filter(v=>!PE.includes(v));if(!t&&!c&&!i&&!(d!=null&&d.length)&&!(p!=null&&p.length))return{required:e.length?h:void 0};const y=(d==null?void 0:d.length)&&(p==null?void 0:p.length)||!t,w={chains:[...new Set(y?h.chains.concat(t||[]):t)],methods:[...new Set(h.methods.concat(i!=null&&i.length?i:Ane))],events:[...new Set(h.events.concat(c!=null&&c.length?c:xne))],rpcMap:u};return{required:e.length?h:void 0,optional:t.length?w:void 0}}class b0{constructor(){$r(this,"events",new Yr.EventEmitter),$r(this,"namespace","eip155"),$r(this,"accounts",[]),$r(this,"signer"),$r(this,"chainId",1),$r(this,"modal"),$r(this,"rpc"),$r(this,"STORAGE_KEY",vne),$r(this,"on",(e,t)=>(this.events.on(e,t),this)),$r(this,"once",(e,t)=>(this.events.once(e,t),this)),$r(this,"removeListener",(e,t)=>(this.events.removeListener(e,t),this)),$r(this,"off",(e,t)=>(this.events.off(e,t),this)),$r(this,"parseAccount",e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e),this.signer={},this.rpc={}}static async init(e){const t=new b0;return await t.initialize(e),t}async request(e,t){return await this.signer.request(e,this.formatChainId(this.chainId),t)}sendAsync(e,t,r){this.signer.sendAsync(e,t,this.formatChainId(this.chainId),r)}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){var t;if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:r,optional:i}=Nne(this.rpc);try{const a=await new Promise(async(u,h)=>{var d,p;this.rpc.showQrModal&&((d=this.modal)==null||d.open(),(p=this.modal)==null||p.subscribeState(w=>{!w.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),h(new Error("Connection request reset. Please try again.")))}));const y=e!=null&&e.scopedProperties?{[this.namespace]:e.scopedProperties}:void 0;await this.signer.connect(xd(Oc({namespaces:Oc({},r&&{[this.namespace]:r})},i&&{optionalNamespaces:{[this.namespace]:i}}),{pairingTopic:e==null?void 0:e.pairingTopic,scopedProperties:y})).then(w=>{u(w)}).catch(w=>{var v;(v=this.modal)==null||v.showErrorMessage("Unable to connect"),h(new Error(w.message))})});if(!a)return;const c=s8(a.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:c),this.setAccounts(c),this.events.emit("connect",{chainId:_y(this.chainId)})}catch(a){throw this.signer.logger.error(a),a}finally{(t=this.modal)==null||t.close()}}async authenticate(e,t){var r;if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:e==null?void 0:e.chains});try{const i=await new Promise(async(c,u)=>{var h,d;this.rpc.showQrModal&&((h=this.modal)==null||h.open(),(d=this.modal)==null||d.subscribeState(p=>{!p.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),u(new Error("Connection request reset. Please try again.")))})),await this.signer.authenticate(xd(Oc({},e),{chains:this.rpc.chains}),t).then(p=>{c(p)}).catch(p=>{var y;(y=this.modal)==null||y.showErrorMessage("Unable to connect"),u(new Error(p.message))})}),a=i.session;if(a){const c=s8(a.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:c),this.setAccounts(c),this.events.emit("connect",{chainId:_y(this.chainId)})}return i}catch(i){throw this.signer.logger.error(i),i}finally{(r=this.modal)==null||r.close()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:t}=e,{event:r}=t;r.name==="accountsChanged"?(this.accounts=this.parseAccounts(r.data),this.events.emit("accountsChanged",this.accounts)):r.name==="chainChanged"?this.setChainId(this.formatChainId(r.data)):this.events.emit(r.name,r.data),this.events.emit("session_event",e)}),this.signer.on("accountsChanged",e=>{this.accounts=this.parseAccounts(e),this.events.emit("accountsChanged",this.accounts)}),this.signer.on("chainChanged",e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",_y(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",xd(Oc({},Ot("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter(r=>this.isCompatibleChainId(r)).map(r=>this.parseChainId(r));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",_y(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){const[t,r,i]=e.split(":");return{chainId:`${t}:${r}`,address:i}}setAccounts(e){this.accounts=e.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,r;const i=(t=e==null?void 0:e.chains)!=null?t:[],a=(r=e==null?void 0:e.optionalChains)!=null?r:[],c=i.concat(a);if(!c.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const u=i.length?(e==null?void 0:e.methods)||PE:[],h=i.length?(e==null?void 0:e.events)||UE:[],d=(e==null?void 0:e.optionalMethods)||[],p=(e==null?void 0:e.optionalEvents)||[],y=(e==null?void 0:e.rpcMap)||this.buildRpcMap(c,e.projectId),w=(e==null?void 0:e.qrModalOptions)||void 0;return{chains:i==null?void 0:i.map(v=>this.formatChainId(v)),optionalChains:a.map(v=>this.formatChainId(v)),methods:u,events:h,optionalMethods:d,optionalEvents:p,rpcMap:y,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:w,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const r={};return e.forEach(i=>{r[i]=this.getRpcUrl(i,t)}),r}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?Cm(this.rpc.chains):Cm(this.rpc.optionalChains),this.signer=await mne.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storage:e.storage,storageOptions:e.storageOptions,customStoragePrefix:e.customStoragePrefix,telemetryEnabled:e.telemetryEnabled,logger:e.logger}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{const r=await Sne(),{convertWCMToAppKitOptions:i}=await Promise.resolve().then(function(){return jne}),a=i(xd(Oc({},this.rpc.qrModalOptions),{chains:[...new Set([...this.rpc.chains,...this.rpc.optionalChains])],metadata:this.rpc.metadata,projectId:this.rpc.projectId}));if(!a.networks.length)throw new Error("No networks found for WalletConnect·");t=r(xd(Oc({},a),{universalProvider:this.signer,manualWCControl:!0}))}catch(r){throw console.warn(r),new Error("To use QR modal, please install @reown/appkit package")}if(t)try{this.modal=t}catch(r){throw this.signer.logger.error(r),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:r,rpcMap:i}=e;t&&Ai(t)&&(this.rpc.chains=t.map(a=>this.formatChainId(a)),t.forEach(a=>{this.rpc.rpcMap[a]=(i==null?void 0:i[a])||this.getRpcUrl(a)})),r&&Ai(r)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=r==null?void 0:r.map(a=>this.formatChainId(a)),r.forEach(a=>{this.rpc.rpcMap[a]=(i==null?void 0:i[a])||this.getRpcUrl(a)}))}getRpcUrl(e,t){var r;return((r=this.rpc.rpcMap)==null?void 0:r[e])||`${Ene}?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(this.session)try{const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t==null?void 0:t.accounts),this.setAccounts(t==null?void 0:t.accounts)}catch(e){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(e),await this.disconnect().catch(t=>this.signer.logger.warn(t))}}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(t=>this.parseAccount(t))}}var Ine=Object.defineProperty,Rne=Object.defineProperties,Bne=Object.getOwnPropertyDescriptors,EC=Object.getOwnPropertySymbols,Pne=Object.prototype.hasOwnProperty,Une=Object.prototype.propertyIsEnumerable,AC=(n,e,t)=>e in n?Ine(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,C4=(n,e)=>{for(var t in e||(e={}))Pne.call(e,t)&&AC(n,t,e[t]);if(EC)for(var t of EC(e))Une.call(e,t)&&AC(n,t,e[t]);return n},Mne=(n,e)=>Rne(n,Bne(e));function $ne(n){if(n)return{"--w3m-font-family":n["--wcm-font-family"],"--w3m-accent":n["--wcm-accent-color"],"--w3m-color-mix":n["--wcm-background-color"],"--w3m-z-index":n["--wcm-z-index"]?Number(n["--wcm-z-index"]):void 0,"--w3m-qr-color":n["--wcm-accent-color"],"--w3m-font-size-master":n["--wcm-text-medium-regular-size"],"--w3m-border-radius-master":n["--wcm-container-border-radius"],"--w3m-color-mix-strength":0}}const kne=n=>{const[e,t]=n.split(":");return _4({id:t,caipNetworkId:n,chainNamespace:e,name:"",nativeCurrency:{name:"",symbol:"",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}})};function Lne(n){var e,t,r,i,a,c,u;const h=(e=n.chains)==null?void 0:e.map(kne).filter(Boolean);if(h.length===0)throw new Error("At least one chain must be specified");const d=h.find(y=>{var w;return y.id===((w=n.defaultChain)==null?void 0:w.id)}),p={projectId:n.projectId,networks:h,themeMode:n.themeMode,themeVariables:$ne(n.themeVariables),chainImages:n.chainImages,connectorImages:n.walletImages,defaultNetwork:d,metadata:Mne(C4({},n.metadata),{name:((t=n.metadata)==null?void 0:t.name)||"WalletConnect",description:((r=n.metadata)==null?void 0:r.description)||"Connect to WalletConnect-compatible wallets",url:((i=n.metadata)==null?void 0:i.url)||"https://walletconnect.org",icons:((a=n.metadata)==null?void 0:a.icons)||["https://walletconnect.org/walletconnect-logo.png"]}),showWallets:!0,featuredWalletIds:n.explorerRecommendedWalletIds==="NONE"?[]:Array.isArray(n.explorerRecommendedWalletIds)?n.explorerRecommendedWalletIds:[],excludeWalletIds:n.explorerExcludedWalletIds==="ALL"?[]:Array.isArray(n.explorerExcludedWalletIds)?n.explorerExcludedWalletIds:[],enableEIP6963:!1,enableInjected:!1,enableCoinbase:!0,enableWalletConnect:!0,features:{email:!1,socials:!1}};if((c=n.mobileWallets)!=null&&c.length||(u=n.desktopWallets)!=null&&u.length){const y=[...(n.mobileWallets||[]).map(b=>({id:b.id,name:b.name,links:b.links})),...(n.desktopWallets||[]).map(b=>({id:b.id,name:b.name,links:{native:b.links.native,universal:b.links.universal}}))],w=[...p.featuredWalletIds||[],...p.excludeWalletIds||[]],v=y.filter(b=>!w.includes(b.id));v.length&&(p.customWallets=v)}return p}function _4(n){return C4({formatters:void 0,fees:void 0,serializers:void 0},n)}var jne=Object.freeze({__proto__:null,convertWCMToAppKitOptions:Lne,defineChain:_4});function zne(n,e,t,r){return new(t||(t=Promise))(function(i,a){function c(d){try{h(r.next(d))}catch(p){a(p)}}function u(d){try{h(r.throw(d))}catch(p){a(p)}}function h(d){var p;d.done?i(d.value):(p=d.value,p instanceof t?p:new t(function(y){y(p)})).then(c,u)}h((r=r.apply(n,[])).next())})}function Hne(n,e){var t,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(h){return function(d){return function(p){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,p[0]&&(c=0)),c;)try{if(t=1,r&&(i=2&p[0]?r.return:p[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,p[1])).done)return i;switch(r=0,i&&(p=[2&p[0],i.value]),p[0]){case 0:case 1:i=p;break;case 4:return c.label++,{value:p[1],done:!1};case 5:c.label++,r=p[1],p=[0];continue;case 7:p=c.ops.pop(),c.trys.pop();continue;default:if(i=c.trys,!((i=i.length>0&&i[i.length-1])||p[0]!==6&&p[0]!==2)){c=0;continue}if(p[0]===3&&(!i||p[1]>i[0]&&p[1]<i[3])){c.label=p[1];break}if(p[0]===6&&c.label<i[1]){c.label=i[1],i=p;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(p);break}i[2]&&c.ops.pop(),c.trys.pop();continue}p=e.call(n,c)}catch(y){p=[6,y],r=0}finally{t=i=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([h,d])}}}var xC,_m;function N4(){return zne(this,void 0,void 0,function(){var n;return Hne(this,function(e){return n="ledgerConnectKit",[2,new Promise(function(t,r){var i="ledger-ck-script-".concat(n);if(typeof document<"u")if(document.getElementById(i))t(window[n]);else{var a=document.createElement("script");a.src="https://cdn.jsdelivr.net/npm/@ledgerhq/connect-kit@1.1.8",a.id=i,a.addEventListener("load",function(){t(window[n])}),a.addEventListener("error",function(c){r(c.error)}),document.head.appendChild(a)}else r("Connect Kit does not support server side")})]})})}typeof SuppressedError=="function"&&SuppressedError,function(n){n.LedgerConnect="LedgerConnect",n.WalletConnect="WalletConnect"}(xC||(xC={})),function(n){n.Ethereum="Ethereum"}(_m||(_m={}));const Nm=[{inputs:[{internalType:"address",name:"_testator",type:"address"},{internalType:"uint256",name:"_inactivityPeriod",type:"uint256"},{internalType:"address",name:"_commissionWallet",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"testator",type:"address"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"CheckInPerformed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"testator",type:"address"},{indexed:!1,internalType:"uint256",name:"refundedAmount",type:"uint256"}],name:"InheritanceCancelled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"testator",type:"address"},{indexed:!0,internalType:"address",name:"heir",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"inactivityPeriod",type:"uint256"}],name:"InheritanceRegistered",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"heir",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"InheritanceReleased",type:"event"},{inputs:[],name:"cancelInheritance",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"claimInheritance",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"commissionWallet",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"createdAt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getInheritanceDetails",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"enum InheritanceVault.Status",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"heir",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"inactivityPeriod",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"inheritanceAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"inheritanceStatus",outputs:[{internalType:"enum InheritanceVault.Status",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"lastCheckIn",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"performCheckIn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_heir",type:"address"}],name:"registerInheritance",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"testator",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],Bd=[{inputs:[{internalType:"address",name:"_commissionWallet",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"testator",type:"address"},{indexed:!1,internalType:"address",name:"vaultAddress",type:"address"}],name:"VaultCreated",type:"event"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"allVaults",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"commissionWallet",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"inactivityPeriod",type:"uint256"}],name:"createInheritanceVault",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getAllVaults",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"testator",type:"address"}],name:"getVaultsByTestator",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"vaultsByTestator",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],Fne="0x364414bA4d4B3490EF68333b6A3adAB8c276228e",qne="0x3D7f44ced535585c67109Ea25f4978750B2d3972",SC="33daed757b1f122e0b263a41dd48a920",Vne=()=>/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),mo={testnet:{key:"testnet",label:"ROOTSTOCK TESTNET",chainIdHex:"0x1f",chainIdDec:31,params:{chainId:"0x1f",chainName:"Rootstock Testnet",nativeCurrency:{name:"RBTC",symbol:"RBTC",decimals:18},rpcUrls:["https://public-node.testnet.rsk.co"],blockExplorerUrls:["https://explorer.testnet.rsk.co"]},factory:Fne},mainnet:{key:"mainnet",label:"ROOTSTOCK MAINNET",chainIdHex:"0x1e",chainIdDec:30,params:{chainId:"0x1e",chainName:"Rootstock Mainnet",nativeCurrency:{name:"RBTC",symbol:"RBTC",decimals:18},rpcUrls:["https://public-node.rsk.co"],blockExplorerUrls:["https://explorer.rsk.co"]},factory:qne}};async function X1(n,e){try{await n.request({method:"wallet_switchEthereumChain",params:[{chainId:e.chainId}]})}catch(t){if((t==null?void 0:t.code)===4902||((t==null?void 0:t.message)||"").includes("Unrecognized chain ID"))await n.request({method:"wallet_addEthereumChain",params:[e]});else throw t}}function Gne(){const n=window.location.href.replace(/^https?:\/\//,"");window.location.href=`https://metamask.app.link/dapp/${n}`}function Kne(){const[n,e]=oe.useState("mainnet"),t=mo[n],[r,i]=oe.useState({base:null,onAccounts:null,onDisconnect:null}),[a,c]=oe.useState(""),[u,h]=oe.useState(null),[d,p]=oe.useState(null),[y,w]=oe.useState(!1),[v,b]=oe.useState(null),[E,A]=oe.useState(""),[S,B]=oe.useState([]),[D,U]=oe.useState(null),[I,N]=oe.useState(""),[k,$]=oe.useState(""),[P,L]=oe.useState(null),[z,V]=oe.useState(!1),[ne,Z]=oe.useState(!1),[C,O]=oe.useState(!1),[M,q]=oe.useState(!1),[G,_]=oe.useState("12"),[F,X]=oe.useState(""),[re,ie]=oe.useState(""),[ge,le]=oe.useState(""),ue=()=>u||window.ethereum,de=()=>{const we=ue();if(!we)throw new Error("No wallet provider available.");return new qi(we)},ve=()=>{if(!u||!a)throw new Error("Connect your wallet first.")},Ne=async(we,Se,Ue,He)=>{const lt=await we.request({method:"eth_chainId"}),sn=Cr=>Number(BigInt(Cr)),ar=sn(String(lt)),or=sn(String(Se));if(ar!==or)throw new Error(`Wrong network. Please switch to ${Ue} (chainId ${He}).`)},Ce=async(we,Se,Ue)=>{var He,lt,sn,ar,or,Cr;try{Ue==="metamask"&&await X1(we,t.params),await Ne(we,t.chainIdHex,t.label,t.chainIdDec);const Gn=await new qi(we).getSigner(),Rn=new Gr(t.factory,Bd,Gn);U(Rn);const Ci=await Rn.getVaultsByTestator(Se);B(Ci),h(we),c(Se),p(Ue),ie(`${Ue==="metamask"?"🦊":Ue==="ledger"?"💼":"🔗"} Wallet Connected: ${Se}`),r.base&&r.onAccounts&&r.onDisconnect&&((lt=(He=r.base).removeListener)==null||lt.call(He,"accountsChanged",r.onAccounts),(ar=(sn=r.base).removeListener)==null||ar.call(sn,"disconnect",r.onDisconnect));const Xo=Ba=>(Ba==null?void 0:Ba.length)&&c(Ba[0]),Wo=()=>qt();(or=we.on)==null||or.call(we,"accountsChanged",Xo),(Cr=we.on)==null||Cr.call(we,"disconnect",Wo),i({base:we,onAccounts:Xo,onDisconnect:Wo})}catch(an){console.error(an),ie(`❌ ${(an==null?void 0:an.message)||an}`)}finally{w(!1)}},ze=async we=>{if(we===n)return;const Se=n;e(we);try{const Ue=ue();if(Ue&&a){d==="metamask"&&await X1(Ue,mo[we].params),await Ne(Ue,mo[we].chainIdHex,mo[we].label,mo[we].chainIdDec);const lt=await new qi(Ue).getSigner(),sn=new Gr(mo[we].factory,Bd,lt);U(sn);const ar=await sn.getVaultsByTestator(a);B(ar),ie(`🔁 Switched to ${mo[we].label}`),L(null),b(null),A("")}}catch(Ue){console.error(Ue),ie(d!=="metamask"?`⚠️ Wrong network for your ${d==="ledger"?"Ledger":"wallet"}. Reconnect on ${mo[we].label} and try again.`:`❌ ${(Ue==null?void 0:Ue.message)||Ue}`),e(Se)}},Qe=async()=>{var we;try{if((we=window.ethereum)!=null&&we.isMetaMask){const Se=await window.ethereum.request({method:"eth_requestAccounts"});await Ce(window.ethereum,Se[0],"metamask");return}if(Vne()){Gne();return}ie("❌ MetaMask is not installed. Try WalletConnect or install the extension.")}catch(Se){console.error(Se),ie(`❌ ${(Se==null?void 0:Se.message)||Se}`)}},st=async()=>{try{const we=await b0.init({projectId:SC,showQrModal:!0,metadata:{name:"BΔLT",description:"Bitcoin Autonomous Legacy Trust",url:window.location.origin,icons:["/logos/balt.png"]},chains:[t.chainIdDec],optionalChains:[30,31],methods:["eth_sendTransaction","eth_signTransaction","eth_sign","personal_sign","eth_signTypedData","wallet_switchEthereumChain","wallet_addEthereumChain"],events:["chainChanged","accountsChanged","disconnect"],rpcMap:{30:"https://public-node.rsk.co",31:"https://public-node.testnet.rsk.co"}});await we.enable();try{await X1(we,t.params)}catch{}const He=await(await new qi(we).getSigner()).getAddress();await Ce(we,He,"walletconnect")}catch(we){console.error(we),ie(`❌ WalletConnect error: ${(we==null?void 0:we.message)||we}`)}},Ct=async()=>{var we;try{if(n!=="mainnet"){ie("⚠️ Ledger no está disponible en Rootstock Testnet. Cambiá a MAINNET para usar Ledger.");return}const Se=await N4();(we=Se.enableDebugLogs)==null||we.call(Se),await Se.checkSupport({providerType:_m.Ethereum,walletConnectVersion:2,projectId:SC,chains:[30],optionalChains:[],rpcMap:{30:"https://public-node.rsk.co"},methods:["eth_sendTransaction","eth_signTransaction","eth_sign","personal_sign","eth_signTypedData","wallet_switchEthereumChain","wallet_addEthereumChain"],events:["chainChanged","accountsChanged","disconnect"]});const Ue=await Se.getProvider();await Ue.request({method:"eth_requestAccounts"});const sn=await(await new qi(Ue).getSigner()).getAddress();await Ce(Ue,sn,"ledger")}catch(Se){console.error(Se),ie(`❌ Ledger error: ${(Se==null?void 0:Se.message)||Se}`)}},qt=async()=>{var we,Se,Ue,He;try{u!=null&&u.disconnect&&await u.disconnect()}catch{}r.base&&r.onAccounts&&r.onDisconnect&&((Se=(we=r.base).removeListener)==null||Se.call(we,"accountsChanged",r.onAccounts),(He=(Ue=r.base).removeListener)==null||He.call(Ue,"disconnect",r.onDisconnect)),i({base:null,onAccounts:null,onDisconnect:null}),h(null),p(null),c(""),A(""),b(null),L(null),B([]),U(null),ie("🔌 Wallet disconnected."),w(!1)},Vt=()=>{a?qt():w(!0)},Di=async()=>{try{ve(),V(!0),le("");const we=de(),Se=await we.getSigner(),Ue=await Se.getAddress();if(await we.getBalance(Ue)<Ry("0.0001")){le("⚠️ You don't have enough RBTC to create a Vault.");return}const lt=Number(G);if(isNaN(lt)||lt<.1){le("❌ Please enter a valid inactivity period (minimum 0.1 months).");return}const sn=new Gr(t.factory,Bd,Se),ar=Number(G)*30*24*60*60,Cr=await(await sn.createInheritanceVault(ar)).wait(),an=new lm(Bd);let Gn=null;for(const Rn of Cr.logs)try{const Ci=an.parseLog(Rn);if(Ci.name==="VaultCreated"){Gn=Ci.args.vaultAddress;break}}catch(Ci){Ci.message.includes("no matching event")||console.warn("⚠️ Unexpected error parsing log:",Ci)}if(!Gn){le("❌ The VaultCreated event was not found in the logs.");return}await mn(Gn),B(Rn=>[...Rn,Gn]),le(`✅ Vault created: ${Gn}`)}catch(we){console.error(we),le("❌ Error creating Vault.")}finally{V(!1)}},mn=async we=>{try{ve(),A(we);const Ue=await de().getSigner(),He=new Gr(we,Nm,Ue),lt=await He.testator();X(lt),b(He),L(null)}catch(Se){console.error("❌ Error reading testator:",Se),alert("The testator of the selected contract could not be obtained."),X("")}},sr=async()=>{try{if(ve(),!Py(I)){le("❌ Invalid heir address.");return}if(isNaN(k)||Number(k)<=0){le("❌ Enter a valid amount in RBTC.");return}if(a.toLowerCase()!==F.toLowerCase()){le(`⚠️ Only the testator can register the inheritance.

🧾 Testator: ${F}
👤 Your wallet: ${a}`);return}const we=de();if(await we.getBalance(a)<Ry("0.0001")){le("⚠️ You don't have enough RBTC to cover the gas.");return}Z(!0),le("⏳ Registering inheritance...");const Ue=await we.getSigner();await(await v.registerInheritance(I,{value:Ry(k.replace(",","."))})).wait(),le("✅ Inheritance correctly registered.")}catch(we){console.error(we),le(`❌ Error registering inheritance: ${we.reason||we.message}`)}finally{Z(!1)}},Xt=async()=>{try{ve();const we=await v.getInheritanceDetails(),Se=["Active","Released","Cancelled"],Ue=await v.inactivityPeriod(),He=Number(we[2]),lt=Number(Ue)/(30*24*60*60),sn=Number(Ue)*1e3,ar=He*1e3+sn,or=Date.now(),Cr=Math.max(ar-or,0),an=Gn=>{if(Gn===0)return"✅ Already claimable";const Rn=Math.floor(Gn/1e3),Ci=Math.floor(Rn/(3600*24)),Xo=Math.floor(Rn%(3600*24)/3600),Wo=Math.floor(Rn%3600/60);return`${Ci}d ${Xo}h ${Wo}m`};L({heir:we[0],amount:X5(we[1]),lastHeartbeat:Ra(He),inactivityPeriod:lt.toFixed(1),timeRemaining:an(Cr),status:Se[Number(we[4])]||"Unknown"}),le("✅ Updated inheritance details.")}catch(we){console.error(we),le("❌ Details could not be obtained.")}},Vn=async()=>{try{if(ve(),a.toLowerCase()!==F.toLowerCase()){le(`⚠️ Only the testator can check in.
🧾 Testator: ${F}
👤 Your wallet: ${a}`);return}le("⏳ Performing Check-In..."),O(!0),await(await v.performCheckIn()).wait(),await Xt(),le("✅ Check-In completed successfully.")}catch(we){console.error(we),le("❌ Error in Check-In.")}finally{O(!1)}},Jr=async()=>{try{if(ve(),a.toLowerCase()!==F.toLowerCase()){le(`⚠️ Only the testator can cancel the inheritance.
🧾 Testator: ${F}
👤 Your wallet: ${a}`);return}q(!0),await(await v.cancelInheritance()).wait(),le("✅ Inheritance cancelled and funds returned.")}catch(we){console.error(we),le("❌ Error canceling inheritance.")}finally{q(!1)}};return J.jsxs("div",{className:"background",children:[J.jsxs("div",{className:"container",children:[J.jsxs("div",{className:"header",children:[J.jsxs("div",{className:"logo",children:[J.jsx("img",{src:"/logos/balt.png",alt:"BΔLT Logo",className:"vault-logo"}),J.jsx("br",{}),J.jsxs("span",{className:"logo-subtitle",children:[J.jsx("span",{className:"highlight",children:"B"}),"ITCOIN"," ",J.jsx("span",{className:"highlight",children:"A"}),"UTONOMOUS"," ",J.jsx("span",{className:"highlight",children:"L"}),"EGACY"," ",J.jsx("span",{className:"highlight",children:"T"}),"RUST"]})]}),J.jsx("div",{className:`vault-subtitle ${n==="testnet"?"testnet":"mainnet"}`,children:n==="testnet"?"ROOTSTOCK TESTNET":"ROOTSTOCK MAINNET"}),J.jsxs("div",{className:"net-toggle",children:[J.jsx("button",{className:`pill ${n==="mainnet"?"active":""}`,onClick:()=>ze("mainnet"),children:"MAINNET"}),J.jsx("button",{className:`pill ${n==="testnet"?"active":""}`,onClick:()=>ze("testnet"),children:"TESTNET"})]}),J.jsx("button",{onClick:Vt,className:"button",children:a?"DISCONNECT":"CONNECT WALLET"})]}),y&&J.jsx("div",{className:"modal-backdrop",onClick:()=>w(!1),children:J.jsxs("div",{className:"modal",onClick:we=>we.stopPropagation(),children:[J.jsxs("div",{className:"modal-header",children:[J.jsx("div",{className:"modal-title",children:"Connect Wallet"}),J.jsx("button",{className:"modal-close",onClick:()=>w(!1),"aria-label":"Close",children:"×"})]}),J.jsxs("div",{className:"wallet-options",children:[J.jsx(Xi,{onClick:st,label:"WalletConnect",logo:"/logos/walletconnect.png",hint:"Scan a QR with your mobile wallet",disabled:n==="testnet"}),J.jsx(Xi,{onClick:Qe,label:"MetaMask",logo:"/logos/metamask.png",hint:"Use MetaMask Extension or Mobile App"}),J.jsx(Xi,{onClick:Ct,label:"Ledger",logo:"/logos/ledger.png",hint:"Use Ledger via Connect Kit",disabled:n==="testnet"})]}),J.jsxs("div",{className:"modal-footnote",children:["Only connect wallets you trust.",J.jsx("br",{}),"Make sure you're on the official BΔLT site."]})]})}),re&&J.jsx("div",{className:"vault-message",children:re}),J.jsxs("h1",{children:["Building the future of",J.jsx("br",{}),J.jsxs("span",{children:[J.jsx("span",{className:"balt",children:"Bitcoin"})," inheritance"]})]}),J.jsx("div",{className:"center-btns",children:J.jsx("button",{className:`button ${C?"disabled-button":""}`,onClick:Di,disabled:z,children:z?"⏳ CREATING VAULT...":"CREATE INHERITANCE VAULT"})}),J.jsxs("div",{className:"section",children:[J.jsx("h2",{children:"Inheritance vault"}),J.jsxs("div",{className:"inputGroup",children:[J.jsx("label",{children:"Inactivity period (months)"}),J.jsx("input",{type:"number",step:"0.1",min:"0.1",value:G,onChange:we=>_(we.target.value),className:"input"})]}),J.jsxs("div",{className:"inputGroup",children:[J.jsx("label",{children:"Vault selection"}),J.jsxs("select",{value:E,onChange:we=>mn(we.target.value),className:"input",children:[J.jsx("option",{value:"",children:"-- Select --"}),S.map((we,Se)=>J.jsx("option",{value:we,children:we},Se))]}),E&&J.jsx("button",{className:"button small-button",onClick:()=>{E?navigator.clipboard.writeText(E):alert("⚠️ There is no Vault selected yet.")},children:"COPY ADDRESS"})]}),a&&E&&J.jsxs(J.Fragment,{children:[J.jsxs("div",{className:"inputGroup",children:[J.jsx("label",{children:"Heir address"}),J.jsx("input",{value:I,onChange:we=>N(we.target.value),className:"input"})]}),J.jsxs("div",{className:"inputGroup",children:[J.jsx("label",{children:"Amount deposit (RBTC)"}),J.jsx("input",{type:"number",value:k,onChange:we=>$(we.target.value),className:"input"})]}),J.jsxs("div",{className:"center-btns",children:[J.jsx("button",{className:`button ${C?"disabled-button":""}`,onClick:sr,disabled:ne,children:ne?"⏳ REGISTERING...":"REGISTER INHERITANCE"}),J.jsx("button",{className:"button",onClick:Xt,children:"VIEW INHERITANCE DETAILS"}),J.jsx("button",{className:`button ${C?"disabled-button":""}`,onClick:Vn,disabled:C,children:C?"⏳ PERFORMING CHECK-IN...":"PERFORM CHECK-IN"})]}),ge&&J.jsx("div",{className:"vault-message",children:ge})]})]}),a&&E&&P&&J.jsxs("div",{className:"section",children:[J.jsx("h2",{children:"Inheritance Details"}),J.jsxs("p",{children:[J.jsx("strong",{children:"Vault Address:"})," ",E]}),J.jsxs("p",{children:[J.jsx("strong",{children:"Heir:"})," ",P.heir]}),J.jsxs("p",{children:[J.jsx("strong",{children:"Amount:"})," ",P.amount," RBTC"]}),J.jsxs("p",{children:[J.jsx("strong",{children:"Last Heartbeat:"})," ",P.lastHeartbeat]}),J.jsxs("p",{children:[J.jsx("strong",{children:"Inactivity Period:"})," ",P.inactivityPeriod," months"]}),J.jsxs("p",{children:[J.jsx("strong",{children:"Time remaining until claimable:"})," ",P.timeRemaining]}),J.jsxs("p",{children:[J.jsx("strong",{children:"Status:"})," ",P.status]}),P.status==="Active"&&J.jsxs("div",{className:"help-note",children:["The heir must claim the inheritance from"," ",J.jsx("a",{href:"https://balt.jxlabs.xyz/claim",target:"_blank",rel:"noreferrer",children:"balt.jxlabs.xyz/claim"})," ","using their wallet and selecting the ",J.jsx("strong",{children:"Vault Address"}),"."]}),J.jsx("button",{onClick:Jr,className:`button ${C?"disabled-button":""}`,disabled:M,children:M?"⏳ CANCELING...":"CANCEL INHERITANCE"})]}),J.jsx("footer",{className:"balt-footer",children:J.jsxs("div",{className:"balt-footer__inner",children:[J.jsxs("p",{className:"balt-footer__text",children:[J.jsx("span",{style:{color:"#f97316",fontWeight:"600"},children:"BΔLT"})," is a fully decentralized system. By interacting with it, you agree to the terms and disclaimers detailed in the"," ",J.jsx("a",{href:"https://jxlabs.xyz/BALT_Whitepaper.pdf",target:"_blank",rel:"noreferrer",className:"balt-footer__link",children:"Whitepaper"}),"."]}),J.jsxs("p",{className:"balt-footer__copy",children:["© ",new Date().getFullYear()," JXLabs"]})]})})]}),J.jsx("style",{children:`
        .modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.5); display:flex; align-items:center; justify-content:center; z-index: 50; }
        .modal { background: #0b0b0b; color: #fff; width: 380px; max-width: 92vw; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .modal-header { position: relative; display:flex; align-items:center; justify-content:center; padding: 16px 20px; border-bottom: 1px solid rgba(255,255,255,0.08); }
        .modal-title { font-size: 18px; font-weight: 600; letter-spacing: 0.3px; text-align: center; width: 100%; }
        .modal-close { position: absolute; right: 12px; top: 10px; background: transparent; border: none; color: #aaa; font-size: 20px; cursor: pointer; }
        .wallet-options { padding: 8px 8px 16px; display: grid; gap: 4px; }
        .wallet-option { display:flex; align-items:center; gap: 10px; width: 100%; padding: 8px 12px; background: #151515; border: 1px solid rgba(255,255,255,0.08); border-radius: 12px; cursor:pointer; text-align:left; }
        .wallet-option:hover { background:#1c1c1c; border-color: rgba(255,255,255,0.14); }
        .wallet-option-logo { width: 40px; height: 40px; border-radius: 6px; background:#222; flex: 0 0 auto; }
        .wallet-option-info { display:flex; flex-direction:column; }
        .wallet-option-title { font-weight:600; }
        .wallet-option-hint { font-size: 12px; color: #a0a0a0; }
        .modal-footnote { padding: 12px 20px 18px; font-size: 12px; color:#9aa3af; text-align: center; }
      `})]});function Xi({onClick:we,label:Se,logo:Ue,hint:He,disabled:lt=!1}){return J.jsxs("button",{className:`wallet-option ${lt?"wallet-option--disabled":""}`,onClick:lt?void 0:we,disabled:lt,"aria-disabled":lt,title:lt?"Not available on this network":void 0,children:[Ue?J.jsx("img",{className:"wallet-option-logo",src:Ue,alt:`${Se} logo`}):J.jsx("svg",{className:"wallet-option-logo",viewBox:"0 0 24 24","aria-hidden":!0,children:J.jsx("circle",{cx:"12",cy:"12",r:"10"})}),J.jsxs("div",{className:"wallet-option-info",children:[J.jsx("div",{className:"wallet-option-title",children:Se}),J.jsx("div",{className:"wallet-option-hint",children:lt?"Not supported on Testnet":He||""})]})]})}function Ra(we){const Se=new Date(Number(we)*1e3),Ue=Se.getFullYear(),He=String(Se.getMonth()+1).padStart(2,"0"),lt=String(Se.getDate()).padStart(2,"0"),sn=String(Se.getHours()).padStart(2,"0"),ar=String(Se.getMinutes()).padStart(2,"0"),or=String(Se.getSeconds()).padStart(2,"0");return`${Ue}-${He}-${lt} Time: ${sn}:${ar}:${or}`}}const W1={},Qne="0x364414bA4d4B3490EF68333b6A3adAB8c276228e",Yne="0x3D7f44ced535585c67109Ea25f4978750B2d3972",OC=(W1==null?void 0:W1.VITE_WC_PROJECT_ID)||"33daed757b1f122e0b263a41dd48a920",Jne=()=>/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),wo={testnet:{key:"testnet",label:"ROOTSTOCK TESTNET",chainIdHex:"0x1f",chainIdDec:31,params:{chainId:"0x1f",chainName:"Rootstock Testnet",nativeCurrency:{name:"RBTC",symbol:"RBTC",decimals:18},rpcUrls:["https://public-node.testnet.rsk.co"],blockExplorerUrls:["https://explorer.testnet.rsk.co"]},factory:Qne},mainnet:{key:"mainnet",label:"ROOTSTOCK MAINNET",chainIdHex:"0x1e",chainIdDec:30,params:{chainId:"0x1e",chainName:"Rootstock Mainnet",nativeCurrency:{name:"RBTC",symbol:"RBTC",decimals:18},rpcUrls:["https://public-node.rsk.co"],blockExplorerUrls:["https://explorer.rsk.co"]},factory:Yne}};async function Sd(n,e){try{await n.request({method:"wallet_switchEthereumChain",params:[{chainId:e.chainId}]})}catch(t){if((t==null?void 0:t.code)===4902||((t==null?void 0:t.message)||"").includes("Unrecognized chain ID"))await n.request({method:"wallet_addEthereumChain",params:[e]});else throw t}}function Zne(){const n=window.location.href.replace(/^https?:\/\//,"");window.location.href=`https://metamask.app.link/dapp/${n}`}async function ev(n,e,t){const i=await new Gr(n,Bd,e).getAllVaults();if(!(i!=null&&i.length))return[];const a=e.provider??e,c=await Promise.all(i.map(async h=>{try{const p=await new Gr(h,Nm,a).heir();return{addr:h,heir:p}}catch{return{addr:h,heir:null}}})),u=(t||"").toLowerCase();return c.filter(h=>(h.heir||"").toLowerCase()===u).map(h=>h.addr)}function Xne(){const[n,e]=oe.useState("mainnet"),t=wo[n],[r,i]=oe.useState({base:null,onAccounts:null,onDisconnect:null}),[a,c]=oe.useState(""),[u,h]=oe.useState(!1),[d,p]=oe.useState(!1),[y,w]=oe.useState(""),[v,b]=oe.useState(""),[E,A]=oe.useState(""),[S,B]=oe.useState(null),[D,U]=oe.useState(null),[I,N]=oe.useState(!1),[k,$]=oe.useState(null),[P,L]=oe.useState([]),z=()=>D||window.ethereum,V=()=>{const ue=z();if(!ue)throw new Error("No wallet provider available.");return new qi(ue)},ne=async(ue,de,ve,Ne)=>{const Ce=await ue.request({method:"eth_chainId"}),ze=Ct=>Number(BigInt(Ct)),Qe=ze(String(Ce)),st=ze(String(de));if(Qe!==st)throw new Error(`Wrong network. Please switch to ${ve} (chainId ${Ne}).`)},Z=()=>{if(!D||!E)throw new Error("Connect your wallet first.")},C=async(ue,de,ve)=>{var Ne,Ce,ze,Qe,st,Ct;try{ve==="metamask"&&await Sd(ue,t.params),await ne(ue,t.chainIdHex,t.label,t.chainIdDec);const Vt=await new qi(ue).getSigner(),Di=await ev(t.factory,Vt,de);L(Di),U(ue),A(de),$(ve),w(`${ve==="metamask"?"🦊":ve==="ledger"?"💼":"🔗"} Wallet Connected: ${de}`),r.base&&r.onAccounts&&r.onDisconnect&&((Ce=(Ne=r.base).removeListener)==null||Ce.call(Ne,"accountsChanged",r.onAccounts),(Qe=(ze=r.base).removeListener)==null||Qe.call(ze,"disconnect",r.onDisconnect));const mn=async Xt=>{if(!(Xt!=null&&Xt.length))return;const Vn=Xt[0];A(Vn);try{const Xi=await new qi(ue).getSigner(),Ra=await ev(t.factory,Xi,Vn);L(Ra),c(""),B(null)}catch(Jr){console.error("reload heir vaults on accountsChanged:",Jr)}},sr=()=>_();(st=ue.on)==null||st.call(ue,"accountsChanged",mn),(Ct=ue.on)==null||Ct.call(ue,"disconnect",sr),i({base:ue,onAccounts:mn,onDisconnect:sr})}catch(qt){console.error(qt),w(`❌ ${(qt==null?void 0:qt.message)||qt}`)}finally{N(!1)}},O=async ue=>{if(ue===n)return;const de=n;e(ue);try{const ve=z();if(ve&&E){k==="metamask"&&await Sd(ve,wo[ue].params),await ne(ve,wo[ue].chainIdHex,wo[ue].label,wo[ue].chainIdDec);const Ce=await new qi(ve).getSigner(),ze=await ev(wo[ue].factory,Ce,E);L(ze),w(`🔁 Switched to ${wo[ue].label}`),B(null),c("")}}catch(ve){console.error(ve),w(k!=="metamask"?`⚠️ Wrong network for your ${k==="ledger"?"Ledger":"wallet"}. Reconnect on ${wo[ue].label} and try again.`:`❌ ${(ve==null?void 0:ve.message)||ve}`),e(de)}},M=async()=>{var ue;try{if((ue=window.ethereum)!=null&&ue.isMetaMask){const de=await window.ethereum.request({method:"eth_requestAccounts"});await C(window.ethereum,de[0],"metamask");return}if(Jne()){Zne();return}w("❌ MetaMask is not installed. Try WalletConnect or install the extension.")}catch(de){console.error(de),w(`❌ ${(de==null?void 0:de.message)||de}`)}},q=async()=>{try{const ue=await b0.init({projectId:OC,showQrModal:!0,metadata:{name:"BΔLT",description:"Bitcoin Autonomous Legacy Trust",url:window.location.origin,icons:["/logos/balt.png"]},chains:[t.chainIdDec],optionalChains:[30,31],methods:["eth_sendTransaction","eth_signTransaction","eth_sign","personal_sign","eth_signTypedData","wallet_switchEthereumChain","wallet_addEthereumChain"],events:["chainChanged","accountsChanged","disconnect"],rpcMap:{30:"https://public-node.rsk.co",31:"https://public-node.testnet.rsk.co"}});await ue.enable();try{await Sd(ue,t.params)}catch{}const Ne=await(await new qi(ue).getSigner()).getAddress();await C(ue,Ne,"walletconnect")}catch(ue){console.error(ue),w(`❌ WalletConnect error: ${(ue==null?void 0:ue.message)||ue}`)}},G=async()=>{var ue;try{if(n!=="mainnet"){w("⚠️ Ledger no está disponible en Rootstock Testnet. Cambiá a MAINNET para usar Ledger.");return}const de=await N4();(ue=de.enableDebugLogs)==null||ue.call(de),await de.checkSupport({providerType:_m.Ethereum,walletConnectVersion:2,projectId:OC,chains:[30],optionalChains:[],rpcMap:{30:"https://public-node.rsk.co"},methods:["eth_sendTransaction","eth_signTransaction","eth_sign","personal_sign","eth_signTypedData","wallet_switchEthereumChain","wallet_addEthereumChain"],events:["chainChanged","accountsChanged","disconnect"]});const ve=await de.getProvider();await ve.request({method:"eth_requestAccounts"});const ze=await(await new qi(ve).getSigner()).getAddress();await C(ve,ze,"ledger")}catch(de){console.error(de),w(`❌ Ledger error: ${(de==null?void 0:de.message)||de}`)}},_=async()=>{var ue,de,ve,Ne;try{D!=null&&D.disconnect&&await D.disconnect()}catch{}r.base&&r.onAccounts&&r.onDisconnect&&((de=(ue=r.base).removeListener)==null||de.call(ue,"accountsChanged",r.onAccounts),(Ne=(ve=r.base).removeListener)==null||Ne.call(ve,"disconnect",r.onDisconnect)),i({base:null,onAccounts:null,onDisconnect:null}),U(null),$(null),A(""),w("🔌 Wallet disconnected."),N(!1),L([]),c(""),B(null)},F=()=>{E?_():N(!0)},X=async()=>{var ue,de,ve,Ne;try{if(Z(),!Py(a)){b("⚠️ Paste a valid Vault address (0x...)");return}h(!0),b("");const Ce=z();if(!Ce){b("❌ No wallet connected.");return}k==="metamask"&&await Sd(Ce,t.params),await ne(Ce,t.chainIdHex,t.label,t.chainIdDec);const ze=V(),Qe=await ze.getSigner(),st=await Qe.getAddress(),Ct=new Gr(a,Nm,Qe),qt=await Ct.heir();if(st.toLowerCase()!==qt.toLowerCase()){b("❌ Only the registered heir can claim this inheritance.");return}const Vt=await Ct.lastCheckIn(),Di=await Ct.inactivityPeriod();if(Math.floor(Date.now()/1e3)<Number(Vt)+Number(Di)){b("⏳ The period of inactivity has not yet been met.");return}const sr=await Ct.inheritanceStatus();if(Number(sr)!==0){b("⚠️ The inheritance has already been claimed or cancelled.");return}if(await ze.getBalance(st)<Ry("0.0001")){b("⚠️ You don't have enough RBTC to cover the gas.");return}const Vn=await Ct.claimInheritance();await Vn.wait();const Jr=t.params.blockExplorerUrls[0];b(`✅ Inheritance successfully claimed! Tx: ${Vn.hash}
View: ${Jr}/tx/${Vn.hash}`)}catch(Ce){console.error("❌ Error:",Ce),(ue=Ce.reason)!=null&&ue.includes("Only the heir")?b("❌ Only the registered heir can claim."):(de=Ce.reason)!=null&&de.includes("Inheritance is not active")?b("⚠️ The inheritance has already been claimed or cancelled."):(ve=Ce.message)!=null&&ve.includes("Wrong network")?b(`⚠️ Wrong network. Please switch to ${t.label} (chainId ${t.chainIdDec}).`):(Ne=Ce.message)!=null&&Ne.includes("insufficient funds")?b("⚠️ You don't have enough RBTC to cover the gas."):b("❌ Unexpected error: "+(Ce.reason||Ce.message))}finally{h(!1)}},re=async()=>{try{if(Z(),p(!0),B(null),!Py(a)){B({error:"❌ Paste a valid Vault address (0x...)"});return}const ue=z();if(!ue){B({error:"❌ Connect a wallet first."});return}k==="metamask"&&await Sd(ue,t.params),await ne(ue,t.chainIdHex,t.label,t.chainIdDec);const ve=await V().getSigner(),Ne=new Gr(a,Nm,ve),Ce=await Ne.heir(),ze=Number(await Ne.lastCheckIn()),Qe=Number(await Ne.inactivityPeriod()),st=Number(await Ne.inheritanceStatus()),Ct=Math.floor(Date.now()/1e3),qt=ze+Qe,Vt=Math.max(qt-Ct,0),Di=mn=>{if(mn===0)return"✅ Already claimable";const sr=Math.floor(mn/(3600*24)),Xt=Math.floor(mn%(3600*24)/3600),Vn=Math.floor(mn%3600/60);return`${sr}d ${Xt}h ${Vn}m`};B({heir:Ce,lastHeartbeat:ge(ze),inactivityMonths:(Qe/(30*24*60*60)).toFixed(1),timeRemaining:Di(Vt),status:["Active","Released","Cancelled"][st]||"Unknown",explorer:t.params.blockExplorerUrls[0]})}catch(ue){console.error("Error fetching vault details:",ue),B({error:"❌ Could not fetch vault details."})}finally{p(!1)}},ie=ue=>{const de=ue.target.value.trim();c(de)};function ge(ue){const de=new Date(Number(ue)*1e3),ve=de.getFullYear(),Ne=String(de.getMonth()+1).padStart(2,"0"),Ce=String(de.getDate()).padStart(2,"0"),ze=String(de.getHours()).padStart(2,"0"),Qe=String(de.getMinutes()).padStart(2,"0"),st=String(de.getSeconds()).padStart(2,"0");return`${ve}-${Ne}-${Ce} Time: ${ze}:${Qe}:${st}`}function le({onClick:ue,label:de,logo:ve,hint:Ne,disabled:Ce=!1}){return J.jsxs("button",{className:`wallet-option ${Ce?"wallet-option--disabled":""}`,onClick:Ce?void 0:ue,disabled:Ce,"aria-disabled":Ce,title:Ce?"Not available on this network":void 0,children:[ve?J.jsx("img",{className:"wallet-option-logo",src:ve,alt:`${de} logo`}):J.jsx("svg",{className:"wallet-option-logo",viewBox:"0 0 24 24","aria-hidden":!0,children:J.jsx("circle",{cx:"12",cy:"12",r:"10"})}),J.jsxs("div",{className:"wallet-option-info",children:[J.jsx("div",{className:"wallet-option-title",children:de}),J.jsx("div",{className:"wallet-option-hint",children:Ce?"Not supported on Testnet":Ne||""})]})]})}return J.jsxs("div",{className:"background",children:[J.jsxs("div",{className:"container",children:[J.jsxs("div",{className:"header",children:[J.jsxs("div",{className:"logo",children:[J.jsx("img",{src:"/logos/balt.png",alt:"BΔLT Logo",className:"vault-logo"}),J.jsx("br",{}),J.jsxs("span",{className:"logo-subtitle",children:[J.jsx("span",{className:"highlight",children:"B"}),"ITCOIN"," ",J.jsx("span",{className:"highlight",children:"A"}),"UTONOMOUS"," ",J.jsx("span",{className:"highlight",children:"L"}),"EGACY"," ",J.jsx("span",{className:"highlight",children:"T"}),"RUST"]})]}),J.jsx("div",{className:`vault-subtitle ${n==="testnet"?"testnet":"mainnet"}`,children:n==="testnet"?"ROOTSTOCK TESTNET":"ROOTSTOCK MAINNET"}),J.jsxs("div",{className:"net-toggle",children:[J.jsx("button",{className:`pill ${n==="mainnet"?"active":""}`,onClick:()=>O("mainnet"),children:"MAINNET"}),J.jsx("button",{className:`pill ${n==="testnet"?"active":""}`,onClick:()=>O("testnet"),children:"TESTNET"})]}),J.jsx("button",{onClick:F,className:"button",children:E?"DISCONNECT":"CONNECT WALLET"})]}),I&&J.jsx("div",{className:"modal-backdrop",onClick:()=>N(!1),children:J.jsxs("div",{className:"modal",onClick:ue=>ue.stopPropagation(),children:[J.jsxs("div",{className:"modal-header",children:[J.jsx("div",{className:"modal-title",children:"Connect Wallet"}),J.jsx("button",{className:"modal-close",onClick:()=>N(!1),"aria-label":"Close",children:"×"})]}),J.jsxs("div",{className:"wallet-options",children:[J.jsx(le,{onClick:q,label:"WalletConnect",logo:"/logos/walletconnect.png",hint:"Scan a QR with your mobile wallet",disabled:n==="testnet"}),J.jsx(le,{onClick:M,label:"MetaMask",logo:"/logos/metamask.png",hint:"Use MetaMask Extension or Mobile App"}),J.jsx(le,{onClick:G,label:"Ledger",logo:"/logos/ledger.png",hint:"Use Ledger via Connect Kit",disabled:n==="testnet"})]}),J.jsxs("div",{className:"modal-footnote",children:["Only connect wallets you trust.",J.jsx("br",{}),"Make sure you're on the official BΔLT site."]})]})}),y&&J.jsx("div",{className:"vault-message",children:y}),J.jsxs("h1",{className:"title",children:["Building the future of",J.jsx("br",{}),J.jsxs("span",{children:[J.jsx("span",{className:"balt",children:"Bitcoin"})," inheritance"]})]}),J.jsxs("div",{className:"section",children:[J.jsx("p",{children:J.jsx("strong",{children:J.jsx("label",{className:"vault-label",children:"Vault Address"})})}),J.jsx("input",{type:"text",className:"vault-input",list:"my-heir-vaults",placeholder:"Ej. 0x123…abc",value:a,onChange:ie}),J.jsx("datalist",{id:"my-heir-vaults",children:(Array.isArray(P)?P:[]).map(ue=>J.jsx("option",{value:ue},ue))}),J.jsx("br",{}),J.jsx("button",{onClick:X,className:`button ${u?"claim-disabled":"claim"}`,disabled:u,children:u?"⏳ CLAIMING...":"CLAIM INHERITANCE"}),v&&J.jsx("div",{className:"vault-message down",children:v}),a&&J.jsxs(J.Fragment,{children:[J.jsx("br",{}),J.jsx("button",{onClick:re,className:`button ${d?"disabled-button":""}`,disabled:d,children:d?"⏳ LOADING DETAILS...":"VIEW VAULT DETAILS"}),S&&!S.error&&J.jsxs("div",{className:"vault-details-box",children:[J.jsxs("p",{children:[J.jsx("strong",{children:"Heir:"})," ",S.heir]}),J.jsxs("p",{children:[J.jsx("strong",{children:"Last Heartbeat:"})," ",S.lastHeartbeat]}),J.jsxs("p",{children:[J.jsx("strong",{children:"Inactivity Period:"})," ",S.inactivityMonths," months"]}),J.jsxs("p",{children:[J.jsx("strong",{children:"Time until claimable:"})," ",S.timeRemaining]}),J.jsxs("p",{children:[J.jsx("strong",{children:"Status:"})," ",S.status]}),Py(a)&&J.jsx("a",{className:"button small-button",target:"_blank",rel:"noreferrer",href:`${S.explorer}/address/${a}`,children:"VIEW ON EXPLORER"})]}),(S==null?void 0:S.error)&&J.jsx("div",{className:"vault-message down",children:S.error})]})]}),J.jsx("footer",{className:"balt-footer",children:J.jsxs("div",{className:"balt-footer__inner",children:[J.jsxs("p",{className:"balt-footer__text",children:[J.jsx("span",{style:{color:"#f97316",fontWeight:"600"},children:"BΔLT"})," is a fully decentralized system. By interacting with it, you agree to the terms and disclaimers detailed in the"," ",J.jsx("a",{href:"https://jxlabs.xyz/BALT_Whitepaper.pdf",target:"_blank",rel:"noreferrer",className:"balt-footer__link",children:"Whitepaper"}),"."]}),J.jsxs("p",{className:"balt-footer__copy",children:["© ",new Date().getFullYear()," JXLabs"]})]})})]}),J.jsx("style",{children:`
        .modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.5); display:flex; align-items:center; justify-content:center; z-index: 50; }
        .modal { background: #0b0b0b; color: #fff; width: 380px; max-width: 92vw; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .modal-header { position: relative; display:flex; align-items:center; justify-content:center; padding: 16px 20px; border-bottom: 1px solid rgba(255,255,255,0.08); }
        .modal-title { font-size: 18px; font-weight: 600; letter-spacing: 0.3px; text-align: center; width: 100%; }
        .modal-close { position: absolute; right: 12px; top: 10px; background: transparent; border: none; color: #aaa; font-size: 20px; cursor: pointer; }
        .wallet-options { padding: 8px 8px 16px; display: grid; gap: 4px; }
        .wallet-option { display:flex; align-items:center; gap: 10px; width: 100%; padding: 8px 12px; background: #151515; border: 1px solid rgba(255,255,255,0.08); border-radius: 12px; cursor:pointer; text-align:left; }
        .wallet-option:hover { background:#1c1c1c; border-color: rgba(255,255,255,0.14); }
        .wallet-option-logo { width: 40px; height: 40px; border-radius: 6px; background:#222; flex: 0 0 auto; }
        .wallet-option-info { display:flex; flex-direction:column; }
        .wallet-option-title { font-weight:600; }
        .wallet-option-hint { font-size: 12px; color: #a0a0a0; }
        .modal-footnote { padding: 12px 20px 18px; font-size: 12px; color:#9aa3af; text-align: center; }
      `})]})}function Wne(){return J.jsx(m5,{children:J.jsxs(KP,{children:[J.jsx(nv,{path:"/",element:J.jsx(Kne,{})}),"       ",J.jsx(nv,{path:"/claim",element:J.jsx(Xne,{})}),"       "]})})}nP.createRoot(document.getElementById("root")).render(J.jsx(QB.StrictMode,{children:J.jsx(Wne,{})}));export{HQ as A,us as B,SF as C,Zi as D,ir as E,ire as F,DT as G,D9 as H,Al as I,YN as J,ip as K,E9 as L,QN as M,u2 as N,zp as O,XT as P,$I as Q,C9 as R,sre as S,rre as T,dm as U,ore as V,are as W,xp as X,$N as _,Ae as a,WT as b,e9 as c,Da as d,wL as e,Bp as f,Yr as g,OQ as h,VK as i,Vi as j,p0 as k,XY as l,k2 as m,y0 as n,Oi as o,up as p,DH as q,xl as r,eE as s,Ca as t,yl as u,Ho as v,g0 as w,hs as x,Dr as y,bi as z};
